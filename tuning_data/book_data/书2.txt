另外，数控铣床的主轴转速和进给量都是无级变速的。因此，有利于选择最佳切削用量。数控铣床都有快进、快退、快速定位功能，可大大减少机动时间。
据统计，采用数控铣床比普通铣床可提高生产率3～5倍。对于复杂的成形面加工可提高十几倍，甚至几十倍。
（4）减轻操作者的劳动强度
数控铣床对零件加工是按事先编好的程序自动完成的。操作者除了操作键盘、装卸工件和中间测量及观察机床运行外，不需要进行繁重的重复性手工操作，可大大减轻劳动强度。
由于数控铣床具有以上独特的优点，因此数控铣床已成为机械制造业的主要装备，
但是，数控铣床的编程操作比较复杂，对编程人员的素质要求较高。否则，很难发挥数控铣床的作用。另外，数控铣床的价格吊贵，如编程操作不慎，万一发生碰撞，其后果不堪设想。为此，必须重视编程操作人员的培训。
1.3 数控铣床的分类和应用
数控侁床是一种功能很强的数控机床，它加工范围广、工艺复杂、涉及的技术问题多。目前，迅速发展的加工中心、柔性制造系统等都是在数控铣床的基础上产生和发展起来的。1.3.1 数控铣床的分类
1.3.1.1 按运动方式分类（1）点位控制系统
点位控制系统是指数控系统只控制刀具或机床工作台，从一点准确地移动到另一点，而点与点之间运动的轨迹不需要严格控制的系统，为了减少移动部件的运动与定位时间，一般先以快速移动到终点附近位置，然后以低速准确移动到终点定位位置，以保证良好的定位精度，移动过程中刀具不进行切削。图1—2所示为点位控制加工示意图。
（2）直线控制系统
直线控制系统是指数控系统不仅控制刀具或工作台从一个点准确地移动到另一个点，而且保证在两点之间的运动轨迹是一条直线的控制系统。移动部件在移动过程中进行切削，图1—3所示为直线控制加工示意图。
刀具在加工 图1—2 点位控制加工示意图
图1—3 直线控制加工示意图（3）轮廓控制系统
轮廓控制系统也称连续控制系统，是指数控系统能够对两个或两个以上的坐标轴同时进

行严格连续控制的系统。它不仅能控制移动部件从一个
点准确地移动到另一个点，而且还能控制整个加工过程
刀具在加工 每一点的速度与位移量，将零件加工成一定的轮廓形
状。图1—4所示为轮廓控制系统加工示意图。1.3.1.2 按控制方式分类
（1）开环控制系统
开环控制系统是指不带反馈装置的控制系统。它是根据穿孔带上的数据指令，经过控制运算发出脉冲信号，输送到伺服驱动装置（如步进电动机）使伺服
图1—4 轮廓控制系统加工示意图驱动装置转过相应的角度，然后经过减速齿轮和丝杠螺母机构，转换为移动部件的直线位移。图1—5所示为开环控制系统框图。
工作台 控制
机构
图1—5 开环控制系统框图
由于开环控制系统不具有反馈装置，不能进行误差校正，因此系统精度较低（±0.02mm）。虽然开环控制系统具有结构简单、工作稳定、使用维修方便及成本低的优点，但它已不能满足数控铣床日益提高的精度要求。
（2）半闭环控制系统
半闭环控制系统是在开环控制系统的伺服机构中装有角位移检测装置，通过检测伺服机构的滚珠丝杠转角，间接检测移动部件的位移，然后反馈到数控装置的比较器中，与输入原指令位移值进行比较，用比较后的差值进行控制，使移动部件补充位移，直到差值消除为止的控制系统。由于半闭环控制系统将移动部件的传动丝杠螺母机构不包括在闭环之内，所以传动丝杠螺母机构的误差仍然会影响移动部件的位移精度。图1—6所示为半闭环控制系统框图。
工作台 控制
数控 比较器 放大器
何服 介质
装置
机构
反馈信号
图1—6 半闭环控制系统框图
半闭环控制系统调试方便，稳定性好，目前应用比较广泛。（3）闭环控制系统
图1—7所示为闭环控制系统框图，闭环控制系统是在机床移动部件位置上直接装有直线位置检测装置，将检测到的实际位移反馈到数控装置的比较器中，与输人的原指令位移值进行比较，用比较后的差值控制移动部件作补充位移，直到差值消除时才停止移动，达到精确
9 
定位的控制系统。
闭环控制系统定位精度高（一般可达±0.01mm，最高可达0.001mm），一般应用在高精度数 控铣床上。由于系统增加了检测、比较和反馈装置，所以结构比较复杂，调试维修比较困难。 1.3.1.3 按主轴的布局形式分类
（1）立式数控铣床
立式数控铣床主轴和工作台垂直，主要用于加工水平面内的形面。一般规格较小的升降
台数控铣床，其工作台宽度多在400mm以下，采用工作 台移动、升降，主轴不动的方式，与普通立式升降台铣床 差不多。中型立式数控铣床一般采用纵向和横向工作台移 动方式，主轴沿垂向溜板上下运动。规格较大的数控铣床， 如工作台宽度在500mm以上，往往采用龙门架移动式，这 主要是考虑了扩大行程、缩小占地面积及刚性等技术问题 的缘故。其主轴可以在龙门架的横向和垂向溜板上运动， 而龙门架则沿床身作纵向运动，该类数控铣床的功能已逐 渐向加工中心靠近，进而演变成柔性加工单元。
立式数控铣床多为三坐标联动机床，即可以同时控 制三个坐标轴运动，如图1—8所示。
也有一些立式数控铣床只能同时控制三个坐标中的两 个坐标联动，第三个坐标轴只能沿一个方向作等距离的周 期移动，这种立式数控铣床称为两轴半控制铣床。此外，
还有机床主轴可以绕X、Y、Z坐标轴中的其中一个或两个 图1—8 立式数控铣床
轴作数控摆角运动的四坐标和五坐标立式数控铣床。一般 情况下，数控铣床上控制的坐标轴越多，机床的功能、加工范围及可选择的加工对象也越多， 机床的结构更复杂，对数控系统的要求更高，编程的难度更大，设备价格也更高。
立式数控铣床在布局上也可以附加数控转盘。转盘水平时，可增加一个C轴；垂直放 置时，可增加一个A轴或B轴；如果是万能数控转盘，则可以一次增加两个转动轴。
为了提高生产率，一般采用数控自动交换工作台，以减少零件装卸的生产准备时间或增 加主轴数量。还可以增加靠模装置，以扩大加工范围，或采用气动或液压夹具来实现自动化 装夹，以提高生产率。
立式数控铣床一般适用于加工平面凸轮、样板、形状复杂的平面或立体零件，以及模具 的内、外型腔等。
（2）卧式数控铣床
主轴轴线平行于水平面，为了扩大加工范围、扩充功能，常采用增加数控转盘或万能数 10


959823
控转盘来实现4、5坐标加工，可以省去很多专用夹具或 专用角度成形铣刀，适合加工箱体类零件及在一次安装 中改变工位的零件，如图1—9所示。
（3）立卧两用式数控铣床
主轴方向可以更换或作90°旋转，在一台机床上既能 进行立式加工，又能进行卧式加工，如图1—10所示。主 轴方向的更换方法有手动和自动两种，可以配上数控万 能主轴头，主轴头可以任意转换方向，柔性极好。适合 加工复杂的箱体类零件。
另外，数控铣床如果按照体积来分可以分为小型数 控铣床、中型数控铣床和大型数控铣床。如果按控制坐 标的联动轴数分可分为两轴半控制、三轴控制和多轴控 制数控铣床。
图1—9 卧式数控铣床 1.3.1.4 按数控系统功能水平分类
数控铣床按数控系统的功能水平可分为低、中、高三档。这种分类方式，在国内用得很 多。低、中、高档的界线是相对的，不同时期的划分标准有所不同。就目前的发展水平来 看，大体可以从以下几个方面区分。
图1—10 立卧两用式数控铣床
①分辨率和进给速度 分辨率为10μm、进给速度在8～15m／min的为低档；分辨率为 Iμm、进给速度在15～24m／min的为中档：分辨率为0.1μm、进给速度在15～100m／min 的为高档。
②伺服进给类型 采用开环、步进电动机进给系统的为低挡；中、高档的则采用半闭 环或闭环的直流伺服系统或交流伺服系统。
③联动轴数 低档数控机床联动轴数一般为2轴；中、高档的则为3～5轴。
④通信能力 低档数控系统一般无通信能力；中档的可以有RS—232C或直接数控（Di— reet Numerical Control，简称DNC）接口：高档的还可以有制造自动化协议（Manufactur- ing Automation Protocol，简称MAP）通信接口，具有联网功能。
⑤显示功能 低档数控系统一般只有简单的数码管显示或单色CRT字符显示；中档的 则具有较齐全的CRT显示，不仅有字符，而且有二维图形、人机对话、状态和自诊断功能
11 

09000
等：高档的还可以有三维图形显示、图形编程等功能。
⑥内装PLC 低档数控系统一般无PLC，中、高档的都有内装PLC，
⑦主CPU 低档数控系统一般采用8bit CPU，中、高档的已经逐步由16bit CPU向 32bit CPU过渡，国外一些新的数控系统甚至已选用了64bit CPU。
在国内还有经济型数控的提法。所谓经济型数控，一般均属低档数控系统，是指由单板 机、单片机和步进电动机组成的数控系统以及其他功能简单、价格低的数控系统。它主要用 于线切割机床及旧机床的改造等。
1.3.2 数控铣床的应用
数控铣床主要用于加工平面和曲面轮廓的零件，还可以加工复杂型面的零件，如凸轮、 样板、模具、螺旋槽等。同时也可以对零件进行钻、扩、饺、锪和镗孔的加工，但因数控铣 床不具备自动换刀功能，所以不能完成复杂孔的加工要求。
1.3.2.1 平面类零件的加工
目前，数控铣床上加工的绝大部分零件是平面零件，这类零件的特点是各个加工表面是 平面或者是可以展开为平面，如图1—11所示的3个零件。图中P为斜平面，M为曲面轮 廓，N为正圆台面。M和N面展开后也是平面。
(q) (a)
图1—11 平面类零件
平面类零件的加工，可以在三坐标数控铣床上，用两轴坐标联动来完成。其中斜平面加 工可分别采用以下方法。
①加工面与水平面成定角的斜平面
a．将斜平面垫平后加工，如图1—11（a）中所示的P平面。 b.将主轴转过适当定角后加工。
c．采用专用角度成形侁刀加工，如图1—11（c）中所示的N平面。
②加工面与水平面夹角连续变化的斜平面（变斜角）可利用数控侁床的摆角加工功能 进行加工。
1.3.2.2 曲面类零件的加工
加工面为空间曲面的零件称为曲面零件。这类零件的特点是其加工面不仅不能展开 为平面，而且它的加工面与铣刀始终是点接触。加工中常用球铣刀。常用的加工方法 如下。
①在三坐标数控铣床上，用两轴半坐标联动加工曲面，如图1—12所示。这种加工方法 用于较简单的空间曲面加工。
②在三坐标或多坐标数控铣床上，用三轴坐标联动或多轴坐标联动加工曲面。这种加 工方法适用于发动机、模具、螺旋桨等复杂空间曲面的加工。
12 

图1—12 两轴半坐标联动加工
1.4 数控铣床的组成及工作原理 1.4.1 数控铣床的组成
数控铣床与一般的数控机床一样，是由控制介质、数控装置、伺服系统和机床本体组 成，图1—13实线所示为开环控制的数控铣床框图。
控制介质
数控装置
何服系统
机床本体 测量装置
图1—13 数控铣床的组成
为了提高机床的加工精度，在上述系统中再加入一个测量装置（即图1—13中的虚线部 分），这样就构成了闭环控制的数控机床框图。开环控制系统的工作过程是这样的：将控制 机床工作台运动的位移量、位移速度、位移方向、位移轨迹等参量通过控制介质输入给机床 数控装置，数控装置根据这些参量指令计算得出进给脉冲序列（包含有上述4个参量），然 后经何服系统转换放大，最后控制工作台按所要求的速度、轨迹、方向和距离移动。若为闭 环系统，则在输入指令值的同时，反馈检测机床工作台的实际位移值，反馈量与输入量在数 控装置中进行比较，若有差值，说明二者间有误差，则数控装置控制机床向着消除误差的方 向运动。现将各组成部分简述如下。
（1）控制介质
数控铣床工作时，不需要工人去摇动手柄操作机床，但又要自动地执行人们的意图，这 就必须在人和数控铣床之间建立某种联系，这种联系的媒介物称为控制介质（或称程序介 质、输入介质、信息载体）。
在普通机床上加工零件时，由工人按图纸和工艺要求进行加工。在数控铣床上加工 时，则要把加工零件所需的全部动作及刀具相对于工件的位置等内容，用数控装置所能 接受的数字文字代码来表示，并把这些代码储存在控制介质上。控制介质可以是穿孔带， 也可以是穿孔卡、磁带、磁盘或其他可以储存代码的载体。至于采用哪一种，则取决于数 控装置的类型。而在CAD／CAM集成系统中，将其程序直接送入数控装置，不需上述控制 介质。
13 

（2）数控装置
数控装置是数控铣床的中枢，在普通数控铣床中一般由输入装置、存储器、控制器、运 算器和输出装置组成。数控装置接收输人介质的信息，并将其代码加以识别、储存、运算， 输出相应的指令脉冲以驱动伺服系统，进而控制机床动作。在计算机数控铣床中，由于计算 机本身即含有运算器、控制器等上述单元，因此其数控装置的作用由一台计算机来完成。 （3）伺服系统
伺服系统的作用是把来自数控装置的脉冲信号转换为机床移动部件的运动，使工作台 （或溜板）精确定位或按规定的轨迹作严格的相对运动，最后加工出符合图纸要求的零件。 因此伺服系统的性能是决定数控铣床的加工精度、表面质量和生产率的主要因素之一，相对 于每个脉冲信号，机床移动部件的位移量叫做脉冲当量（用8来表示）。常用的脉冲当量为 0.01mm／脉冲、0.005mm／脉冲及0.001mm／脉冲。
在数控铣床的伺服系统中，常用的伺服驱动元件有功率步进电机、电液脉冲马达、直流 伺服电机和交流伺服电机等。
（4）机床本体
机床主机是数控铣床的主体，它包括床身、底座、立柱、横梁、滑座、工作台、主轴 箱、进给机构、刀架等机械部件。它是在数控铣床上自动地完成各种切削加工的机械部分。
数控铣床中的机床本体，在开始阶段使用通用机床，只是在自动变速、刀架或工作台自 动转位和手柄等方面作些改变，实践证明，数控饶床除了由于切削用量大、连续加工发热多 等影响工件精度外，还由于是自动控制，在加工中不能像在通用机床上那样可以随时由人工 进行干预。所以其设计要求比通用机床更严格，制造要求更精密。因而在后来的数控铣床设 计时，采用了许多新的加强刚性，减小热变形、提高精度等方面的措施，使得数控侁床的外 部造型、整体布局、传动系统及刀具系统等方面都发生了很大的变化。
数控铣床主体的主要结构特点如下。
①采用具有高刚度、高抗振性及较小热变形的机床新结构，通常用提高结构系统的静 刚度、增加阻尼、调整结构件质量和固有频率等方法来提高机床主体的刚度和抗振性，使机 床主体能适应数控铣床连续自动地进行切削加工的需要。采取改善机床结构布局、减少发 热、控制温升及采用热位移补偿等措施，可减少热变形对机床主体的影响。
②现代数控铣床广泛采用高性能的主轴伺服驱动和进给伺服驱动装置，使数控铣床的 传动链缩短，可简化机床机械传动系统的结构。
③采用高传动效率、高精度、无间隙的传动装置和传动元件，如滚珠丝杠螺母副、塑 料滑动导轨、直线滚动导轨、静压导轨等传动元件。
另外，数控铣床还应包括辅助装置。辅助装置作为数控铣床的配套部件，是保证充分发 挥数控铣床功能所必需的。常用的辅助装置包括气动、液压装置，排屑装置，冷却、润滑装 置，回转工作台和数控分度头，防护、照明等各种辅助装置，
气动和液压装置是应用气动、液压系统，使机床完成自动换刀所需的动作，实现运动部 件的制动和滑移齿轮变速移动，完成工作台的自动夹紧、松开，工件、刀具定位表面的自动 吹屑等辅助功能。
排屑装置的作用是将切屑从加工区域排出，迅速有效地排除切屑是保证数控铣床高效率 自动进行切削加工的一种必备的辅助装置。
回转工作台和数控分度头，能按照数控装置发出的指令信号作连续的回转进给运动或回 14


转分度运动，是加工中心、数控铣床中常用的辅助装置。 1.4.2 数控铣床的工作原理
数控铣床工作前，要预先根据被加工零件的要求，确定零件加工工艺过程、工艺参数， 并按一定的规则形成数控系统能理解的数控加工程序。即将被加工零件的几何信息和工艺信 息数字化，按规定的代码和格式编制成数控加工程序。然后用适当的方式将此加工程序输入 到数控铣床的数控装置中。此时，即可启动机床运行数控加工程序。在运行数控加工程序的 过程中，数控装置会根据数控加工程序的内容，发出各种控制命令，如启动主轴电机、打开 冷却液，并进行刀具轨迹计算，同时向特殊的执行单元发出数字位移脉冲并进行进给速度控 制，正常情况下可直到程序运行结束，零件加工完毕为止。具体面言，数控铣床的工作过 程，即加工零件的过程，如图1—14所示。其主要步骤如下。
图114 数控铁床加工过程
①根据被加工零件图中所规定的零件形状，尺寸、材料及技术要求等，制定工件加工 的工艺过程，刀具相对工件的运动轨迹，切削参数及辅助动作顺序等，进行零件加工的程序 设计。
②用规定的代码和程序格式编写零件加工程序单。 ③按照程序单上的代码制作控制介质。
④通过输入装置把加工程序输入给数控装置，
⑤启动机床后，数控装置根据输入的信息进行一系列的运算和控制处理，将结果以脉 冲形式送往机床的伺服系统（如步进电机、直流伺服电机、电液脉冲马达等）。
⑥伺服系统驱动机床的运动部件，使机床按程序预定的轨迹运动，从而加工出合格的 零件。
1.5 数控系统的插补原理简介
数控加工程序提供了刀具运动的起点、终点和运动轨迹，而刀具怎么从起点沿运动轨迹 走向终点则由数控系统的插补装置或插补软件来控制。实际加工中，被加工零件的轮廓种类 很多，严格说来，为了满足加工要求，刀具运动轨迹应该准确地按零件的轮廓形状生成。然 而，对于复杂的曲线轮廓，直接计算刀具运动轨迹非常复杂，计算工作量很大，不能满足数 控加工的实时控制要求。因此，在实际应用中，是用一小段直线或圆弧去逼近（或称为拟 合）零件轮廓曲线，即通常所说的直线和圆弧插补。某些高性能的数控系统中，还具有抛物 线、螺旋线插补功能。
在早期的数控系统中，插补是由专门设计的硬件数字电路完成的。而在现代CNC系统 中，常用的插补实现方法有两种：一种由硬件和软件的结合来实现；另一种全部采用软件 实现。
插补的任务就是根据进给速度的要求，完成在轮廓起点和终点之间的中间点的坐标值计
15 专作图纸


算，对于轮廓控制系统来说，插补运算是最重要的计算任务。插补对机床控制必须是实时 的。插补运算速度直接影响系统的控制速度，而插补计算精度又影响到整个CNC系统的精 度，人们一直在努力探求计算速度快同时计算精度又高的插补算法。目前，普遍应用的插补 算法分为如下两大类。
（1）脉冲增量插补
脉冲增量插补法适用于以步进电动机为驱动装置的开环数控系统，这类插补算法的特点 是每次插补的结果仅产生一个行程增量，以一个个脉冲的方式输出给步进电动机。脉冲增量 插补的实现方法较简单，通常仅用加法和移位就可完成插补，容易用硬件来实现，而且用硬 件实现这类运算的速度很快。但是，CNC系统一般均用软件来完成这类算法。用软件实现 的脉冲增量插补算法一般要执行20多条指令，如果CPU的时钟频率为5MHz，那么计算一 个脉冲当量所需的时间大约为40μs，当脉冲当量为0.001mm时，可以达到的坐标轴极限速 度为1.5m／min。如果要控制两个或两个以上坐标，且承担其他必要的数控功能时，所能形 成的轮廓插补进给速度将进一步降低。如果要求保证一定的进给速度，只能增大脉冲当量， 使精度降低。例如，脉冲当量为0.01mm时，单坐标控制速度为15m／min。因此脉冲增量 插补输出的速率主要受插补程序所用时间的限制，它仅仅适用于中等精度和中等速度、以步 进电动机为执行机构的机床数控系统。
（2）数据采样插补
适用于闭环和半闭环以直流或交流伺服电动机为执行机构的CNC系统。这种方法是将 加工一段直线或圆弧的时间划分为若干相等的插补周期，每经过一个插补周期就进行一次插 补计算，算出在该插补周期内各坐标轴的进给量，边计算，边加工，若干次插补周期后完成 一个曲线段的加工，即从曲线段的起点走到终点。
与脉冲增量插补法不同，采用数据采样插补时，根据加工直线或圆弧段的进给速度v， 计算出每一个插补周期内的插补进给量，即步长，例如，假定数控系统的插补周期为t— 0.1ms，进给速度为v＝10000mm／min，则插补步长为dl＝vt／（60x1000）＝0.017mm。对 于曲线插补，插补步长越短，插补精度越高。显然，插补周期越短，插补精度越高；进给速 度越快，插补精度越低。
在一个插补周期内，不仅要完成基本的插补运算，而且一般来说还要留出约3～4个插 补周期，进行后续程序段的插补预处理计算和完成其他数控功能，包括编程、存储、采集运 行状态数据、监视系统和机床等功能，因此，在计算机CPU的处理速度不变的情况下，通 过缩短插补周期来提高插补精度和进给速度的潜力是有限的。
随着微机的快速发展和应用，小巧、廉价的PC—CNC系统已成为计算机数控的主流。 目前，常用的PC—CNC系统具有以下几种结构形式。
①基于软、硬件结合两级插补方案的单微机CNC系统 在这种系统中，为了缩短计算 机的插补程序运行时间，将插补任务分为两部分，即由计算机软件和附加插补器硬件（一般 称为运动控制卡）共同承担。软件插补称为粗插补，完成插补预处理计算；硬件插补称为细 插补，完成对粗插补输出的直线段的细插补，即插补计算，并形成输出。软件完成插补任务 的绝大部分，而时间负荷要比仅仅用一级软件插补的方案小得多。利用软、硬件结合进行插 补运算的数控系统，对PC的时间和空间资源要求较小，而能达到的插补速度和插补精度均 较高，被广泛应用于现代高档CNC系统，
②基于分布式多微机CNC系统 在这种系统中，将数控功能划分为几个子系统，指派 16


一台专门微处理器承担一项专门任务。美国麦克唐纳·道格拉斯公司的ActrionII型CNC系 统就是一个典型代表，该系统采用四台微处理器分别实现输入／输出、轮廓插补及进给率发 生功能、坐标轴何服功能、零件程序编辑和CRT显示功能，
③基于单台高性能微机的CNC系统 在这种系统中，粗插补（插补预处理计算）和细 插补（实时插补中断服务程序）均由计算机软件实现，随着PC技术的快速发展，以单台微 机为基础的PC—CNC系统将得到快速发展。
第①种和第③种结构形式的PC—CNC系统都将在新一代数控系统中得到广泛的应用， 其中高速、高精度、多坐标（指四坐标以上）高档数控系统将以第①种结构形式为主，各种 类型的三坐标数控系统将以第③种结构形式为主，因为第③种结构形式的数控系统成本 最低。
销员 ■■
)
17 

第2章
数控铣床的结构设计 2.1 数控铣床的结构组成
数控铣床是机械和电子技术相结合的产物，它的机械结构随着电子控制技术在铣床上的 普及应用，以及对铣床性能提出的技术要求，面逐步发展变化。从数控铣床发展史看，早期 的数控铣床是对普通铣床的进给系统进行革新、改造，面后逐步发展成一种全新的加工设 备。1952年，美国研制的世界上第一台三坐标数控铣床，其特点是用三个数控伺服系统替 代了传统的机械进给系统。早期的数控铣床同普通铣床相比，除进给系统是数控伺服系统 外，外形和结构基本相同。国内现生产的经济型数控铣床，就属于这种类型，因为这些产品 是在普通铣床的总体结构基础上经局部改进而发展起来的。
2.1.1 数控铣床结构组成
数控优床的机械结构主要由以下几部分组成。
①主传动系统 它包括动力源、传动件及主运动执行件（主轴）等，其功用是将驱动 装置的运动及动力传给执行件，以实现主切削运动。
②进给传动系统 它包括动力源、传动件及进给运动执行件（工作台、刀架）等，其 功用是将伺服驱动装置的运动与动力传给执行件，以实现进给切削运动。
③基础支承件 它是指床身、立柱、导轨、滑座、工作台等，它支承机床的各主要部 件，并使它们在静止或运动中保持相对正确的位置。
④辅助装置 辅助装置视数控机床的不同而异，如自动换刀系统、液压气动系统、润 滑冷却装置等。
图2—1为XK5040A型数控铣床的外形。床身6固定在底座1上，用于安装与支承机床 各部件：操纵台10上有显示器、机床操作按钮和各种开关及指示灯；纵向工作台16、横向 溜板12安装在升降台15上，通过纵向进给伺服电动机13、横向进给伺服电动机14和垂直 升降进给伺服电动机4的驱动，完成X、Y、Z坐标进给；强电柜2中装有机床电气部分的 接触器、继电器等；变压器箱3安装在床身立柱的后面；数控柜7内装有机床数控系统；保 护开关8，11可控制纵向行程硬限位；挡铁9为纵向参考点设定挡铁；主轴变速手柄和按钮 板5用于手动调整主轴的正转、反转、停止及切削液开停等，
2.1.2 数控铣床机械结构的主要特点
（1）高刚度和高抗振性
铣床刚度是铣床的技术性能之一，它反映了铣床结构抵抗变形的能力。根据铣床所受载 荷性质的不同，铣床在静态力作用下所表现的刚度称为铣床的静刚度；铣床在动态力作用下 所表现的刚度称为铣床的动刚度。在铣床性能测试中常用铣床柔度来说明铣床的该项性能， 柔度是刚度的倒数。为满足数控铣床高速度，高精度、高生产率、高可靠性和高自动化的要 求，与普通铣床比较，数控铣床应有更高的静、动刚度，更好的抗振性。
18 

-13
图2—1 XK5040A型数控铣床的外形
1—底座：2一强电柜：3—变压器箱：1—看直升降进给何■电动机；5—主轴变速手柄和按钮板： 6—床身：7一数控柜：8，11—保护开关：9—挡铁：10—操纵台：12—横向油板：13一纵向进给
伺服电动机：14—横向进给何服电动机：15—升降台：16—纵向工作台
（2）减少铣床热变形的影响
侁床的热变形是影响铣床加工精度的重要因素之一，由于数控铣床主轴转速、进给速度 远高于普通铣床，而大切削量产生的炽热切屑对工件和铣床部件的热传导影响远比普通铣床 严重。而热变形对加工精度的影响，操作者往往难以修正。因此，应特别重视减少数控铣床 热变形的影响。
（3）传动系统机械结构简化
数控铣床的主轴驱动系统和进给驱动系统，分别采用交流、直流主轴电动机和伺服电动 机驱动，这两类电动机调速范围大，并可无级调速。因此使主轴箱、进给变速箱及传动系统 大为简化，箱体结构简单，齿轮、轴承和轴类零件数量大为减少，甚至不用齿轮，由电动机 直接带动主轴或进给滚珠丝杠。
（4）高传动效率和无间隙传动装置
数控铣床在高进给速度下，要求工作平稳，具有高的定位精度。因此，对进给系统中的 机械传动装置和元件要求具有高寿命、高刚度、无间隙、高灵敏度和低摩擦阻力的特点。目 前，数控铣床进给驱动系统中常用的机械装置主要有三种，即滚珠丝杠副、静压蜗杆—蜗轮 机构和预加载荷的双齿轮—齿条机构。
（5）低摩擦因数的导轨
铣床导轨是铣床的基本结构之一，铣床加工精度和使用寿命在很大程度上决定于铣床导 轨的质量，数控铣床的导轨则有更高的要求。如在高速进给时不振动。低速进给时不爬行， 具有很高的灵敏度，能在重载下长期连续工作，耐磨性要高，精度保持性要好等。现代数控
19 

铣床使用的导轨，仍是滑动导轨、滚动导轨和静压导轨三种类型，但在材料和结构上已发生 了质的变化，已不同于普通铣床的导轨。
2.2 数控铣床总体设计
2.2.1 数控铣床设计的基本理论
数控铣床不同于一般的机械，它是用来生产其他机械的工作母机，和其他机床一样在刚 度、精度及运动特性方面有其特殊要求。下面简单介绍一下与上述特性相关的一些基础理论 和概念。
2.2.1.1 精度
机床精度是指机床主要部件的形状、相互位置及相对运动的精确程度，包括几何精度、 传动精度、运动精度、定位精度及精度保持性等几个方面。各类机床按精度可分为普通精度 级、精密级和高精度级。以上三种精度等级的机床均有相应的精度标准，其允差若以普通级 为1，则大致比例为1：0.4：0.25，在设计阶段主要从机床的精度分配、元件及材料选择等 方面来提高机床精度。
（1）几何精度
几何精度是指机床空载条件下，在不运动（机床主轴不转或工作台不移动等情况下）或 运动速度较低时各主要部件的形状、相互位置和相对运动的精确程度，如导轨的直线度、主 轴径向跳动及轴向窜动、主轴中心线对滑台移动方向的平行度或垂直度等。几何精度直接影 响加工工件的精度，是评价机床质量的基本指标。它主要决定于结构设计、制造和装配 质量。
（2）运动精度
运动精度是指机床的主要零部件以工作状态的速度运动时的精度。如高速回转主轴的回 转精度，对于高速精密的机床，运动精度是评价机床质量的一个重要指标。运动精度和几何 精度是不同的，它还受到运动速度（转速）、运动件的重力、传动力和摩擦力的影响。它与 结构设计及制造等因素有关。
（3）传动精度
传动精度是指机床传动系统各末端执行件之间相对运动的协调性和准确度。这方面的误 差就成为该传动链的传动误差，传动精度由传动系统的设计、传动件的制造和装配精度等 决定。
（4）定位精度
定位精度是指机床的定位部件运动到达规定位置的精度。定位精度直接影响被加工工件 的尺寸精度和形位精度。机床构件和进给控制系统的精度、刚度及动态特性，机床测量系统 的精度都将影响机床定位精度。
（5）工作精度
机床加工规定的试件所能达到的加工精度，称为机床的工作精度，用试件的加工精度表 示。工作精度是各种因素综合影响的结果，包括机床自身的精度、刚度、热变形和刀具、工 件的刚度及热变形等。
（6）精度保持性 20


在规定的工作期间内，保持机床所要求的精度，称为精度保持性。影响精度保持性的主 要因素是磨损。磨损的影响因素十分复杂，如结构设计、工艺、材料、热处理、润滑、防护 及使用条件等。
2.2.1.2 刚度 （1）定义
机床刚度指机床系统抵抗变形的能力，通常用式（2—1）来表示，即
K=
F
(2-1) y
式中 K—机床刚度，N／μm；
F—作用在机床上的载荷，N：
y—在载荷作用下，机床或主要零部件的变形，μm。
作用在机床上的载荷有重力、夹紧力、切削力、传动力、摩擦力、冲击力和振动干扰力 等。按照载荷的性质不同，可分为静载荷和动载荷。不随时间变化或变化极为缓慢的力称静 载荷，如重力、切削力的静力部分等。凡随时间变化的力，如冲击振动力及切削力的交变部 分等称动载荷。故机床刚度相应地分为静刚度及动刚度，后者是抗振性的一部分。通常所说 刚度一般指静刚度。
（2）整机刚度
机床是由许多构件结合而成的，在载荷作用下各构件及结合部都要产生变形，这些变形 直接或间接地引起刀具和工件之间相对位移，这个位移的大小代表了机床的整机刚度。因 此，机床整机刚度不能用某个零部件的刚度评价，而是指整台机床在静载荷作用下，各构件 及结合面抵抗变形的综合能力。显然，静刚度对机床抗振性、生产率等均有影响。因此，在 机床设计中如何提高其刚度是十分重要的。国内、外对结构刚度和接触刚度进行了大量研究 工作，在设计中既要考虑提高各部件刚度，同时又要考虑结合部刚度及各部件间刚度的匹配 问题。各部件和结合部对机床整机刚度的贡献大小是不同的，设计时应进行刚度的合理分配 或优化。
2.2.1.3 抗振性
机床抗振性指机床在交变载荷作用下抵抗变形的能力。它包括两个方面，即抵抗受追振 动的能力和抵抗自激振动的能力。前者有时习惯上称为抗振性，后者常称为切削稳定性。 （1）受迫振动
受迫振动的振源可能来自机床内部，如高速回转零件的不平衡等，也可能来自机床之 外，机床受迫振动的频率与振源激振力的频率相同，振幅与激振力大小及机床阻尼比有关。 当激振频率与机床的固有频率接近时，机床将呈现“共振”现象，使振幅激增，加工表面的 粗糙度也将大大增加。机床是由许多零部件及结合部组成的复杂振动系统，它属于多自由度 系统，具有多个固有频率，在其中某一个固有频率下自由振动时，各点振幅的比值称为主振 型。对应于最低固有频率的主振型称为一阶主振型，依次有二阶、三阶等主振型。机床的振 动乃是各阶主振型的合成，一般只需要考虑对机床性能影响最大的几个低阶振型，如整机摇 摆、一阶弯曲和扭转等振型，即可较准确地表示机床的实际振动。
（2）自激振动
机床的自激振动是发生在刀具和工件之间的一种相对振动，它在切削过程中出现，由切
21 

削过程和机床结构动态特性之间的相互作用而产生的，其频率与机床系统的固有频率相近。 自激振动一旦出现，它的振幅由小到大增加很快。在一般情况下，切削用量增加，切削力 越大，自激振动就越剧烈。但切削过程停止，振动立即消失，故自激振动也称为切削稳 定性。
（3）振动影响因素
机床振动会降低加工精度、工件表面质量和刀具耐用度，影响生产率并加速机床的损 坏，而且会产生噪声，使操作者疲劳等。故提高机床抗振性是机床设计中一个重要课题。影 响机床振动的主要因素如下。
①机床的刚度 如构件的材料选择、截面形状、尺寸、肋板分布，接触表面的预紧力、 表面粗糙度、加工方法、几何尺寸等。
②机床的阻尼特性 提高阻尼是减少振动的有效方法。机床结构的阻尼包括构件材料 的内阻尼和部件结合部的阻尼。结合部阻尼往往占总阻尼的70％～90％，故在结构设计中 要正确处理结合部阻尼对抗振性的影响，
③机床系统固有频率 若激振频率远离固有频率，将不出现共振。在设计阶段应通过 分析计算，预测所设计机床的各阶固有频率。
2.2.1.4 热变形 （1）概述
机床在工作时受到内部热源（如电动机、液压系统、机械摩擦副、切削热等）和外部热 源（如环境温度、周围热源辐射等）的影响，使机床各部分温度发生变化。因不同材料的线 胀系数不同，机床各部分的变形不同，导致机床产生热变形。它不仅会破坏机床的原始几何 精度，加快运动件的磨损，甚至会影响正常运转。据统计，由于热变形而使加工工件产生误 差最大可占全部误差的70％左右。特别对精密机床、大型机床、自动化机床、数控机床等， 热变形的影响尤其不能忽视。
（2）热平衡的温度场
机床工作时一方面产生热量，另一方面又要向周围散发热量，如果机床热源单位时间产 生的热量一定，由于开始时机床的温度较低，与周围环境之间的温差小，散出的热量少，机 床温度升高较快，随着机床温度的升高，温差加大，散热增加，所以机床温度的升高将逐渐 减慢，当达到某一温度时，单位时间内发热量等于散出的热量，即达到了热平衡。达到稳定 温度的时间一般称为热平衡时间，机床各部分温度不可能相同，热源处最高，离热源越远则 温度越低，这就形成了温度场。通常，温度场是用等温曲线来表示。通过温度场可分析机床 热源并了解热变形的影响。
在设计机床时应特别注意机床内部热源的影响。一般可采用下列措施减少热源的发热 量：将热源置于易散热的位置，增加散热面积，强迫通风冷却，将热源的部分热量移至构件 温升较低处，以减小构件的温差，或使机床都件的热变形转向不影响加工精度处，也可设计 机床预热、自动温度控制、温度补偿装置及隔热等。
2.2.1.5 噪声
物体振动是产生声的源泉。机床工作时各种振动频率不同，振幅也不同，它们将产生不 同频率和不同强度的声音，这些声音无规律地组合在一起即成噪声。
（1）噪声的度量指标
噪声是声音的一种，声音是一种在弹性介质中传播的机械波。当这种波的频率在 22


20Hz～20kHz范围内时，人们有可能感觉到声音，为了能反映人对声音的响应，声音的度 量指标有客观和主观两种方法。
①客观度量 噪声的物理度量可用声压和声压级，声功率和声功率级、声强和声强级 等来表示。下面以声压和声压级的表示方法为例说明，当声波在介质中传播，介质中的压力 与静压的差值为声压，通常用p表示，其单位是Pa（N／㎡），正常人的耳朵能听到的最大 声音的声压是最小声音的百万倍，因此直接用声压值来表示很不方便，通常人耳能听到的最 小声压称为听阀，把听阈作为基准声压，用相对量的对数值来表示，称之为声压级L (dB)。
< Lp=20lg
(2-2) Po
式中 P—被测声压：
pn—基准声压，其值等于2x10—Pa。
基准声压对应于声压级标准中的odB，这样就把声压变化范围变成0～120dB的声压级 变化范围。
②主观度量 人耳对声音的感觉不仅和声压有关，而且和频率有关，声压级相同面频 率不同的声音听起来不一样，根据这一特征人们引入将声压级和频率结合起来表示声音强弱 的主观度量，有响度、响度级和声级等。
（2）机床噪声
机床噪声的测量应按照金属切削机床噪声测量标准》的要求进行，一般机床允许噪声 不大于85dB（A），精密机床不大于75dB（A），
机床噪声源来自以下四个方面。
①机械噪声 如齿轮、滚动轴承及其他传动元件的振动、摩擦等、一般速度增加一倍， 噪声增加6dB；载荷增加一倍，噪声增加3dB、故机床速度提高，功率加大都可能增加噪声 污染。
②液压噪声 如泵、阀、管道等的液压冲击、气穴、紊流产生的噪声。 ③电磁噪声 如电动机定子内磁滞伸缩等产生噪声。
④空气动力噪声 如电动机风扇，转子高速旋转对空气的搅动等产生噪声，
减少噪声的主要途径是控制噪声的生成和隔声。控制噪声的生成应找出主要的噪声源， 并采取降低噪声的措施。例如，传动系统的合理安排，轴承及齿轮结构的合理设计，提高主 轴箱体和主轴系统的刚度，避免结构共振，选用合理的润滑方式和轴承结构形式等，在隔声 方面降低噪声主要是根据噪声的吸收和隔离原理，采取隔声措施。例如，齿轮箱严格密封， 选用吸声材料作箱体罩壳等。
2.2.1.6 低速运动平稳性 （1）爬行现象和机理
机床上有些运动部件，需要作低速或微小位移。当运动部件低速运动时，主动件匀速运 动，被动件往往出现明显的速度不均匀的跳跃式运动，即时走时停或者时快时慢的现象。这 种现象称为爬行。
机床运动部件产生爬行，影响工件的加工精度和表面粗糙度。如精密机床和数控机床加 工中的定位运动速度很低或位移极小，产生爬行影响定位精度。在精密、自动化及大型机床
23 

上，爬行危害极大，是评价机床质量的一个重要指标。
爬行是个很复杂的现象，目前一般认为它是摩擦自激振动现象，产生这一现象的主要原 因是摩擦面上摩擦因数的变化和传动机构的刚度不足。下面以直线运动的爬行为例来说明。
将机床直线运动传动系统简化为力学模型，如图2—2所示。
m
图2—2 进给传动的力学模型
1一主动件：2—道给系统；3一被动件；4—支承导轨
图中1为主动件，3为被动件。1、3之间的进给系统2（包括齿轮、丝杠、螺母等）可 简化为等效弹簧k和等效黏性阻尼器C（可合称为复弹簧），被动件3在支承导轨4上沿直 线移动，摩擦力F随着被动件3的速度变化而变化。当主动件1以匀速v低速移动时，进给 系统2使被动件3受力，但由于被动件与导轨间的静摩擦力Fm大于被动件3受的驱动力，被 动件3静止不动，进给系统2处于储能状态，随着主动件1的继续移动，进给系统2储能增 加，被动件3所受的驱动力越来越大，当驱动力大于静摩擦力FB时，被动件3开始移动，这 时静摩擦转化为动摩擦，摩擦因数迅速下降，使被动件3移动速度增大。由于动摩擦力随速度 的增加而降低，又使被动件3的移动速度进一步加大。这时进给系统2的弹簧力减小，当弹簧 力减到等于动摩擦力时，系统处于平衡状态。但是由于惯性，被动件3仍以较大的速度移动， 弹簧力则进一步减小，直到小于动摩擦力时，被动件3加速度变为负值，移动速度减慢，动 摩擦力增大，其速度进一步下降。当弹簧力和被动件3的惯性不能克服摩擦力时，被动件3 便停止运动。主动件1再重新开始压缩弹簧，上述过程重复发生就产生时停时走的爬行。
当摩擦面处在边界和混合摩擦状态下，摩擦因数的变化是非线性的。因此，在弹簧重新 被压缩的过程中，在被动件3的速度尚未降至零时，弹簧力有可能大于动摩擦力，使被动件 3的速度又再次增大，将出现时慢时快的爬行。
（2）爬行的度量
①爬行量 用机床部件位移—时间曲线表示，用它直观地描述时走时停的爬行现象。 ②速度波动量 用机床部件速度—时间曲线表示。用它描述时快时慢的爬行现象。
③爬行的临界速度 机床运动部件不产生爬行的最低驱动速度称为爬行临界速度，可 用式（2—3）表示，即
FAf
(2-3) 2πξkm
式中 F—导轨面上的正压力，N：
Δ静、动摩擦因数之差： 阻尼比：
k—传动系统的刚度，N／m； 24


m—移动部件的质量，kg。
（3）消除爬行的措施
为防止爬行，在设计低速运动部件时，应减少静、动摩擦因数之差；提高传动机构的刚 度：提高阻尼比和降低移动件的质量。
减少静、动摩擦因数之差的方法有：用滚动摩擦代替滑动摩擦；采用卸荷导轨或静压导 轨：采用减摩材料，如导轨上镶装铝青铜、锌青铜或聚四氟乙烯塑料与铸铁或钢支承导轨相 搭配：采用特殊的导轨油等。
2.2.2 卧式数控镗铣床的常用布局形式
卧式数控镗铣床的布局形式种类较多，其主要区别在于立柱的结构形式和X、Z坐标轴 的移动方式上（Y轴移动方式无区别）。常用的立柱有单立柱和框架结构双立柱两种形式， 如图2—3（a）、（b）所示：Z坐标轴的移动方式有两种：工作台移动式，如图2—3（a）、（b） 所示：立柱移动式，如图2—3（c）所示。以上基本形式通过不同组合，还可以派生其他多种 变形，如X、Z两轴都采用立柱移动，工作台完全固定的结构形式；或X轴为立柱移动、Z 轴为工作台移动的结构形式等。
在图2—3所示的三种中，小规格卧式数控镗铣床常见的布局形式中，图2—3（a）结构形 式和传统的卧式镗床相同，多见于早期的数控机床或数控化改造的机床；图2—3（b）采用 了框架结构双立柱、Z轴工作台移动式布局，是中、小规格卧式数控机床常用的结构形式； 图2—3（c）采用T形床身、框架结构双立柱、立柱移动式（Z轴）布局，是卧式数控铣床 的典型结构。
(2) (a)
(b)
图2—3 卧式数控镜铣床常见的布局形式
框架结构双立柱采用了对称结构，主轴箱在两立柱中间上、下运动，与传统的主轴箱侧 挂式结构相比，大大提高了结构刚度。另外，主轴箱是从左、右两导轨的内侧进行定位，热 变形产生的主轴中心变位被限制在垂直方向上，因此，可以通过对Y轴的补偿，减小热变 形的影响。
T形床身布局可以使工作台沿床身作X向移动时，在全行程范围内，工作台和工件完 全支承在床身上，因此，机床刚性好，工作台承载能力强，加工精度容易得到保证。而且， 这种结构可以很方便地增加X轴行程，便于机床品种的系列化、零部件的通用化和标准化。
立柱移动式结构的优点是：首先，这种形式减少了机床的结构层次，使床身上只有回转 工作台和工作台，共三层结构，它比传统的四层十字工作台，更容易保证大件结构刚性；同
25 

时又降低了工件的装卸高度，提高了操作性能，其次，Z轴的移动在后床身上进行，进给力 与轴向切削力在同一平面内，承受的扭曲力小，镜孔和铣削精度高。此外，由于Z轴导轨 的承重是固定不变的，它不随工件质量改变而改变，所以有利于提高Z轴的定位精度和精 度的稳定性。但是，由于Z轴承载较重，对提高Z轴的快速性不利，这是其不足之处，
2.2.3 立式数控镗铣床的常用布局形式
立式数控铣床是数控铣床中数量最多的一种，应用范围也最为广泛，小型数控铣床一般 都采用工作台移动、升降及主轴转动方式，与普通立式升降台铣床结构相似：中型立式数控 铣床一般采用纵向和横向工作台移动方式，且主轴沿垂直溜板上下运动：大型立式数控铣 床，因要考虑到扩大行程、缩小占地面积及刚性等技术问题，往往采用龙门架移动式，其主 轴可以在龙门架的横向与垂直溜板上运动，而龙门架则沿床身作纵向运动。
从机床数控系统控制的坐标数量来看，目前3坐标立式数控铣床仍占大多数，一般可进 行3坐标联动加工，但也有部分机床只能进行3坐标中的任意2个坐标联动加工（常称为 1
2
坐标加工），此外，还有机床主轴可以绕X，Y、Z坐标轴中其中一个或两个轴作数控摆 6
角运动的4坐标和5坐标立式数控铣床。一般来说，机床控制的坐标轴越多，特别是要求联 动的坐标轴越多，机床的功能、加工范围及可选择的加工对象也越多，但随之而来的是机床 的结构更复杂，对数控系统的要求更高，编程的难度更大，设备的价格也更高，图2—4所示 是立式数控镗铣床常见的三种布局形式。由溜板和工作台未实现平面上X，Y两个坐标轴的 移动，主轴箱沿立柱导轨上下实现Z坐标移动。
图2—4 立式数控镗恍床的布局形式 2.2.4 高速数控机床的布局形式
高速加工是提高机床加工效率最有效的方法之一，近年来，高速加工机床已成为机床制 造业的主要发展方向，高速加工机床的性能，已成为衡量机床制造厂家产品性能水平的主要 标志之一.
高速加工机床需要同时满足高移动速度，高加速度、高主轴转速及高精度加工的要求， 因而在结构布局上需要集高速、高精度和高刚度于一体，在机床总体布局上必须考虑到高速 加工机床的特殊性。
图2—5所示是两种高速加工机床的布局形式。图2—5（a）是立式数控机床采用固定门式 立柱的布局形式，图2—5（b）是卧式数控机床采用“内外双框架”即“箱中箱”（box in box）结构的布局形式。这两种布局形式在总体上的共同特点是：运动部件质量轻，结构刚 26


(q)
(a)
图2—5 高速加工机床布局
1—X轴导轨：2—内框；3—主轴箱：4—Y轴导轨
性好、机床进给系统的结构全部或部分移出工作台外，以最大限度减轻移动部件的质量和惯 量。这些是高速加工机床结构布局设计的总原则。
图2—5（a）中的立式数控机床采用了固定门式立柱的布局形式，但它已脱离传统的门式 结构仅仅为了满足大行程或重型加工需要的理念，目的是为了提高机床的整体刚性和快速性 以满足高速加工的要求，它通过在上面架设X轴导轨，利用滑座实现X轴移动，从而降低 了运动部件的质量，而且运动部件的质量和加工工件的质量无关。机床的Y轴采用上置式 结构，虽然滑座仍为两层，但与传统的立柱移动式布局相比，移动部件中已经去除了立柱本 身的质量，从而达到了减重的目的。
图2—5（b）中的卧式布局高速数控机床，采用了“内外双框架”即“箱中箱”结构。 外框架固定，上设X轴导轨，通过内框的移动实现X轴的运动；Z轴的运动通过安装在主 轴箱内的滑枕实现。与传统的立柱移动式布局比较，这两轴在移动部件中都去除了立柱本身 的质量，质量不到原来的1／3，而且X轴上、下均有导轨支撑，彻底改变了传统立柱悬臂式 弯曲的状况，提高了整体刚度，另外，X、Y轴的对称布局形式，也提高了机床的热稳定 性，使机床的加工精度得到了提高。
2.2.5 虚轴数控机床
虚轴数控机床是最近出现的一种全新概念的机床，它和传统的机床相比，在机床的机 构、本质上有了巨大的飞跃，它的出现被认为是机床发展史上的一次重大变革。
（1）传统机床的串联机构
虚轴机床与传统机床相比有许多优异的性能，一般传统机床可看作是一个空间串联机 构，如图2—6所示，它的横梁、立柱等部件往往承受弯曲载荷，而弯曲载荷一般要比拉压载 荷造成更大的应力和变形，所以，为了提高机床刚性，必须采用大截面的构件。另外，当机 床运动自由度增多时，需增加相应的串联运动链，机床的机械结构变得十分复杂。
传统的机床［以动立柱立式加工中心为例，如图2—4（c）所示］从基座（床身）至末端 运动部件，是经过床身到滑座（在床身上作X轴运动）、滑座到立柱（在滑座上作Y轴运 动）、立柱到主轴箱（在立柱上作Z轴运动）的先后顺序，逐级串联相连接的。因此，当滑 座在作X轴运动时，滑座上的Y轴和立柱上的Z轴也作了相应的空间运动，也即后置的轴 必须随同前置的轴一起运动。这无疑增加了X轴运动部件的质量，
27 

图2—6 典型传统机床结构
同时，加工时主轴上刀具所受的切削力反力，也依次传递给立柱、滑座，最终传递给床 身，也即末端所受的力按顺序依次串联地传至最前端。此外，这些作用力一般是不通过构件 重心的，必然会产生弯矩和扭矩，而构件抵抗弯矩和扭矩的变形能力，一般仅为抵抗拉、压 力变形的1／6～1／5。因此，前端构件不但要额外负担后端构件的重力，而且还要考虑承受 切削力。这样一来，为了达到机床高刚度的要求，每部分结构件都得考虑以上因素，使其具 有相应体积和材料。总之，传统机床的串联结构特性，必然会导致移动部件的质量大、系统 刚度低，而成为机床致命的弱点，特别是当机床运动速度高和工件质量大时，这些弱点更为 突出。
（2）虚轴机床的并联机构
虚轴机床的基本结构是一个动平台，一个定平台和6根长度可变的连杆，如图2—7所 示。动平台上装有机床主轴和刀具，定平台（或者与定平台固连的工作台）上安装工件，6 根连杆实际是6个滚珠丝杠螺母副，它们将两个平台连在一起，同时将伺服电动机的旋转运 动转换为直线运动，从而不断改变6根连杆的长度，带动动平台产生6自由度的空间运动， 使刀具在工件上加工出复杂的三维曲面，如图2—8所示。由于这种机床上没有导轨、转台等 表征坐标轴方向的实体构件，故称为虚轴机床（Virtual Axis Machine Tool）；由于其结构 特点，又称为“并联运动机床”（Parallel Kinematic Machine，PKM）；同时，由于其奇异的 外形，西方刊物上还常称之为“六足虫”（Hexapod），
如前所述，虚轴机床实际是一个空间并联连杆机构，其6根杆即为6根并联连杆，它们 是机床的驱动部件和主要承力部件，由于这6根杆均为二力杆，只承受拉、压载荷，所以其 应力、变形显著减小，刚性大大提高。由于不必要采用大截面的构件，运动部件的质量减 小，从而可采用较高的运动速度和加速度。据介绍，虚轴机床刚性约为传统加工中心的5倍， 28


图2—7 并联机构工作原理
图2—8 德国的Mikromat公司的6X型机床 1—固定平台：2—运动平台
进给速度可达66m／min，加速度可达1～3g，因而轮廓加工速度相当于传统加工中心的5～ 10倍，此外，虚轴机床还被称为“概念机床”、“用数学建造的机床”。它靠复杂的控制运算 和相对简单的运动机构来产生6自由度空间运动，大大简化了机床的机械结构，是一种高技 术附加值的产品。
此外，虚轴机床的制造成本有可能低于同等功能的传统机床。原因如下。
①虚轴机床是用复杂的数学运算和相对简单的机械结构来实现复杂型面的加工，降低 了结构制造成本。
②虚轴机床具有轴对称的基本结构，其对称部件易于实现模块化设计和批量生产。
③决定虚轴机床精度的关键部件是机床的6根杆及其两端铰链，易于采用滚珠丝杠、 关节轴承等通用件、标准件。
④并联结构各运动副分担工作载荷，驱动功率远小于同等规格的传统机床，伺服系统 成本降低。
由此可见，虚轴机床在刚性、加工效率等方面，有着无可比拟的优势。而且机械结构比 同等功能的传统机床简单，便于制造，有利于降低制造成本。
（3）虚轴机床的关键技术
①运动学计算 虚轴机床的基本结构是空间并联连杆机构，其设计过程实际是机构学 中的运动综合问题，即根据执行机构所需的位移、速度、加速度求解驱动机构的位移、速 度、加速度，并校核机械结构是否满足运动的需要，运动计算还包括工作空间的计算、奇异 点的计算和运动精度的计算。
②动力学计算 动力学计算是根据活动平台的结构、质量、位移、速度、加速度等条 件求出6杆的受力。根据已求出的加速度和角加速度，以及动平台的质量和惯性矩，可求出 惯性力和惯性力矩的表达式。再建立包括惯性力、惯性力矩、重力、切削力、约束力的受力 平衡方程组，解此方程组便得到动力条件下的结构受力，作为承力构件强度、刚度设计以及 6杆驱动电动机选择的依据。
更为深人的动力学计算还应包括机床动刚度、固有频率等参数的计算。
③控制技术 控制技术是虚轴机床研制中的核心技术，其内容包括控制策略、控制运 算、控制系统和数控编程系统的软、硬件技术。当前，控制技术研究的热点包括误差测量及 补偿技术和闭环控制技术等。
29 

④结构设计 采用CAD技术是虚轴机床结构设计的基本途径，机床的整体设计完全依 赖运动学计算和动力学计算的结果。机床的部件设计中驱动连杆的结构设计及其两端饺链的 结构设计是重点。虚拟设计技术和CAE技术也被应用于结构设计。
例如，用计算机模拟加工过程中驱动杆的运动，提取相邻杆间夹角和杆与平台间夹角的 数据。根据夹角的变化范围来设计铰链。
⑤优化设计 优化设计涉及上述的四个方面，即在运动学、动力学计算，控制系统、 机械结构设计中都应采用优化设计方法达到最佳设计效果。
2.3 数控铣床的主传动系统设计
主传动系统是用来实现机床主运动的传动系统，它应具有一定的转速（速度）和一定的 变速范围，以便采用不同材料的刀具，加工不同材料、不同尺寸、不同要求的工件，并能方 便地实现运动的开停、变速、换向和制动等，
数控铣床主传动系统主要包括电动机、传动系统和主轴部件，与普通铣床的主传动系统 相比在结构上比较简单，这是因为变速功能全部或大部分由主轴电动机的无级调速来承担， 省去了复杂的齿轮变速机构，有些只有二级或三级齿轮变速机构用以扩大电动机无级调速的 范围。
2.3.1 主传动的结构特点和变速方式
（1）主传动系统结构特点
数控铣床的主传动系统一般采用直流或交流主轴电动机，通过带传动和主轴箱的变速齿 轮带动主轴旋转，由于这种电动机调速范围广，又可无级调速，使得主轴箱的结构大为简 化，也保证了加工时能选用合理的切削用量，主轴电动机在额定转速时输出全部功率和最大 转矩，随着转速的变化，功率和转矩将发生变化。在调压范围内（从额定转速调到最低转 速）为恒转矩，功率随转速成正比例下降。在调速范围内（从额定转速调到最高转速）为恒 功率，转矩随转速升高成正比例减小。这种变化规律是符合正常加工要求的，即低速切削所 需转矩大，高速切削消耗功率大，同时也可以看出电动机的有效转速范围并不一定能完全满 足主轴的工作需要。所以主轴箱一般仍需要设置几挡变速（2～4挡），机械变速一般采用液 压缸推动滑移齿轮实现，这种方法结构简单，性能可靠，一次变速只需1s。有些小型的或 者调速范围不需太大的数控铣床，也常采用由电动机直接带动主轴或用带传动使主轴旋转。 （2）主传动系统变速方式
为了适应不同的加工要求，目前主传动系统主要有三种变速方式。
①二级以上齿轮变速系统 变速装置多采用齿轮变速结构。图2—9（a）所示是使用滑 移齿轮实现二级变速的主传动系统。滑移齿轮的移位大都采用液压驱动。因数控铣床使用可 调无级变速交流、直流电动机，所以经齿轮变速后，实现分段无级变速，调速范围增加。其 优点是能够满足各种切削运动的转矩输出，且具有大范围调节速度的能力。但由于结构复 杂，需要增加润滑及温度控制装置，成本较高，此外，制造和维修也比较困难。图2—10所 示是一种典型的二级齿轮变速主轴结构。
②一级带传动变速方式 目前多采用带（同步齿形带）传动装置，如图2—9（b）所示。 其优点是结构简单，安装调试方便，且在一定条件下能满足转速与转矩的输出要求。但系统 30


主轴电动机
(3) 图2—9 数控铣床变速方式
接主轴电动机 图2—10 二级齿轮变速主轴结构
的调速范围受电动机调速范围的约束，这种传动方式可以避免齿轮传动时引起的振动与噪 声，适用于低转矩特性要求的主轴。
③调速电动机直接驱动方式 如图2—9（c）所示，其优点是结构紧凑，占用空间少， 转换频率高，但是主轴转速的变化及转矩的输出和电动机的输出特性完全一致，电动机的发 热对主轴的精度影响大，因而使用受到限制。
2.3.2 采用直流或交流电动机无级调速
（1）调速电动机的功率和转矩特性
数控铣床常用的无级变速机构为直流或交流调速电动机。直流电动机从额定转速na向 上至最高转速mmm，是用调节磁场电流（简称调磁）的办法来调速的，属于恒功率；从额定 转速na向下至最低转速nmin，是用调节电枢电压（简称调压）的办法来调速的，属恒转矩。 通常，额定转速na为1000～2000r／min，恒功率调速范围为2～4，恒转矩调速范围则很大， 可达几十甚至超过100。交流调速电动机靠调节供电频率的办法调速。因此，常称为调频主
31 

目前，带调速电动机的分离传动变速箱已形成独立的功能部件。变速箱的输人轴与电动 机直接连接或带传动连接，输出轴可通过带传动主轴。变速箱有不同的公比、级数（通常为 2、3、4级）和功率，形成系列，并包括操纵机构和润滑系统，由专门工厂制造。机床厂可 以外购。
2.3.3 主轴主要结构参数的确定
主轴的主要结构参数有：主轴前、后轴颈D1和D2，主轴内孔直径d，主轴前端悬伸量 a和主轴主要支承间的跨距L，这些参数直接影响主轴旋转精度和主轴刚度。
（1）主轴前轴颈D1的选取
一般按机床类型、主轴传递的功率或最大加工直径（参考表2—1）选取D1．铣床后轴颈 的直径D2≈（0.7～0.85）D。
表2—1 主轴前轴颈直径
/mm 功率P／kW
1.47~2.5 2.6~3.5
5.6-7.3 7.4~11 11~14.7 14.8~18.4 18.5~22
22~29.5 车床
60~-80 70~90 ー. 70~105 95~130 110-145
150~190
022 140-165
230 升降台铣床
50~50
60~95 75~100 90~105
100~115 06~09
外圆磨床
50~60 55~70 70~85 75~50 75~100 90~100 105
105 （2）主轴内孔直径d的确定
很多机床的主轴是空心的，内孔直径与其用途有关，如车床主轴内孔用来通过棒料或安 装送夹料机构；铣床主轴内孔可通过拉杆来拉紧刀杆等，为不过多地削弱主轴的刚度，铣床 主轴孔径d可比刀具拉杆直径大5～10mm。
主轴内孔直径在一定范围内对主轴刚度影响很小，若超出此范围则能使主轴刚度急剧下 降。由材料力学可知，刚度K正比于截面惯性距1，它与直径之间有下列关系，即
Ku_Io_m(D-d)/64
-1-(5)
(2-6) KT
πD'/64
式中 Ko，I0—空心主轴的刚度和截面惯性矩；
K，1—实心主轴的刚度和截面惯性矩。
一般，ε≤0.7对刚度影响不大；若e＞0.7，将使刚度急剧下降。 （3）主轴前端悬伸量a的确定
主轴前端悬伸量a是指主轴前端面到前轴承径向支反力作用中点（或前径向支承中点） 的距离。它主要取决于主轴端部的结构、前支承轴承配置和密封装置的形式和尺寸，由结构 设计确定。由于前端悬伸量对主轴部件的刚度、抗振性的影响很大，因此在满足结构要求的 前提下，设计时应尽量缩短该悬伸量。
（4）主轴主要支承跨距L的确定
合理确定主轴主要支承间的跨距L，是获得主轴部件最大静刚度的重要条件之一。支承 跨距过小，主轴的弯曲变形固然较小，但因支承变形引起主轴前轴端的位移量增大；反之， 支承跨距过大，支承变形引起主轴前轴端的位移量尽管减小了，但主轴的弯曲变形增大，也 会引起主轴前轴端较大的位移。因此存在一个最佳跨距L。，在该跨距时，因主轴弯曲变形 和支承变形引起主轴前轴端的总位移量为最小。一般取L。＝（2～3.5）a。但是在实际结构设 计时，由于结构上的原因，以及支承刚度因磨损会不断降低，主轴主要支承间的实际跨距L 36


往往大于上述最佳跨距Lo。
2.3.4 主传动系统机械结构
数控铣床主传动系统的机械结构主要是主轴部件的结构，主轴部件既要满足精加工时精 度较高的要求，又要具备粗加工时高效切削的能力。因此在旋转精度、刚度、抗振性和热变 形等方面，都有很高的要求。在局部结构上，一般数控铣床的主轴部件与其他高效、精密自 动化机床没有多大区别，但对于具有自动换刀功能的数控机床，其主轴部件除主轴、主轴轴 承和传动件等一般组成部分外，还有刀具自动装卸及吹屑装置、主轴准停装置等。
（1）主轴的支承
目前数控铣床主轴轴承配置的主要形式有3种，如图2—17所示。 ①前、后支承采用不同轴承。图2—17（a）所
示为数控机床前支承采用双列短圆柱滚子轴承和60° 角接触双列向心推力球轴承，后支承采用成对向心 推力球轴承。此种结构普遍应用于各种数控机床， 其综合刚度高，可以满足强力切削要求。
②前支承采用多个高精度向心推力球轴承，图
(b) 2—17（b）所示为前支承采用多个高精度向心推力球
轴承，这种配置具有良好的高速性能，但它的承载 能力较小，适用于高速轻载和精密数控机床。
③前、后支承采用单列和双列圆锥滚子轴承。
(c) 图2—17（c）所示为前支承采用双列圆锥滚子轴承，
图2—17 主轴的支承 后支承为单列圆锥滚子轴承，其径向和轴向刚度很
高，能承受重载荷。但这种结构限制了主轴最高转速，因此适用于中等精度、低速、重载数 控机床。
（2）刀具自动装卸及切屑清除装置
主轴组件除具有较高的精度和刚度外，还带有刀具自动装卸装置和主轴孔内的切屑清除 装置，如图2—18所示，主轴前端有7：24的锥孔，用于装夹锥柄刀具。端面键13既作刀具 定位用，又可通过它传递转矩。为了实现刀具的自动装卸，主轴内设有刀具自动夹紧装置。 从图中可以看出，该机床是由拉紧机构拉紧锥柄刀夹尾端的轴颈来实现刀夹的定位及夹紧 的。夹紧刀夹时，液压缸上腔接通回油，弹簧11推活塞6上移，处于图示位置，拉杆4在 碟形弹簧5的作用下向上移动。由于此时装在拉杆前端径向孔中的4个钢球12进入主轴孔 中直径较小的d2处［见图2—18（b）］，被迫径向收拢而卡进拉钉2的环形凹槽内，因而刀杆 被拉杆拉紧，依靠摩擦力紧固在主轴上，换刀前需将刀夹松开时，压力油进入液压缸上腔， 活塞6推动拉杆4向下移动，碟形弹簧被压缩；当钢球12随拉杆一起下移至进入主轴孔中 直径较大的d1处时，它就不再能约束拉钉的头部，紧接着拉杆前端内孔的台肩端面碰到拉 钉，把刀夹顶松，此时行程开关10发出信号，换刀机械手随即将刀夹取下。与此同时，压 缩空气由管接头9经活塞和拉杆的中心通孔吹入主轴装刀孔内，把切屑或脏物清除干净，以 保证刀具的装夹精度。机械手把新刀装上主轴后，液压缸7接通回油，碟形弹簧又拉紧刀 夹。刀夹拉紧后，行程开关8发出信号。
自动清除主轴孔中的切屑和尘埃是换刀操作中的一个不容忽视的问题。如果在主轴锥孔
37 

图2—18 数控铣镗床主轴部件
1一刀架：2—拉钉：3一主轴：4一拉杆；5一碟形弹簧； 6—活塞：7一液压缸；8，10—行程开关：9—压缩空
气管接头：11—弹簧；12—钢球；13—端面键
中掉进了切屑或其他污物，在拉紧刀杆时，主轴锥孔表面和刀杆的锥柄就会被划伤，使刀杆 发生偏斜，破坏刀具的正确定位，影响加工零件的精度，甚至使零件报废。为了保证主轴锥 孔的清洁，常用压缩空气吹屑。图2—18（a）中活塞6的心部钻有压缩空气通道，当活塞向 下移动时，压缩空气经拉杆4吹出，将锥孔清理干净。喷气小孔设计有合理的喷射角度，并 均匀分布，以提高吹屑效果。
（3）主轴准停装置
在数控镗床、数控铣床以及镗铣为主的加工中心上，由于需要进行自动换刀，要求主轴 每次停在一个固定的准确位置上，以保证换刀时主轴上的端面键能对准刀夹上的键槽，同时 使每次装刀时刀夹与主轴的相对位置不变，提高刀具的重复安装精度，从而提高孔加工时孔 径的一致性。准停装置分机械式和电气式两种。机械准停装置比较准确可靠，但结构较复 杂。现代的数控铣床一般都采用电气式主轴准停装置，利用磁力传感器检测定向。只要数控 38


系统发出指令信号，主轴就可以准确地定向。其装置结构如 图2-19所示。
在主轴上安装的永久磁铁4与主轴一起旋转，在距离永 久磁铁4旋转轨迹外1～2mm处固定有一个磁传感器5，当铣 床主轴需要停车换刀时，数控装置发出主轴停转的指令，主 轴电动机3立即降速，使主轴以很低的转速回转，当永久磁 铁4对准磁传感器5时，磁传感器发出准停信号，此信号经放 大后，由定向电路使电动机准确地停止在规定的周向位置上。 这种准停装置机械结构简单，发磁体与磁传感器间没有接触 摩擦，准停的定位精度可达±1°，能满足一般换刀要求，而且 定向时间短，可靠性较高。
2.3.5 高速主轴单元
图2—19 主轴准停装置结构
1—主轴：2—同步带；3—主轴电动 机床的高速化是机床的发展趋势。目前的高速机床和虚
机：4—水久磁铁：5—磁传感器 拟轴机床均为机床突破性的重大变革，进入20世纪90年代以
来，高速加工技术已开始进入工业应用阶段，并已取得了显著的技术经济效益。 超高速加工具有如下优点。
①随着切削速度的提高，切削力下降，切除单位材料的能耗低，加工时间大幅度缩短， 所以切削效率高。
②加工表面质量好，精度高，可作为机械加工的最终工序。
③零件变形小，切削产生的切削热绝大部分被切屑带走，基本不产生热量，减小温升。 ④刀具寿命长，刀具磨损的增长速度低于切削效率提高速度。
⑤在高速加工范围内，机床的激振频率范围远离工艺系统的固有频率范围，振动小， 避免了共振。
⑥由于直接传动，省去了电动机至主轴间的传动链，消除了传动误差。
高速、超高速加工的关键技术及其相关技术的研究，已成为国内外重要的研究领域之 一、其相关技术主要包括机床、刀具、工件、工艺等，如刀具的材料、结构、刀刃形状：工 件的材料、定位夹紧、装卸等；工艺中的CAD／CAM、NC编程、加工参数等；机床的基本 结构、高速主轴、刀杆与安装、CNC控制、换刀装置，温控系统、润滑与冷却系统和安全 防护。这诸多相关技术中，关键技术是机床中的高速主轴组件的设计。本节主要讨论高速主 轴组件设计的要点。
高速主轴单元是高速切削机床最重要的部件，也是实现高速和超高速加工的最关键技术 之一。要求动平衡性高，刚性好，回转精度高，有良好的热稳定性，能传递足够的力矩和功 率，能承受高的离心力，带有准确的测温装置和高效的冷却装置。
高速主轴单元的类型主要有电主轴和气动主轴。气动主轴目前的研究主要是应用于精密 加工，功率较小，其最高转速为150000r／min，输出功率仅30W左右。
（1）高速电主轴的结构
高速主轴在结构上几乎全部是交流伺服电机直接驱动的集成化结构，取消齿轮变速机 构，并配备有强力的冷却和润滑系统。集成电机主轴的特点是振动小，噪声低，体积紧凑。 集成主轴有两种构成方式：一种是通过联轴器把电机与主轴直接连接；另一种则是把电机转
39 

子与主轴做成一体，即将无壳电机的空心转子用压配合的形式直接装在机床主轴上，带有冷 却套的定子则安装在主轴单元的壳体中，形成内装式电机主轴，这种电机与机床主轴“合二 为一”的传动结构形式，把机床主传动链的长度缩短为零，实现了机床的“零传动”，具有 结构紧凑，易于平衡、传动效率高等特点，其主轴转速已可以达到每分儿万转到几十万转， 正在逐渐向高速、大功率方向发展，
图2—20所示为用于立式加工中心的高速电主轴的组成，由于高速电主轴对轴上零件的 动平衡要求很高，因此，轴承的定位元件与主轴不宜采用螺纹连接，电机转子与主轴也不宜 采用键连接，而普遍采用可拆的阶梯过盈连接，
图1—20 高速电主轴的组成
1一的长：2电机定子：3电转子，一油
电主轴的基本参数和主要规格包括套简直径、最高转速，输出功率、转矩和刀具接口 等，其中，套简直径为电主轴的主要参数，日前，国内外专业的电主轴制造厂已可供应几百 种规格的电主轴，其套简直径从32～320mm，转速从10000～150000r／min，功率从0.5～ 80kW，转矩从0.1-300N·m．
国外高速主轴单元的发展较快，中等规格加工中心的主轴转速已普遍达到10000r／ min，甚至更高，美国福特汽车公司推出的HVM800卧式加工中心主轴单元采用液体动， 静压轴承最高转速为15000r／min：德国GMN公司的磁浮轴承主轴单元的转速最高达 100000r／min以上：瑞士 Mikron公司采用的电主轴具有先进的矢量式闭环控制、动平衡 较好的主轴结构、油雾润滑的混合陶瓷轴示，可以随室温调整的温度控制系统，以确保主轴 在全部工作时间内温度恒定，现在国内10000～15000r／min的立式加工中心和18000r／min 的卧式加工中心已开发成功并投放市场，生产的高速数字化仿形铣床最高转速达到了 40000r/min。
（2）高性能的CNC控制系统
用于高速加工的CNC控制系统必须具有很高的运算速度和运算精度，以及快速响应的 伺服控制，以满足高速及复杂型腔的加工要求，为此，许多高速切削机床的CNC控制系统 采用多个32bit甚至64bitCPU，同时配置功能强大的计算处理软件，如几何补偿软件已被 应用于高速CNC控制系统。当前的CNC控制系统具有加速预插补、前馈控制、钟形加减 速、精确矢量补偿和最佳拐角减速控制等功能，使工件加工质量在高速切削时得到明显改 善，相应地，伺服系统则发展为数字化、智能化和软件化，使伺服系统与CNC控制系统在 A／D—D／A转换中不会有丢失或延迟现象，尤其是全数字交流伺服电动机和控制技术已得到 广泛应用，该控制技术的主要特点为具有优异的动力学特征、无漂移、极高的轮廓精度，从 而保证了高进给速度加工的要求。
40 

（3）冷却润滑技术的研究
过去加工中心机床主轴轴承大都采用油脂润滑方式，为了适应主轴转速向更高速化发展 的需要，新的润滑冷却方式相继开发出来，下面介绍为减小轴承温升，进而减小轴承内外圈 的温差，以及为解决高速主轴轴承滚道处进油困难所开发的几种润滑冷却方式。
①油气润滑方式 这种润滑方式不同于油雾润滑方式，油气润滑是用压缩空气把小油 滴送进轴承空隙中，油量大小可达最佳值，压缩空气有散热作用，润滑油可回收，不污染周 围空气，图2—21是油气润滑原理。
定时■ 日
过滤器 气间 ）（节流阀
抽温白
动控制箱 油箱
油
箱 排油液压泵
给油液压泵 注油器
000000 混合室
塑料管道
4 流量
富■哲 ■日：
⑩流量计 图2—21 油气润滑原理
图2—22 喷注润滑系统原理
根据轴承供油量的要求，定时器的循环时间可从1～99min定时，二位二通气阀每定时 开通一次，压缩空气进入注油器，把少量油带入混合室，经节流阀的压缩空气，经混合室， 把油带进塑料管道内，油液沿管道壁被风吹进轴承内，此时，油呈小油滴状。
②喷注润滑方式 这是最近开始采用的新型润滑方式，其原理如图2—22所示。它用较 大流量的恒温油（每个轴承3～4L／min）喷注到主轴轴承，以达到冷却润滑的目的。回油则 不是自然回流，而是用两台排油液压泵强制排油。
（4）高速精密轴承
高速精密轴承是支承主轴转速高速化的关键技术，其性能好坏将直接影响主轴单元的工 作性能，随着速度的提高，轴承的温度升高，振动和噪声增大，寿命减少。因此，提高主轴 转速的前提是需要性能优异的高速主轴轴承。
目前，高速主轴支承用的高速轴承有接触式和非接触式轴承两大类。接触式轴承由于存 在金属摩擦，因此摩擦因数大，允许最高转速低，保持接触式轴承长期高速运转的技术措施 是预加载荷的自动补偿和良好润滑。目前，实施预加载荷自动补偿的方法之一是采用液压补 偿系统，通过检测高速主轴运动特性的变化可确定预加载荷的大小，并通过后轴承的轴向移 动保持预加载荷的最佳值。目前用于支承高速主轴的接触式轴承有精密角接触球轴承。非接 触式的流体轴承，其摩擦仅与流体本身的摩擦因数有关。由于流体摩擦因数很小，因而可达 到最高的允许转速。目前，用于支承高速主轴的非接触轴承有空气轴承，液体动、静压轴承 和磁悬浮轴承。
磁悬浮轴承高速性能好、精度高，易实现实时诊断和在线监控，转速可达45000r／min， 功率达20kW，可进行电子控制，回转精度高达0.2μm，是超高速电主轴理想的支承元件。 

但其价格较高，控制系统复杂，制造成本高，发热问题难以解决，因而还无法在高速主轴单 元上推广应用。
液体动、静压轴承采用流体动、静力相结合的办法，使主轴在油膜支撑中旋转，具有径 向和轴向跳动小、刚性好、阻尼特性好、寿命长的优点，功率达37.5kW，转速可达 20000r／min，主要用在低速重载场合，但其无通用性，维护保养较困难。
空气轴承径向刚度低并有冲击，但高速性能好，一般用于超高速、轻载、精密主轴。空 气轴承主轴也已经能够在18.8kW的功率下达到10000～22000r／min的转速，在9.1kW的 功率下达到30000～55000r／min的转速。
角接触球轴承在dn值为2.0x10°以下的高速主轴单元中应用，无论是速度极限、承载 能力、刚度、精度等各方面均能很好地满足要求，其标准化程度高，价格低廉。影响角接触 球轴承高速性能的主要原因是高速下作用在滚珠上的离心力和陀螺力矩增大，离心力增大会 增加滚珠与滚道间的摩擦，而陀螺力矩增大则会使滚珠与滚道间产生滑动摩擦，使轴承摩擦 发热加剧，因而降低轴承的寿命。为了提高轴承的高速性能，还可通过合理润滑、采用角接 触陶瓷球轴承、合理的预紧力控制、对轴承滚道进行涂层处理等方法来提高性能。由于氮化 硅（SiN4）陶瓷材料的密度只有轴承钢的40％，线胀系数只有轴承钢的25％，弹性模量是 轴承钢的1.5倍，硬度为轴承钢的2.3倍，并且耐高温、不导电、不导磁、热导率低。因 此，用Si，N1陶瓷作为滚珠材料的小直径密珠轴承，与同规格、同一精度等级的钢质滚珠轴 承相比，其速度可提高60％，温升可降低35％～60％，寿命可提高3～6倍，可不用润滑或 用油脂润滑。采用这种轴承的主轴，功率可达80kW，转速高达150000r／min，目前国外绝 大多数高速机床主轴均采用这种轴承。
（5）电主轴的动平衡
由于不平衡质量是以主轴转速的二次方影响主轴动态性能的，所以主轴的转速越高，主 轴不平衡质量引起的动态问题越严重。对电主轴来说，由于电机转子直接过盈固定在主轴 上，增加了主轴的转动质量，使主轴的极限频率下降，因此，超高速电主轴的动平衡精度应 严格要求，一般应达到G1～G0.4级（G＝ew，其中e为偏心量，ω为角速度），为此，必须 进行电主轴装配后的整体精确动平衡，甚至还要设计专门的自动平衡系统来实现电主轴的在 线动平衡。
在电主轴的动平衡中，刀具的定位夹紧及平衡也是主要的影响因素之一，回转刀具的刀 头距回转中心的偏差，是主轴高速回转时产生振动的原因，同时导致刀具寿命缩短。因此， 必须对包括刀具和刀夹的旋转总成充分地进行平衡，以消除有害的动态不平衡力，避免高速 下颤振和振动。
（6）刀具的夹紧
分析与实验表明，高速主轴的前端由于离心力的作用会使主轴膨胀，如30号锥度的主 轴前端在30000r／min时，膨胀量为4～5μm，然而标准的7／24圆锥实心刀柄不会有这样大 的膨胀量，这样，就明呈地减少了主轴与刀具的接触面积，从而降低了刀柄与主轴锥孔的接 触刚度，而且刀具的轴向位置也会发生变化，很不安全。于是传统的长锥柄刀夹已不适用于 超高速加工。解决这个问题的办法有两种。
①采用主轴锥孔与主轴端部同时接触的双定位刀夹，使端面定位面具有很大的摩擦， 以防止主轴膨胀，这是一种有效的措施。为使刀具在刀柄上夹紧，可采用流体压力夹紧的方 式。这样既可提高夹紧刚度，又可保证刀柄和刀具高度的同心度。
42 

利用短锥（1：10刀锥柄），且锥柄部分采用薄壁结构，刀柄利用短锥和端面同时实现 轴向定位，这种结构对主轴和刀柄连接处的公差带要求特别严格，仅为2～6μm，由于短锥 严格的公差和具有弹性的薄壁，在拉杆轴向拉力的作用下，短锥会产生一定的收缩，所以刀 柄的短锥和法兰端面较容易与主轴相应的结合面紧密接触，实现锥面与端面同时定位，因而 具有很高的连接精度和刚度。当主轴高速旋转时，尽管主轴轴端会产生一定程度的扩张，使 短锥的收缩得到部分伸张，但是短锥与主轴锥孔仍保持较好的接触，主轴转速对连接性能影 响很小。
②直接夹紧刀具的方式，即通过采用主轴锥孔内用拉杆操作弹簧夹头的夹紧方式，从 而省去刀夹。直接夹紧最适合于直径小于10mm，且需要较小功率的刀柄直径的超高速切削 加工。
（7）轴上零件的连接
在超高速电主轴上，由于转速的提高，因此对轴上零件的动平衡要求非常高，轴承的定 位元件与主轴不宜采用螺纹连接，电机转子与主轴也不宜采用键连接，而普遍采用可拆的阶 梯过盈连接。一般用热套法进行安装，用注入压力油的方法进行拆卸。
在确定阶梯套基本过盈量时，除了根据所受载荷计算需要过盈量外，还需考虑以下因 素对过盈连接强度的影响。
①配合表面的粗糙度。
②连接件的工作温度与装配温度之差，以及主轴与过盈套材料线胀系数之差。
③主轴高速旋转时，过盈套所受到的离心力会引起过盈套内孔的扩张，导致过盈量减 少，当主轴材料和过盈套的材料泊松比、弹性模量和密度相差不大时，过盈量的修正值与主 轴转速的平方成正比。
④重复装卸会引起过盈量减小。
⑤结合面形位公差对过盈量的影响等。
阶梯过盈套过盈量的实现有两种方式：利用公差配合来实现，根据基本过盈量的计算值 和配合面的公称尺寸，查有关手册图表，得出相应的过盈配合；利用阶梯配合面的公称尺寸 的差值来实现，并选用H4／h4的过渡配合，这种方法容易控制和保证配合的实际过盈量， 适用于高精度的零件配合和进行标准化和系列化生产。
2.4 数控铣床进给传动系统
数控铣床通常对进给系统的要求有三点，即传动精度、系统的稳定性和动态响应特性 （灵敏度）。传动精度包括动态误差、稳态误差和静态误差，即伺服系统的输入量与驱动装置 实际位移量的精确程度。系统的稳定性是指系统在启动状态或受外界干扰作用下，经过几次 衰减振荡后，能迅速地稳定在新的或原来的平衡状态的能力。动态响应特性是指系统的响应 时间及驱动装置的加速能力。为确保数控铣床进给系统的传动精度、系统的稳定性和动态响 应特性，对进给驱动装置机械结构总的要求是消除间隙、减少摩擦、减少运动惯量、提高部 件精度和刚度。
2.4.1 进给传动系统的特点
数控铣床的进给运动是数字控制的直接对象，不论是点位控制还是轮廓控制，工件的最 

后坐标精度和轮廓精度都受进给运动的传动精度、灵敏度和稳定性的影响。为此，数控铣床 的进给系统一般具有以下特点。
（1）摩擦阻力小
为了提高数控铣床进给系统的快速响应性能和运动精度，必须减小运动件间的摩擦阻力 和动、静摩擦力之差。为满足上述要求，在数控铣床进给系统中，普遍采用滚珠丝杠螺母 副、静压丝杠螺母副、滚动导轨、静压导轨和塑料导轨，与此同时，各运动部件还考虑有适 当的阻尼，以保证系统的稳定性。
（2）传动精度和刚度高
进给传动系统的传动精度和刚度，从机械结构方面考虑主要取决于传动间隙和丝杠螺母 副、蜗轮蜗杆副及其支承结构的精度和刚度，传动间隙主要来自传动齿轮副、蜗杆副、丝杠 螺母副及其支承部件之间，因此进给传动系统广泛采取施加预紧力或其他消除间隙的措施。 缩短传动链和在传动链中设置减速齿轮，也可提高传动精度，加大丝杠直径，以及对丝杠螺 母副、支承部件、丝杠本身施加预紧力是提高传动刚度的有效措施。
（3）运动部件惯量小
运动部件的惯量对伺服机构的启动和制动特性都有影响，尤其是处于高速运转的零部 件。因此，在满足部件强度和刚度的前提下，尽可能减小运动部件的质量、减小旋转零件的 直径和质量，以降低其惯量。
2.4.2 滚珠丝杠螺母副
滚珠丝杠螺母副是回转运动与直线运动相互转换的一种新型传动装置，在数控铣床上得 到了广泛的应用，它的结构特点是在具有螺旋槽的丝杠螺母间装有滚珠，使丝杠与螺母之间 的运动成为滚动，以减少摩擦。
（1）滚珠丝杠螺母副的工作原理
滚珠丝杠螺母副的工作原理如图2—23所示。图中丝杠和螺母上都加工有圆弧形的螺旋 外压道
槽，它们对合起来就形成了螺旋滚道，在滚道内装有滚 珠，当丝杠与螺母相对运动时，滚珠沿螺旋槽向前滚动， 在丝杠上滚过数圈以后通过回程引导装置，逐个地又滚 回到丝杠与螺母之间，构成一个闭合的回路。
（2）滚珠的循环方式
滚珠循环方式分为外循环和内循环两种方式。 内■道
①外循环 滚珠在循环过程结束后，通过螺母外表 图2—23 滚珠丝杠螺母副工作原理 面上的螺旋槽或插管返回丝杠间重新进入循环。图2—24 （a）所示为插管式，它用弯管作为返回管道，这种形式结构工艺性好，但由于管道突出于螺 母体外，径向尺寸较大，图2—24（b）所示为螺旋槽式，它是在螺母外圆上铣出螺旋槽，槽 的两端钻出通孔并与螺纹滚道相切，形成返回通道，这种形式的结构比插管式结构径向尺寸 小，但制造工艺较复杂。
②内循环 这种循环靠螺母上安装的反向器接通相邻滚道，循环过程中滚珠始终与丝 杠保持接触，如图2—25所示，滚珠从螺纹滚道进入反向器，借助反向器迫使滚珠越过丝杠 牙顶进入相邻滚道，实现循环。一般一个螺母上装有2～4个反向器，反向器沿螺母圆周等 分分布。其优点是径向尺寸紧凑，刚性好，因其返回滚道较短，摩擦损失小。缺点是反向器 44


（a）插管式
（b）螺旋槽式
图2—24 外循环滚珠丝杠 加工困难。
（3）滚珠丝杠螺母副轴向间隙的调整
滚珠丝杠的传动间隙是轴向间隙。轴向间
反向器 隙通常是指丝杠和螺母无相对转动时，丝杠和
螺母之间的最大轴向审动量。除了结构本身所 有的游隙之外，还包括施加轴向载荷后产生弹 性变形所造成的轴向窜动量。为了保证反向传 动精度和轴向刚度，必须消除轴向间隙。用预 紧方法消除间隙时应注意，预加载荷能够有效
月 地减少弹性变形所带来的轴向位移，但预紧力
不宜过大，过大的预紧载荷将增加摩擦力，使
反向器 传动效率降低，缩短丝杠的使用寿命。所以，
C 一般需要经过多次调整才能保证机床在最大轴
向载荷下既消除了间隙又能灵活运转，
图2-25
内循环滚珠丝杠 消除间隙的方法除了少数用微量过盈滚珠
的单螺母消除间隙外，常用的方法是用双螺母消除丝杠、螺母间隙。
①垫片调隙式 图2—26是双螺母垫片调 隙式结构，通过调整垫片的厚度使左右螺母产 生轴向位移，就可达到消除间隙和产生预紧力 的作用。这种方法结构简单，刚性好，装卸方 便、可靠，但缺点是调整费时，很难在一次修 磨中调整完成，调整精度不高，仅适用于一般 精度的数控机床。
图2—26 双螺母垫片调隙式结构
②齿差调隙式 图2—27是双螺母齿差调 1—丝杠：2.4一螺母：3一螺母座。5一垫片，6—螺钉 隙式结构，在两个螺母2和5的凸缘上各制有
45 

一个圆柱齿轮，两个齿轮的齿数只相差一个
齿，即＝：—z＝1。两个内齿圈1和4与外 齿轮齿数分别相同，并用螺钉和销钉固定在 螺母座3的两端。调整时先将内齿圈取下， 根据间隙的大小调整两个螺母2、5分别向 相同的方向转过一个或多个齿，使两个螺母 在轴向移近了相应的距离，达到调整间隙和 预紧的目的。
图2—27 双螺母齿差调隙式结构
例如，当z1＝99、z2＝100、滚珠丝杠 1.4—内齿图：2.5—螺号：3—螺号座；6—丝杠
导程t＝10mm时，如果两个螺母向相同方 向各转过一个齿时，其相对轴向位移量为s＝t／（ziz）＝10／（100x99）≈0.001mm，若间隙量 为0.005mm，则相应的两螺母沿同方向转过5个齿即可消除。
齿差调隙式的结构较为复杂，尺寸较大，但是调整方便，可获得精确的调整量，预紧可 靠，不会松动，适用于高精度传动。
③螺纹调隙式 图2—28是双螺母螺纹调隙式结构，用键限制螺母在螺母座内的转动。 调整时，拧动圆螺母将螺母沿轴向移动一定
距离，在消除间隙之后用另一圆螺母将其锁 紧。这种调整方法的结构简单紧凑，调整方 便，但调整精度较差。
（4）滚珠丝杠螺母的计算
滚珠丝杠螺母副的承载能力用额定负荷 表示，其动、静载强度计算原则与滚动轴承 相类似，一般根据额定动负荷选用滚珠丝杠 副，只有当n≤10r／min时，按额定静负荷选
图2—28 双螺母螺纹调隙式结构
1.2一圆螺号：3一丝杠：4一垫片：5—螺号：6—螺母座 用。对于细长且承受压缩的滚珠丝杠副需作
压杆稳定性计算；对于高速、支承距大的滚珠丝杠副需要作临界转速的校核；对于精度要求 高的传动要进行刚度验算，转动惯量校核；对闭环控制系统还要进行谐振频率的验算。
在选择数控铣床滚珠丝杠螺母的过程中，一般首先根据动载强度计算或静载强度计算来 确定其尺寸规格，然后对其刚度和稳定性进行校核计算。
①动载强度计算 额定动负荷F：是指当一批规格相同的滚珠丝杠螺母副，在一负荷力 的作用下，运转10r后，有90％的螺旋副（指螺纹滚道和滚动体）不产生疲劳损伤时所能 承受的最大轴向载荷。
当转速n＞10r／min时，滚珠丝杠螺母的主要破坏形式是工作表面的疲劳点蚀，因此要 进行动载强度计算，其计算动载荷C。应不大于滚珠丝杠螺母副的额定动负荷，即
C=VTfafuF■≤F,(N)
(2-7) 式中 fa—动载荷系数，见表2—2；
u—硬度系数，见表2—3； F■—当量动负荷，N：
F.—滚珠丝杠螺母副的额定动负荷，N： 

T—寿命，以10°r为1个单位。
表2—2 动载荷系数fa 载荷性质
f. 平稳，轻微冲击
1.0-1.2 中等冲击
1.2-1.5 较大冲击和振动
1.5~2.5 60mT
Nx10
(2-8) 式中 T—使用寿命，h：
N-循环次数：
—滚珠丝杠的当量转速，r／min.
Fm+Fn+··· Fm=N
(2-9)
·+
++ Meg
(2-10) ++
式中 F1，F：滚珠丝杠螺母副所承受的轴向工作载荷，N：
m，与Fi，F2，一相对应的转速，r／min；
，た，···—与m，，·相对应的工作时间，min。 当工作载荷单调连续或周期性单调连续变化时，则
2Fm+Fmn Fe 3
(2-11) 式中 Fmx，Fmin—分别代表最大和最小工作载荷，N.
②静载强度计算 当转速n≤10r／min时，滚珠丝杠螺母的主要破坏形式为滚珠接触面 上产生较大塑性变形，影响正常工作。为此应进行静载强度计算，最大计算静载荷Foe为
Fo=fafFm(N)≤Fo
(2-12) 式中 f—硬度系数，见表2—3；
F■—滚珠丝杠螺母副的额定静负荷，N。
表2—3 硬度系数fu、名 硬度（HRC）
2458
55
52.5
50 47.5 45
40 1.0
1.11 1.35 1.56 1.92 2.40
3.85 上
1.67 2.10 2.64
4.50 /
1.0 1.11
1.40
③压杆稳定性 细长丝杠在受压缩载荷时，不会发生失稳的最大压缩载荷为临界载 荷F
Pa=g.4x10m/(N)
(2-13) d2=do-1.2Dw(m)
式中 do—丝杠公称直径，m：
Dw—滚珠丝杠直径，m 

L0—丝杠最大受压长度，m
f—丝杠支承方式系数（当一端固定，一端自由时，五—0.25，当一端固定，一
端游动时，五—2.0；两端固定时，＝4.0），
④临界转速 对于高速长丝杠有可能发生共振，需验算其临界转速，不会发生共振的 最高转速为临界转速Ne
-9910
(r/min)
(2-14) 世
ddo-1.2Dw(m) 式中L—临界转速计算长度，m
f：丝杠支承方式系数（当一端固定，一端自由时，—1.875；当一端固定，一
端游动时，子：—3.927，两端固定时，f2—4，730）。
2.4.3 伺服进给系统降速传动设计
为了提高传动效率和传动刚度，何眼电动机与滚珠丝杠之间应尽量采用直联传动，为了 减少伺服电动机的输出转矩或运动匹配，有时也采用降速传动，由齿轮传动或同步齿形带传 动完成，并尽量消除齿轮传动的齿侧间隙。
减速传动比的计算介绍如下。
①开环系统 开环系统的减速传动比；主要取决于机床坐标轴的脉冲当量δ（mm）、步 进电动机的步距角φ（°）和滚珠丝的导程（mm），即
-P
(2-15) 3608
②闭环和半闭环系统 闭环和半闭环系统的降速比／主要取决于伺服电动机的最高额 定转速＃msx（r／min）、机床的最高进给速度（mm／min）和滚珠丝杠的导程s （mm），即
(2-16) 2.4.4 传动齿轮间隙消除机构
由于数控机床进给系统的传动齿轮副存在间隙，在开环系统中会造成进给运动的位移值 滞后于指令值；反向时，会出现反向死区，影响加工精度，在闭环系统中，由于有反馈作 用，滞后量虽可得到补偿，但反向时会使何眼系统产生振荡而不稳定，为了提高数控机床伺 服系统的性能，可采用下列方法减小或消除齿轮传动间隙。
（1）刚性调整法
它是一种调整后齿侧间隙不能自动补偿的调整方法。因此，齿轮的齿距公差及齿厚要严 格控制，否则传动的灵活性会受到影响。这种调整方法结构比较简单，且有较好的传动 刚度。
图2—29所示为偏心轴套式调整间隙结构，电动机2通过偏心轴套1安装在壳体上，小 齿轮装在偏心轴套1上，可以通过偏心轴套1调整主动齿轮和从动齿轮之间的中心距来消除 齿轮传动副的齿侧间隙。
48 

图2—29 偏心轴套式调整间隙机构
图2—30 轴向垫片调整结构 1—偏心轴套：2—电动机
1、2—齿轮：3一垫片
图2—30所示为用一个带有锥度的齿轮来消除间隙的结构，一对啮合着的圆柱齿轮，若 它们的节圆直径沿着齿厚方向制成一个较小的锥度，只要改变垫片3的厚度就能改变齿轮2 和齿轮1的轴向相对位置，从而消除了齿侧间隙。
（2）柔性调整法
它是指调整之后齿侧间隙仍可自动补偿的调整方法，这种方法一般都采用调整压力弹簧 的压力来消除齿侧间隙，并在齿轮的齿厚和齿距有变化的情况下，也能保持无间隙啮合，但 这种结构较复杂，轴向尺寸大，传动刚度低，同时，传动平稳性也差。
图2—31所示为轴向压簧调整，两个薄片斜齿轮1和2用键滑套在轴5上，用螺母4来 调节压力弹簧3的轴向压力，使斜齿轮1和2的左，右齿面分别与宽斜齿轮6齿槽的左右侧 面贴紧，
图2—32所示为周向弹簧调整，两个齿数相同的薄片齿轮1和2与另一个宽齿轮相啮合， 齿轮1空套在齿轮2上，可以相对回转。每个齿轮端面分别装有凸耳3和8，齿轮1的端面
图2—31 轴向压簧调整
图2—32 周向弹簧调整 1.2—斜齿轮：3—压力弹簧；4一螺母；
1.2—齿轮：3，8—凸耳；4—弹簧； 5一轴：6—宽斜西轮
5，6一旋转螺母：7—调节螺钉 

还有4个通孔，凸耳8可以从中穿过，弹簧4分别钩在调节螺钉7和凸耳3上。旋转螺母5 和6可以调整弹簧4的拉力，弹簧的拉力可以使薄片齿轮错位，即两片薄齿轮的左、右齿面 分别与宽齿轮齿槽的右、左贴紧，消除了齿侧间隙。
2.4.5 直线电动机进给系统
直线电动机是指可以直接产生直线运动的电动机，可作为进给驱动系统，如图2—33所 示。其雏形在世界上出现了旋转电动机不久之后就出现了，但受制造技术水平和应用能力的
限制，一直未能作为驱动电动机使用。在常规 的铣床进给系统中，一直采用“旋转电动机＋ 滚珠丝杠”的传动体系。随着近几年来超高速 加工技术的发展，滚珠丝杠机构已不能满足高 速度和高加速度的要求，直线电动机有了用武 之地。特别是大功率电子器件、新型交流变频 调速技术、微型计算机数控技术和现代控制理 论的发展，为直线电动机在高速数控铣床中的 应用提供了条件。
图2-33
直线电动机进给系统外观
（1）直线电动机工作原理简介 1一导载：2一次城；3—初级：4—检测系统
直线电动机的工作原理与旋转电动机相比 并没有本质的区别，可以将其视为旋转电动机沿圆周方向拉开展平的产物。如图2—34所示， 对应于旋转电动机的定子部分，称为直线电动机的初级；对应于旋转电动机的转子部分，称 为直线电动机的次级。当多相交变电流通入多相对称绕组时，就会在直线电动机初级和次级 之间的气隙中产生一个行波磁场，从而使初级和次级之间相对移动。当然，两者之间也存在 一个垂直力，可以是吸引力，也可以是推斥力。
次级
初级 （a）旋转电动机
（b）直线电动机
图2—34 旋转电动机展平为直线电动机的过程
直线电动机可以分为直流直线电动机、步进直线电动机和交流直线电动机三大类。在铣 床上主要使用交流直线电动机。
在结构上，可以有图2—35所示的短次级和短初级两种形式。为了减少发热量和降低成 本，高速铣床用直线电动机一般采用图2—35（b）所示的短初级结构。
次级 初级
初级 次级
日
B 8 8 B 8 （a）短次级
（b）短初级 图2-35
直线电动机的形式 50


在励磁方式上，交流直线电动机可以分为永磁（同步）式和感应（异步）式两种。水磁 式直线电动机的次级是一块一块铺设的永久磁钢，其初级是含铁心的三相绕组；感应式直线 电动机的初级和永磁式直线电动机的初级相同，区别是在次级上用不通电的绕组替代永磁式 的水磁铁，且每个绕组中每一匝均是短路的，永磁式直线电动机在单位面积推力、效率、可 控性等方面均优于感应式直线电动机，但其成本高，工艺复杂，而且给机床的安装、使用和 维护带来不便。感应式直线电动机在不通电时是没有磁性的，因此有利于机床的安装、使用 和维护，近年来，其性能不断改进，已接近水磁式直线电动机的水平。
（2）直线电动机的特点
现在的机加工对机床的加工速度和加工精度提出了越来越高的要求，传统的“旋转电动 机＋滚珠丝杠”体系已很难适应这一趋势。使用直线电动机的驱动系统，有以下特点。
①使用直线伺服电动机，电磁力直接作用于运动体（工作台）上，而不用机械连接， 因此没有机械滞后或齿节周期误差，精度完全取决于反馈系统的检测精度；同时也简化了进 给系统结构，提高了传动效率。
②直线电动机上装配全数字伺服系统，可以达到极好的伺服性能，由于电动机和工作 台之间无机械连接件，工作台对位置指令几乎是立即反应（电气时间常数约为1ms），从而 使得跟随误差减至最小而达到较高的精度。而且，在任何速度下都能实现非常平稳的进给 运动。
③直线电动机驱动系统由于无机械零件相互接触，因此无机械磨损，也就不需要定期 维护，也不像滚珠丝杠那样有行程限制，使用多段拼接技术可以满足超长行程机床的要求。 ④旋转电动机必须通过丝杠、齿条等转换机构转换成直线运动，传动环节对精度、刚 度、快速性、稳定性的影响无法避免；而且，这些转换机构在运动中必然会带来噪声，直线 电动机从根本上消除传动环节，故进给系统的精度高，刚度大，快速性、稳定性好，噪声小 或无噪声。
2.4.6 基于并联机构的高速进给系统
常规高速数控铣床总体结构基本上采用工件和刀具沿各自导轨共同运动的方案。一种典 型结构是将工件安装于正交工作台上，让其在XY平面内运动，将主轴部件安装于立柱滑 板上，让其沿Z轴运动，由此实现基本的三坐标进给运动，在这类结构中，由于运动部分 （工件、夹具和工作台等）的总质量比较大，再加上多重导轨所产生的阻力较大，因而要使 机床达到所要求的高进给速度和加速度，必须要
求进给系统驱动电动机具有很大的功率，这既提
何服电动机
主轴电动机 高了机床成本又增加了发热，对机床加工精度也
会造成不利影响，另一个问题是，传统机床结构 是一种串联开链结构，组成环节多，结构复杂，
驱动杆
机果 并且由于存在悬臂部件和环节间的连接间隙，不
容易获得高的总体刚度，因此难以适应高速机床
工件 的要求。
并联（虚拟轴）机床的出现，为解决上述问 题开辟了新的途径。并联机床之所以易于达到高
工作台 的进给速度和加速度，主要得益于它的结构特点。
图2—36 井联机床进给系统的典型结构 

图2—36所示为一种井联机床进给系统的典型结构。该系统主要由6根可伸缩驱动杆组成。6 驱动杆的一端通过铰链固定于基础框架上，另一端通过铰链与机床的主轴单元相连，调节6 驱动杆的长度（这是并联机床的实际可控轴），可使主轴和刀具作6自由度运动，其中包括 沿3个线性虚拟轴X、Y、Z的平移运动和沿3个转动虚拟轴A、B、C的旋转运动。
将并联机床的进给系统与常规机床进行对比，可以发现，这种新型进给系统具有以下适 用于高速加工的优点。
①采用工件固定而由6驱动杆带动电主轴相对于工件作进给运动，可以有较小的质量， 有利于获得高的进给加速度。
②进给机构为空间并联机构，在驱动电动机速度相同的条件下，可以获得比采用串联 结构的常规数控机床更高的进给速度，有利于满足高速、高效加工对进给速度的要求。
③井联结构可将传动与支承功能集成为一体，驱动杆既是机床的传动部件，又兼作主 轴单元的支承部件，这将有效减少工件—机床—刀具链中的诸多环节，从而消除了这些环节带 来的受力变形和热变形，并可减少连接和传动间隙，提高接触刚度，有利于提高机床的综合 精度。
④进给系统的主体为并联闭链系统，消除了常规机床中的悬臂结构，经过合理设计， 可使各驱动杆和有关部件只承受拉力和压力而不受弯曲力矩，因而使机床总体刚度进一步提 高（可比一般数控铣床高5倍左右），如果在传动与控制上处理得当，还可以使新型机床达 到比常规机床更高的加工精度和加工质量。
⑤抛弃了传统的固定导轨的刀具导向方式，机床上不存在沿固定导轨运动的直线和旋 转工作台以及支承工作台所需的其他部件，因此，消除了由于导轨中的摩擦而产生的阻力， 有利于提高进给速度，
⑥刀具相对于工件的进给运动是六根驱动杆（6套何服系统）的共同贡献，面常规机 床的进给运动取决于单个伺服系统，因此基于并联机构的进给系统可以获得更大的驱动力， 有利于提高加工效率。
由于并联进给系统具有上述显著优点，使得由其构成的并联机床正在成为高速、高效、 高柔性加工设备的一个新的发展方向。但是，为了实现任何的坐标运动，牵动电主轴的6根 轴都必须运动，因此计算极其复杂，只有在CNC技术高度发展的今天，这种并联机床的应 用才成为可能。6根杆的伸缩既可以用滚珠丝杠，也可以用直线电动机。由于6根杆的长度 较大，其热变形对机床的加工精度影响比较严重，因此目前这种机床的加工精度还不够高。 此外，其加工的有效空间与机床本身体积的比例也不相称。这种新型机床现在还处于研制和 试验阶段，要被工程技术界接受和在生产上广泛应用，尚需时日，但也不失为一种有发展潜 力的高速进给机构。它的研究、开发和应用不仅对机床技术本身的发展具有重要的理论与实 际意义，而且对制造技术及相关产业的发展将产生深远的影响，因此，必须予以充分重视。 2.5 数控铣床的导轨
2.5.1 数控铣床对导轨的基本要求
侁床上的直线运动部件都是沿着它的床身、立柱、横梁等支承件上的导轨进行运动的， 导轨的作用概括地说是对运动部件起导向和支承作用，导轨的制造精度及精度保持性对机床 52


加工精度有着重要的影响。数控铣床对导轨的主要要求如下。
①导向精度高 导向精度是指机床的动导轨沿支承导轨运动的直线度（对直线运动导 轨）或圆度（对圆周运动导轨），无论空载还是加工，导轨都应具有足够的导向精度，这是 对导轨的基本要求。各种铣床对于导轨本身的精度都有具体的规定或标准，以保证导轨的导 向精度。
②精度保持性好 精度保持性是指导轨能否长期保持原始精度。影响精度保持性的主 要因素是导轨的磨损，此外，还与导轨的结构形式及支承件（如床身）的材料有关。数控铣 床的精度保持性要求比普通机床高，应采用摩擦因数小的滚动导轨、塑料导轨或静压导轨。 ③足够的刚度 机床各运动部件所受的外力，最后都由导轨面来承受。若导轨受力后 变形过大，不仅破坏了导向精度，而且恶化了导轨的工作条件。导轨的刚度主要决定于导轨 类型、结构形式和尺寸大小、导轨与床身的连接方式、导轨材料和表面加工质量等。数控铣 床的导轨截面积通常较大，有时还需要在主导轨外添加辅助导轨来提高刚度。
④良好的摩擦特性 数控铣床导轨的摩擦因数要小，而且动、静摩擦因数应尽量接近， 以减小摩擦阻力和导轨热变形，使运动轻便平稳，低速无爬行。
此外，导轨结构工艺性要好，便于制造和装配，便于检验、调整和维修，而且有合理的 导轨防护和润滑措施等。
2.5.2 数控铣床导轨的类型与特点
导轨按接触面的摩擦性质可以分为滑动导轨、滚动导轨和静压导轨三种，其中，数控铣 床最常用的是镶粘塑料滑动导轨和滚动导轨。
（1）滑动导轨
滑动导轨具有结构简单、制造方便、刚度好、抗振性高等优点，是机床上使用最广泛的 导轨形式。但普通的诗铁—铸铁、铸铁—淬火钢导轨，存在的缺点是静摩擦因数大，而且动摩 擦因数随速度变化面变化，摩擦损失大，低速（1～60mm／min）时易出现爬行现象，降低 了运动部件的定位精度。
通过选用合适的导轨材料和采用相应的热处理及加工方法，可以提高滑动导轨的耐磨性 及改善其摩擦特性。例如，采用优质铸铁、合金耐磨铸铁或镶淬火钢导轨；进行导轨表面滚 轧强化、表面淬硬、涂铬、涂钼工艺处理等。
镶粘塑料导轨不仅可以满足机床对导轨的低摩擦、耐磨、无爬行、高刚度的要求，同时 又具有生产成本低、应用工艺简单、经济效益显著等特点，因此，在数控铣床上得到了广泛 的应用。
镶粘塑料导轨是通过在滑动导轨面上镶粘一层由多种成分复合的塑料导轨软带，来达到 改善导轨性能的目的。这种导轨的共同特点是：摩擦因数小，且动、静摩擦因数差很小，能 防止低速爬行现象；耐磨性、抗撕伤能力强；加工性和化学稳定性好，工艺简单，成本低， 并有良好的自润滑和抗振性。塑料导轨多与铸铁导轨或淬硬钢导轨相配使用。
常用的塑料导轨软带主要有以下几种。
①以聚四氟乙烯（PTFY）为基体，通过添加不同的填充料构成的高分子复合材料。聚 四氟乙烯是现有材料中摩擦因数最小（0.04）的一种，但纯聚四氟乙烯不耐磨，因而需要添 加663青铜粉、石墨、MoS2、铅粉等填充料增加耐磨性。这种导轨软带具有良好的抗磨、 减摩、吸振、消声性能；适用的工作温度范围广（—200～280℃）；动、静摩擦因数小，且
53 

两者之差很小；还可以在干摩擦下应用；并且
导轨宽度 导轨软带
能吸收外界进入导轨面的硬粒，使导轨不致拉 伤和磨损。这种材料常被做成厚度为0.1～ 2.5mm的塑料软带形式，粘接在导轨基面上， 图2—37是镶粘塑料导轨的结构示意图。
②以环氧树脂为基体，加入MoS2，胶体 粘接层厚度 粘接材料
石墨TiO2等制成的抗磨涂层材料。这种涂料附 图2—37 镶粘塑料导轨的结构示意图
着力强，可用涂敷工艺或压注成形工艺涂到预 先加工成锯齿形状的导轨上，涂层厚度为1.5～2.5mm．中国已生产的有环氧树脂耐磨涂料 （MNT），在它与铸铁组成的导轨副中，摩擦因数f＝0.1～0.12，在无润滑油情况下仍有较 好的润滑和防爬行的效果。塑料涂层导轨主要使用在大型和重型机床上。
（2）滚动导轨
滚动导轨是在导轨面之间放置滚珠、滚柱、滚针等滚动体，使导轨面之间的滑动摩擦变 成滚动摩擦。滚动导轨与滑动导轨相比的优点是：灵敏度高，且其动摩擦因数与静摩擦因数 相差甚微，因而运动平稳，低速移动时，不易出现爬行现象：定位精度高，重复定位精度可 达0.2μm；摩擦阻力小，移动轻便，磨损小，精度保持性好，寿命长，但滚动导轨的抗振 性较差，对防护要求较高。
滚动导轨特别适用于机床的工作部件要求移动均匀，运动灵敏及定位精度高的场合，这 是滚动导轨在数控铁床上得到广泛应用的原因。
（3）静压导轨
静压导轨的滑动面之间开有油腔，将一定量的油通过节流输入油腔，形成压力油膜，浮 起运动部件，使导轨工作表面处于纯液体摩擦，不产生磨损，精度保持性好，同时，摩擦因 数也极低（0.0005），使驱动功率大大降低：低速无爬行，承载能力大，刚度好；此外，油 液有吸振作用，抗振性好。其缺点是结构复杂，要有供油系统，油的清洁度要求高。
静压导轨横截面的几何形状一般有V形和矩形两种。采用V形便于导向和回油，采用 矩形便于做成闭式静压导轨。另外，油腔的结构对静压导轨性能影响很大。
2.5.3 滚动导轨
（1）滚动导轨的结构原理
滚动直线导轨副的结构原理如图2—38所示，它是由导轨、滑块、钢球、反向器、密封 端盖及挡板等部分组成。当导轨与滑块作相对运动时，钢球就沿着导轨上经过淬硬并精密磨 削加工面成的4条滚道滚动；在滑块端部，钢球通过反向器反向，进入回珠孔后再返回到滚
图2—38 滚动直线导轨副的结构原理
1—滑块：2—导轨：3一钢球：4—一回珠孔，5一侧密封：6—密封端盖；7—挡板：8—油杯 54
005-0.1 

道，钢球就这样周而复始地进行滚动运动。反向器两端装有防尘密封端盖，可有效地防止灰 尘、屑末进入滑块内部。
（2）滚动导轨的结构形式
根据滚动体的类型，滚动导轨有下列三种结构形式。
①滚珠导轨 这种导轨的承载能力小，刚度低，为了避免在导轨面上压出凹坑而丧失 精度，一般常采用淬火钢制造导轨面，见图2—39。
(4) 图2—39 滚珠导轨
滚珠导轨适用于运动的工作部件质量不大（通常为100～200kg）和切削力不大的机床 上，如工具磨床工作台导轨，磨床的砂轮修整器导轨及仪器的导轨等。
②滚柱导轨 这种导轨的承载能力及刚度都比滚珠导轨大，但对于安装的偏斜反应大， 支承的轴线与导轨的平行度偏差不大时也会引起
偏移和侧向滑动，这样会使导轨磨损加快或降低 精度，小滚柱（小于Φ10mm）比大滚柱（大于 Φ25mm）对导轨面不平行敏感些，但小滚柱的抗 振性高，见图2—40，
目前，数控铣床采用滚柱导轨的较多，特别 是载荷较大的机床。
图2—40 滚柱导轨 ③滚针导轨 滚针导轨的滚针比滚柱的长径
比大，滚针导轨的特点是尺寸小、结构紧凑，为了提高工作台的移动精度，滚针的尺寸应按 直径分组，滚针导轨适用于导轨尺寸受限制的机床上。
根据导轨是否预加负载，滚动导轨可分为预加负载和不预加负载两类。预加负载的优点 是提高导轨刚度、但这种导轨制造比较复杂，成本较高。预加负载的滚动导轨适用于颠覆力 矩较大和垂直方向的导轨中，数控铣床常采用这种导轨。无预加负载的滚动导轨常用于数控 镗铣床或加工中心的机械手、刀库等传送机构。
（3）滚动导轨的计算
滚动导轨的计算与滚动轴承计算相似，以在一定的载荷下行走一定的距离，90％的支承 不发生点蚀为依据，这个载荷称为额定动载荷，行走的距离称为额定寿命，滚动导轨的预期 寿命除了与额定动载荷和导轨的实际工作载荷有关外，还与导轨的硬度、滑块部分的工作温 度和每根导轨上的滑块数目有关。
对于直线滚动导轨副
(2-17) L=50(Cfc)
对于滚动导轨块
55 

10/3
Cfuftfc
(2-18) L=100
Ffw 式中 L—滚动导轨的预期寿命，km；
C—额定动载荷，N，由样本查得； F—导轨块上的工作载荷，N；
f1—硬度系数，当导轨面硬度为58～64HRC时fn＝1.0，为55HRC时fH＝0.8， 为50HRC时fn＝0.53；
—温度系数，工作温度为100℃时fr＝1.0，为150℃时fT＝0.92，为200℃时 fr=0.73;
fc—接触系数，装2个滚动导轨块时fc＝0.81，装3个时fc＝0.72，装4个时 fc=0.66;
fw-载荷系数，无冲击振动，v≤5m／min时fw＝1～1.5，v为15～60m／min时 fw＝1.5～2，有冲击振动，v＞60m／min时／w＝2.0～3.5。
在实际工作中，工作载荷F是变动的，变动形式可分为图2—41所示的4种。其中图 2—41（a）表示载荷按阶段式变化的线图，平均载荷为
(1/1)=
(2-19) FL1+FL2+
式中 F.—变动载荷，N；
Ln—承受F，时行走的距离，m； L—总行程长度，m。
F 일
总行走的距离 总行走的距离
7
흔 7
总行走的距离
总行走的距离L (3)
(P) 图2-41
载荷变化图谱
载？F-
载荷F- 载荷F-
载荷F- 

如载荷按图2—41（b）所示的单调式变化，则有
Fm Fmim+2F.
(2-20) 3
式中Fx最大载荷，N： F-最小载荷，N.
如果载荷按正弦曲线变化，又分两种情况。若为图2—41（c）所示状况，有
F0.65F
(2-21) 若为图2—41（d）所示的状况，有
F0.75Fma
(2-22) 用平均载荷计算导轨寿命。
2.5.4 静压导轨
静压导轨是将具有一定压力的油液，经节流器输送到导轨面上的油腔中，形成承载油 膜，将相互接触的导轨表面隔开，实现液体摩擦。在数控铣床上已得到日益广泛的应用。
静压导轨可分为开式和闭式两大类，图2—42所示为开式静压导轨工作原理。来自液压 泵的压力油，其压力为p，经节流器压力降至p，进入导轨的各个油腔内，借油腔内的压 力将运动导轨浮起，使导轨面间以一厚度为h的油膜隔开，油腔中的油不断地穿过各油腔 的封油间隙流回油箱，压力降为零，当运动导轨受到外载荷W时，使运动导轨向下产生一 个位移，导轨间隙由A。降为h（h＜ho），使油腔回油阻力增大，油腔中压力也相应增大变 为po（po＞pi），以平衡负载，使导轨仍在纯液体摩擦下工作。
图2—42 开式静压导轨工作原理
图2—43 闭式静压导轨工作原理 1一液压泵；2—溢流阀；3一过滤器：4一节
1—导轨：2—节流器；3.5一过滤器； 流器：5—运动导轨：6—床身导轨
4—液压泵：5—溢流阀
图2—43所示为闭式静压导轨的工作原理。闭式静压导轨各方向导轨面上都开有油腔， 所以闭式导轨具有承受各方面载荷和颠覆力矩的能力，设油腔各处的压力分别为p1、p2、 p、P、ps、p6，当受颠覆力矩为M时，油腔p1、ps处间隙变小，油腔p3、p4处间隙变 大。由于节流器的作用，使pi、p4升高，ps、pi降低，从而形成一个与颠覆力矩成反向的
57 

力矩，使工作台恢复平衡。当工作台受到垂直载荷F作用时，油腔p1、p4处间隙变小，油 腔p、p6处间隙变大，使得p1、p4升高，p、ps降低，所形成的作用力与外载荷F相 平衡。
另外，还有以空气为介质的空气静压导轨，亦称气浮导轨，它不仅摩擦力低，而且还有 很好的冷却作用，可减小热变形。
2.6 数控铣床回转工作台
数控铣床是一种高效率的加工设备，当零件被装夹在工作台上以后，为了尽可能完成较 多工艺内容，除了要求机床有沿X、Y、Z三个坐标轴的直线运动之外，还要求工作台在圆 周方向有进给运动和分度运动。这些运动通常用回转工作台实现。
2.6.1 数控回转工作台
数控回转工作台的主要功能有两个：一是实现工作台的进给分度运动，即在非切削 时，装有工件的工作台在整个圆周（360°范围内）进行分度旋转；二是实现工作台圆周方 向的进给运动，即在进行切削时，与X、Y、Z三个坐标轴进行联动，加工复杂的空间 曲面。
图2—44给出了JCS—013型卧式数控镗铣床的数控回转工作台。该数控回转工作台由传 动系统、间隙消除装置及蜗轮夹紧装置等组成。
图2—44 数控回转工作台
1—电液脉冲马达：2，4—齿轮：3一■心环：5—夜形拉紧圆柱销；6—压块；7—螺号；8一镁
紧螺钉：9—蜗杆：10—蜗轮：11—调整套；12，13—夹紧瓦：14—夹紧液压缸；
15—活塞：16—弹簧：17—创球：18—光栅 

当数控回转工作台接到数控系统的指令后，首先把蜗轮10松开，然后启动电液脉冲马 达1，按指令脉冲来确定工作台的回转方向、回转速度及回转角度大小等参数。工作台的运 动由电液脉冲马达1驱动，经齿轮2和4带动蜗杆9，通过蜗轮10使工作台回转，为了尽量 消除传动间隙和反向间隙，齿轮2和齿轮4相啮合的侧隙是靠调整偏心环3来消除的，齿轮 4与蜗杆9是靠楔形拉紧圆柱销5（A—A剖面）来连接的，这种连接方式能消除轴与套的 配合间隙，为了消除蜗杆副的传动问隙，采用了双螺距渐厚蜗杆，通过移动蜗杆的轴向位置 来调整间隙，这种蜗杆的左右两侧面具有不同的螺距，因此蜗杆齿厚从一端向另一端逐渐增 厚，但由于同一侧的螺距是相同的，所以仍然保持着正常的啮合，调整时先松开螺母7上的 锁紧螺钉8，使压块6与调整套11松开，同时将楔形拉紧圆柱销5松开，然后转动调整套 11，带动蜗杆9作轴向移动。根据设计要求，蜗杆有10mm的轴向移动调整量，这时蜗杆副 的侧隙可调整0.2mm。调整后锁紧调整套11和楔形拉紧圆柱销5，蜗杆的左右两端都由双 列滚针轴承支承。左端为自由端，可以伸长以消除温度变化的影响；右端装有双列推力轴 承，能轴向定位。
当工作台静止时必须处于锁紧状态，工作台面用沿其圆周方向分布的8个夹紧液压缸进 行夹紧。当工作台不回转时，夹紧液压缸14的上腔进压力油，使活塞15向下运动，通过钢 球17、夹紧瓦13及12将蜗轮10夹紧；当工作台需要回转时，数控系统发出指令，使夹紧 液压缸14上腔的油流回油箱。在弹簧16的作用下，钢球17抬起，夹紧瓦12及13松开蜗 轮10，然后由电液脉冲马达1通过传动装置，使蜗轮和回转工作台按照控制系统的指令作 回转运动。
数控回转工作台设有零点，当它作返回零点运动时，首先由安装在蜗轮上的撞块碰撞限 位开关，使工作台减速；再通过感应块和无触点开关，使工作台准确地停在零点位置上。 该数控回转工作台可作任意角度的回转和分度，由光栅18进行读数控制。光栅18在圆 周上有21600条刻线，通过6倍频电路，使刻度分辨能力为10°，因此，工作台的分度精度 可达±10”
2.6.2 分度工作台
分度工作台只能完成分度运动，而不能实现圆周进给运动。由于结构上的原因，通常分 度工作台的分度运动只限于完成规定的角度（如45°、60°或90°等），即在需要分度时，按照 数控系统的指令，将工作台及其工件回转规定的角度，以改变工件相对于主轴的位置，完成 工件各个表面的加工。
分度工作台按其定位机构的不同分为定位销式和鼠牙盘式两类。前者的定位分度主要靠 工作台的定位销和定位孔来实现，分度的角度取决于定位孔在圆周上分布的数量。鼠牙盘式 分度工作台是利用一对上下啮合的齿盘，通过上下齿盘的相对旋转来实现工作台的分度，分 度的角度范围依据齿盘的齿数而定。
图2—45所示为THK6380型卧式数控偿铣床的定位销式分度工作台，这种工作台的定 位分度主要靠定位销和定位孔来实现。分度工作台1嵌在长方工作台10之中。在不单独使 用分度工作台时，两个工作台可以作为一个整体使用。
在分度工作台1的底部均匀分布着8个圆柱定位销7，在底座21上有一个定位孔衬套6 及供定位销移动的环形槽，其中只有一个圆柱定位销7进人定位孔衬套6中，其他7个圆柱 定位销则都在环形槽中。因为圆柱定位销之间的分布角度为45°，故只能实现45°等分的分
59 

上升或下降移动并作为另一端的回转支承，支座4内还装有端面滚柱轴承20，使分度工作 台回转很平稳。
定位销式分度工作台的定位精度取决于定位销和定位孔的精度，最高可达±5”。定位销 和定位孔衬套的制造和装配精度要求都很高，硬度的要求也很高，而且耐磨性要好。
2.7 数控铣床的辅助装置
目前，数控铣床已成为机械制造的主要工具机，特别是数控铣床在朝高速度、大功率， 高精度的方向上发展，其可靠性已成为衡量其性能的重要指标，要保证数控铣床可靠稳定地 工作，除了在机械结构和数控系统等方面要达到一定的要求之外，良好的冷却、润滑、温控 和排屑装置也是不可忽视的部分，它们对延长数控铣床的使用寿命和周期、提高切削加工效 率、保证数控铣床正常运行具有重要的意义。
2.7.1 冷却系统
数控铣床的冷却系统按照其作用主要分为机床的冷却和切削时对刀具和工件的冷却两 部分。
（1）机床冷却和温度控制
数控铣床属于高精度、高效率、高成本投入的机床，所以，在工厂中为了尽早地收回成 本，充分发挥其作用，一般要求采取24h不停机连续工作制，为了保证长时间工作机床加工 精度的一致性、电气及控制系统的工作稳定性和机床的使用寿命，数控铣床对环境温度和各 部分的发热、冷却及温度控制均有相应的要求。
环境温度对数控铣床加工精度及工作稳定性有不可忽视的影响。对精度要求较高和整批 零件尺寸一致性要求较高的加工，应保持数控铣床工作环境的恒温。一般数控铣床（半闭环 控制，最小分辨率在0.001mm级）对工作环境温度的要求为0～45℃，环境温度变化不大 于1.1℃／min。
数控铣床的电控系统是整台机床的控制核心，其工作时的可靠性及稳定性对数控铣床的 正常工作起着决定性作用，并且电控系统中间的绝大部分元器件在通电工作时均会产生热 量，如果没有充分适当的散热，容易造成整个系统的温度过高，影响其可靠性、稳定性及元 器件的寿命。数控铣床的电控系统一股采用在发热量大的元器件上加装散热片与采用风扇强 制循环通风的方式进行热量的扩散，降低整个电控系统的温度。但该方式具有灰尘易进入控 制箱、温度控制稳定性差，湿空气易进入的缺点。所以，在一些较高档的数控铣床上一般采 用专门的电控箱冷气机进行电控系统的温、湿度调节。
在数控铣床的机械本体部分，主轴部件及传动机构为最主要的发热源。对主轴轴承和传 动齿轮等零件，特别是中等以上预紧的主轴轴承，如果工作时温度过高很容易产生润滑油黏 度降低、轴承胶合磨损破坏等后果，所以数控铣床的主轴部件及传动装置通常设有工作温度 控制装置。
图2—46为一数控铣床采用专用的主轴温控机对主轴的工作温度进行控制。图2—46（a） 为主轴温控机的工作原理图，循环液压泵2将主轴头内的润滑油（L—AN32机油）通过管道 抽出，经过过滤器4过滤送人主轴头内，温度传感器5检测润滑油液的温度，并将温度信号 传给温控机控制系统，控制系统根据操作人员在温控机上的预设值，来控制冷却器的开停。
61 

®®⑧⑧⑧⑧⑧⑧
室温 温差
油温 日日日
日日日
日日日 （a）工作原理图
（b）操作面板图 图2—46 主轴温控机
1一冷却器：2—循环液压系；3—压力继电器：4一过滤器：5—温度传感器：
6—出油管：7—进油管：8—主轴电动机：9—主轴头
冷却润滑系统的工作状态由压力继电器3检测，并将此信号传送到数控系统的PLC，数控 系统把主轴传动系统及主轴的正常润滑作为主轴系统工作的充要条件，如果压力继电器3无 信号发出，则数控系统PLC发出报警信号，且禁止主轴启动。图2—46（b）为温控机操作面 板。操作人员可以设定油温和室温的差值，温控机根据此差值进行控制，面板上设置有循环 液压泵，冷却机工作、故障等多个指示灯，供操作人员识别温控机的工作状态，主轴头内高 负荷工作的主轴传动系统与主轴同时得到冷却。
（2）工件切削冷却
数控铣床在进行高速大功率切削时伴随大 量的切削热产生，使刀具、工件和机床的温度 上升，进面影响刀具的寿命、工件加工质量和 机床的精度，所以，在数控铣床中，良好的工 件切削冷却具有重要的意义，切削液不仅具有 对刀具、工件、机床的冷却作用，还起到在刀 具与工件之间的润滑、排屑清理、防锈等作用。 图2—47所示为某数控铣床切削冷却系统原理。 机床在工作过程中可以根据加工程序的要求， 由两条管道喷射切削液，不需要切削液时，可 通过切削液开／停按钮关闭切削液。通常在
CAM生成的程序代码中会自动加入切削液开关 图2—47 数控铣床切削冷却系统原理
1—冷却液箱：2—过滤器；3一液压泵；4一溢流线；
指令。手动加工时机床操作面板上的切削液开／ 5—电磁间：6—主输部件：7—分流阀；8—冷却
停按钮可启动切削液电动机，送出切削液。 液喷嘴；9—工件；10—冷却液收集装置；
为了充分提高冷却效果，在一些数控铣床 11一冷却液；12—液位指示计
上还采用了主轴中央通水和使用内冷却刀具的 

方式进行主轴和刀具的冷却。这种方式对提高刀具寿命、发挥数控铣床良好的切削性能、切 屑的顺利排出等方面具有较好的作用，特别是在加工深孔时效果尤为突出，所以目前应用越 来越广泛。
2.7.2 润滑系统 （1）润滑的作用
在数控铣床中，润滑主要有以下几个方面的作用。
①减小摩擦 在两个具有相对运动的接触表面之间存在着摩擦，摩擦使零件、部件产 生磨损，增大运动阻力，剧烈的摩擦甚至会使接触表面发热损坏。把润滑油或者润滑脂加入 到摩擦表面后，可以降低摩擦因数，从而减小摩擦。
②减小磨损，润滑油或润滑脂在相对运动件之间可以形成一层油膜，避免了两个接触 的相对运动件的直接接触，可以减小磨损。
③降低温度 流动的润滑油可以把摩擦产生的大量热量带走，从而起到降低润滑表面 温度的作用。
④防止锈蚀 涧滑油在摩擦表面形成的保护油膜，阻挡了金属与空气或其他氧化物的 直接接触，在一定程度上防止了金属零件的锈蚀。
⑤形成密封 润滑脂除具有主要的润滑作用外，还具有防止润滑剂的流出和外界尘屑 进人摩擦表面的作用，避免了摩擦、磨损的加剧。
（2）润滑系统的类型和应用
数控铣床的润滑按照其工作方法一般分为分散润滑和集中润滑两种。分散润滑是指在数 控铣床的各个润滑点用独立、分散的润滑装置进行润滑；集中润滑是指利用一个统一的润滑 系统对多个润滑点进行润滑，按照润滑介质的不同，机床上的润滑又可以分为油润滑和脂润 滑两种，其中油润滑又分为滴油润滑、油浴润滑（包括溅油润滑和油池润滑）、油雾润滑、 循环油润滑及油气润滑等。
数控铣床良好的润滑对提高各相对运动件的寿命、保持良好的动态性能和运动精度等具 有较大的意义。在数控铣床的运动部件中，既有高速的相对运动，也有低速的相对运动，既 有重载的部位，也有轻载的部位，所以在数控铣床中通常采用分散润滑与集中润滑、油润滑 与脂润滑相结合的综合润滑方式对数控铣床的各个需要润滑部位进行润滑，数控铣床中润滑 系统主要包括主轴传动部分、轴承、丝杠和导轨等部件的润滑。
在数控铣床的主轴传动部分中，齿轮和主轴轴承等零件由于转速较高、负载较大，温升 剧烈，所以一般采用润滑油强制循环的方式，对这些零件进行润滑的同时完成对主轴系统的 冷却。这些润滑和冷却兼具的系统对油的过滤要求较为严格，否则容易影响齿轮、轴承等零 件的使用寿命，一般在此系统中采用沉淀、过滤、磁性精过滤等手段保持油的洁净，并要求 经过规定的时间后进行油的清理更换。
轴承、丝杠和导轨是决定数控铣床各个坐标轴运动精度的主要部件。为了维持它们的运 动精度并减小摩擦及磨损，必须采用适当的润滑。具体采用何种润滑方式取决于数控铣床的 工作状况及结构要求。对负载不大、极限转速或移动速度不高的数控铣床一般采用脂润滑， 采用脂润滑可以减少设置专门的润滑系统，避免润滑油的泄漏污染和废油的处理，而且脂润 滑具有一定的密封作用，降低外部灰尘、水汽等对轴示、丝杠和导轨副的影响。对一些负载 较大、极限转速或移动速度较高的数控铣床一般采用油润滑，采用油润滑既能起到对相对运
63 

动件之间的润滑作用，又可以起到一定的冷却作用。在数控铣床的轴承、丝杠和导轨部位， 无论是采用油润滑还是脂润滑，都必须保持润滑介质的洁净无污染，按照相应润滑介质要求 和工况定期地清理润滑元件，更换或补充润滑介质。
2.7.3 数控铣床排屑装置
为了数控铣床的自动加工顺利进行和减少数控铣床的发热，数控铣床应具有合适的排屑 装置，在数控铣床的切屑中往往混合着切削液，排屑装置应从其中分离出切屑，并将它们送 入切屑收集箱内；而切削液则被回收到切削液箱。常见的排屑装置有以下几种。
（1）平板链式排屑装置
该装置以滚动链轮牵引钢质平板链带在封闭箱中运转，切屑用链带带出机床，如图 2—48（a）所示。这种装置在数控机床使用时要与机床冷却箱合为一体，以简化机床结构。
B-B
中想版著
副板 （b）刮板式 减速器
电机 等板
（a）平板链式
（c）螺旋式 图2—48 排屑装置
（2）刮板式排屑装置
该装置的传动原理与平板链式基本相同，只是链板不同，带有刮板链板，如图2—48（b） 所示。这种装置常用于输送各种材料的短小切屑，排屑能力较强。
（3）螺旋式排屑装置
该装置是利用电机经减速装置驱动安装在沟槽中的一根绞笼式螺旋杆进行工作的，如图 2—48（c）所示，螺旋杆工作时，沟槽中的切屑即由螺旋杆推动连续向前运动，最终排入切 屑收集箱。这种装置占据空间小，适用于安装在机床与立柱间间隙狭小的位置上。螺旋槽排 屑结构简单、性能良好，但只适合沿水平或小角度倾斜的直线运动排运切屑，不能大角度倾 斜、提升和转向排屑，

第3章 伺服进给系统
数控装置所产生的进给插补脉冲信号送给伺服系统，由伺服系统控制伺服电机驱动机床上各个进给轴，实现机床加工进给运动。
3.1 伺服进给系统概述
数控铣床的进给伺服系统是数控装置与机床本体的传动环节，其作用是接收数控装置发出的进给速度和位移指令信号，由伺服驱动电路作转换和放大后，经伺服驱动装置（直流、交流伺服电机，功率步进电机，电液脉冲马达等）和机械传动机构，驱动机床的工作台、主轴头架等执行部件实现工作进给和快速运动，它能根据指令信号精确地控制执行部件的运动速度与位置，以及几个执行部件按一定规律运动所合成的运动轨迹。
3.1.1 伺服进给系统组成
数控铣床进给伺服系统由伺服驱动电路、何服驱动装置、机械传动机构及执行部件组成。图3—1所示是一个双闭环系统，内环是速度环，外环是位置环。速度环中用作速度反馈的检测装置为测速发电机、脉冲编码器等。速度控制单元是一个独立的单元部件，它由速度调节器、电流调节器及功率驱动放大器等部分组成。位置环是由CNC装置中的位置控制模块、速度控制单元、位置检测及反馈控制等部分组成，位置控制主要是对机床运动坐标进行控制，轴控制是要求最高的位置控制。
速度控制单元
机床 位置控制模块
速度控制单元
工作台 指令
位置检测 通度环
何服电机
号 速度检测
位置环
测量与反馈
图3—1 伺服进给系统的组成
何服系统按使用的驱动装置分类可分为电液伺服系统和电气伺服系统；按使用直流伺服电机或交流伺服电机分类可分为直流伺服系统和交流伺服系统；按反馈比较控制方式分类可分为脉冲数字比较伺服系统、相位比较伺服系统、幅值比较伺服系统及全数字伺服系统；按有无位置检测和反馈进行分类可分为开环伺服系统、闭环伺服系统和半闭环伺服系统。
开环伺服系统是最简单的进给伺服系统，其最主要的特点是无位置反馈，伺服驱动装置主要是步进电机、功率步进电机、电液脉冲马达等。开环伺服系统是由步进电机及其驱动线路等组成，它是由数控系统发出指令脉冲，经驱动电路和功率放大后，使步进电机转动，通
65 位置汉谈



过齿轮副与滚珠丝杠螺母副驱动执行部件。数控装置每输入一个指令脉冲给伺服进给系统，步进电机就旋转一定角度，步进电机的旋转速度取决于指令脉冲的频率。转角的大小由指令脉冲数所决定。由于系统中没有位置检测器及反馈线路，因此开环系统的精度较差，但结构简单、易于调整，在精度要求不太高的场合中仍得到较广泛的应用。这种系统的定位精度一般可达到±0.02mm，脉冲当量（一个指令脉冲下工作台所移动的距离）为0.01mm，最高进给速度一般在6m／min以下。
闭环伺服系统由伺服电机、检测装置、比较电路、伺服放大系统等部分组成。闭环伺服系统根据来自检测装置的反馈信号与指令信号比较的结果进行速度和位置的控制、对部分数控机床来说，其检测反馈信号是从伺服电机轴或滚珠丝杠上取得的。对高精度或大型机床，直接从安装在工作台等移动部件上的检测装置中取得反馈信号。为区别两者，前者称为半闭环系统。
闭环系统通过直接测量工作台等移动部件的位移，从而实现精度高的反馈控制。但这种测量装置的安装及调整都比较复杂且不易保养，相比之下，半闭环系统中的转角测量就比较容易实现，但由于后继传动链传动误差的影响，测量补偿精度比闭环系统差。
3.1.2 伺服进给系统的基本要求
如何选用伺服驱动系统，在实际中必须根据机床的要求来确定，大致可概括为以下几个方面。
（1）精度要求
伺服系统必须保证机床的定位精度和加工精度，对于低档型数控系统，驱动控制精度一般为0.01mm；而对于高性能数控系统，驱动控制精度为1μm，甚至为0.1μm。
（2）响应速度
为了保证轮廓切削形状精度和低的加工表面粗糙度，除了要求有较高的定位精度外，严要有良好的快速响应特性，即要求跟踪指令信号的响应要快。
（3）调速范围
调速范围R。是指生产机械要求电机能提供的最高转速nm和最低转速nmm之比。在各种数控机床中，由于加工用刀具、被加工工件材质及零件加工要求的不同，为保证在任何情况下都能得到最佳切削条件，就要求进给驱动系统必须具有足够宽的调速范围。
（4）低速、大转矩
根据机床的加工特点，经常在低速下进行重切削，即在低速下进给驱动系统必须有大的转矩输出。
3.2
伺服电机
何服电机主要包括步进电机、直流伺服电机、交流伺服电机和直线电机，直线电机介绍见2.4.5。
3.2.1 步进电机
功率步进电机一般用于开环系统，用于普通机床的数控改造，以及对精度要求较低的场合，设计步进电机开环进给系统，要解决以下几个问题，即传动计算、进给指令的给定和步66



进电机的驱动电路。
（1）步进电机的工作原理
步进电机的种类很多，但其工作原理都是通过被励磁的定子电磁力吸引转子偏转输出转矩。因此，它的理论依据就是电磁作用原理。现以三相反应式步进电机为例加以说明。
图3—2是反应式三相步进电机的工作原理。定子上有6个磁极，分成A、B、C三相，每个磁极上绕有励磁绕组，并且与电流产生的磁场方向一致。转子无绕组，它是由带齿的铁心做成的。当定子绕组按顺序轮流通电时，A，B和C三对磁极依次产生磁场，并每次对转子的某一对齿产生电磁转矩，使它转动。每当转子的某一对齿的中心线与定子磁极的中心对齐时，磁阻最小，转矩为零。按一定方式切换定子绕组各相电流，使转子按一定方向一步步转动，步进电机每步转过的角度称为步距角。
逆时针转30
逆时针转30°
图3—2 反应式三相步进电机的工作原理
在图3—2中，设A相通电，则转子的1，3两齿被磁极A产生的电磁转矩吸引转动，当1、3齿与A对齐时，转动停止；此时，B相通电，A相断电，磁极B又把距它最近的一对齿2、4吸引转动，转子按逆时针方向转过30°；接着C相通电，B相断电，转子按逆时针旋转30°，依此类推，定子按A—B—C—A··．．·顺序通电，转子就一步步地按逆时针方向转动，每步转30°，若改变通电顺序，按A—C—B—A······顺序通电，步进电机就按顺时针方向转动，同样每步转30°。这种控制方式称为单三拍方式。由于每次只有一相绕组通电，在切换瞬间电机失去自锁转矩，容易失步；此外，只有一相绕组通电吸引转子，易在平衡位置附近产生振荡、因此，实际中不采用单三拍控制方式，而采用双三拍控制方式，即通电顺序按AB-BC-CA-AB······（逆时针方向）或AC-CB-BA-AC······（顺时针方向）进行。 由于双三拍控制方式每次有两相绕组通电，而且切换时总保持一相绕组通电，所以工作较稳定。如果通电顺序按A—AB—B—BC—C—CA—A······进行，就是三相六拍控制方式，每切换一次，步进电机按逆时针方向转过15°，同样，若按A—AC—C—CB—B—BA—A······顺序通电，步进电机每步按顺时针方向转15°，三相六拍控制方式比单三拍控制方式步距角小一半，同样在切换时保持一相绕组通电，工作稳定；与双三拍相比增大了稳定区，故在实践中常采用这种控制方式。
步进电机的旋转方向和转速，由定子绕组的脉冲电流决定，即由指令脉冲决定。指令脉冲数就是电机的转动步数，即角位移的大小，指令脉冲频率决定它的旋转速度，只要改变指令脉冲频率，就可以使步进电机的旋转速度在很宽范围内连续调节，改变绕组的通电顺序，可以改变它的转向。由此可见，步进电机的控制是十分方便的。
采用步进电机驱动的缺点是效率低，驱动惯量负载能力差，作高速运动时容易失步。（2）步进电机的结构
67 

步进电机的类型很多，这里只就其中的反应式步进电机的结构作简要说明。
图3—3是一种典型的单定子径向分相的三相反应式步进电机的结构原理。定子上有6个均布的磁极，在直径相对的两个极上的线圈串联，构成一相控制绕组。极与极之间的夹角为60°，每个定子磁极上均布5个齿，齿间夹角为9°。转子上无绕组，只均布40个齿，齿间夹角也为9°。三相（A、B、C）定子磁极和转子上相应的齿依次错开1／3齿距。这样，若按三相六拍方式给定子绕组通电，即可控制步进电机以1.5°的步距角作正向或反向旋转。
绕组
定子铁心 转子铁心 A相磁 A相 B相 C相
4 通中。
各相定子 ■时针方向
转子■展开 图3—3 单定子径向分相的三相反应式步进电机的结构原理
反应式步进电机的另一种结构形式是多定子轴向分相式。图3—4所示为一个五定子轴向分相的反应式步进电机的结构原理，与径向分相式不同，它的各相磁极是沿轴向排列的，定子和转子都分成五段，每一段都形成独立的一相定子铁心，定子绕组和转子，图3—4右图所示是其中的一段。各段依次排列为A、B、C、D、E，每相是独立的。各段定子铁心形如内齿轮，由硅钢片叠成，转子形如外齿轮，由整块硅钢制成。定、转子各相有相同的齿形槽，按圆周均布。各段定子上的齿的相对位置彼此径向错开1／5齿距，其转子齿彼此不错位。当设置在定子铁心环形槽内的定子绕组通电时，形成一相环形绕组。构成图示磁回路。其控制方式与径向分相式相同。
磁回路
定子硅钢片 端板 磁路 定子 转子 线圈 机壳 端盖
图3—4 五定子轴向分相的反应式步进电机的结构原理
与径向分相式相比，轴向分相式结构的制造工艺比较复杂，目前大多数反应式步进电机采用径向分相式结构。但是，当相数较多时，也有采用径向和轴向分相相结合的混合式结构。
综上所述，可以得到如下结论。
①步进电机定子绕组的通电状态每改变一次，它的转子便转过一个确定的角度，即步68



进电机的步距角a.
②改变步进电机定子绕组的通电顺序，转子的旋转方向随之改变。
③步进电机定子绕组通电状态的改变速度越快，其转子旋转的速度越快，即通电状态的变化频率越高，转子的转速越高。
④步进电机步距角a与定子绕组相数m、转子齿数z、通电方式（Q）有关。（3）步进电机的主要特性
①步距角和静态步距误差 步进电机每步的转角称为步距角，是步进电机定子绕组的通电状态每改变一次，转子转过的角度。步距角是决定步进伺服系统脉冲当量的重要参数，它取决于电机结构和控制方式，步距角a可按式（3—1）计算，即
360 ()
(3-1) 0
m=Q 式中 m—定子绕组相数；
转子齿数： 程
Q—由通电方式确定的拍数与相数的比例系数，例如，三相六拍通电方式的Q＝2，
三相三拍通电方式的Q＝1．
对于图3—3所示的单定子径向分相反应式伺服步进电机，当它以三相三拍通电方式工作时，其步距角为
360360 합
mzQ 3x40x1 若按三相六拍通电方式工作，则步距角为
360 360
=1.5 0
mzQ 3x40x2
步进电机每走一步的步距角a，按理论设计是圆周360°的等分值，但是，实际的步距角与理论值有误差，在一周内各步误差的最大值，被定为步距误差，它的大小是由制造精度、齿槽的分布和气隙等因素决定的。步进电机的静态步距误差一般在10＇以内。
通常，反应式步进电机的步距角一般为0.5°～3°，步距角越小，数控机床的控制精度越高。
②矩角特性、最大静态转矩Mx和启动转矩M4输出转矩是指与步进电机的各种转速相对应的输出转矩，若施加超过输出转矩的负载转矩时，则步进电机就会停转。因此，电机的负载转矩必须小于输出转矩。
矩角特性是步进电机的一个重要特性，它是指步进电机产生的静态转矩M，与失调角0的变化规律。空载时，若步进电机某相绕组通电，根据步进电机的工作原理，电磁力矩会使得转子齿槽与该相定子齿槽对齐，这时，转子上没有力矩输出。如果在电机轴上加一逆时针方向的负载转矩M，则步进电机转子就要逆时针方向转过一个角度θ才能重新稳定下来，这时转子上受到的电磁转矩M，和负载转矩M相等。通常称M，为静态转矩，θ为失调角。不断改变M值，
图3—5 M与θ的函数曲线

对应的就有M1值及θ角，得到Mj与θ的函数曲线，如图3—5所示。通常称M＝f（θ）曲线为转矩—失调角特性曲线，或称为矩角特性。
图中画出了三相步进电机按照A—B—C—A······方式通电时，A、B、C各相的矩角特性曲线，三相矩角特性曲线在相位上互差1／3周期。曲线上峰值所对应的转矩叫做最大静态转矩，用Mmmx表示，它表示步进电机承受负载的能力。Mmm越大，自锁力矩越大，静态误差越小。换句话说，最大静态转矩M越大，电动机带负载的能力越强，运行的快速性和稳定性越好，
图中曲线A和曲线B的交点所对应的力矩M。是电机运行状态的最大启动转矩。当负载力矩M：小于M4时，电机才能正常启动运行。否则，将造成失步，电机也不能正常启动。一般地，随着电机相数的增加，由于矩角特性曲线变密，相邻两矩角特性曲线的交点上移，会使M4增加：改变m相m拍通电方式为m相2m拍通电方式，同样会使M。得以提高。
③最高启动、停止脉冲频率 步进电机所能接受的正确启、停的指令脉冲系列的最高频率，称为最高启动，停止脉冲频率。它随加在电机轴上的负载惯量及负载转矩的大小而变化。
空载时，步进电机由静止突然启动，并进入不失步的正常运行所允许的最高频率，称为启动频率或突跳频率，若启动时频率大于突跳频率，步进电机就不能正常启动。空载启动时，步进电机定子绕组通电状态变化的频率不能高于该突跳频率。
④连续运行的最高工作频率 步进电机连续运行时，所能接受的，保证不失步运行的最高极限控制频率称为最高连续工作频率或最高工作频率，最高工作频率远大于启动频率。这是由于启动时有较大的惯性转矩并须有一定的加速时间，同样，在大于启动频率的状态下工作的电机要停止亦须有一定的减速时间。它是决定定子绕组通电状态最高变化频率的参数，它决定了步进电机的最高转速。
⑤加、减速特性 步进电机的加、减速特性是描述步进电机由静止到工作频率和由工作频率到静止的加、减速过程中，定子绕组通电状态的变化频率与时间的关系。
当要求步进电机启动到大于突跳频率的工作频率时，变化速度必须逐渐上升；同样，从最高工作频率或高于突跳频率的工作频率停止时，变化速度必须逐渐下降。逐渐上升和下降的加速时间、减速时间不能过小，否则会出现失步或超步，通常用加速时间常数T，和减速时间常数Ta来描述步进电机的升速和降速特性，如图3—6所示。
//H라l
H 指令／
加速
减速 图3—6 加，减速特性曲线
除以上介绍的几种特性外，矩频特性、惯频特性和动态特性等也都是步进电机很重要的特性。其中，动态特性描述了步进电机各相定子绕组通、断电时的动态过程，它决定了步进电机的动态精度；惯频特性描述了步进电机带动纯惯性负载时启动频率和负载转动惯量之间70



的关系，矩频特性描述了步进电机控制频率与电
磁力矩之间的关系。
（4）步进电机开环进给的传动计算及电机选用
①传动计算 如图3—7所示的进给系统，进
步进电机 给系统的脉冲当量为3（mm），步进电机的步距
角为a，齿轮传动链的传动比为i，滚珠丝杠的
图3—7 步进电机驱动系统导程为：（mm），它们之间的关系如下，即
(3-2) 360
(3-3) 脉冲当量8定义为：数控系统发出一个指令脉冲，工作台所移动的距离。它决定了数控机床的加工精度和驱动系统的最高工作频率。
步进电机开环进给系统的脉冲当量一般取为0.01mm，也有选用0.005～0.002mm的，这时脉冲位移的分辨率和精度较高，但是由于进给速度v—60f8（mm／min），在同样的最高工作领率了时8越小则最大进给速度的值也越小。步进电机的进给系统使用齿轮传动，不仅是为了求得必需的脉冲当量，而且还有满足结构要求和增大转矩的作用。
②步进电机的选用 首先，必须保证步进电机的输出转矩大于负载所需的转矩，所以应先计算机械系统的负载转矩，并使所选电机的输出转矩有一定余量，以保证可靠运行。通常MM为0.2～0.5，其中M为步进电机最大静态转矩，M为负载转矩。其次，应使步进电机的步距角a与机械系统匹配，以得到机床所需的脉冲当量。最后，应使被选电机与机械系统的负载惯量及机床要求的启动频率相匹配，并有一定余量：还应使其最高工作频率能满足机床移动部件快速移动的要求。
（5）提高步进电机伺服系统的精度措施
步进电机驱动的开环伺服系统，进给运动是由驱动元件通过齿轮、丝杠带动机床移动部件来实现的，各传动元件尽管制造精度很高，装配亦很好，但总不可避免地存在着间隙等缺陷，对此，必须在系统中加以补偿，以期提高其传动精度。
①间隙补偿 机械系统传动链中的传动间隙，可以按脉冲当量换算为指令脉冲数。例如，传动间隙相当于N个脉冲当量，则每当变换指令动作方向时，在给出进给的脉冲指令前，先给出N个额外的脉冲指令，以补偿间隙误差。这种方法比较简单，对于点位和轮廓控制系统都适用：但对于大型机床，其间隙大小随工件的质量而改变，或间隙随位置的改变而改变，这时就会出现补偿不完全的情况。在这种情况下，要直接测量机床进给位置进行反馈补偿才能实现完全补偿。
对于间隙补偿，必须注意判别补偿的条件，主要是在换向时进行。所以，在电路设计时要有进给方向判别，补偿脉冲数N一般应由实际测定，通常为1～15个脉冲。
②螺距误差补偿 具有开环系统的数控机床，其定位精度主要取决于丝杠的精度，所以在数控机床上采用了高精度的滚珠丝杠，但为获得比滚珠丝杠更高的精度，可采用螺距误差补偿方法。
7 

一种是机械样板的补偿方法：另一种是在螺距误差达到一个脉冲当量的地方装上挡块，用位置开关检测并发出补偿脉冲的方法，后者的补偿原理如图3—8所示。通过对丝杠的螺距进行实测，得到丝杠全程的误差分布曲线。误差有正有负，当误差为正时，表明实际的移动距离大于理论的移动距离，应该采用扣除进给脉冲指令的方式进行误差的补偿，使步进电机少走一步；当误差为负时，表明实际的移动距离小于理论的移动距离，应该采取增加进给脉冲指令的方式进行误差的补偿，使步进电机多走一步。具体的做法如下。
a.安置两个补偿杆，分别负责正误差和负误差的补偿。
b.在两个补偿杆上，根据丝杠全程的误差分布情况及如上所述螺距误差的补偿原理，设置补偿开关或挡块。
机床运动
脉冲数 微动开关
VI B
补偿杆B 负补偿脉冲A
正补偿脉冲B 误差
S1S2
S,S4S,S6S7
S，S。补偿脉冲 图3—8 螺距误差补偿原理
1—理想的移动曲线（没有螺距误差）；2一实际的移动面线（有螺距误差）：
3一补偿前的误差曲线：4一补偿后的误差曲线
c.当机床工作台移动时，安装在机床上的微动开关每与挡块接触一次，就发出一个误差补偿信号，对螺距误差进行补偿，以消除螺距的积累误差。
在进行螺距补偿时，可以认为螺距误差数值与运动方向无关。
③反馈补偿 这种方法一方面是把检测器直接装在机床移动部件上用以检测移动部件的移动量，另一方面，在指令脉冲通过偏差设定器后，能测出电机输出轴的旋转角（换算为脉冲），把两者进行比较，就能测出整个机械系统的误差，这种机械系统的误差包括上述的间隙、螺距误差，以及由于质量或温度变化所引起的一切变化。因此，检测出这种误差后，立即发出补偿脉冲，按细分电路来补偿电机旋转角的误差，从而能按检测器的精度来进行定位。这样，对于步进电机驱动系统既有开环系统的稳定性，又兼有闭环系统的高精度的优点。
72 

3.2.2 直流伺服电机及其调速系统
副极 （1）直流伺服电机的结构、原理与调速
直流伺服电机具有良好的启动、制动和调速特性，可
电枢导体 以方便地在宽范围内实现平滑无级调速，故多用在对伺服
电机的调速性能要求较高的生产设备中。
磁极 如图3—9所示，直流何服电机的结构主要包括以下三
大部分。
计 ①定子 定子磁极磁场由定子的磁极产生，根据产生
图3—9 直流何服电机工作原理磁场的方式，直流伺服电机可分为永磁式和他励式，永磁
式磁极由水磁材料制成，他励式磁极由冲压硅钢片叠压而成，外绕线圈通以直流电流便产生恒定磁场。
②转子 又称为电枢，由硅钢片叠压而成，表面嵌有线圈，通以直流电时，在定子磁
场作用下产生带动负载旋转的电磁转矩，
③电刷与换向片 为使所产生的电磁转矩保持恒定方向，转子能沿固定方向均匀地连续旋转，电刷与外加直流电源相接，换向片与电枢导体相接。
直流伺服电机的工作原理与一般直流电机的工
作原理完全相同，如图3—10所示，他励直流电机图3—10 他励直流电机的工作原理
转子上的载流导体（即电枢绕组），在定子磁场中受到电磁转矩M的作用，使电机转子旋转，由直流电机的基本原理分析得到
n=(u-I,R,)/k
(3-4) 式中
电枢的转速，r／min；-
电枢电压： 1
电枢电流： R.-电枢电阻：
■—电势系数，E—C.Ф.
由式（3—4）可知，调节电机的转速有以下三种方法。
①改变电枢电压a，调速范围较大，直流伺服电机常用此方法调速。
②改变磁通量中（即改变■的值），改变励磁回路的电阻R：以改变励磁电流h、可以达到改变磁通量的目的；调磁调速因其调速范围较小而常常作为调速的辅助方法，主要的调速方法是调压调速，若采用调压与调磁两种方法互相配合，可以获得很宽的调速范围，又可充分利用电机的容量。
③在电枢回路中串联调节电阻R，此时有
-[u-1,(R,+R)]/A
(3-5) 由式（3—5）可知，在电枢回路中串联电阻，转速只会调低，面且电阻上的铜耗较大，这种方法使用场合较少。
（2）小惯量直流电机
推向片 

小惯量直流电机是由一般直流电机发展而来的，其主要特点如下。①转动惯量小，约为普通直流电机的1／10，快速响应性好。
②由于电枢反应比较小，具有良好的换向性能，电机时间常数只有儿毫秒。③由于转子无槽，结构均衡性好，使其在低速时稳定而均匀运转，无爬行现象。④最大转矩约为额定值的10倍，过载能力强。
小惯量直流电机的转子与一般直流电机的区别在于以下几点。
①第一个区别是其转子为光滑无槽的铁心，用绝缘黏合剂直接把线圈黏在铁心表面。②第二个区别是转子长而直径小，这是因为电机的转动惯量与转子直径平方成正比，一般直流电机的电枢由于磁通受到齿截面的限制，不能做得很小，但现在小惯量直流电机电枢没有齿槽，也不存在轭部磁密的限制。这样，对同样磁通量来说，磁路截面即电枢直径与长度乘积就可缩小：所以，从减小惯量出发，细长的电枢可以得到较小的惯量。
小惯量直流电机的定子结构采用方形，提高了励磁线圈放置的有效面积，但由于无槽结构，气隙较大，励磁和线圈安匝数较大，故损耗大，发热厉害。为此，采取措施是在极间安放船形挡风板，增加风压，使之带走较多的热量。并且线圈外不包扎而成赤裸线圈。小惯量直流电机是通过减少电机转动惯量来改善工作特性的，但正是由于其惯量小，机床惯量大，必须经过齿轮传动，这样电刷磨损较快。
（3）大惯量宽调速直流伺服电机
大惯量宽调速直流伺服电机是在小惯量电机和力矩电机的基础上发展起来的。这种电机分为电励磁和永久磁铁励磁（永磁式）两种，占主导地位的是永磁式电机。永磁式大惯量伺服电机具有下列特点。
①高性能的铁氧体具有大的矫顽力和足够的厚度，能承受高的峰值电流以满足快的加、减速要求。
②大惯量的结构使得在长期过载工作时具有大的热容量。
③由于它能在较大过载转矩下长期工作，电机转子的惯量较大，因此其低速高转矩和大惯量结构可以与机床进给丝杠直接连接，不需要中间传动环节。
④一般没有换向极和补偿绕组，通过选择电刷材料和磁场的结构，使得在较大的加速度状态下有良好的换向性能。
⑤绝缘等级高，从而保证电机在反复过载的情况下仍有较长的寿命。
⑥在电机轴上装有精密的测速发电机、旋转变压器或脉冲编码器，从而可以得到精密的速度和位置检测信号，以反馈到速度控制单元和位置控制单元。
⑦它可在低速下运转，如能在1r／min甚至在0.1r／min下平稳地运转。
大惯量宽调速直流伺服电机的控制复杂，快速响应性能不如小惯量电机，宽调速直流伺服电机转子由于采用了良好的绝缘，耐温可达150～200℃，转子温度高，热量通过转轴传到丝杠，丝杠的变形将影响传动精度，因此，出现了热管型的大惯量电机，即将电机轴做成空心，在轴内装氟里昂之类的工作介质，介质在管内反复蒸发和冷却，将热量由高温区传至低温区，最终散发到周围环境中去。
图3—11是永磁式直流伺服电机的工作曲线，它表示了转矩与速度之间的关系。伺服电机的工作区域被温度极限线、转速极限线、换向极限线、转矩极限线及瞬时换向极限线划分为3个区域：I区为连续工作区，在该区域内可对转矩和转速作任意组合，都可长期工作。II区为断续工作区，此时电机只能根据负载工作曲线所决定的允许工作时间和断电时间做间74



200
150 N- 100 50 断续 工作区 连续工作区 0
500
1000
1500 m/(c/min)
图3—11 水磁式直流伺服电机工作（转矩—速度特性）曲线
歇工作。皿区为加／减速区，即电机加、减速时，电枢电流受转矩极限和瞬时换向极限的限制，只能工作一段较短的时间。
负载特性曲线如图3—12所示。该曲线给出了在满足机械所需转矩，而又确保电机不过热的情况下，允许电机的工作时间。它表明断续工作（即导通一断开）时允许的转矩过载倍数与导通一断开时间比之间的关系。由图可见，在一定的tR（电机工作时间）时，加载周期比d［d＝tn／（tR＋tp），为电机断开时间］越小，允许的力矩过载倍数T■就越大。另一方面，在一定的过载倍数时，电机工作时间长，意味着产生的热量多。为了确保电机绕组温度不致过高，应减小d值（即应加长断电时间）。根据该曲线，即可求出电机在断续工作区时的导通一断开时间或转矩过载倍数值。
工作条件为环境温度40℃，40／min001
转炬百分比
110% 80
-120% 60
130% 2
40 P 20
200%
09 0
3 6/g 10
30
100 导通时间／min
图3—12 永磁直流伺服电机的负载特性曲线
注：100％转矩百分比与电枢电流为直流31A时相一致
在重负载切削时，电机可工作在断续工作区，首先根据实际负载转矩的要求，求出电机的过载倍数Tmd，即
75 载荷比／



Tm
负载转矩
(3-6) 连续额定转矩
然后在负载特性曲线的水平轴上找到要求的重载切削时间tR，并从该点向上作垂线，与所要求的Tma那条曲线相交，再从该点作水平线，与纵轴相交的点即为允许的加载周期比d，最后可以求出最短断电时间
fp=(R (1/3-1)
(3-7) 伺服电机的选用，应考虑如下三个要求：最大切削负载转矩，不得超过电机的额定转矩：电机的转子惯量Jx应与负载惯量J，相匹配（匹配条件可根据伺服电机样本提供的匹配条件，也可以按照一般的匹配规律）；快速移动时，转矩不得超过伺服电机的最大转矩。
①最大切削负载转矩，不得超过电机的额定转矩折算到电机轴上的最大切削负载转矩T.
T- FmF
(3-8) 2πm
式中 Fmx—丝杠上的最大轴向载荷，等于最大轴向进给力加导轨摩擦力，Ni
P■—丝杠导程，m：
■滚珠丝杠的机械效率：
T1e—因滚珠丝杠螺母预加载荷引起的附加摩擦力矩，N·m：Tio—滚珠丝杠轴承的摩擦力矩，N·m：
i—何服电机至丝杠的传动比。
②伺服电机的转子惯量Js应与负载惯量J，相匹配。通常要求J不小于J，但JM也不是越大越好。因JM越大，总的惯量J就越大，加速性能受影响，为了保证足够的角加速度，以满足系统反应的灵敏度，将不得不采用转矩过大的何服电机和它的伺服控制系统。根据有关资料的推荐，匹配条件为
1<JM/J,<4
(3-9) 重型机床的负载惯量J，很大，如果电机与丝杠直连，很难满足此条件。常用的办法是电机通过一对齿轮（或同步齿形带）降速后传动丝杠。
负载惯量J，可按式（3—10）计算，即
（万·見） (/)+=
(3-10) 式中 Ji—各旋动件的转动惯量，kg·m；
—各旋动件的角速度，rad／s：m—各直线运动件的质量，kg：—各直线运动件的速度，m／s；w伺服电机的角速度，rad／s.实心圆柱体的转动惯量为
J2= mplD (kg·㎡)
(3-11) 76



式中 D—外径，m：
l-长度，m：
p-密度，kg／m，钢的密度p＝7.8x101kg／㎡，
③快速移动时，转矩不得超过伺服电机的最大转矩。当执行部件从静止状态的阶跃指令加速到最大移动（快移）速度时，所需要的转矩最大，其空载加速转矩T，等于系统的转动惯量J乘以角加速度θ，即
Jn(N·m)
(3-12) 式中电机在执行部件快移时的转速，r／min：
1-加速时间，
Jn
(s)
9.6T
加速时间通常为电机机械时间常数tM的3～4倍，可见，何服电机主参数是输出功率，这是区分其大小的公称值，但选择何服电机时，却是按照负载转矩小于额定转矩、电机转子惯量与负载惯量的合理匹配、执行部件的快移转矩小于电机的最大转矩这3个要求来考虑的。
（4）直流伺服电机的可控硅调速系统 可控硅（Semiconductor Control Rectifier， SCR，品闸管）直流调速系统中，为实现转速和电流两种反馈分别起作用，系统中设置了两个调节器，分别对转速和电流进行调节，两者之间实现串联连接，系统主要由电流调节回路（内环），速度调节回路（外环）和可控硅整流放大器（主回路）等部分组成，如图3—13所示。来自数控装置的速度指令电压U，一般是0～10V的直流电压，与速度反馈电压Uo（由测速发电机或脉冲编码器检测并经变换而得）比较后，其偏差值送到速度调节器ST的输入端，速度调节器的输出就是电流指令信号U，U，与电流反馈信号U（由霍尔元件检测器测出并经变换而得）比较后，经电流调节器1．T输出U、送到触发电路，产生主回路中品闸管的触发脉冲，通过脉冲分配器去触发相应的品闸管，当速度指令信号增大，U■的电压值随之增大，使触发器的触发角a减小，即脉冲前移，整流放大器的输出直流电压提高，电机转速上升，反之，输出直流电压降低，电机转速下降。采用双环调节系统，可以使电机的启动、制动过程最短，系统具有良好的静态和动态性能。
本
TO 图3—13 可控硅（品闸管）直流调速系统
（5）品体管脉冲调宽（PWM）调速系统
晶体管脉冲调宽系统（Pulse Width Modulation，PWM）是利用大功率品体管的开关特
77 

性来调节固定电压的直流电源。它利用开关频率较高的大功率品体管作为开关元件，将整流后的恒压直流电源，转换成幅值不变而脉冲宽度（持续时间）可调的高频率矩形波，给伺服电机的电枢回路供电。通过改变脉冲宽度的方法来改变电枢回路的平均电压，达到电机调速的目的。
PWM驱动装置是利用大功率品体管的开关特性来调制固定电压的直流电源，按一个固定的频率来接通和断开，并根据需要改变一个周期内“接通”与“断开”时间的长短，通过改变直流伺服电机电枢上电压的“占空比”来改变平均电压的大小，从而控制电机的转速。因此，这种装置又称为“开关驱动装置”。
PWM控制的示意图如图3—14（a）所示，可控开关S周期性地开关，开关周期为T，接通时间是t，则断开时间为T—r。当S接通时，供电电源通过开关S施加到电机两端，电源向电机提供能量，电机储能；当开关S断开时，中断了供电电源向电机提供能量，但在开关S接通期间电枢电感所储存的能量此时通过续流二极管的电压U，使电机电流继续流通。
电机
4本 （a）原理图
（b）波形图 图3—14 PWM控制示意图
如果外加电源电压U为常数，则加到电枢上的电压的波形将是一个高为Ua1，宽为r，周期为T的方波，如图3—14（b）所示，它的平均值为
U。=1/Udr=U=8U
(3-13) 式中 δr—占空比，■—／
T—开关通断的工作周期（即开关接通时间r和关断时间T—r之和）。
由式（3—13）可见，当T不变时，改变开关接通时间r和开关周期T的比例亦即改变脉冲的占空比，电机两端电压的平均值U。也连续地由0～U随之改变，从而电机转速得到了控制。实际中用大功率三极管代替开关S，开关周期T恒定，通过改变导通脉冲宽度来改变占空比的方式，这就是脉冲宽度调制；其开关频率是2000Hz，T—1／2000s＝0.5ms，目前，直流电机的控制中，以应用PWM控制方式为主。
改变脉冲占空比即可调节电机转速，但必须有将控制转速的指令转换为脉冲宽度或开关周期的电路或装置来实现。直流伺服电机的脉冲调宽调速系统如图3—15所示，它是一个双闭环的脉宽调速系统。系统的主电路是晶体管脉宽调制放大器PWM，此外还有速度控制回78



MM
速度控制器
电流控制器 ST
PWM
图3—15 直流伺服电机的脉冲调宽调速系统
路和电流控制回路，电流控制器的输出U。是经变换后的速度指令电压，它与三角波Ur经脉宽调制电路C调制后得到调宽的脉冲系列，作为控制信号输送到晶体管脉宽调制放大器PWM各相关品体管的基极，使调宽的脉冲系列得到放大，成为直流伺服电机电枢的输入电压，
PWM调速系统具有下述特点。
①开关率高 其频率可达2kHz，比机械部件的固有频率高得多，可以避开机械部分的共振点，避免引起共振。
②纹波系数低（波形因素）即电流的有效值与平均值之比低，一般为1.005～1.01．几乎接近于1，电枢回路的电抗，就足以将脉冲滤平，接近于纯直流。因此电磁转矩恒定，电机运行平稳。
③频带较宽 即系统能够响应的频率范围较宽，因此系统的动态特性好，有良好的线形，尤其是接近于零点时线性度好。
④可在高峰值电流下工作 其峰值限制在额定电流的2倍以内，这样的安全峰值电流，可以保护水磁电机不至于退磁，延长电机电刷的寿命，减少电机发热。
3.2.3 交流伺服电机及其调速
直流电机存在一些固有的缺点，如电刷和换向器易磨损，需经常维护等。换向器换向时会产生火花，使电机的最高速度受到限制，也使应用环境受到限制，而且直流电机结构复杂，制造困难，所用钢铁材料消耗大，制造成本高，交流电机，特别是笼型感应电机则没有上述缺点，且转子惯量比直流电机小，使得动态响应更好。在同样体积下，交流电机输出功率可比直流电机提高10％～70％，此外，交流电机的容量可比直流电机的大，达到更高的电压和转速，现代数控铣床都倾向于采用交流伺服驱动。
交流伺服系统中可以用交流同步电机也可以用交流感应电机。交流感应电机结构简单，与同容量的直流伺服电机相比，质量轻、价格便宜。它的缺点是不能经济地实现范围较大的平滑调速。所以，在数控铣床的进给系统中一般不用这种电机。
交流同步电机的转速与所用电源的频率之间存在一种严格的关系，即在电源电压和频率固定不变时，它的转速是稳定不变的。由变频电源供电给同步电机时，便可方便地获得与频率成正比的可变速度，并可得到非常硬的机械特性及较宽的调速范围。其结构虽然比感应电机复杂，但比直流电机简单。同步电机又分为电磁式和非电磁式两大类。在后一类中又有磁滞式、永磁式和反应式多种。在数控铣床的进给驱动系统中，多数采用永磁式交流同步电机。
（1）交流伺服电机的类型和特点

①异步型交流伺服电机 异步型交流伺服电机指的是交流感应电机。它有三相和单相之分，也有笼型和线绕式，通常多用笼型三相感应电机。其结构简单，与同容量的直流电机相比，质量轻1／2，价格仅为直流电机的1／3。缺点是不能经济地实现范围很广的平滑调速，必须从电网吸收滞后的励磁电流，因而令电网功率因数变坏。这种笼型转子的异步型交流伺服电机简称为异步型交流伺服电机，用IM表示。
②同步型交流伺服电机 同步型交流伺服电机比感应电机复杂，但比直流电机简单。它的定子与感应电机一样，都在定子上装有对称三相绕组。而转子却不同，按不同的转子结构又分电磁式及非电磁式两大类。非电磁式又分为磁滞式、永磁式和反应式多种。其中磁滞式和反应式同步电机存在效率低、功率因数较差、制造容量不大等缺点，数控机床中多用永磁式同步电机，与电磁式相比，水磁式的优点是结构简单、运行可靠、效率较高；缺点是体积大、启动特性欠佳。但永磁式同步电机采用高剩磁感应，高矫顽力的稀土类磁铁后，可比直流电机外形尺寸约小1／2，质量减轻60％，转子惯量减到直流电机的1／5。它与异步电机相比，由于采用了永磁铁励磁，消除了励磁损耗及有关的杂散损耗，所以效率高，又因为没有电磁式同步电机所需的集电环和电刷等，其机械可靠性与感应（异步）电机相同，而功率因数却大大高于异步电机，从而使永磁式同步电机的体积比异步电机小些。这是因为在低速时，感应（异步）电机由于功率因数低，输出同样的有功功率时，它的视在功率却要大得多，而电机主要尺寸是根据视在功率而定的。
（2）水磁式交流伺服电机
即同步型交流伺服电机（SM），它是一台机组，由水磁式同步电机、转子位置传感器、速度传感器等组成。
①结构 如图3—16所示，永磁式同步电机主要由三部分组成，即定子、转子和检测元件（转子位置传感器和测速发电机），其中定子有齿槽，内有三相绕组，形状与普通感应电机的定子相同，但其外缘多呈多边形，且无外壳，以利于散热，避免电机发热对机床精度的影响，
永久磁铁
定子 转子 压板 定子三相绕组
脉冲 转轴
编码器
出线盒 （a）永磁式同步电机摄計面
（b）水磁式同步电机纵剖面图316 本组式同步电动机结构
②工作原理 如图3—17所示，一个二极水磁转子，当定子三相绕组通上交流电源后，就产生一个旋转磁场，图中用另一对旋转磁极表示，该旋转磁场将以同步转速n，旋转。由于磁极同性相斥，异性相吸，与转子的水磁磁极互相吸引，并带着转子一起旋转，因此，转子也将以同步转速n，与旋转磁场一起旋转，当转子加上负载转矩之后，转子磁极轴线将落后定子磁场轴线一个θ角，随着负载增加，θ也随之增大；负载减少时，θ角也减小。只要80



不超过一定限度，转子始终跟着定子的旋转磁场以恒定的同步转速n，旋转。
转子速度n，—n，—60f／p．即由电源频率f和磁极对数p决定。
当负载超过一定极限后，转子不再按同步转速旋转，甚至可能不转，这就是同步电机的失步现象，此负载的极限称为最大同步转矩。
③水磁式同步伺服电机的性能
a.交流伺服电机的性能如同直流伺服电机一样，可以用工作曲线即转矩—速度特性曲线来反映，见图3—18。
000C1 10000 E 8000 TIN 6000 4000 2000
1 0 500
1500 0002 0001
n/(t/min) 图3-17
水磁式交流伺
图3—18 水磁式交流同步电机的工作曲线服电机工作原理
1一连续工作区：■一断续工作区
水磁式交流伺服电机的工作曲线和直流伺服电机一样，在连续工作区1，转矩和速度的任意组合都可连续工作，但连续工作区的划分受到一定工作条件的限制。一般有两个主要条件：一是供给电机的电流是理想的正弦波：二是电机在某一特定温度下，如果温度发生变化则为另一条曲线，这是由于所用的磁性材料的负的温度系数所致。断续工作区的极限，一般受到电机的供电电压的限制，从图中可以看出，随转速的升高，转矩虽然略有下降，但变化不大，基本上是恒转矩输出，面且交流伺服电机的机械特性比直流伺服电机更硬。断续工作区的上限是这种电机的最大输出转矩。
交流伺服电机的机械特性比直流伺服电机的机械特性要硬，其直线更为接近水平线。另外，其断续工作区范围更大，尤其是高速区，这有利于提高电机的加、减速能力。
b.高可靠性。用电子逆变器取代了直流电机换向器和电刷；工作寿命由轴承决定。因无换向器及电刷，也省去了此项目的保养和维护。
c.主要损耗在定子绕组与铁心上，故散热容易，便于安装热保护；而直流电机损耗主要在转子上，散热困难。
d.转子惯量小，其结构允许高速工作。e.体积小，质量小。
（3）交流调速的基本方法
由电机学基本原理可知，交流电机的同步转速为
(3-14) ()/09=
异步电机的转速为
n=60fi(1-s)/p(r/min)
(3-15) 

式中f—定子供电频率，Hz：
P—电机定子绕组磁极对数；转差率。
由式（3—14）和式（3—15）可见，要改变电机转速可采用以下几种方法，
①改变磁极对数p 这是一种有级的调速方法，它是通过对定子绕组接线的切换以改变磁极对数而实现调速的。
②改变转差率 这实际上是对异步电机转差率进行处理而获得的调速方法。常用的是降低定子电压调速、电磁转差离合器调速、线绕式异步电机转子串电阻调速或串极调速等。③变频调速 变频调速是平滑改变定子供电频率f：而使转速平滑变化的调速方法。这是交流电机的一种理想调速方法。电机从高速到低速其转差率都很小，因而变频调速的效率和功率因数都很高。
交流伺服电机的选用原则与直流伺服电机类似。3.3 伺服进给系统设计的基本要求
数控铣床进给系统必须保证由数控装置发出的控制指令转换成速度符合要求的相应角位移或直线位移，带动运动部件运动，根据工件加工的需要，在机床上各运动坐标的数字控制可以是相互独立的，也可以是联动的，总之，数控机床对进给系统的要求集中在精度、稳定性和快速响应三个方面，为满足这些要求，首先需要高性能的伺服驱动电机，同时也需要高质量的机械结构与之匹配。为提高进给系统机械结构性能的主要措施有如下要求。
（1）提高系统机械结构的传动刚度
传动刚度高对开环数控进给系统的重要性在于开环进给系统需将计算机控制指令忠实可靠地转换成要求的机械位移。由于开环系统不再有检测元件检查运动部件的实际位移，这种转换精度决定了加工的精度。对于闭环数控进给系统，传动刚度高有利于减小进给运动的超调和振荡，有助于改善系统的动态品质。为提高进给系统机械结构传动刚度的措施主要有以下几项。
①提高传动元件的刚度 传动元件的变形会导致指令脉冲的丢失或传动系统的不稳定，影响加工精度和质量。
②消除传动元件之间的间隙 传动元件之间的间隙会导致运动反向时指令脉冲的丢失或系统运动不稳定，尽管稳定的系统误差可采取输入补偿脉冲的方法加以补偿，但由于刚度不足和反向间隙造成的误差带有很大的随机性，完全精确补偿是不可能的。
③尽可能缩短进给传动运动链的长度 缩短进给传动运动链的长度有助于提高数控铣床的传动刚度，然面，进给传动运动链的缩短首先要求伺服电机调速范围和输出转矩能满足加工精度、生产率和快速运动的需要，目前，一般数控机床进给驱动的调速范围为0～24m／min，最先进的已达到0～240m／min。已经实现了驱动电机不通过减速环节直接连接丝杠带动运动部件进行运动的方案。随着直线伺服驱动电机性能的不断提高，由电机直接带动工作台运动已成为可能。直接驱动取消了包括丝杠在内的所有机械传动元件，实现了数控铣床的“零传动”。
④采用预紧措施 预加载荷可以消除滚动摩擦传动副的间隙和提高其传动刚度，也可以提高传动元件的刚度。如丝杠可采用两端轴向固定和预拉伸的方法来提高其传动刚度。82



（2）采用低而稳定的摩擦传动副
数控铣床进给系统多采用刚度高、摩擦因数小面稳定的滚动摩擦副，如滚珠丝杠螺母副、直线滚动导轨等。聚四氟乙烯导轨和静压导轨由于其摩擦因数小，阻尼大，也为数控机床进给传动所采用。
（3）惯量匹配
最佳惯量匹配目的是为保证伺服驱动电机的工作性能和满足传动系统对控制指令的快速响应的要求。由于在通常情况下，传动系统机械结构的惯量总是大于要求的数值，故而在设计时为得到最佳的惯量匹配，总是希望传动系统中元件的质量和惯量要小一些，降速比则要大一些。
（4）提高传动件精度
高质量的机械传动配合与高性能的伺服电机使现代数控机床进给系统性能有了大幅度提高，随着控制系统分辨率从0.001mm提高到0.0001mm，普通精度级数控机床的定位精度目前已从±0.012mm／300mm 提高到±0.005mm／300mm，精密级的定位精度已从±0.005mm／全行程提高到±0.0015mm／全行程，重复定位精度也已提高到0.001mm。
由于在提高传动精度和刚度、消除间隙及在惯量匹配等方面的努力，使数控铣床进给传动系统的快速响应能力，即伺服系统的响应能力和机械传动装置的加速能力方面已有了大幅度提高，过渡过程时间已能控制在200ms之内，正在向提高到几十毫秒之内发展。随着快速响应能力和系统稳定性的提高，进给速度已能达到24m／min（分辨率0.1μm），快速进给速度已能达到100m／min（分辨率0.1μm）。
3.4 数控铣床伺服驱动应用实例
某台数控铣床工作台的最大纵向进给力F1—5000N，工作台质量300kg，工件与夹具的最大质量为500kg，工作台纵向行程为750mm，进给速度为1～400mm／min，快速进给速度2max＝15m／min。导轨为矩形滑动导轨，表面粘接聚四氟乙烯软带。定位精度要求为±0.012／300mm，重复定位精度为±0.006mm。试设计该数控铣床工作台的纵向（X轴）进给系统。要求拟定其传动系统，选择滚珠丝杠及其支承组合方式，选择伺服电机及反馈装置，选择伺服系统的增益，验算精度是否符合设计要求。具体步骤如下。
3.4.1 传动系统设计
根据本进给系统定位精度的要求，初步选用半闭环伺服系统。如果经计算后半闭环系统不能满足定位精度要求，可改用全闭环伺服系统。
从产品目录中查得伺服电机的最高转速mmw为1500r／min或2000r／min。如果伺服电机通过联轴器与丝杠直接连接，即i＝1，工作台快速进给的最高速度要求达到vmax＝15m／min。取电机的最高转速Nmmx—1500r／min，则丝杠的最高转速mmsx也为1500r／min。基本丝杠导程
1000vm 1000x15
=10(mm) ="d
Naaas
1500
根据精度要求，数控机床的脉冲当量可定为δ＝0.001mm／脉冲。何服电机每转应发出
83 

第4章
数控铣床位置检测装置4.1 位置检测装置的要求与类型
计算机数控系统的位置控制是将插补计算的理论位置与实际反馈位置相比较，用其差值去控制进给电机。而实际反馈位置的采集，则是由一些位置检测装置来完成的。
4.1.1 位置检测装置的要求
位置检测装置是数控铣床伺服系统中的重要组成部分，其作用是检测位移和速度，发送反馈信号，构成伺服系统的闭环或半闭环控制。中档数控铣床多采用半闭环控制系统，而全功能数控铣床则是采用闭环控制系统。
对于采用半闭环控制的数控铣床，其环路内不包括机械传动环节，它的位置检测装置一般采用旋转变压器，或高分辨率的脉冲编码器，装在进给电机或丝杠的端头，旋转变压器（或脉冲编码器）每旋转一定角度，都严格地对应着工作台移动的一定距离，测量了电机或丝杠的角位移，也就间接地测量了工作台的直线位移。
对于采用闭环控制系统的数控铣床，应该直接测量工作台的直线位移，可采用感应同步器、光栅、磁栅等测量装置。当由工作台直接带动感应同步器的滑动尺移动时，与装在机床床身上的定尺配合，测量出工作台的实际位移值。可见，数控铣床的加工精度主要由检测系统的精度决定。
位移检测系统能够测量的最小位移量称为分辨率。分辨率不仅取决于检测元件本身，也取决于测量线路。
数控铣床对检测装置的主要要求如下。
①高可靠性和高抗干扰性。抗各种电磁干扰，抗干扰能力强，基准尺对温、湿度敏感性低，温、湿度变化对测量精度影响小。
②满足精度和速度要求。
③使用维护方便，适合机床运行环境。④成本低。
4.1.2 位置检测装置的分类
对于不同类型的数控铣床，根据不同的工作环境和不同的检测要求，应该采用不同的检测方式，见表4—1。
（1）模拟式与数字式
①数字式测量方式 是将被测量单位量化为数字形式表示，它的特点如下。a.被测量单位量化后转换成脉冲个数，便于显示处理。
b.测量精度取决于测量单位，与量程基本无关。c.检测装置比较简单，脉冲信号抗干扰能力强。
②模拟式测量方式 是将被测量单位用连续的变量来表示。在大量程内作精确的模拟06



农中1位置检测装置分类
模拟式
数字式 类型
增量式
绝对式
增量式
绝对式 直线型
①直线型感应同步器：
①三速直线型感应同步器：
①计量光型：
多通道浩射光栅 ②绝对值式磁尺
②激光干涉仪 리■인
①旋转变压器：
①多根旋转变压器：
①增量式光电脉冲编码器：
绝对式光电脉冲国 同转型
②圆型感应同步器：
②三速院型感应网步器
②圆光错
码器 ①调型磁尺
式检测，在技术上有较高的要求，数控铣床中模拟式检测主要用于小量程测量，它的主要特点如下。
n.直接对被测量单位进行检测，无需量化。b.在小量程内可以实现高精度测量。
c.可用于直接检测和间接检测。（2）增量式与绝对式
①增量式测量方式 只测量位移增量，移动一个测量单位即能发出一个测量信号。其优点是检测装置比较简单，能做到高精度，任何一个对中点均可作为测量起点，其缺点是一且计数有误，此后结果全错、发生故障时（如断电、断刀等），事故排除后，再也找不到正确位置。
②绝对式测量方式 被测量的任一点都以一个固定的零点作基准，每一被测点都有一个相应的测量值，这样就避免了增量式检测方式的缺陷，但其结构较为复杂。
（3）直接测量与间接测量
①直接测量 对机床的直线位移采用直线型检测装置检测，称为直接测量，直接测量精度主要取决于测量元件的精度，不受机床传动装置的直接影响，但检测装置要与行程等长，这对大型数控铁床来说，是一个很大的限制。
②间接测量 对机床直线位移采用回转型检测元件测量，称为间接测量，间接测量精度取决于检测装置和机床传动链两者的精度，但间接测量无长度限制。
4.2 常用位置检测装置
4.2.1 脉冲编码器
脉冲编码器是一种旋转式脉冲发生器，它把机械转角变成电脉冲，是一种常用的角位移传感器。
（1）脉冲编码器的分类和结构
脉冲编码器分光电式、接触式和电磁感应式三种。光电式的精度与可靠性都优于其他两种，因此数控铣床上只使用光电式脉冲编码器。由霍耳效应构成的电磁感应或脉冲发生器也有用作速度检测的。光电脉冲编码器按每转发出的脉冲数的多少来分，又有多种型号，但数控铣床最常用的如表4—2所列，根据机床滚珠丝杠螺距来选用相应的脉冲编码器。
91 

表4—2 光电脉冲编码器
脉冲编码器每转产生脉冲数
每转脉冲移动量／mm
每转脉冲移动量／inΦ2000
2,3.4.6.8
0.1.0.15,0,2,0.3,0.4 2500
5.10
0.25.0.5 3000
3.6.12
0.15.0.3.0.6 ①1in＝25.4mm，下同，
为了适应高速、高精度数字伺服系统的需要，先后又发展了高分辨率的脉冲编码器，见表4-3，
表＋—3 高分辨率脉冲编码器脉冲编码器每转产生脉冲数
每转脉冲移动量／mm
每转脉冲移动量／in20000
2,3,1,6,8
0.1.0.15.0.2.0.4 25000
5.10
0.25.0.5 30000
3.5.12
0.15,0.3.0.6
增量式光电脉冲编码器如图4—1所示，最初的结构就是一种光电盘。在一个圆盘的圆周上分成相等的透明与不透明部分，圆盘与工作轴一起旋转。此外，还有一个固定不动的扇形薄片与圆盘平行放置，并制作有辨向窄缝（或窄缝群），当光线通过这两个作相对运动的透光与不透光部分时，使光电元件接收到的光通量也时大时小地连续变化（近似于正弦信号），经放大、整形电路的变换后变成脉冲信号，通过计量脉冲的数目和频率即可测出工作轴的转角和转速。
审■圆盘 检测窄缝
窄缝圆盘 光电变换图
国别
光源 电源
脉冲化线路
①②③④⑤⑨ 方向判别线路
显示部分 可逆计数器
检测窄■群b
检测窄■群：
(b)
图4—1 增量式光电脉冲编码器的结构原理
高精度脉冲编码器要求提高光电盘圆周的等分窄缝的密度，实际上变成了圆光栅线纹。它的制作工艺是在一块具有一定直径的玻璃圆盘上，用真空镀膜的方法镀上一层不透光的金属薄膜，再涂上一层均匀的感光材料，然后用精密照相腐蚀工艺，制成沿圆周等距的透光和不透光部分相间的辐射状线纹。一个相邻的透光与不透光线纹构成一个节距P。在圆盘的里圈不透光圆环上还刻有一条不透光条纹，用来产生一转脉冲信号。辨向指示光栅上有两段线纹组A和B，每一组的线纹间的节距与圆光棚相同，而A组与B组的线纹彼此错开1／4节距。指示光栅固定在底座上，与圆光栅的线纹平行放置，两者间保持一个小的节距。当圆光栅旋转时，光线透过这两个光栅的线纹部分，形成明暗相间的条纹，被光电元件接受，并变换成测量脉冲，其分辨率取决于圆光栅的一圈线纹数和测量线路的细分倍数。
92 

光电脉冲编码器的结构示意图如图4—2所示。该编码器通过十字连接头与伺服电机连接，它的法兰盘固定在电机端面上，罩上防护罩，构成完整的驱动部件。
图4—2 光电脉冲编码器的结构示意图1—印制电路板：2—光源；3一圆充棚；4一指示光■：
5—光电池组；6—底座：7—护罩；8一轴
（2）脉冲编码器的工作原理
如上所述，光线透过圆光栅和指示光栅的线纹，在光电元件上形成明暗交替变化的条纹，产生两组近似于正弦波的电流信号A与
节■P B．两者的相位相差90°，经放大、整形电路
变成方波，如图4—3所示。若A相超前于B相，对应电机作正向旋转；若B相超前于A相，对应电机作反向旋转、若以该方波的前沿或后沿产生计数脉冲，可以形成代表正向位移和反向位移的脉冲序列。
Z相是一转脉冲，也称为零位脉冲，它是用来产生机床的基准点的，通常，数控铣床
A相 的机械参考点与各轴的脉冲编码器发出Z相
B相 脉冲是一致的，即该信号与A、B信号严格
同步。
在应用时，从脉冲编码器输出的A和A，B和B四个方波被引入位置控制回路，经辨向
图4—3 脉冲编码器的输出波形和乘以倍率后，变成代表位移的测量脉冲。
经频率／电压变换器变成正比于频率的电压，作为速度反馈信号，供给速度控制单元进行速度调节。
图4—4（a）为光电脉冲编码器的信号处理线路图。其中施密特触发器作为放大整形用。它将相差90°的两组正弦波电信号A与B，放大整形为方波。若A相超前B相90°，如图4—4（b）右边图所示，则输出正转脉冲列G；若A相落后B相90°，如图4—4（b）左边图所示，则输出反转脉冲列F。
脉冲编码器主要技术性能如下。电源：5V±5％，≤0.35A。输出信号：A，X；B，B；Z，Z.
93 

D
门电路
正转脉冲 施特
微分线路
G反转脉冲 微分代路
门电路 国特
图4—4 信号处理线路和光电输出波形每转脉冲数（普通型）：2000，2500，3000。
最高转速：2000r／min。温度范围：0～60℃，轴向审动：0.02mm。
转动惯量：＜5.7kg·c㎡质量：2.0kg。
阻尼转矩：＜8N·cm。
在进行直线距离测量时，可将光电编码器装到伺服电机轴上，因伺服电机轴与滚珠丝杠相连，所以当伺服电机转动时，由滚珠丝杠带动工作台或刀具移动。这时光电编码器的转角对应直线移动部件的移动量，因此，可根据滚珠丝杠的导程来计算移动部件的位移量。
4.2.2 光栅位置检测装置
在数控铣床上，光糖测量装置应用较多，它的测量精度可达1μm，通过细分电路可达到0.1μm甚至更高。
光栅分为物理光栅和计量光栅，物理光栅刻线细面密，棚距在0.002～0.005mm之间，常用于光谱分析和光波波长的测定，计量光栅，比较而言刻线较粗，但栅距也较小，在94



0.004～0.25mm之间，主要用在数字检测系统。光糖传感器为动态测量元件，按运动方式分为长光栅和圆光栅，长光概用来测量直线位移，圆光栅用来测量角度位移。根据光线在光栅中的运动路径分为透射光栅和反射光栅。一般光栅传感器都是做成增量式的，也可以做成绝对值式。目前光棚传感器应用在高精度数控铣床的伺服系统中，其精度仅次于激光式测量。在数控铣床上经常使用计量光栅这种精密的检测装置，它具有测量精度高、响应速度快等特点。
（1）光栅检测装置的结构
长光栅检测装置（直线光栅传感器）是由标尺光栅和光栅读数头两部分组成。标尺光栅一般固定在机床活动部件上（如工作台上），光栅读
数头装在机床固定部件上。当光栅读数头相对于标尺光栅移动时，指示光栅便在标尺光棚上相对移动。标尺光栅和指示光栅的平行度以及两者之间的间隙要严格保证（0.05～0.1mm），图4—5所示为光糖检测装置的安装结构。
标尺光栅和指示光棚通称为光栅尺，它们是在真空镀膜的玻璃片或长条形的金属镜面上光刻出均匀密集的线纹。光棚的线纹相互平行，线纹之间的距离称为栅距。对于圆光栅，这些线纹是圆心角相等的向心
图4—5 光栅检测装置的安装结构条纹。两条向心条纹之间的夹角成为栅距角。栅距和
1—防护垫：2—光栅读数头：栅距角是光棚的重要参数，对于长光栅，金属反射光
3—标尺光：4一防护罩栅的线纹密度为每毫米有25～50个条纹，玻璃透射
光栅为每毫米100～250个条纹。对于圆光栅，一周内刻有10800条线纹。
光栅读数头又称为光电转换器，它把光栅莫尔条纹变为电信号。图4—6所示为垂直入射的读数头。读数头是由光源、透镜、指示光栅、光敏元件和驱动线路组成。图4—5中所示的标尺光栅不属于光栅读数头，但它要穿过光栅读数头，且保证与指示光栅有准确的相互位置关系。光栅读数头还可分为分光读数头、反射读数头和镜像读数头等。
标尺光糖
图4—6 光栅读数头
1—光源：2—透镜：3—指示光：4—光敏元件：5—驱动线路（2）光栅传感器工作原理
以透射光栅为例，当指示光栅上的线纹和标尺光栅上的线纹之间形成一个小角度θ，并且两个光栅尺刻面相对平行放置时，在光源的照射下，位于几乎垂直栅纹上，形成明暗相间的条纹。这种条纹称为莫尔条纹，如图4—7所示，严格地说，莫尔条纹排列的方向是与两片光栅线纹夹角的平分线相垂直。莫尔条纹中两条亮纹或两条暗纹之间的距离称为莫尔条纹宽
95 

图4-7 莫尔条纹
度，以W表示。
莫尔条纹具有以下特征。
①莫尔条纹的变化规律 两片光栅相对移过一个栅距，莫尔条纹移过一个条纹间距。由于光的衍射与干涉作用，莫尔条纹的变化规律近似正（余）弦函数，变化周期数与光栅相对移过的栅距数同步，
②放大作用 在两光栅线夹角小的情况下，莫尔条纹宽度W（mm）和光栅栅距P、栅线角θ（rad）之间有下列关系，即
W=P/sine 由于0角根小，sin0＝θ，则
W■P/0
(4-1)
若P＝0.01mm，8＝0.001rad，则由式（4—1）可得W＊10mm，则把光栅距转换成放大1000倍的莫尔条纹宽度。
③均化误差作用 莫尔条纹是由若干光栅条纹共用形成，例如，每毫米100线的光栅，10mm宽的莫尔条纹就由1000条线纹组成，这样栅距之间的相邻误差就被平均化了，消除了由于栅距不均匀、断裂等造成的误差。
（3）光栅检测装置的位移—数字变换电路
图4—8所示为光栅测量系统，光源光线通过标尺光栅和指示光栅产生莫尔条纹，图中由a、b、c、d四块光电池接收莫尔条纹信号，每相邻两块之间距离为W／4，四块电池的距离之和就是莫尔条纹间距W，当莫尔条纹移动时，由于在莫尔条纹间距W内通过光线强度呈正弦波变化，所以每块光电池产生的电流（电压）也是正弦波，并且相邻两块电池产生的正弦波电信号相位相差90°，而a、c及b、d间的相位相差180°，把a、c的输出接到差动放大器的两个输入端，把b、d的输出接到另一差动放大器，可获得两组相位相差90°的放大信号。再经变换电路处理后可得到正向脉冲和反向脉冲，由可逆计数器接收。用可逆计数器进行计数，就可测量光栅的实际位移，
图4—9所示为光栅测量装置的位移—数字变换电路，这是一个4倍频电路，图（a）为原理图，图（b）为波形图。
96 

正向
差分放大
脉冲 差分放大
d 光电元件
图4—8 光栅测量系统
正向---反向 7
微分 差动
R
正向脉冲 微分
硅光
B
正向时上 电池组
开沿微分 ¥
8 反向脉冲 正向脉冲
反向时上
升沿微分 反向脉冲-
（a）原理图
（b）波形图 图4—9 光栅测量装置的位移—数字变换电路
a、c和b、d信号送入差动放大器后分别得到sin信号和cos信号。sin、cos信号经整形变成方波。整形后的方波一路直接进入微分电路产生脉冲，另一路反向后再进入微分电路产生脉冲。当A点在方波上升沿时，A＇处产生脉冲，当A点在下降沿时，A处为上升沿，■处产生脉冲。同样，B点在方波上升沿时，B＇处产生脉冲，当B点在下降沿时，B处产生脉冲。也即在正向移动或反向移动时每个方波的上升沿产生脉冲。这些脉冲信号再经组合逻辑电路（与门和或门等）处理后，便可输出4倍频的正向脉冲或反向脉冲。
除4倍频电路外，还有10倍频、20倍频电路，倍频电路可提高位置测量的分辨率和测量精度。
4.2.3 磁栅位置检测装置
磁栅是用电磁方法计算磁波数目的一种位置检测元件，可用作直线和角位移的测量。磁栅与同步感应器、光栅相比，测量精度略低。但具有复制简单及安装方便等一系列优点，特别是在油污、粉尘较多的环境中应用，具有较好的稳定性。因此，磁栅较广泛地应用在数控铣床、精密机床和各种测量机上。
97 可逆计数器
门电路 方向刊别 

磁栅检测装置是将具有一定节距的磁化信号用记录磁头记录在磁性标尺的磁膜上，用来作测量基准。在检测过程中，用拾磁磁头读取磁性标尺上的磁化信号并转换成电信号，然后
通过检测电路把磁头相对于磁尺的位置送给伺服控制系统或数字显示装置。
何服系统
磁概检测装置由磁性标尺、拾磁磁头和检测电检测电器
数字显示
路三部分组成。图4—10所示是磁栅检测装置方枢图。
4.2.3.1 磁性标尺图4—10 磁栅检测装置方框图
磁性标尺常采用不导磁材料做基体，在上面镀
上一层10～30μm厚的高磁性材料，形成均匀的磁膜，再用录磁磁头在磁尺上记录节距相等的周期性变化的磁信号，用于作为测量基准，信号可为正弦波、方波等，节距通常为0.05μm、0.1μm、0.2μm等，最后磁尺表面涂上保护层，以防磁头与磁尺频繁接触过程中的磁膜磨损。
磁性标尺按形状可分为用于检测直线位移的平面实体型磁尺、带状磁尺、同轴型线状磁尺、用于检测角位移的回转型磁尺等，如图4—11所示。实体型磁尺主要用于精度要求较高的场合，由于其制造长度有限，因此目前应用较少。带状磁尺主要应用在量程较大，安装面不易安排的场合，同轴型磁尺抗干扰能力强，主要用于小型或结构紧凑的测量装置中，
尺座 线
■头 状尺 实体尺
带状尺 尺■ （屏■■）
尺额 (■■)
尺座 尺
（■理部） （继沫塑料）
磁尺
组合磁务 （a）实体型础尺
（b）带状磁尺
（c）线状磁尺
（d）回转型■尺 图4—11 按磁性标尺基体形状分类的各种磁尺
4.2.3.2 拾磁磁头
拾磁磁头是进行磁电转换的器件，它将磁性标尺上的磁信号检测出来，并转换成电信号，磁栅的拾磁磁头与一般录音机上使用的单间胞速度响应式磁头不同，它不仅能在磁头与磁性标尺之间有一定相对速度时拾取信号，而且也能在它们相对静止时拾取信号。这种磁头叫做磁通响应型磁头，其结构如图4—12所示。
根据机床数字控制系统的要求，为了在低速运动和静止时也能进行位置检测，必须采用磁通响应型磁头，面不能采用普通录音机上的速度响应型磁头。
磁通响应型磁头带有一个可饱和铁心的二次谐波调制器，如图4—12所示。铁心由软磁性材料制成，上面有两个绕组：一个励磁绕组：一个输出绕组，一定幅值的高频励磁电流通过励磁绕组，产生磁通中，与磁性标尺作用于磁头的直流磁通相叠加成Φ，由于方向不同，各分支路的磁通有的被加强，有的被减弱。当磁头位于图中的b点时，Φ＝0，输出绕组的输出信号e＝0。当磁头偏离这个位置时，Φ≠0，使磁路工作点向不同的方向移动。因98
怡研磁人 后性■ 

磁性标尺上
磁场分布
磁性标尺
材料基体 NN
SS NN SS NN SS
磁性膜 相当于速度
响应票磁头
输出信号e-Easi12mx／2）simo 拾融烧组
可饱和铁心
助磁绕组
图4—12 磁通响应型磁头
磁路的非线性，便可在输出绕组中得到高频励磁电流的二次谐波的输出信号。输出电压为
2mx
Eosin
sinaal
(4-2) Y
式中 En—电压信号幅值：
λ—磁性标尺上的磁化信号的节距：x—磁头在磁性标尺上的位移量：—励磁电流频率的2倍。
这种调制信号与磁头相对于磁性标尺的相对速度无关。只要计算出输出信号幅值的变化次数，并以写人磁性标尺的磁信号的节距为单位，便可计算出位移量。如磁性标尺写入磁信号的节距为0.04mm，当把它细分为四等份时，其磁尺的分辨率可达0.01mm。
4.2.3.3 磁栅的工作原理
磁概作为检测元件，根据对拾磁磁头上拾磁绕组中输出电压信号的处理方式不同，可做成鉴相工作方式和鉴幅工作方式，不论采用哪种工作方式，都必须设置两个或两组间距相差（m±1／4）x的拾磁磁头，如图4—13所示。在鉴幅工作方式时，这种设置能够辨别磁头移动的方向，同时提高分辨率；在鉴相工作方式时，这种设置能够实现鉴相检测。
（1）鉴相工作方式
对图4—13所示的两组磁头A和B的励磁绕组通以同频率，同幅值但相位相差90°的励磁电流，则A和B两个拾磁绕组输出的电压分别为
Uut=Uosin(2xx/λ)coswl
(4-3) Uia-Uocos(2mx/A)sinwl
(4-4) 式中 Un—输出线圈中输出的感应电压；
U。—感应电压幅值；λ-磁性标尺节距； 

选定某一N极作为位移零点，x为磁头对磁性标尺的位移量；—输出线圈感应电压的频率，它比励磁电流的频率。高一倍。
1Φ
磁性标尺 磁场分布 0
磁性膜 NIN
NIN SIS
NIN A
肋磁电流
图4—13 签相工作方式检测原理将U、U求和得
U=Uasin(2mx/λ+cl)
(4-5) 可以看出，输出电压随磁头相对于磁尺的位移量x的变化而变化，因而根据输出电压的相位变化，可以测量磁尺的位移量。双磁头是为了识别磁尺的运动方向而设置的，两磁头按（m±1／4）λ配置，m为正整数，λ／4节距相当于π／4电气角。
（2）签幅工作方式
鉴幅式测量检测电路与鉴相式测量检测电路一样，对两组磁头的励磁绕组通以同频率、同幅值，同相位的励磁电流，则两组磁头绕组输出的感应电压为
Umi=Uosin2mx/A)sinwl
(4-6) Uuz=Uocos(2mx/A)sinat
(4-7) 如果用检波器将其中的高频载波sint滤掉，便可得到相位相差π／2的两个交流电压信号，即
U=Uosin(2mx/A)
(4-8) U-Uncos(2mx/λ)
(4-9)
对U和U进行放大、整形，转换成方波信号，此方波信号与被测位移，即磁头相对于磁性标尺的位移，有确定的对应关系，因而可测出位移x。
在实际应用过程中，一般选用多个磁通响应型磁头，以一定的方式串联起来，做成一体，称为多间隙磁通响应式磁头，这样，不仅可以提高灵敏度，而且能均化节距误差，并使输出幅值均匀，此外，当磁头间距与磁栅栅距一致时，输出信号最大，且具有良好的选频特性。
100 

4.2.4 旋转变压器
旋转变压器是一种常用的转角检测元件，由于结构简单，工作可靠，对环境要求低，信号输出幅度大，抗干扰能力强，因此，被广泛应用在半闭环控制的数控铣床上。
（1）旋转变压器的结构
旋转变压器可分为有刷式和无刷式，如图4—14所示。它的结构与绕线式异步电动机相似，其定子和转子铁心由高导磁的铁镍软磁合金或硅铜薄板冲成的带槽芯片叠成，槽中嵌有线圈。定子线圈为变压器的原边，转子线圈为变压器的副边，励磁电压接到原边，频率通常为400Hz、500Hz、1000Hz、5000Hz等几种。
（a）有刷式旋转变压器结构
（b）无刷式旋转变压器结构1—接线柱：2—转子绕组；3—定子绕组；
1一分解器定子线圈：2一分解器转子线圈；3—转子4—转子：5—整流子；6—电刷
轴；4一分解器转子；5一分解器定子；6—变压器定子：
7—变压器转子：8—变压器一次线圈：9—变压器二次线圈图4—14 旋转变压器
如果励磁电压的频率较高，则旋转变压器的尺寸可以显著减小，特别是转子的转动惯量可以做得很小，适用于加、减速比较大，或与高精度的齿轮、齿条组合使用的场合。有刷式旋转变压器转子绕组接至滑环，输出电压通过电刷引出。无刷式旋转变压器没有电刷和滑环，和有刷式变压器相比，可靠性好，寿命长，更适合于数控铣床。无刷式旋转变压器由两部分组成，即左边的分解器和右边的变压器。变压器原边绕组固定在与转子连接于一体的线轴上，可与转子一起旋转。分解器的转子绕组输出信号接到变压器的原边，而输出从变压器副边引出，如图4—14（b）所示。
常见的旋转变压器一般有两极绕组和四极绕组两种结构形式。两极旋转变压器，定子和转子各有一对磁极。四极绕组各有两对相互垂直的磁极，检测精度高，在数控铣床中应用普遍。除此之外，还有一种多极式旋转变压器，用于高精度绝对式检测系统，也可以把一个极对数少的和一个极对数多的两种旋转变压器做在一个磁路上，装在一个机壳内，构成所谓的粗测和精测电气变速双通道检测元件，用于高精度测量和同步系统。
（2）旋转变压器的工作原理
旋转变压器在结构上保证其定子和转子之间气隙内磁通分布符合正弦规律，因此，当励磁电压加到定子绕组上时，通过电磁耦合，转子绕组产生感应电动势，其工作原理如图4—15所示。
101 

U-Lasinow
定子
转子
wwW
0-6 0-0
8-90 E=misn
E-nsine 0-3
图4—15 旋转变压器的工作原理
设加到定子绕组的励磁电压为U1—Umsinat，通过电磁耦合，转子绕组将产生感应电动势E1，当转子绕组的磁轴与定子绕组的磁轴相互垂直时，定子绕组磁通不穿过转子绕组，所以转子绕组的感应电动势E：＝0，当转子绕组的磁轴自垂直位置转过90°时，由于两磁轴平行，此时转子绕组的感应电压为最大，即E1＝nUmsinat。当转子绕组的磁轴自水平位置转过6．角，转子绕组因定子磁通变化而产生的感应电动势为
E1=nU1sinθ=nUmsinwtsinθ
(4-10) 式中＃变压比：
U—定子的输出电压；
Um—定子的最大瞬时电压。
当转子转到两磁轴平行时，即0＝90°时，转子绕组中感应电动势最大，即
E1=nUmsinat
(4-11) （3）旋转变压器的应用
在实际应用中，通常采用的是正弦、余弦旋转变压器。其定子绕组和转子绕组中各有互相垂直的两个绕组，如图4—16所示，当励磁绕组用两个相位相差90°的电压供电时，应用叠加原理，在副边的一个转子绕组中磁通为（另一绕组短接）
Φj=Φ1sinθ1+Φ2cos02
(4-12) 102
石输出
山■ 

U=Umsiner
1o
图4—16 正弦、余弦旋转变压器而输出电压为
U3=nUmsinwtsind+nUmcoscutcos0=nUmcos(aat-01)
(4-13)
由此可知，当把励磁信号U1＝Umsinar和U2＝Uacosat施加于定子绕组时，旋转变压器转子绕组便可输出感应信号U3。若转子转过角度01，那么感应信号U1和励磁信号U：之间一定存在着相位差，这个相位差可通过鉴相器线路检测出来，并表示成相应的电压信号。这样，通过对该电压信号的测量便可得到转子转过的角度0。但由于U3＝nUmcos（ωt—θ1）是关于变量θ1的周期函数，故转子每转一周，U3值将周期性地变化一次。因此，在实际应用时，不但要测出U3的大小，而且还要测出U3的周期性变化次数，或者将被测角位移限制在180°之内，即每次测量过程中，转子转过的角度小于半周。
应用时旋转变压器安装在滚珠丝杠上，当6从0°变化到360°时，表示丝杠上的螺母移动了一个螺距，由此可间接地测量出工作台移动距离的大小。测量工作台整个行程全长时，可加一个计数器，累计行走的螺距数，即可折算成位移长度。
4.2.5 感应同步器
感应同步器可理解为多极旋转变压器的展开形式，它利用两个平面形印刷绕组，其间保持均匀的气隙，相对平行移动时其互感随位置的变化面变化，是一种高精度的检测装置。按其结构可分为直线感应同步器和圆形感应同步器两种，直线感应同步器用于测量直线位移，而圆形感应同步器用于检测角位移。直线感应同步器由定尺和滑尺两部分组成；而圆形感应同步器由定子和转子组成。感应同步器的这两部分绕组相当于旋转变压器的初级和次级线圈，它们都是利用交变磁场和互感原理工作的。
4.2.5.1 感应同步器的特点
感应同步器作为检测元件有如下优点。
103 U2=Umsinet



（1）检测精度高
感应同步器可直接对机床位移进行测量，不经过任何机械传动装置，所以测量结果只受本身精度的限制。此外，感应同步器的极对数多，其输出电压是许多对极的平均值。因此，元件本身在制造中所造成的微小误差由于取平均值而得到补偿，而平均效应所得到的测量精度要比元件本身的制造精度高得多。
（2）工作可靠、抗干扰能力强
感应同步器是利用电磁感应原理产生测量信号的，所以不怕油污和灰尘的污染。另外，感应同步器平面绕组的阻抗很低，使它受外界电磁场的影响比较小。
（3）维修简单、寿命长
定尺、滑尺之间无接触磨损，在机床上安装比较简单。使用时需加防护罩，防止切屑进人定尺和滑尺之间划伤导片。
（4）测量距离长
直线同步感应器的每根定尺长为250mm，进行大长度测量时，可用多根定尺接长，而且移动速度基本上不影响测量，故广泛应用于大，中型铣床中。
（5）结构简单
工艺性好，成本低，便于成批生产，但与旋转变压器相比，感应同步器的输出信号比较弱，需要一个放大倍数很高的前置放大器。
4.2.5.2 感应同步器的结构和种类
直线感应同步器由定尺和滑尺两部分组成，绕组结构如图4—17所示。滑尺上制有两个
绕组，即正弦绕组和余弦绕组，它们相对于定尺定尺
绕组在空间错开1／4节距，标准感应同步器的定尺与滑尺之间有均匀的气隙，在全程上保持（0.25±0.05）mm，标准定尺长250mm，表面上制有连续平面绕组，绕组节距一般为2r＝滑尺
2mm。直线感应同步器的定尺和滑尺的基板通常采用与机床床身材料的线胀系数相近的钢板，用绝缘黏结剂把铜箔粘在钢板上，经精密的照相
腐蚀工艺制成印刷绕组，再在尺子表面涂一层保图4—17 直线感应同步器
护层。滑尺表面有时还贴一层带绝缘的铝箔，以1—正弦磁绕组：2—余弦油磁绕组
防静电感应。直线感应同步器除标准型外，还有窄型和带状两种，标准型是直线感应同步器中精度最高的一种，应用最广泛。圆型感应同步器按直径大小可分为302mm，178mm、76mm和50mm4种类型。其直径的极数有360极、720极和1080极。在极数相同的条件下，圆型感应同步器的直径越大，则精度越高。
4.2.5.3 感应同步器的工作原理
如图4—18所示，滑尺上具有在空间上相差1／4节距的正弦绕组和余弦绕组，且定尺与滑尺节距相同。当滑尺励磁绕组与定尺感应绕组间发生相对位移时，由于电磁耦合的作用，感应绕组中的感应电压随位移的变化面呈周期性地变化，感应同步器就是利用这一特点来检测滑尺相对定尺的位置的。
当定尺绕组与滑尺绕组之一相重合时，如图4—18中的a点，这时定尺输出的感应电压最大：当滑尺绕组相对于定尺绕组平行移动时，感应电压逐渐减小，到达1／4节距的位置b104



定尺
n a点
nn b点
口 c点
□ 点
F c点
第 电压
图4—18 感应同步器的工作原理
时，由于各滑尺线圈磁场在定尺各线圈中产生的电压方向相反，所以定尺线圈输出电压为零：如果滑尺继续向c点移动，则滑尺磁场在定尺中产生的电压在负方向上逐渐增大，c点达到最大：当滑尺再向d点移动时，定尺电压又逐渐变为零；当移动一个节距，到达e点时，又与a点的情况相同，这样，滑尺移动一个节距，定尺感应电压输出一个余弦波，增大滑尺的励磁电压，可以提高滑尺的输出感应电压。但如果定尺输出电压过高，将引起较大的感应电流，使定尺温度升高，造成温度误差，以至于不能正常工作。所以，通常励磁电压为1~2V.
4.2.5.4 感应同步器测量系统
同旋转变压器一样，感应同步器也有两种信号测量系统，即鉴相测量系统和鉴幅测量系统。
（1）鉴相测量系统
给感应同步器滑尺的两个正、余弦绕组分别供以频率和幅值相同，相位相差90°的励磁信号，即
U,-Uasina
(4-14) Uc=UncOsal
(4-15) 则当滑尺移动x距离时，定尺绕组中的感应电动势为
Ua=kUmsin(ωr-0)=kUmsin(mt-πI/T)
(4-16) 式中 k—电磁耦合系数，通常小于1，随定尺与滑尺绕组平面间的间隙减小而增大；
Um—励磁电压幅值：2节距： -滑尺移动距离： -电气相位角。
105 滞尺的位移



由此可见，只要检测出定尺输出电压的相位，即可测量出滑尺相对于定尺的位移。
图4—19为感应同步器的鉴相检测系统方框图。工作过程中，数控系统发出指令脉冲，经脉冲—相位变换器变成相位信号0输入鉴相器，同时把反馈实际位移量的反馈相位角θ2也反馈到鉴相器进行比较，当两者相位一致（0—02）时，表示实际位置和给定的指令位置一致，当0≠0时鉴相器输出相位相差Δ0—01—02，并将它变成模拟电压，经放大后驱动何服系统，使部件作相应的位移，直到相位的位置Δ0—0，停止运动。
感应 同步器 내액
精补器
放大器 명
变换器
OVT
何眼
动机构
图4—19 鉴相检测系统方框图（2）鉴幅测量系统
鉴幅工作方式是根据感应输出电压的幅值变化来检测位移的，在这种工作方式下，滑尺的两个正、余弦绕组分别供以频率和相位相同，幅值不同的正弦电压，并根据定尺上感应电压的幅值变化来测定滑尺和定尺之间的相对位移量。
加在滑尺正、余弦绕组上励磁电压幅值的大小，应分别与要求工作台移动的x1（与位移相应的电角度为6）成正，余弦关系，即
U.-Umsin0;sinol
(4-17) Ue=Umcos01cosar
(4-18) 正弦绕组单独供电时
U.-UmsinØsinal
U.-0
当滑尺移动时，定尺上的感应电压U。随滑尺移动距离x（相应的位移角θ）而变化。设滑尺正弦绕组与定尺绕组重合时x＝0（即θ—0），若滑尺从x＝0开始移动，则在定尺上的感应电压为
U.=kUmsinØ sinalcos0
(4-19) 余弦绕组单独供电时
Uc=Umcos01sinat U,=0 

若滑尺从x—0开始移动，则在定尺上的感应电压为
ー-AUconinin 当正、余弦同时供电时，根据叠加原理有
U+inin(00)
(4-20) 由式（4—20）可知，定尺上感应电压的幅值随指令给定的位移x（の）与工作台实际位移量x（0）的差值的正弦规律变化。
鉴幅系统的主要特点如下。
①将感应同步器相对位移的调相作用转换为调幅方式。
②鉴幅系统构成一个闭合的环路，感应同步器就在环路之中。
③环路按照逐次比较原理进行数字量化，即利用脉冲电压转换器（相当于D／A转换）将位移转换为脉冲数
④滑尺正弦和余弦两个绕组分别以同频，同相而幅值不同的电源激励。
其工作状态方框图如图4—20所示。当工作台位移值未达到指令要求值时，即x≠x（0≠0）时，定尺感应总电动势U，≠0，此电动势经检波放大成直流信号控制伺服系统工作，使驱动元件带动工作台移动，直至x＝x；（0—0）时，U．—0，工作台停止移动、
税敏 基价
Aosin,siner 专额
D/A 转换
Ai
图4.25 ■值工作状态方框图
定尺感应电动势U。同时输至相敏放大器，与来自相位补偿器（相位补偿器对基准信号的正弦被相位作适当调整）的标准信号比较，控制工作台的运动方向。
幅值工作系统的另一种方式如图4—21所示、作为鉴幅检测系统，它是通过鉴别定尺绕组输出误差信号的幅值进行检测的。其中，鉴幅器相当于比较器，又称门槛电路，每当改变一个Δx的位移增量，就有误差电动势U、当U超过某一预调整的门槛电平时，即产生一个脉冲信号，并用此去修正误差信号U，使误差信号重新降低到门槛电平以下，以致误差信号总是在门槛电平的上下变动、这样就把位移量转换成了数字量，实现了位移的测量和显示。
门槛电平的整定，是根据脉冲位移当量来进行的、例如，当脉冲位移当量为0.01mm／脉冲时，那么门槛值应整定在0.007mm的数值上，亦即位移7μm产生的误差信号经放大正好达到门槛电平、另外，对2r＝2mm的感应同步器来说，一个门槛脉冲对应于使数模变换器修改1.8°的sinθ，cosd的励磁值。
107 

感应同步器
放大器 10kHz正
■U 区配变压器
张振■ D/A
计数变压器
时种脉冲
U 变换器
变换计数器 显示 显示计数器 数字皇示器
图4—21 鉴幅检测系统
励磁电压由数模变换器产生，而数模变换器则由多抽头的计数变压器、开关线路和变换计数器组成，计数变压器的抽头必须精确地按照正弦、余弦函数抽出。
4.2.6 激光干涉检测仪
在高精度的数控铣床上，要求有高精度的机床位置检测装置及定位系统，此时经常使用双频激光干涉仪作为机床的测量装置，而在精密数控铣床上，高精度的双频激光干涉测量系统是精密位置测量的决定因素，双频激光干涉仅是利用光的干涉原理和多普勒效应来进行位置检测的。
（1）激光干涉法测距
光的干涉原理表明：两列具有固定相位差，具有相同的频率、相同的振动方向或振动方向之间的夹角很小的光互相交叠，将会产生干涉，
激光干涉仪中的干涉现象如图4—22所示。由激光器发出的激光经分光镜A分成反射光束S和透射光束S2，S；由固定反射镜M1反射，S．由可动反射镜M2反射，反射回来的光在分光镜处汇合成相干光束。激光干涉仅利用这一原理使激光束产生明暗相间的干涉条纹，由光电转换元件接收并转换为电信号，经处理后由计数器计数，从而实现对位移量的检测。
图4—22 激光干涉仪中的干涉现象108



（2）多普勒效应
双频激光测量原理是建立在多普勒效应基础上的。多普勒效应是一种很重要的波动现象。当光源以速度u远离观察者，观察者接受到的光源的频率f与光源静止时的频率f存在差值Δf，称为多普勒频差。
，对于光波来说，不论光源与观察者的相对速度如何，测得的光速都是一样的，即测得的光频率与波长虽有所改变，但两者的乘积即光速保持不变，光源从观察者离开时与观察者从光源离开时有完全相同的多普勒频率，由相对理论给出的光的多普勒频率为
f=/ 1-u/c
(4-21) 1-(u/c)
式中，c为光速。
利用二项式展开，当u／c比值很小而略去高次项时，并用v代替u，就可得出
Δf=(f-)=f/
(4-22) （3）双频激光干涉仪基本原理
双频激光干涉仪由激光器、检偏器、光学干涉部分、光电接收元件、计数器电路等组成，如图4—23所示。
工作台 微光器
检验费 图量编号
D2 放大器
计数器 基准信号
图4—23 双频激光干涉仪的组成
将激光器放置于轴向磁场中，发出的激光为方向相反的右旋圆偏振光和左旋偏振光，得到两种频率f1、f2的双频激光。经分光镜M1，一部分反射光经检偏器射入光电元件D1，取得频率为fm＝fi—f2的光电流；另一部分通过分光镜M1的投射到达分光镜M2的a处。频率为fz的光束完全反射经滤光器变为线偏振光f2，投射到固定棱角镜M3后并反射到分光镜M2的b处。频率为f1的光束折射经滤光器变为线偏振光f1，投射到可动棱镜M4后也反射到分光镜M2的b处，两者产生相干光束。若M4移动，则反射光的频率发生变化而产生多普勒效应，其频差为多普勒频差Δ／.
频率为了一f±Δf的反射光与频率为f2的反射光在b处汇合后，经检偏器投入光电元件D2，得到频率为fm＝f2—（f1±Δf）的光电流。这路光电流与经光电元件D1得到的频
109 

率为fe的光电流，同时经放大器放大进入计算机，经减法器与计数器即可算出差值±Δf。在双频激光干涉仪中，可动棱镜的速度是v，由于光线射人可动棱镜，又从它那里返回，这相当于光电接收元件相对光源的移动速度是2v，根据式（4—22）有
Δf=2
(4-23) 这就是由可动棱镜移动而产生的光的频率变化，即多普勒频差。据此，可导出可移动棱镜在时间t内移动的距离L为
L-[2/2fdr
而Δ／di是在时间t内计算机计得的脉冲数N，式（4—24）就变为
(4-25) 式中，λ为光的波长。
这就是由光的多普勒效应推导得出的激光干涉仪测长的基本公式。
可移动棱镜M4固定在机床的工作台上，因而可计算出机床工作台的位移量。由于激光的波长极短，特别是激光的单色性好，其波长值很准确。因而，用双频激光干涉仪进行机床位置检测精度极高。
同时，由于采用多普勒效应，双频激光干涉仪的计数器是计算频率差的变化，不受激光强度和磁场变化的影响，即使在光强衰减90％时，双频激光干涉仪也能正常工作，这就是双频激光干涉仪的一个特点。
算式奉■
旅客有运为
专用章 

第5章 数控铣床控制系统
5.1 概述
数控系统与被控机床本体的结合体称为数控机床。它集机械制造、计算机、微电子、现代控制及精密测量等多种技术为一体，使传统的机械加工工艺发生了质的变化。这个变化的本质就在于用数控系统实现了加工过程的自动化。
5.1.1 数控系统的组成
数控系统一般由输入／输出装置、数控装置、驱动控制装置、机床电气逻辑控制装置四部分组成，机床本体为被控对象，如图5—1
驱动控制 所示。
装置 输入／
数控系统是严格按照外部输入的程序对
数控装置
机床电气逻辑
机床 工件进行自动加工的。数控加工程序按零件
加工顺序记载机床加工所需的各种信息，有
图5—1 数控系统组成的一般形式零件加工的轨迹信息（如几何形状和几何尺
寸等）、工艺信息（如进给速度和主轴转速等）及开关命令（如换刀、冷却液开／关和工件装／卸等）。加工程序常常记录在各种信息载体上，通过各种输入装置，信息载体上的数控加工程序将被数控装置所接收。
输入装置将数控加工程序等各种信息输入数控装置，输入内容及数控系统的工作状态可以通过输出装置观察，常用的输入／输出装置有键盘、纸带阅读机、磁盘驱动器、CRT及各种显示器件。
数控装置是数控系统的核心，它的主要功能是：正确识别和解释数控加工程序，对解释结果进行各种数据计算和逻辑判断处理，完成各种输人，输出任务。其形式可以是由数字逻辑电路构成的专用硬件数控装置或计算机数控装置。前者称作硬件数控装置，或NC装置，其数控功能由硬件逻辑电路实现；后者称为CNC装置，其数控功能由硬件和软件共同完成。数控装置将数控加工程序信息按两类控制量分别输出：一类是连续控制量，送往驱动控制装置：另一类是离散的开关控制量，送往机床电气逻辑控制装置。控制机床各组成部分实现各种数控功能。
驱动控制装置位于数控装置和机床之间，包括进给轴伺服驱动装置和主轴驱动装置，进给轴伺服驱动装置由位置控制单元、速度控制单元、电动机和测量反馈单元等部分组成，它按照数控装置发出的位置控制命令和速度控制命令正确驱动机床受控部件（如机床移动部件和主轴头等）。主轴驱动装置主要由速度控制单元控制。电动机可以是各种步进电动机、直流电动机或交流电动机。
机床电气逻辑控制装置也位于数控装置和机床之间，接受数控装置发出的开关命令，主要完成机床主轴选速、启停和方向控制功能，换刀功能，工件装夹功能，冷却、液压、气动、润滑系统控制功能及其他机床辅助功能。其形式可以是继电器控制线路或可编程控制器
111 

(PLC)。
根据不同的加工方式，机床本体可以是车床、铣床、钻床、镗床、磨床、加工中心及电加工机床等，与传统的普通机床相比，数控机床本体的外部造型、整体布局、传动系统、刀具系统及操作机构等方面都应该符合数控的要求。
当数控系统的一般组成形式中的数控装置采用计算机数控装置（CNC装置）时，该数控系统就称作计算机数控系统。目前，在市场上以NC装置为核心的硬件数控系统已日益减少，取而代之的是以CNC装置为核心的计算机数控系统，且绝大多数CNC装置都采用微型计算机装置。
计算机数控系统由硬件和软件共同完成数控任务，因此，组成形式更加灵活，其基本组成如图5—2所示，它具有数控系统一般组成形式的各个部分，此外，现代数控装置不仅能通过读取信息载体方式，还可以通过其他方式获得数控加工程序，例如，通过键盘方式输入和编辑数控加工程序：通过通信方式输入其他计算机程序编辑器、自动编程器、CAD／CAM系统或上位机所提供的数控加工程序，高档的数控装置本身已包含一套自动编程系统或CAD／CAM系统，只需采用键盘输入相应的信息，数控装置本身就能自动生成数控加工程序。
程序清单→ 输入
主轴控制 信息载体
装置
可缩程控制器
单元
主轴电动机 计算机
(PLC) 编程器→
数字 通信
提 CAD／CAM系统
控制装置 线路 上位机→
（CNC装置）
速度控期 单元
进给电动机 输出
装置
位置检测器 图5—2 计算机数控系统的组成
微机数控装置在软件作用下，可以实现各种硬件数控装置所不能完成的功能，如图形显示、系统诊断，各种复杂的轨迹控制算法和补偿算法的实现、智能控制的实现、通信及联网功能等。
现代数控系统采用可编程控制器取代了传统的机床电器逻辑控制装置，用可编程控制程序实现数控机床的各种继电器控制逻辑。可缩程控制器可位于数控装置之外，称独立型可编程控制器；可以与数控装置合为一体，称内装型可编程控制器。
5.1.2 数控系统的主要工作过程
数控系统的主要任务是对刀具和工件之间相对运动进行控制，图5—3初步描绘了数控系统的主要工作过程。
在接通电源后，微机数控装置和可编程控制器都将对数控系统各组成部分的工作状态进行检查和诊断，并设置初态。
对第一次使用的数控装置，还需要进行机床参数设置。如指定系统控制的坐标轴；指定112



数据输入
内部
外部
NC 程序编辑器
磁盘，穿孔纸带，计算机
通信
可编程控制器 数控加工程序
(PIC)
刀具交换，切削液开／关等数控加工程序详码
开关命令 （或解释）
M.T 几何数据
工艺数据
4址 插补
给定量 调节器 反馈位置处理 X输调节环 下轴调节环
M：电动机 乙轴调节
W：位置传感器 图5—3 数控系统的主要工作过程
坐标计量单位和分辨率：指定系统中配置可编程控制器的状态（有／无配置，是独立型还是内装型）：指定系统中检测器件的配置（有／无检测器件，检测器件的类型和有关参数）：工作台各轴行程的正负向极限的设置等，通过机床参数的设置，使数控装置适应具体数控机床的硬件构成环境。
当数控系统具备了正常工作的条件时，开始进行加工控制信息的输入。
工件在数控机床上的加工过程由数控加工程序来描述。按管理形式不同，编程工作可以在专门的编程场所进行，也可在机床前进行。对前一种情况，数控加工程序在加工准备阶段利用专门的编程系统产生，保存到控制介质（如纸带、磁带或磁盘）上，再输入数控装置，或者采用通信方式直接传输到数控装置，操作员可按需要，通过数控面板对读入的数控加工程序进行修改；对后一种情况，操作员直接利用数控装置本身的程序编辑器进行数控加工程序的编写和修改。
输入给数控装置的加工程序必须适应实际的工件和刀具位置，因此在加工前还要输入实际使用刀具的参数，及实际工件原点相对机床原点的坐标位置。
加工控制信息输入后，可选择一种加工方式（手动方式或自动方式的单段方式和连续方式），启动加工运行，此时，数控装置在系统控制程序的作用下，对输入的加工控制信息进行预处理，即进行译码和预计算（刀补计算、坐标变换等）。
系统进行数控加工程序译码（或解释）时，将其区分成几何数据、工艺数据和开关功能。几何数据是刀具相对工件的运动路径数据，如有关G功能和坐标指定等，利用这些数据可加工出要求的工件几何形状；工艺数据是主轴转速和进给速度等功能，即F、S功能和部分G功能；开关功能是对机床电器的开关命令，如主轴启／停、刀具选择和交换、冷却液的开／关、润滑液的启／停等辅助M功能指令等。
113 

由于在编写数控加工程序时，一般不考虑刀具的实际几何数据，所以数控装置根据工件几何数据和在加工前输人的实际刀具参数，要进行相应的刀具补偿计算，简称刀补计算，即使刀架相关点相对实际刀具的切削点进行平移，具体的刀补计算有刀具长度补偿和刀具半径补偿等，另外，在数控系统中存在着多种坐标系，根据输入的实际工件原点、加工程序所采用的各种坐标系等几何信息，数控装置还要进行相应的坐标变换。
数控装置对加工控制信息预处理完毕后，开始逐段运行数控加工程序。
要产生的运动轨迹在几何数据中由各曲线段起点、终点及其连接方式（如直线和圆弧）等主要几何数据给出，数控装置中的插补器能根据已知的几何数据进行插补处理。所谓插补（interpolation）一般是指已知曲线上的某些数据，按照某种算法计算已知点之间的中间点的方法，又称数据密化计算方法。在数控系统中，插补具体指根据曲线段已知的几何数据及相应工艺数据中的速度信息，计算出曲线段起点、终点之间的一系列中间点，分别向各个坐标轴发出方向、大小和速度都确定的协调的运动序列命令，通过各个轴运动的合成，产生数控加工程序要求的工件轮廓的刀具运动轨迹。按插补算法不同，有多种不同复杂程度的插补处理。一般按照插补结果，插补算法被分为脉冲增量插补法和数据采样插补法两大类。前者的插补结果是分配给各个轴的进给脉冲序列；后者的插补结果是分配给各个轴的插补数据序列。
由插补器向各个轴发出的运动序列命令为各个轴位置调节器的命令值，位置调节器将其与机床上位置检测元件测得的实际位置相比较，经过调节，输出相应的位置和速度控制信号，控制各轴伺服系统，使刀具相对工件正确运动，加工出要求的工件轮廓。
由数控装置发出的开关命令由系统程序控制，在各加工程序段插补处理开始前或完成后，适时输出给机床控制器，在机床控制器中，开关命令和由机床反馈的当前状态信号一起被处理和转换，作为对机床开关设备的控制命令，在现代的数控系统中，多数机床控制器都由可编程控制器取而代之，使大多数机床控制电路都用可编程控制器中可靠的开关实现，从而避免相互矛盾的、对机床和操作者有危险的现象（如在主轴还没有旋转之前的“进给允许”）出现。
在机床的运行过程中，数控系统要随时监视数控机床的工作状态，通过显示部件及时向操作者提供系统工作状态和故障情况。此外，数控系统还要对机床操作面板进行监控，因为机床操作面板的开关状态可以影响加工的状态，需及时处理有关信号。
5.1.3 数控系统的发展趋势
数控系统将来发展的主要目标是：增加可靠性，拓宽功能，提高操作舒适性，提高集成度，提高系统的柔性和开放性，进一步降低价格。表5—1列出了数控系统新的发展趋势。
新一代数控系统广泛采用多微处理机系统，而且大量采用大规模集成电路和三维高密度焊接的印制电路板，使系统小型化、经济、可靠。中、高档数控系统趋向于采用基于PC机的硬件构成形式，通过这种形式使应用PC软件（如MS Windows）、PC工具和PC硬件成为可能。这样，在硬件方面由于PC机市场大，导致PC组件价格低廉，从而使基于PC的数控系统价格降低；而软件方面，可借助PC强大的软件功能，如各种标准操作系统、图形工具、编辑器、实时数据库及像TCP／IP那样的通信协议等，使数控系统的功能更强大，更容易实现。数控系统中集成数据库，可以实现方便的工艺、校正、诊断和刀具等数据的存储。
114 

表5—1 数控系统新的发展趋势
数控系统领城
发展趋势 硬件
开放式数控系统.PC集成技术，系统模块化系统软件
开放式数控系统，标准操作系统，实时数据库CNC核心功能
三维刀具补偿，样条插补监控和诊断
自适应技术，智能故障诊断编程功能
三维图形模拟，面向车间的编程WOP，宏程序设计，会话式蓝图编程何服功能
交流驱动，数字调节器，SERCOS用户界面
用户可设计界面 通信
MAP／MMS.TCP／IP.现场总线等
为减少数控系统的开发时间，并适应用户不断变化的需求，新一代数控系统应是开放式数控系统。开放式数控系统要求应用标准组件（如PC卡、标准的元器件、标准驱动系统和数据库等），应用开放的模块化结构来构成系统的硬、软件，使系统便于组合、扩展和升级，并且应使系统的硬件和软件相互分离，使系统能提供柔性的、易适应的控制功能。开放式数控系统具有外部开放性和内部开放性。外部开放性反映在外部接口具有统一性和标准性，如一致的数控编程器、统一的通信接口、统一的伺服控制接口和通用的操作控制接口。内部开放性使内部数控核心控制功能软件和附加的可选功能软件在系统中易于集成，易于为用户所掌握。
在计算机数控装置核心功能领域中，现代数控系统能与CAD／CAM系统连接，并将发展三维刀具补偿、超前数控加工程序段预处理及新的插补方式（如样条插补）处理，使系统进行各种复杂几何形状的控制，能在高精度下实现高速进给。
在现代数控系统中还引进了自适应控制技术，数控系统能检测对自己有影响的信息，自动连续调整有关系统参数，对变化了的加工环境及时作出反应。一些新型的数控装置还具有故障诊断的人工智能功能（专家诊断系统），在系统中存储一些引起各种系统故障原因的信息，以及如何消除这些故障的知识，从而形成专家系统知识库。利用这些知识库，经过推理可以进行故障定位或排除故障。
现在大多数数控系统的编程系统都采用彩色显示器与手动数据输入键盘配合，能实现各种数控语言程序和宏程序的编制、输人和编辑，一般具有两维图形模拟显示。新的编程系统的功能越来越强，它们具有三维实体图形显示和三维动态图形显示功能，可以描述任意位置的零件断面及三个平面视图，使操作者很清楚地了解零件的形状及加工状态；还具有复杂曲面数控加工程序编制功能，能进行几何图形处理，同时还具有工艺处理能力，可自动确定工艺参数：可采用数控语言输入方式，也可采用图形输入方式（如WOP），还可以与CAD系统直接通信。
当代数控机床的伺服系统趋向于用交流进给伺服驱动与主轴驱动，逐步取代直流进给伺服驱动与主轴驱动，其中主轴驱动为实现C轴控制也兼备了主轴伺服驱动功能，在伺服系统中，把微电子技术和计算机技术引入电动机控制，使伺服电动机的位置、速度及电流调节环都逐步实现了数字化，从而使伺服系统的精度和速度进一步提高，并具有一些新的功能，如前馈控制功能和学习控制功能。
现代数控系统尽量给专业技术人员提供容易理解和掌握的用户界面，使他们能利用已有的知识，更好地监测、维修和开发数控系统。
现代数控机床都具有很强的通信功能，可以与其他CNC系统、上位机、编程机及各种
115 

外设进行通信，实现数控机床联网或进线的要求。它们除了有RS232C串行接口外，还有RS—422，DNC等多种通信接口，最新的数控系统采纳了符合ISO的开放系统互联（OSD）参考模型的有关协议进行网络连接，如MAP／MMS、现场总线等。
5.2 计算机数控系统
计算机数控系统是在硬件数控系统的基础上发展起来的，是用一台计算机代替先前的数控装置所完成的功能，根据计算机存储的控制程序执行部分或全部的数控功能。
计算机数控系统在硬件和软件的配合下实现各种数控功能，而硬件和软件又存在着多种结构形式，伴随着现代计算机硬、软件技术的飞速发展，数控系统的功能和适应性也在不断增强。5.2.1 数控系统的硬件结构
5.2.1.1 硬件概述
数控系统是由计算机数控装置（CNC装置）、输入／输出装置（1／0装置）、驱动控制装
置和机床电气逻辑控制装置四部分组成，CPU
从总体上看它是几个部分通过1／O接口的互联。以单微处理机结构为例的数控系统硬件结构如图5—4所示。
EPROM
数控装置是数控系统的控制核心，COMS ROM
其硬件和软件控制着各种数控功能的实3
巴泡存储器
现，它与数控系统的其他部分通过接口9
读■机
相连，数控装置与通用计算机一样，是读带机
接口
由中央处理器（CPU）及存储数据与程穿孔机和电
纸带
序的存储器等组成，存储器分为系统控穿孔机
传接口
制软件程序存储器（ROM）、加工程序存电传机
储器（RAM）及工作区存储器（RAM）。1／0接口
机床
ROM中的系统控制软件程序是由数控系线
数控面板
统生产厂家写入，用来完成CNC系统的MDI/CRT
接口
各项功能，存储在RAM中的加工程序，CKT
进给电动机
供数控系统用于控制机床加工零件。工位置控制
速度控
作区存储器是系统程序执行过程中的活制单元
动场所，用于堆栈、参数保存、中间运算结果保存等。中央处理器执行系统程序、读取加工程序，经过加工程序段译
码、预处理计算，然后根据加工程序段图5—4 数控系统硬件结构
指令，进行实时插补与机床位置伺服控制，同时将辅助动作指令通过可编程控制器发往机床，并接收通过可编程控制器返回的机床各部分信息，以决定下一步操作。
输人／输出装置一般采用数控面板（含MDI键盘、CRT显示器）和其他常规输入／输出装置（如纸带阅读机、盒式磁带录音带、电传打字机等），用以输入数控数据，监控数控系

统的运行：驱动控制装置一般是以轴为单位的独立体，用以控制各个轴的运动，其中进给轴的位置控制部分常在数控装置中以硬件位置控制模板或软件位置调节器实现，即数控装置接收实际位置反馈信号，将其与插补计算出的命令位置相比较，通过位置调节作为轴位置控制给定量，再输出给何服驱动系统；机床电气逻辑控制装置接受数控装置发出的数控辅助功能控制命令，进行机床操作面板及各种控制／
PLC板 监测机构的逻辑处理和监控，并为数控装
置提供机床状态和有关应答信号，在现代数控系统中机床电气逻辑控制装置已经由可编程控制器取代，可采用内装式或外置
主板
TD 式形式。
5.2.1.2 数控装置的硬件结构类型
（1）大板式结构和功能模块式结构
光■ ①大板式结构 图5—5为大板式结构
ROM/RAM■
附加输控制板 CNC系统示意图。
图5—5 大板式结构CNC系统示意图大板式结构CNC系统的CNC装置可
由主电路板、位置控制板、PLC板、图形控制板和电源单元等组成。主电路板是大印制电路板，其他电路板是小印制电路板，它们插在大印制电路板上的插槽内而共同构成CNC装置。
FANUC 6MB系统就是采用这种大板式结构，其框图如图5—6所示。图中主电路板（大印制电路板）上有控制核心电路、位置控制电路、纸带阅读机接口、3个轴的位置反馈量输入接口和速度控制量输出接口、手摇脉冲发生器接口、1／O控制板接口和6个小印制电路板的插槽。控制核心电路为微机基本系统，由CPU、存储器、定时和中断控制电路组成，存储器包括ROM和RAM.ROM（常用EPROM）用于固化数控系统软件，RAM存放可变数据，如堆栈数据和控制软件暂存数据，对数控加工程序和系统参数等可变数据存储区域应具有掉电保护功能，如磁泡存储器和带电池的RAM，从而当主电源不供电时，能保持其信息不丢失，6个插槽内分别可插入用于保存数控加工程序的磁泡存储器板，附加轴控制板，CRT显示控制板和1／O接口，扩展存储器（ROM）板，PLC板，位置反馈传感元件采用旋转变压器或感应同步器的控制板。
②功能模块式结构 在采用功能模块式结构的CNC装置中，将整个CNC装置按功能划分为模块，硬件和软件的设计都采用模块化设计方法，每一个功能模块被做成尺寸相同的印制电路板（称功能模板），相应功能模块的控制软件也模块化，这样形成了一个所谓的交钥匙CNC系统产品系列，用户只要按需要选用各种控制单元母板及所需功能模板，将各功能模板插入控制单元母板的槽内，就搭建成了自己需要的CNC系统控制装置。常见的功能模板有CNC控制板、位置控制板、PLC板、图形板和通信板等。例如，一种功能模块式结构的全功能型铣床数控系统框图如图5—7所示，系统由CPU板、扩展存储器板、显示控制板、手轮接口板、键盘和录音机接口板、强电输出板、伺服控制接口板和3块轴反馈板等组成，连接各模块的总线可按需选用各种工业标准总线，如工业PC总线、STD总线等。FANUC15系统就采用了功能模块化式结构。
（2）单微处理器结构和多微处理器结构
①单微处理器结构 所谓单微处理器结构，是指在CNC装置中只有一个微处理器，以
117 

速度控
速度控
速度控 制单元
制单元
制单元
机床工作台 纸带
2轴
y轴
X轴 阅读机
T■
行■子
感应同步器 票＿从
CNI
CNI CAS CAB CACCAILCARM
附加轴控制板
磁泡存储器板 主印制板
CRT和1／O接口 (CPU,ROM,RAM)
控制用 ROM板
-PMC 板 CAT
旋转变压器／感应同步
速度控 器控制板
cw 位置控制
制单元 Y/Z Z/P C07 C06 D10
凹凹凹凹凹凹
第4轴 CHXICHX2
CNI 户中点
中 C17
C18S4位数模拟输出C64第5轴速度控制单元C19
C65第5轴伺服电动机□CI4 FACIT/ASR
□CI5 RS232C TM
CNICLXCLA
连接单元 MDI&CRT
机床强电柜
图5-6 FANUC 6MB系统框图
集中控制、分时处理完成数控系统的各个任务，如存储、插补运算、输入输出控制、CRT显示等。某些CNC装置中虽然用了两个以上的CPU，但能够控制系统总线的只是其中的一个CPU，它独占总线资源，通过总线与存储器、输入输出控制等各种接口相连。其他的CPU则作为专用的智能部件，它们不能控制总线，也不能访问存储器。这是一种主从结构，故被归属于单微处理器结构中。单微处理器结构框图如图5—8所示，其结构简单，容易实现。
单微处理器结构的CNC装置可划分为计算机部分（包括CPU、存储器等）、位置控制部分、数据输入输出接口及外围设备。
计算机部分中的存储器用于储存系统软件（控制软件）和零件加工程序，并将运算的中间结果及处理后的结果储存起来，一般包括存放系统程序的EPROM和存放加工程序及中间数据的RAM两部分；而CPU是CNC装置的核心，实施对数控系统的运算和管理。CPU118
第4轴位置反馈 X、Y、Z轴感应同步器反馈
外部位置显示
手摇脉冲发生器 三以路富版北二2 Y轴脉冲编码器反馆
X轴脉冲编码器反馈 

CPU板
9in CRT
存储器
何服控制
X轴
X轴 接口
伺服单元
伺服电动机 操作健盘
显示控制
y轴
上轴 键盘和录音机
总
伺服单元
伺服电动机 录音机
接口
Z轴
Z轴 PLC■
输入接口
伺服单元
伺服电动机 强电控制电路
Z轴反馈板 输出接口
线
Y轴反馈板 手抵■冲
手据林冲 发生器
发生器接口
X轴反馈板 AC 220V
系统电源
图5—7 模块化全功能型铣床数控系统框图
CPU
EPROM
串行通信及网络 RAM
1／0接口 8
线 PLC
全 招艺剧
MDI/CRT
速度控制 CRT
接口
图5—8 单微处理器结构框图
执行系统程序时，首先读取存放在RAM中的加工程序，然后对加工程序段进行译码和数据处理，根据处理后得到的指令，进行对该加工程序段的实时插补和机床位置伺服控制；它还将辅助动作指令通过PLC送到机床，同时接收由PLC返回的机床各部分信息并予以处理，以决定下一步的操作。
位置控制部分包括位置控制单元和速度控制单元。位置控制单元接收经插补运算得到的每一个坐标轴在单位时间间隔内位移量，控制伺服电动机工作，并根据接收到的实际位置反馈信号，修正位置指令，实现机床运动的准确控制。同时产生速度指令送往速度控制单元，速度控制单元将速度指令与速度反馈信号相比较，修正速度指令，用其差值去控制伺服电动机以恒定速度运转。
119 

数据输入输出接口与外围设备是CNC装置与操作者之间交换信息的桥梁。例如，通过MDI方式或串行通信，可将工件加工程序送入CNC装置；通过CRT显示器，可以显示工件的加工程序和其他信息。
在单微处理器结构中，由于仅由一个微处理器进行集中控制，故其功能将受CPU字长、数据字节数、寻址能力和运算速度等因素的限制。如果插补等功能由软件来实现，则数控功能的实现与处理速度就成为突出的矛盾。解决矛盾的措施可以有增加浮点协处理器、采用带有CPU的PLC和CRT等智能部件。
单微处理器CNC结构具有以下特点。
a.CNC装置内只有一个微处理器，对存储、插补运算、输入输出控制、CRT显示等功能实现集中控制分时处理。
b.微处理器通过总线与存储器、输人输出控制等接口电路相连，构成CNC装置。c.结构简单，实现容易。
②多微处理器结构 若在一个系统中有两个或两个以上微处理器，则该系统称多微处理器结构。目前使用的多微处理器结构形式有三种，即分布式系统、主从式系统和总线式多主CPU系统。
a．分布式系统。如图5—9所示，各微处理器之间均通过一条外部的通信链路连接在一起，它们相互之间的联系及对共享资源的使用都要通过网络技术来实现。
存储器 CPUI 1／0接口
存■器 CPU2
1／0接口 系统总线
系统总线 通信接口
通信接口 通信链路
（申行总线 局部网络）
图5—9 分布式多微处理器系统结构
b．主从式系统。如图5—10所示，有一个微处理器称为主控微处理器，其他则称为从微处理器，各微处理器也都是完整独立的系统。只有主控微处理器能控制总线，并访问总线上的资源，主微处理器通过该总线对从微处理器进行控制、监视，并协调多个微处理器系统的操作；从微处理器只能被动地执行主微处理器发来的命令，或完成一些特定的功能，不可能与主微处理器一起进行系统的决策和规划等工作，一般不能访问系统总线上的资源。主、从
主存储器
主CPU
主1／0
并行总线
（如STD、PC等） 1／0援口
1／0接口 从存储器
从CPU 从1／0
从存储器 从CPU
O/TW 图5-10
主从式多微处理器系统结构
微处理器的通信可以通过1／O接口进行应答，也可以采用双端RAM技术进行，即通信的双方都通过自己的总线读／写同一个存储器。
c．总线式多主CPU系统。如图5—11所示，有一条并行主总线连接着多个微处理器系统，每个CPU可以直接访问所有系统资源，包括并行总线、系统存储器及1／O接口，同时还允许自由而独立地使用各种资源，如局部存储器、局部I／O接口等。各微处理器从逻辑上分不出主从。为解决多个主CPU争用并行总线的问题，在这样的系统中有一个总线仲裁器，它为各CPU分配了总线优先级，每一时刻只有总线优先级较高的CPU可以使用并行总线。
局部存储器
局部1／0 局部存储器 局部1／0 局部存储器
局部1／0 局部总线
局部总线
局部总线 CPUI
CPU2
CPU3 总线仲裁
总线仲裁
总线仲裁 系统总线
全局存储器
全局1／0
图5—11 总线式多主CPU系统结构（3）专用型结构和个人计算机式结构
①专用型结构 这类CNC装置的硬件由各制造厂专门设计和制造，布局合理，结构紧凑，专用性强；但硬件之间被此不能交换和替代，没有通用性。例如FANUC数控系统、SIEMENS数控系统、美国A—B系统等都属于专用型。
②个人计算机式结构 这类CNC系统是以工业PC机作为CNC装置的支撑平台，由数控机床制造厂根据数控机床功能的需要，插人自己的控制卡和数控软件构成相应CNC装置。由于工业标准计算机的生产数以百万计，其生产成本很低，继而也就降低了CNC系统的成本，若工业PC机出现故障，修理及更换均很容易。美国ANILAM公司和AI公司生产CNC装置均属这种类型，图5—12所示就是一种以工业PC机为技术平台的数控系统结构框图。
（4）封闭式结构、PC嵌入NC式结构、NC嵌入PC式结构和软件型开放式结构
①封闭式结构 如FANUCO系统、MITSUBISHIMI50 系统、SIEMENS810系统等都 是专用的封闭体系结构的数控系统。尽管也可以由用户做人机界面，但必须使用专门的开发工具（如SIEMENS的WS800A），耗费较多的人力，而对它的功能扩展、改变和维修，都必须求助于系统供应商，目前，这类系统还是占领了制造业的大部分市场。但由于开放体系结构数控系统的发展，传统数控系统的市场正在受到挑战，已逐渐减小。
② PC嵌入NC式结构 如FANUC18i、FANUC16i系统、SIEMENS840D系统、 Mum1060系统、AB9／360等数控系统。这是由于一些数控系统制造商不愿放弃多年来积累的数控软件技术，又想利用计算机丰富的软件资源而开发的产品，然而，尽管它也具有一定的开放性，但由于它的NC部分仍然是传统的数控系统，其体系结构还是不开放的。因此，
121 

CRT/MDI
NNT
软额 3M
机床操作板 IN/DO
强电柜 主轴■动
0主输编码器 手轮
Y轴驱动
x轴编码器 Y轴驱动
Y轴编码器 Z轴驱动
Z轴编码器 通信
第4轴■动
第4轴编码器 第5轴驱动
PC总线
第5轴编码器 图5—12 以工业PC机为技术平台的数控系统结构框图
用户无法介入数控系统的核心，这类系统结构复杂、功能强大，但价格昂贵。
③NC嵌入PC式结构 它由开放体系结构的运动控制卡＋PC机构成。这种运动控制卡通常选用高速DSP作为CPU，具有很强的运动控制和PLC控制能力。它本身就是一个数控系统，可以单独使用。它开放的函数库供用户在Windows平台下自行开发构造所需的控制系统，因而这种开放结构运动控制卡被广泛应用于制造业自动化控制各个领域。如美国Delta Tau公司用PMAC 多轴运动控制卡构造的PMAC-NC数控系统、日本MAZAK公司 用三菱电机的MELDASMAGIC64构造的MAZATROL640CNC等。
④软件型开放式结构 这是一种最新开放体系结构的数控系统。它提供给用户最大的选择和灵活性，它的CNC软件全部装在计算机中，而硬件部分仅是计算机与伺服驱动和外部10之间的标准化通用接口，就像计算机中可以安装各种品牌的声卡、CD—ROM和相应的驱动程序一样，用户可以在Windows NT平台上，利用开放的CNC内核，开发所需的各种功能，构成各种类型的高性能数控系统，与前几种数控系统相比，软件型开放式数控系统具有最高的性能价格比，因而最有生命力。其典型产品有美国MDSI公司的Open CNC，德国 Power Automation公司的PA8000NT等。
5.2.2 数控系统的软件结构
5.2.2.1 数控系统中软件的任务
CNC装置是一个机床计算机控制系统，其数控系统软件必须完成管理和控制两种不同性质的任务。
数控系统的基本任务（核心任务）是进行机床的自动加工控制，因此，数控系统的核心控制模块主要有预处理模块、插补计算模块、位置控制模块和PLC控制模块等。
122 

数控系统的管理系统是实现CNC系统协调工作的主体，它管理着数控加工程序从输人、预处理，到插补计算、位置控制和输入输出控制等的全过程，并管理着系统参数设置，刀具参数设置，数控加工程序的编辑，数据的输入输出及在各种机床运行方式下的操作处理等各种人机交互过程。除此之外，先进的数控系统管理程序还能适时运行诊断模块以便及时判断和排除故障，并能进行通信、联网等功能的管理。
CNC装置的系统软件具有多任务性和实时性两大特点，图5—13表示了CNC系统程序的基本任务及各任务之间的并行处理关系。CNC系统中要管理和控制的任务很多，如当CNC装置正处于加工控制状态时，为了保证加工的连续性，在各程序段之间不停顿，各数控加工程序段的预处理、插补计算、位置控制和各种辅助控制任务都要及时进行；为了使操作人员及时了解和干预CNC系统工作状态，系统在执行加工任务的同时还应该及时进行一些人机交互工作，即显示加工状态、接受操作人员通过面板输人的各种改变系统工作状态的控制信号等，为了及时检查和预报硬、软件的各种故障，系统在运行控制程序和人机交互程序的同时还要及时运行诊断程序；此外，系统还可能被要求及时完成通信等其他任务，可见，理想的管理程序，应具有多任务实时处理能力。
监测和诊断 数据预管理
开关量1／0
何服控制
图5—13 CNC系统程序的基本任务及各任务之间的并行处理关系5.2.2.2 多任务，并行处理技术
针对数控系统软件的多任务性和实时性两大特点，可采用各种并行处理技术来确定数控系统软件结构。
所谓并行处理是指计算机在同一时刻或同一时间间隔内完成两种或两种以上性质相同或不相同的工作。
并行处理技术有多种，从硬件出发，可以采用设备重复的并行处理技术，如多处理器并行处理CNC系统就是这种技术的典型应用。在这种系统中，由多个微处理器分别实现数控系统的一些实时功能，各个处理器并行地执行各自的实时任务。从软件出发，可采用分时的并行处理技术和多重中断的并行处理技术。
分时并行处理技术是指一个处理器同时完成多种任务，各个任务按其需要时间的长短可以被分割成一个个子任务，系统用时间片轮转的方式处理和完成各任务，即按照某种轮换次序给每个任务分配一段CPU时间进行各子任务的处理，从微观上看，各子任务分时占用
123 

CPU；从宏观的角度看，在一段时间内，CPU并行完成了多个任务。这种方法如同自动线的流水作业，每一个作业段只完成工件的一部分加工任务，当工件走完整条自动线时，加工完毕。
分时的并行处理技术主要解决的问题是，充分利用计算机的高速数据计算和处理能力，保证每个任务的合理响应时间。如CNC系统中的数控加工程序段的预处理任务，系统的各种管理任务（人机交互任务和诊断任务等），它们可以在系统的实时任务完成后的空余时间分时进行，只要保证实时任务不受影响即可，如一个数控加工程序段的预处理必须在该程序段被加工之前完成，但是，有些任务不能按前述轮换次序等待，此时分时的并行处理技术对控制系统的实时要求作用不大。
所谓实时，是指在一个确定的有限时间里对外部产生的随机事件作出响应，并在确定的时间里完成这种响应或处理。在数控系统这样的实时控制系统中，被控对象是一个并行活动的有机整体，对被控对象进行控制和监视的任务也是并行执行的，它们之间存在着各种复杂的逻辑关系。有时它们是顺序执行的，表现为一个任务结束后，激发另一个任务执行，如数控加工程序段的预处理、插补计算、位置控制和输入输出控制；有时它们是周期性地以连续反复的方式执行，如每隔一个插补周期进行一次插补计算、每隔一个采样周期进行一次位置控制等：有时一个任务执行到某处时，必须延时某个时刻，才又继续执行，如必须等待换刀等有关辅助功能完成后进一步的切削控制才能开始：有时是几个任务同时执行，如在加工控制中人机交互处理及各种突发事件的处理。
多重中断的并行处理技术是对于有实时要求，且各种任务互相交错的多任务控制系统，这时各种实时任务被安排成不同优先级别的中断服务程序，或在同一个中断程序中按其优先级高低而顺序运行，任务主要以优先级进行调度，任何时候CPU运行的都是当前优先级较高的任务。
无论采用哪种并行处理技术，各任务间都存在着各种逻辑联系，必须进行通信才能共同完成对某个对象（如数控机床）的控制和监视，各任务之间可以采用设置标志的方法、共同使用某一公共存储区的方法及多处理器串行通信等方法进行联系。
目前，数控系统中针对其多任务性和实时性两大特点，一方面在硬件上，越来越多地采用多处理器系统：另一方面在软件上，综合了前述设备重复的并行处理技术、分时的并行处理技术和多重中断的并行处理技术。常见的CNC系统软件结构有相应单处理器系统的前后台型和多重中断型，以及相应多处理器系统的功能模块软件结构。
5.2.2.3 数控系统典型的软件结构
CNC系统软件可以设计成不同的结构形式，不同的软件结构对各任务的安排方式、管理方式也不同，常见的CNC软件结构形式有前后台型软件结构和中断型软件结构。
（1）前后台型软件结构
前后台型软件结构适合于采用集中控制的单微处理器CNC装置。在这种软件结构中，前台程序为实时中断程序，承担了儿乎全部实时功能，这些功能都与机床动作直接相关，如位置控制、插补、辅助功能处理、面板扫描及输出等，后台程序主要用来完成准备工作和管理工作，包括输人、译码、插补准备及管理等，通常称为背景程序。背景程序是一个循环运行程序，在其运行过程中实时中断程序不断插入，前后台程序相配合完成加工任务。如图5—14所示，程序启动后，运行完初始化程序即进入背景程序环，同时开放定时中断，每隔一固定时间间隔发生一次定时中断，执行一次中断服务程序。这样，中断程序和背景程序有124



硬件中断（如果有）
定时中
健盘中断 图5—14 前后台型软件结构
条不紊地协同工作。
图5—15是其简化程序框图。系统初始化后等待启动按钮的按下，启动按钮按下后，对第一个程序逻辑段译码，进行预处理，完成轨迹计算和速度计算，得到插补所需要的各种参数，如刀心轨迹的起点、终点坐标和刀具中心的位移量及圆弧插补时圆心的各坐标分量等，并将所得参数送至插补缓冲存储区保存。若有辅助功能码（M、S、T），则将其送系统工作寄存器保存。接下来将插补缓冲存储区的内容送至插补工作存储区，系统工作寄存器中的辅
■始化
按自动按销？
Y
课一段程序，预处理通补信息送插补级冲
工
统工作寄存器信息一系统标志单元置数据交换结束标志
置开放补标志
预泽一段并进行预理：信息送补缓冲存储区，辅助信息送系统工作存■本段插结束？
CRT显示-监控 N
零件程序结束？
结束
图5—15 背景程序的调度管理功能简化程序框图
125 

助功能码送至系统标志单元，以供使用。完成交换后设置标志（数据交换结束标志、开始插补标志）。标志设置之前，尽管定时中断照常发生，但并不执行插补及辅助信息处理等，仅执行一些例行的扫描、监控等功能。只有在标志设置之后，实时中断程序才能进行插补、何服输出、辅助功能处理，同时开始对下一段程序进行译码、预处理。系统必须保证在当前程序插补过程中完成下段程序的译码和预处理，否则将会出现加工中停刀现象。上述表明，背景程序通过设置标志达到对实时中断程序的管理和控制。
自设立两个标志到插补完成这段时间，CNC装置工作最为繁忙。在这段时间里，中断程序要进行本程序段的插补及伺服输出，同时背景程序要完成下一程序段的译码和预处理。亦即在一个插补周期内，实时中断程序占用一部分时间，其余的时间留给背景程序。插补、伺服输出与译码、预处理分时共享（占用）CPU，以完成多任务并行处理。
如上所述，下一程序段的译码，预处理时间比本程序段的插补运行时间短，因此在背景程序中有一个等待插补完成循环，在等待过程中不断进行CRT显示和状态、键盘等监控。本程序段插补加工结束，但整个零件加工未结束，则系统开始新的循环，整个零件加工结束则停机。
（2）中断型软件结构
中断型软件结构没有前后台之分，除了初始化程序外，根据各控制模块实时的要求不同，把控制程序安排成不同级别的中断服务程序，整个软件是一个大的多重中断系统，系统的管理功能主要通过各级中断服务程序之间的通信来实现。表5—2为典型的中断型软件结构，将控制程序分成8级中断程序，其中7级中断级别最高，0级中断级别最低。位置控制被安排在级别较高的中断程序中，其原因是刀具运动的实时性要求最高，CNC装置必须提供及时的服务。CRT显示级别最低，在不发生其他中断的情况下才进行显示。
表5—2 数控系统中断型软件结构中断级别
主要功能
中断源 控制CRT显示
硬件 0
1
详码，刀具中心轨迹计算、显示处理
软件．16ms定时 2
键■监控1／0信号处理、穿孔机控制
软件，16ms定时 3
外部操作面板、电传打字机处理
硬件 插补计算，终点判别及转段处理
软件，8ms定时 1
5
阅读机中断
硬件 5
位置控制
4ms硬件时钟 7
测试
硬件
①中断程序的通信方式 为了进行系统管理，系统中断程序之间采取的通信方式有以下几种。
a．设置软件中断。表5—2为数控系统中断型软件结构，第1、2、4级设置成软件中断，第6级设置成硬件中断，由时钟定时执行，每4ms中断一次，第6级中断请求两次后，第4级中断产生一次（第4级每8ms产生一次）。第6级中断四次，第1、2级中断请求一次。这样便将第1、2、4、6级中断联系起来。
b．中断服务程序自身的链接。系统的第1级中断分成13个口，每一个口对应于口状态字的一位，每一位对应处理一个任务，即第1级中断包括13个子任务。在执行第1级中断各口的处理时，可以设置口状态字其他位的请求，如图5—16所示。如在8号口的处理程序

中，可将2号口置1，这样8号口程序一旦执行完，立刻转入2号口处理。
c．设置标志。标志是各程序之间相互通信的有力工具。例如，第4级中断完成插补功能，每8ms中断一次。译码、刀具半径补偿等在第1级中断中进行，在第1级中断服务程序中，进行完译码和刀具半径补偿后即刻设置标志。是否开放插补中断程序取决于该标志的设置。在未设置译码、刀具半径补偿完成标志时，CNC装置跳过插补服务程序而继续往下执行。
②典型中断的功能
a．第2级中断。主要功能是对机床控制台的输入信号（控制台送给NC装置的控制开关信号和按钮信号）及NC键盘进行监控处理。其次是穿孔机穿孔处理，还有M、S、T、H强电信号处理和输出信号处理等。第2级中断的简化框图如图5—17所示。
2级
MS.T.H处理 依次查询口状态，若为“转入相应处理
键盘监控处理 穿孔机穿孔处理
信号输出 所有口检查完
清除第2级中断请求 清除第级中断请求
退出 图5—16 第1级中断框图
图5—17 第2级中断框图
b．第4级中断，该级中断最重要的功能是完成插补计算。系统中采用“时间分割法”插补，即将程序段的增量以8ms时间为单位，划分为许多小段，每次插补进给一小段。一次插补处理可以分4个阶段，即速度计算、插补计算、终点判别、进给量换算。第4级中断简化框图如图5—18所示。
首先是设置标志，在下一次第4级中断时先根据标志进行下一程序段的第4级预处理（将轨迹参数搬到插补的参数区等），然后接着进行速度处理，根据所设的标志，将本次的插补进给量减去上段的离终点剩余距离作为本次的插补进给量，而上次剩余的轴向距离加上本次插补的轴向进给量，作为本次总的轴向进给量。第三，插补预处理，是将由第1级中断计算出的并已存于“输入寄存器”的本程序段刀具运动的中心轨迹等参数及一些轨迹线型（G01，G02）标志，搬入插补参数区，一般，对于有插补要求的程序段，都要先进行插补预处理。
进给量换算包括进给量公英制换算和进给量的指数加、减处理。
c．第6级中断。本级中断主要完成位置控制、4ms定时计时和存储器奇偶校验工作。典型数控系统中，位置控制是在软件和硬件配合下完成的。软件部分的任务是在第6级中断中，定时地从“实际位置计数器”中回收实际位置值，然后将位置指令值与实际位置值之间
127 

的差值换算成速度指令值，送给硬件的
人口
“速度指令寄存器”，去控制电机的运转。
4ms定时计时的含义是：对4ms进行计数，取实际位置值输出
主轴速度模拟量等
将网段速度街接
每隔8ms定时地产生一次第4级软件中断
请求，每隔16ms定时地产生一次第1级和有速度转楼？
下一段进行
第2级软件中断请求，以4ms为时间基准，插补预处理？
N N
对4ms进行累加计算，和数就是数控装置允许插补？
插补预处理：允许
使用的时间，这就是计时功能。
存储器奇偶校验，其方法依ROM和是 G047
RAM而有所不同，通过读、写奇偶校验的根据停止进给，改变
Z
方法，来判断RAM是否出错，如果出错，锁定状态正常■补
证时计算 等情况进行速度处理
先使伺服系统停止工作，并报警；然后，
对出错的区域进行写和读全0、全1试验，螺纹切前”
N
非插补时的处理
找出出错的地址和出错的状态，并将出错计算加／M速时的■时速度
范围、出错地址和出错状态在通用显示器切螺纹的处理
上显示，ROM的奇偶校验以一块ROM为■补运算
单位，通过求该块ROM的累加和的方法
实现。若出错，则使伺服系统停止工作，终点判别
点亮报警灯，找出出错位置，并在显示器进给量换算
上显示出该ROM在印制板上的安装位置。清除第4级软件中断请求
5.2.3 数控系统的接口电路
5.2.3.1 输入输出接口电路退出
数控系统运行中，需要接收机床操作图5—18 第4级中断框图
面板上的开关信号、按钮信号、机床的各种限位开关信号，也需要把某些工作状态显示在操作面板的指示灯上，并把控制机床的各种信号送到强电柜控制执行机构的动作，这些工作都要经过1／O接口来完成。因此可以说，1／O接口是CNC装置和机床、操作面板之间信号交换的转换接口，是CNC系统与外界交换信息的必由之路，在CNC系统中占有重要的位置，不同的输入／输出设备与CNC系统相连接，采用与其相应的I／O接口电路或接口芯片，接口芯片一般分为专用接口芯片和通用接口芯片，前者专门用于特殊的输入输出设备的接口，后者适用于多种设备的接口。
1／0接口电路的作用和要求是：进行必要的电隔离，防止干扰信号的串人和强电对系统的破坏；进行电平转换和功率放大，因CNC系统的信号往往是TTL脉冲或电平信号，而机床提供和需要的信号却不一定是TTL信号，而且有的负载比较大，因此需要进行信号的电平转换和功率放大。在数控系统的1／O接口电路中，常用的器件有光电耦合器和继电器（如簧式继电器、固态继电器等）。
图5—19为开关量信号输入接口电路，常用于限位开关、按钮及机械原点、刀具到位等传感器的输入，对于一些有过渡过程的开关量还要增加适当的电平整形转换电路。图5—20为开关量信号输出接口电路，可用于驱动24V小型继电器，在这些电路中要根据信号特点选择相应速度、耐压、负载能力的光电耦合器和三极管。
128 

24V
2.5k0
5V
T24V m
■电器 Duoa z
线图 Doocs
光电 認号■
光电 ＝本
输人 滤波
耦合器 开关
电容
CNC控制 输出
MC1413 SV地
24V地
24V地 图5.19 开关量信号输人接口电路
图5—20 开关量信号输出接口电路5.2.3.2 CNC装置的显示功能及其接口
CNC系统显示功能直接决定系统人机界面的友好程度，应该尽量让操作者了解系统的当前状态，并指导进一步的操作等。目前，常用的显示器有数码管LED、液晶显示器LCD、阴极射线管CRT和薄膜品体管TFT。一般LED、LCD可由8255、8155、8273、8279等进行控制，而CRT、TFT通常要由专门的接口板（如6845等）进行控制。
目前，数控系统中普遍采用了LCD、CRT显示，主要显示内容有当前功能状态区、当前执行程序区、动态坐标显示区、动态轨迹显示区、1／0口状态区、有关参数调整区、错误信息提示区、操作信息区、动态键提示区。对数控系统中显示的要求是能实时动态地反映加工控制过程中各种信息，对显示区进行合理的规划与切换。
5.2.3.3 数控系统的通信
现代CNC装置都带有标准串行通信接口，能够方便地与编程器及微型计算机相连，进行点对点通信，实现零件程序、参数的传送，随着工厂自动化（FA）和现代集成制造系统（CIMS）的发展，CNC装置作为分布式数控系统（DNC）及柔性制造系统（FMS）的基础组成部分，应该具有与DNC计算机或上级主计算机直接通信功能或网络通信功能。
（1）数控系统常用串行通信接口标准
①RS—232C接口标准 在串行通信中，广泛应用的标准是RS—232C标准。它是美国电子工业协会（EIA）在1969年公布的数据通信标准。RS是推荐标准（Recommended Stand—ard）的英文缩写，232C是标准号，该标准定义了数据终端设备（DTE）和数据通信设备（DCE）之间的连接信号的含义及其电压信号规范等。其中DTE可以是计算机，DCE一般指调制解调器，表示为Modem。
RS—232C标准规定使用25根插针的标准连接器，并对连接的尺寸及各插针的排列位置等都作了明确的规定。
RS—232C连接器任何插针信号都对应着一种状态，该状态为下面任何一对可能状态中的一种：SPACE／MARK（空号／传号）：ON／OFF.
逻辑0／逻辑1信号电平与信号状态之间的关系如图5—21所示。ON状态对应逻辑“0”，OFF状态对应逻辑“1”，可见RS—232C采用的是负逻辑。由图可见，驱动器或信源要发送逻辑“0”，必须提供＋5～＋15V电压；发送逻辑“1”必须提供—5～—15V电压。而接收器端逻辑“0”的电压范围为＋3～＋15V，逻辑“1”的电压范围为—3～—15V．可见，信
129 

号在从信号源到终点的传递过程中允许有
+15V SPACE
SPACE +15V
2V的电压降（即2V噪声容限）。逻辑0
逻辑0
显然，RS—232C电平与TTL逻辑电路NO
NO
所产生的电平不同，它们之间必须采用电平+5V
+3V
换转电路，常用的芯片有MC1488 或 74188变迁区
噪声客限
变迁区
（用作驱动器）、MC1489（用作接收器），见2V
-3V
图5—22。RS—232C接口为不平衡接口，每个AS-
电路采用单线，两个方向的传输共用一个信MARK
MARK
号地线，会产生较大的串线干扰。尽管使用逻辑！
逻辑1 OFF
OFF
了比较高的传送电平，它所能连接的最大距-15V
-15V
离一般不超过15m，通信速率不超过图5—21 RS—232C接口的电气特性
20KB/s。
②RS—449及RS—423A、RS—422A标准 为了适应技术快速发展的需要，EIA于1977年11月颁发了直接涉及机械特性和功能特性的RS—449标准。并于1978年9月和1978年12月分别推出有关电气特性的RS—423A和RS—422A标准。这些标准对RS—232C标准作了比较大的修改。
+12V-12V TTL电平 MC1488
RS-232C电平
MC1489
TTL电平 发送器
接收器 信号地
图5—22 RS—232C电气接口电路
关于机械特性，由于RS—449包括的信号多于25种，所以选用了新连接器，使用串行二进制数据交换的数据终端设备和数据电路终端设备的通用37针和9针连接器连接。
RS—449标准规定：当传送速率低于20KB／s时，类别I信号可以通过非平衡RS—423A或平衡RS—422A电气特性实现。当传送速率高于20KB／s时，类别I信号必须使用平衡RS422A电气特性，而类别II信号总是使用RS—423A电气特性。
类别I信号包括：SD（发送数据）；TT（终端定时）；RT（接收定时）；CS（允许发送）；TR（终端准备好）；RD（接收数据）；ST（发送定时）：RS（请求发送）；RR（接收器准备好）；DM（数据方式），
由于RS—449的一部分线路采用了非平衡电气特性，因而保持了容性。RS—423A、RS—422A的电气接口图如图5—23和图5—24所示。
非平衡发送器
平衡发送器
差分接收器 差分接收器
A' MC8713
MC3487
MC3486 MC3486
图5—23 RS—423A电气接口图
图5—24 RS—422A电气接口图

对于RS—423A，采用了非平衡发送器、差分接收器，每个信号一根导线，每个方向都有一根独立的信号回线，因而减少了串扰，可传输的信号速率达30KB／s。对于RS—422A，采用的是平衡发送器、差分接收器，每个信号两根导线，因而进一步减少了串扰，可传输的信号速率高达100KB／s。RS—423A和RS—422A的电压与逻辑状态之间的关系如图5—25和图5-26所示。
输出
输入
输出
输入 +6V
+6V +6V
+6V 逻辑0
逻辑0 +4V
逻辑0
逻辑0 +2V
3.8V
+200mV
5
+200mV 变迁区
-200mV
变迁区 变迁区
变迁区 3.8V
1.8V -2V
L8V■声 -4V
3.8V噪声
逻辑1
抑制能力
逻辑1 逻辑1
抑制能力
逻辑1 -6V
-6V 图5—25 RS—423A接口电气特性
图5—26 RS—422A接口电气特性
两个标准都使用了比RS—232C（—15～＋15V）窄的电压范围（—6～＋6V）。由于RS423A采用的是非平衡发送电路，因此用了比较大的噪声余量（3.8V），而RS—422A的噪声余量只有1.8V。
（2）DNC通信接口技术
①DNC通信接口功能分类 DNC由直接数字控制发展到分布式数字控制，其内涵和功能也有了扩展。前者主要目的是为了解决早期数控系统因使用纸带而引起的一系列问题，主要功能是下传NC程序：后者除传送NC程序外，还具有系统状态采集和远程控制等功能。20世纪90年代，DNC的内涵和功能还在不断扩大，除与数控系统通信外，CNC主机还可以与工厂级的计算机通过网络等方式进行通信，此外，DNC主机还可以集通信、控制、计划、管理、设计等功能于一体，目前，在现有的DNC主机与数控系统通信接口功能的基础上，从DNC通信接口功能的角度将DNC分为基本DNC、狭义DNC和广义DNC三种。表5—3是这三种DNC通信接口功能的比较。
表5—3 三种DNC通信接口功能的比较项
日
基本 DNC
陕义DNC
广文 DNC 功能
下传NC程序
下传NC程序
下传NC程序，上传NC程序，系统状态采集，远程控制上传NC程序
复杂程度
简单
中等
复杂 价格
低
高 上海
②典型数控系统的DNC通信接口 20世纪90年代国外各大数控公司生产的数控系统多带有DNC通信接口，如FANUCO、FANUC15系统等，有的甚至可配置MAP3.0等网络接口。这些数控系统只要配置了相应的DNC接口，软、硬件就可实现广义DNC功能（见图5—27）。这种DNC通信接口物理层有RS—232C、RS—422和RS—485等多种形式，有时需外加一接口转换板。目前，国内工厂在进口这类数控系统时，由于资金、技术等原因，往往未配置这些接口，因而只能利用预备的RS—232C串行通信口实现狭义DNC功能。
131 

（3）数控系统网络通信接口
RS-232C
当前对生产自动化提出的要求很高，不PC系列
RS-232C RS-422 RS-422 DNC接口
但要有很大的灵活性，还能充分利用制造设计算机
接口转换板
FANUCO
备资源。为此将CNC装置和各种系统中的
设备通过企业局域网络（LAN）联网以构图5—27 FANUCO系统的广义DNC通信接口
成FMS或CIMS。联网时应能保证高速和可靠地传送数据和程序，在这种情况下，一般采用同步串行传送方式，在CNC装置中设有专用的通信接口，担负网络通信任务。其通信协议都采用以ISO开放式互联系统参考模型的7层结构为基础的有关协议，或IEEE802局域网络有关协议。近年来，制造自动化协议MAP已很快成为应用于工厂自动化的标准工业局域网的协议，FANUC、SIEMENS、A—B等公司表示支持MAP，在它们生产的CNC装置中可以配置MAP2.1或MAP3.0的网络通信接口。
从计算机网络技术看，计算机网络是通过通信线路并根据一定的通信协议互联起来的。CNC装置可以看作是一台具有特殊功能的专用计算机。计算机的互联是为了交换信息，共享资源，工厂范围内应用的主要是局域网络，通常它有距离限制（几千米），较高的传输速率，较低的误码率和可以采用各种传输介质（如电话线、双绞线、同轴电缆和光导纤维）。ISO的开放式互联系统参考模型（OSI／RM）是国际标准组织提出的分层结构的计算机通信协议的模型。提出这一模型是为了使世界各国不同厂家生产的设备能够互联，它是网络的基础，OSI／RM在系统结构上具有7个层次，如图5—28所示。
日 各层功能
V 用户程序A
用户程序B 第7层
直接向应用程序提供各种服务
第7层 应用星
应用层 第6层
格式转换以适应网络要求
第6层 表示层
表示层 第5层
数据的管理和同步
第5层 会话层
会话层 第4层
提供节点至最终节点间可靠透明的数据传送
第4层 传输层
传输层 第3层
完成节点间数据传送的数据包路由选择
第3层 网络层
网络层 第2层
提供相邻节点间传送的差错控制
第2层 数据链路层
数据链路层 第1层
提供节点间位传送及编码
第1层
物理层 实际链路
图5-28
OSI／RM的7层结构
通信一定是在两个系统之间进行的，因此两个系统都必须具有相同的层次功能。通信可以在两个系统的对应层次（同等层）内进行，同等层间通信必须遵循一定的规则或约定，这些规则和约定称为协议。OSI／RM最大优点在于有效地解决了异种机之间的通信问题。不管两个系统之间的差异有多大，只要具有下述特点就可以相互有效地进行通信。
132 

①完成一组同样的通信功能。
②这些功能分成相同的层次，同等层提供相同的功能，③同等层必须共享共同协议。
局域网络标准由IEEE802委员会提出，并已被ISO采用，它只规定了链路层和物理层的协议，它将数据链路层分成逻辑链路控制（LLC）和介质存取控制（MAC）两个子层。MAC中根据采用的LAN技术分成CSMA／CD（IEEE802.3）、令牌总线（Token Bus 802.4）和令牌环（Token Ring 802.5）。物理层也分成两个子层，传输载体有双绞线、同轴电缆、光导纤维（见图5—29）。
O51/RM
LAN分层
LLC逻辑■路控制 第2层
802.2 数据链路层
(DLC)
牌Token CSMA/CD
MAC 总线
总线 1F 利形结构
介质存取控制 802.3
802.4
802.5 MAU
基带或宽带 第1层
介质存取单元 物理层
双控线 载体
网轴电规
光导纤维
图529 LAN的分层结构
SIEMENS公司开发了总线结构的SINEC H1工业局域网络可用以连接成FMC和FMS．SINEC H1是基于以太网技术，其MAC子层采用CSMA／CD（IEEE802.3），协议 采用自行研制的自动化协议SINEC API．0．
为了将SINUMERIK850系统连接至SINEC H1网络，在850系统中插入专用的工厂总线接口板CP535，通过SINEC H1网络，850系统可以与主控计算机交换信息、传递零件程序、接收指令、传送各种状态信息等。主计算机通过网络向850系统传送零件程序的过程如图5—30所示，SIEMENS公司的850系统是一台含有多个微处理机的高档CNC系统。从结构上看，850系统可以分成三个区域，即NC区、PLC区和COM区。NC区负责传统的数控功能，采用通道概念，可同时处理加工程序达16通道，其位置控制可达24个轴和6个轴，PLC区是内装的可编程控制器。COM区主要任务是零件程序和中央数据的存储和管理，它有两个通道：一个用于零件程序在CRT上图形仿真；另一个用于所有接口的1／O处理。它还包含有用户存储子模块，用以存储所配置机床用的特殊专用加工循环。
主计算机送来的零件程序经工业局域网络到达850系统PLC区的CP535接口，再经专用接口功能模块处理，存入多口RAM，然后由COM区将其存入NC零件程序存储器中。
其数据交换的格式采用“透明”方式，如图5—31所示。数据帧内容包括信息帧长度（2字节）、标识段（8字节）、差错编码（2字节）及有效的实际数据（最多224字节）。
信息帧长度是标识段、差错编码、有效数据长度之和，最短为10字节，最长为234字节。通过标识段可以确定所传信息的含义和内容。差错编码是说明出现信息负应答的原因，
133 

SINEC HI 网络
COMI
PC区
CPSIS SINECIII
网络段口板 程序
七 IN
接口专用功能模块 存健■
1／0级冲器 多口RAM
Mal-Part RAM
标准功能模块 X.IN
机床程序（PLC） SINUMERIK 850
图5-30
SINUMERIK与SINEC HI网络的连接 SINEC II
SINEC
数据信息■
SINEC
1 规程
APL■ 信息额 标识段 差错编码
有效实际 起始■
长度 8字节 2字节 数据最大
规程 ¥■
2字节
234字节
结束段 图5-31 SINEC AP1.0协议的■格式
以编码方式出现。
此外，SINUMERIK850还可通过插人AS512接口板，采用964R规程接入星形网络实现点到点通信。信息帧格式中有效数据最大为128字节。
MAP是美国GM公司发起研究和开发的用于工厂车间环境的通用网络通信标准，目前已成为工厂自动化的通信标准。其特点如下。
①采用适应工业环境的令牌通信网络访问方式，网络采用总线结构。
②采用适应工业环境的技术措施，提高了可靠性，如在物理层采用宽带技术及同轴电缆以抗电磁干扰，传输层采用高可靠性的传输服务。
③具有较完善面针对性强的高层协议以支持工业应用。
④具有较完善的体系和互联技术，使网络易于配置和扩展。低层次应用可配MiniMAP（只配置DLC层、物理层及应用层），高层次应用可配置完整的带7层协议的MAP，此外，还规定了网络段、子网和各类网络互联技术。
5.3 可编程控制器
数控系统内部处理的信息大致可分为两类：一类是控制坐标轴运动的连续数字信息：另134



一类是控制刀具更换、主轴启停、换向变速、零件装卸、冷却液开关和控制面板输入输出的逻辑离散信息，如图5—32所示。对于前一类数据的处理过程前面已经作了介绍，这里主要介绍后一类数据的处理过程。
存储程序
数控加工程序
MDI程序
操作面板 缓冲
标志
调度 详码
M.S.T CNC
数据处理 装
CRT 传送
应答
台 机
工作寄存器 M.S.T 插补 何服
逻辑软件 命令
反馈 执行
状态 机床坐标轴
机床电气控制部分 图5—32 CNC装置内部信息流
早期机床中有关顺序逻辑和开关信息的处理大部分采用继电器逻辑来实现。大约在20世纪70年代以后，开始采用可编程逻辑代替继电器逻辑，起初称之为可编程逻辑控制器（PLC）。随着计算机的发展和渗透，PLC技术也在不断发展和完善，成为功能齐全、性能可靠、使用方便的可编程控制器（PC），由于PC的速度快、可靠性高，并且易于编程、修改、使用，很快成为数控系统中一个重要的组成部分。另外，为了防止可编程控制器（Pro—grammable Controller，PC）与个人计算机（Personal Computer，PC）相混淆，仍沿用以前 的习惯名称—PLC.
5.3.1 PLC的结构及工作原理
从原理上讲，PLC实际上也是一种计算机控制系统，它的特点是面向工业现场，具有更多、功能更强的1／O接口和面向电气工程技术人员的编程语言。
图5—33所示为一个小型PLC内部结构示意图。它由中央处理器（CPU）、存储器、输入输出单元、编程器、电源和外部设备等组成，并且内部通过总线相连。
中央处理器单元是系统的核心，通常可直接使用微处理器来实现，通过输入模块将现场信息采入，并按用户程序规定的逻辑进行处理，然后将结果输出去控制外部设备。
存储器主要用于存放系统程序、用户程序和工作数据。其中系统程序是指控制和完成PLC各种功能的程序，包括监控程序、模块化应用功能子程序、指令解释程序、故障自诊断程序和各种管理程序等，并且在出厂时由制造厂家固化在PROM型存储器中。用户程序
135 置内计算



CB（控制总线）
AB（地址总线） 模拟量输人
电磁网 开关量输入
接触器 其他输入
CPU
其他执行装置 DB（数据总线）
编程单元
电源单元
图5—33 小型PLC内部结构示意图
是指用户根据工程现场的生产过程和工艺要求而编写的应用程序，在修改调试完成后可由用户固化在EPROM中或存储在磁带、磁盘中。工作数据是指PLC运行过程中需要经常存取，并且会随时改变的一些中间数据，为了适应随机存取的要求，它们一般存放在RAM中。可见，PLC所用存储器基本上由PROM、EPROM和RAM三种形式组成，而存储器总容量随PLC类型或规模的不同而改变。
输入输出模块是PLC内部与现场之间的桥梁，它一方面将现场信号转换成标准的逻辑电平信号，另一方面将PLC内部逻辑信号电平转换成外部执行元件所要求的信号，根据信号特点又可分为直流开关量输入模块、直流开关量输出模块、交流开关量输入模块、交流开关量输出模块、继电器输出模块、模拟量输入模块和模拟量输出模块等。
编程器是用来开发、调试、运行应用程序的特殊工具，一般由键盘、显示屏、智能处理器、外部设备（如硬盘／软盘驱动器等）组成，通过通信接口与PLC相连。
电源单元的作用是将外部提供的交流电转换为可编程控制器内部所需要的直流电源，有的还提供了DC 24V输出。一般来讲，电源单元有三路输出：一路供给CPU模块使用：—路供给编程器接口使用；还有一路供给各种接口模板使用。对电源单元的要求是很高的，不但要具有较好的电磁兼容性能，而且还要工作稳定并具有过电流过电压保护功能。另外，电源单元一般还装有后备电池（如锂电池），用于掉电时能及时保护RAM区中的信息和标志。
此外，在大、中型PLC中大多还配置有扩展接口和智能1／O模板。所谓扩展接口主要用于连接扩展PLC单元，从而扩大PLC的规模。所谓智能1／O模板就是它本身含有单独的CPU，能够独立完成某种专用的功能，由于它和主PLC是并行工作的，从而大大提高了PLC的运行速度和效率。这类智能1／O模块有计数和位置编码器模块、温度控制模块、阀控制模块、闭环控制模块等。
PLC在上述硬件环境下，还必须要有相应的执行软件配合工作。PLC基本软件包括系统软件和用户应用软件。系统软件一般包括操作系统、语言编译系统、各种功能软件等。其中操作系统管理PLC的各种资源，协调系统各部分之间、系统与用户之间的关系，为用户应用软件提供了一系列管理手段，以使用户程序能正确地进入系统正常工作。用户应用软件是用户根据电气控制线路图采用梯形图语言编写的逻辑处理软件。
PLC内部一般采用循环扫描工作方式，在大、中型PLC中还增加了中断工作方式。当136
■出接口 输人输出教据 存储器 处理器 轮人接口 

用户将应用软件设计、调试完成后，用编程器写入
PLC的用户程序存储器中，并将现场的输入信号和
开始 被控制的执行元件相应地连接在输人模板的输入端
自
诊断程序 和输出模板的输出端上，然后通过PLC的控制开关
使其处于运行工作方式，接着PLC以循环顺序扫描
有故障吗？ 的方式进行工作，在输入信号和用户程序的控制下，
N 产生相应的输出信号，完成预定的控制任务。从图
编程器处理模块 5—34所示PLC的典型循环顺序扫描工作流程可以看
出，它在一个扫描周期中要完成如下六个模块的处
网络处理模块 理过程。
用户程序处理模块 ①自诊断模块 在PLC的每个扫描周期内首先
（采集现场信息 要执行自诊断程序，其中主要包括软件系统的校验、
输出服务） 硬件RAM的测试，CPU的测试、总线的动态测试
等。如果发现异常现象，PLC在作出相应保护处理
超时检查模块 后停止运行，并显示出错信息。否则将继续顺序执
N 行下面的模块功能。
超时吗？ ②编程器处理模块 该模块主要完成与编程器
进行信息交换的扫描过程，如果PLC工作方式设置
出错处理模块 为编程工作方式，则当CPU执行到这里时马上将总
图5—34 PLC循环顺序扫描工作流程线控制权交给编程器，这时用户可以通过编程器进
行在线监视和修改内存中用户程序，启动或停止CPU，读出CPU状态，封锁或开放输入／输出，对逻辑变量和数字变量进行读写等。当编程器完成处理工作或达到所规定的信息交换时间后，CPU将重新获得总线控制权。
③网络处理模块 该模块主要完成与网络进行信息交换的扫描过程。只有当PLC配置了网络功能时，才执行该扫描过程，它主要用于PLC之间，PLC与磁带机，或PLC与计算机之间进行信息交换。
④用户程序处理过程 在该过程中，PLC中的CPU采用查询方式，首先通过输入模块采样现场的状态数据，并传送到输人映像区。在PLC按照梯形图（用户程序）先左后右、先上后下的顺序执行用户程序的过程中，根据需要可在输入映像区中提取有关现场信息，在输出映像区中提取有关的历史信息，并在处理后可将其结果存人输出映像区，供下次使用或者以备输出。在用户程序执行完成后就进入输出服务扫描过程，CPU将输出映像区中要输出的状态值按顺序传送到输出数据寄存器，然后再通过输出模块的转换后送去控制现场的有关执行元件。扫描过程如图5—35所示。
⑤超时检查模块 超时检查过程是由PLC内部的看门狗定时器WDT（Watch DogTimer）来完成。若扫描周期时间没有超过WDT的设定时间，则继续执行下一个扫描周期；否则CPU将停止运行，复位输入／输出，并在进行报警后转入停机扫描过程。由于超时大多是硬件或软件故障而引起系统死机，或者是用户程序执行时间过长面造成，它的危害性很大，所以要加以监视和防范。
⑥出错处理模块 当自诊断出错或超时出错时，进行报警，出错显示，并作相应处理（例如，将全部输出端口置为OFF状态，保留目前执行状态等），然后停止扫描过程。
137 

用户程序
现
（梯形图语言） 场
明新
刷新 输入采样阶段
程序执行阶段
输出控制阶段 图5—35 PLC用户程序扫描过程
由于PLC具有可靠性高、编程简单、使用方便、灵活性好等优点，自从一出现就引起了控制领域的极大关注，并与数控技术和工业机器人一起组成了机械工业自动化的三大支柱。
5.3.2 数控系统中的PLC
PLC在数控系统中是介于数控装置与机床之间的中间环节，根据输入的离散信息，在内部进行逻辑运算，并完成输出功能。
在机械加工领域中，将具有逻辑处理功能的PLC和CNC组成一体，可以实现功能更强的数字控制，如图5—36所示，并已经取得了成功的应用。如著名的日本FANUC公司推出的System10／11／12已将PLC控制功能作为CNC的一部分，并且通过窗口软件，用户可以自行编程，然后由PLC送至CNC装置使用。德国SIEMENS公司在810系统中将PLC处理功能和协处理器集成在一起。美国GE公司新近研制的CNC设备中也使用了具有逻辑信号处理功能的PLC.
外部电源 电源模块
M功能 S功能
T功能 其他PLC
CPU
O/1
T 1
操作面板 或计算机
口
各种开关 人机对话
图5—36 PLC控制数控机床原理图
在现代数控系统中采用PLC实现控制时可分为内装型（built—in—type）PLC和独立型（stand-alone-type）PLC两种，下面就对这两种类型的PLC进行分别介绍。
5.3.2.1 内装型PLC
所谓内装型PLC是指PLC内含在CNC装置内，从属于CNC装置，与CNC装置集于138
现场执行元件 输出信号
输出模块 数控机床
输出数据倾存 输出映像区
数据通信接口 输人映像区
输人模块 输入信号 

面板 MDI／CRT
CNC装置 CNC
DI/
操作面板
辅助动作
换刀动作 PLC
冷却开关 强电电路
主轴单元
主轴电动机 进给单元
进给电动机 图5—37 内装型PLC的CNC系统框图
一体，如图5—37所示。
内装型PLC的硬件和软件被作为CNC系统的基本功能统一设计，并且其性能指标也由CNC系统来确定。内装型PLC与所从属CNC装置之间的信号传送均在其内部进行，并且内装型PLC一般也不单独配置1／O接口，而是通过CNC装置本身的I／O电路完成输入／输出功能。这样内装型PLC的硬件电路既可以单独设计在其自己的印制电路板内，也可安排在CNC装置的某一块电路板中，如有的数控系统就将内装型PLC电路设计在CNC装置的CPU板上。
对于内装型PLC来讲，它既可以与CNC共用一个CPU，如图5—38（a）所示，也可以为PLC设置专用的CPU，如图5—38（b）所示。前者可进一步更充分地利用CNC装置中CPU的余力来完成PLC的功能，并且使用元器件较少，但1／O点数不可能太多，规模也有限，一般适用于PLC功能相对简单的场合。后者由于有自己的CPU来专门负责PLC的功能，能力较强，适合于规模较大、逻辑复杂、动作速度要求较快的控制场合。
CPU
CPU (CNC/PLC)
(CNC) 轴出
PLC
输出 PLC
CPU EPROM
15 输入
EPROM
输入 （a）PLC和CNC共用CPU
（b）PLC具有专用CPU 图5—38 内装型PLC中的CPU
采用内装型PLC后，扩大了CNC内部直接处理数据的能力，可以使用梯形图方式进行编辑，传送复杂的控制功能，且造价较低，提高了CNC的性能价格比。
5.3.2.2 独立型PLC
所谓独立型PLC实际上也就是一个通用型PLC，它完全独立于CNC装置，具有完备的硬件和软件，能够独立完成CNC系统所要求的控制任务。它与数控机床之间的关系如图5—39
139 内部总线
0电路 计算机
内部总线 

MDI／CRT 面板
CNC装置
PLC 装置
操作面板
辅助动作 换刀动作
冷部开关 DV
强电电路 PLC
CNC
主轴单元
主轴电动机 进给单元
进给电动机 图5—39 独立型PLC的数控系统框图
所示，
可见，对于独立型PLC来讲，不但要进行机床侧的1／O连接，还要进行CNC装置侧的1／0连接，这时CNC和PLC均具有自己的1／O接口电路，并且独立型PLC（也就是通用型PLC）一般采用模块化结构，装在插板式机笼内，I／O点数和规模可通过1／O模块插板的增减灵活配置，对于数控车床，数控铣床和加工中心等单台数控设备，所需PLC的I／O点数大多在128点以下，少数复杂设备在128点以上，这时选用微型或小型PLC即可。而对于大型设备，如FMC，FMS，FA、CIMS，则需要选用中型或大型PI.C，
独立型PLC的造价较高，所以其性能价格比不如内装型PLC，总的来讲，内装型PLC多用于单CPU的CNC系统中，而独立型PLC主要用于多CPU的CNC系统中，但它们的作用是一样的，都是配合CNC装置实现刀具轨迹控制和机床顺序控制。
5.3.2.3 M．S．T功能的实现
PLC处于CNC装置和机床之间，用PLC程序代替以往的继电器线路实现M，S，T功能的控制和译码，即按照预先规定的逻辑顺序对诸如主轴的启停、转向、转数，刀具的更换，工件的夹紧、松开、液压、气动、冷却、润滑系统的运行等进行控制。
（1）M功能的实现
M功能也称辅助功能，其代码用字母“M”后跟随2位数字表示。根据M代码的编程，可以控制主轴的正反转及停止、主轴齿轮箱的变速、冷却液的开关、卡盘的夹紧和松开以及自动换刀装置的取刀和还刀等，例如，某数控系统设计的基本辅助功能动作类型如表5—4所示。
表5—4 基本辅助功能动作类型
辅功能代码
功能
类型
辅助功能代码
功能
类型 MO0
程序停
A
MO7
液状冷却
1 Mo1
选择停
A
Mo8
雾状冷却
1 M02
程序结束
A
M09
关冷却液
V Mo3
主轴顺时针旋转
M10
夹紧 1
H 3404
主轴进时针旋转
M11
松开
H I
MO5
主轴停
A
M30
程序结束并侧带
V 换刀准备
C 900
140
电路 电路
WD电路 

表中辅助功能的执行条件是不完全相同的。有的辅助功能在经过译码处理传送到工作寄存器后就立即起作用，故称之为段前辅助功能，记为1类，如M03、M04等；有些辅助功能要等到它们所在程序段中的坐标轴运动完成之后才起作用，故称之为段后辅助功能，记为A类，如M05、M09等；有些辅助功能只在本程序段内起作用，当后续程序段到来时便失效，记为C类，如M06等；还有一些辅助功能一旦被编人执行后便一直有效，直至被注销或取代为止，记为H类，如M10、M11等。根据这些辅助功能动作类型的不同，在译码后的处理方法也有所差异。
在数控加工程序被译码处理后，CNC系统控制软件就将辅助功能的有关编码信息通过PLC输入接口传送到PLC中相应寄存器中，然后供PLC的逻辑处理软件扫描采样，并输出处理结果，用来控制有关的执行元件。
（2）S功能的实现
S功能主要完成主轴转速的控制，并且常用S2位代码形式和S4位代码形式来进行编程。所谓S2位代码编程是指S代码后跟随2位十进制数字来指定主轴转速，共有100级（S00～S99）分度，并且按等比级数递增，其公比为／10＝1.12，即后一级速度比前一级速度增加约12％，这样根据主轴转速的上、下限和上述等比关系就可以获得一个S2位代码与主轴转速（BCD码）的表格，它用于S2位代码的译码。图5—40所示为S2位代码在PLC中的处理框图，图中“译S代码”和“数据转换”实际上就是针对S2代码查出主轴转速的大小，然后将其转换成二进制数，并经上、下限幅处理后，将得到的数字量进行D／A转换，输出一个0～10V或0～5V或—10～＋10V的直流控制电压给主轴控制系统或主轴变频器，从而保证了主轴按要求速度旋转。
D/A
種 图5—40 S功能处理框图
所谓S4位代码编程是指S代码后跟随4位十进制数字用来直接指定主轴转速，如S1500表示主轴转速为1500r／min，可见S4位代码表示的转速范围为0～9999r／min，显然，它的处理过程相对于S2代码形式要简单一些，也就是它不需要图中“译S代码”和“数据转换”两个环节。另外，图中上、下限幅处理的目的实质上是为了保证主轴转速处于一个安全范围内，如将其限制在20～3000r／min范围内，这样一旦给定超过上下边界时，则取相应边界值作为输出即可。
在有的系统中为了提高主轴转速的稳定性，保证低速时的切削力，还增设了一级齿轮箱变速，并且可以通过辅助功能代码来进行换挡选择。例如，使用M38代码可将主轴转速变换成20～600r／min范围，用M39代码可将主轴转速变换成600～3000r／min范围。
据此可以写出S4代码编程的S功能软件流程如图5—41所示。
在这里还要指出的是，D／A转换接口电路既可安排在PLC单元内，也可安排在CNC单元内；既可以由CNC或PLC单独完成控制任务，也可以由两者配合完成。
141 主轴控制系统
限幅处理 电平转快



（3）T功能的实现
T功能即为刀具功能，T代码后跟随2～5位数字，表示要求的刀具号和刀具补偿号。数控机床根据T代码通过PLC可以管理刀库，自动更换刀具。也就是说，根据刀具和刀具座的编号，可以简便、可靠地进行选刀和换刀控制。
根据取刀／还刀位置是否固定可将换刀分为随机存取换刀控制和固定存取换刀控制。在随机存取换刀控制中，取刀和还刀与刀具座编号无关，还刀位置是随机变动的。在执行换刀的过程中，当取出所需的刀具后，刀库不需转动，而是在原地立即存入换下来的刀具。这时，取刀、换刀、存刀一次完成，缩短了换刀时间，提高了生产效率，但刀具控制和管理要复杂一些。在固定存取换刀控制中，被取刀具和被还刀具的位置都是固定的，也就是说换下的刀具必须放回预先安排好的固定位置，显然，后者增加了换刀时间，但其控制要简单些。
图5—42所示为采用固定存取换刀控制方式的T功能处理框图。加工程序中有关T代码的指令经译码处理后，由CNC系统控制软件将有关信息传送给PLC，在PLC中进一步经过
PLC
CNC S4代码吗？
图5—42 T功能处理框图BCD码转换成
换刀开始 S>3000r/min?
译T代码（读取新刀号）S-3000/min
刀号检索
置出错标志 N
S<20r/min
检索到吗”
井报警 N
Y
IY S-20c/min
与原来刀号相同吗？
N Y
以原来刀位为目标寻找最短旋转路径和方向M38吗？
刀库回转
到原来刀位 内轮变速箱
N 低速挡指令
取出原来刀
具放回刀库
以新刀位为目标寻找最短旋转路径和方向齿轮变通箱高通挡指令
刀库回转
到新刀位 齿轮箱变速
从刀库取出新换刀具装入主轴输出S指令
记录换刀结果 返
换刀结束 图5—41 处理S功能的软件流程
图5—43 处理T功能的软件流程142
刀军回转 

，■示，找到T代码指定刀号对应的刀具编号（即地址），然后与目前使用的刀号相比较。如果相同，则说明T代码所指定的刀具就是目前正在使用的刀具，当然不必再进行换刀操作，而返回原入口处，若不相同，则要求进行更换刀具操作，即首先将主轴上的现行刀具归还到它自己的固定刀座号上，然后回转刀库，直至新的刀具位置为止，最后取出所需刀具装在刀架上。至此才完成了整个换刀过程，据此可以写出处理T功能的软件流程，如图5—43所示。
5.4 数控系统的应用
5.4.1 输入输出信号及其连接与调试
数控装置的输入输出信号大致包括如下几类。
①开关量输入输出 用于完成机床的开关量辅助功能控制及数控系统与机床信号的交换。
②模拟量输出 高分辨率的模拟量输出用于控制进给伺服与主轴驱动。③位置反馈输入 用于各进给轴与主轴位置传感器的接收、处理及计数。④手轮输入 用于连接MPG手轮脉冲发生器。
⑤通信与网络接口 通常数控装置均具有标准的RS—232C接口，许多系统同时还配有20mA电流环及RS—422远程通信接口。作为选件，还可配置各种网络接口。
5.4.1.1 开关量输入输出
数控装置通常可直接处理开关量输入输出信号或通过内置PLC处理开关量输入输出信号。开关量输入输出的种类很多，有直流与交流、有源与无源、有触点与无触点等多种，在数控系统中以直流开关量输入输出使用较为普遍，
（1）直流开关量输入接口
直流开关量输入接口示意图如图5—44所示，图中RV（receiver）为信号接收器。RV的主要功能为信号电隔离、滤波防扰动和电平转换（即将＋24V机床侧开关信号转换为TTL电平信号）。由于机床侧开关量信号的抗干扰能力一般要求较高，故通常采用＋24V或＋12V电源，开关量输入输出所用电源可以分开也可以共用一个。如分开使用不同电源，则开关量输入所用电源一般由CNC内部提供。当开关量输入有效时，典型消耗电流小于10mA。图5—45所示为带有光电隔离功能的典型开关量输入电路。
（2）直流开关量输出接口
典型的直流开关量输出接口示意图如图5—46所示。图中DV（driver）为驱动器，直流
CNC(PLC)
机床侧 CNC(PLC)
机床侧
TIL 图5—44 直流开关量输人接口示意图
图5—45 典型开关量输入电路
143 

开关量输出信号用于驱动机床强电箱中的中间继电器线圈和指示灯等，进而由中间继电器触点进一步控制外部接触器、电磁阀等，每个中间继电器（一般为＋24V或＋12V）的典型驱动电流为数十毫安。该外部＋24V（或＋12V）直流电源由于容量较大，一般由外部电源单独提供。
图5—47为集电极开路OC（open collector）门输出，通常采用75系列驱动芯片，该输出类型使用较普遍。
图5—48为触点型直流开关量输出，通常采用高可靠性微型继电器，其体积与集成电路相似。上述两种均为无源输出，图5—49为电压型直流开关量输出，为有源输出。
CNC(PLC)
机床侧 CNC(PLC)
机床间
+24V 基极驱动
DV
图5—46 开关量输出接口示意图
图5—47 集电极开路开关量输出CNC(PLC)
机床侧 +24V
CNC(PLC) AS+
本
¥
DV DV
图5—48 触点型直流开关量输出
图5—49 电压型直流开关量输出在开关量输入输出中，应注意以下几个问题。
①开关量输入电路中常使用触点型行程开关，无触点型感应开关或霍耳开关等，加之数控装置的输入电路有各种形式，所以要注意开关量信号检测元件与CNC接口电路的配接。图5—50为几个不同接口配接的例子。
②在开关量输出电路中，当被控对象是电磁阀、电磁离合器等交流负载，或虽是直流负载，但工作电压或电流超过输出信号的最大允许值，应首先驱动24V中间继电器，然后用其触点控制强电线路中的功率接触器或直接驱动负载。同时应注意，中间继电器线圈一定要并联保护二极管，并注意二极管的方向，以便当线圈切断时，为电流提供释放回路，否则极易损坏驱动电路。
③为提高整个系统的抗干扰能力，弱电信号与强电驱动信号在走线槽中要尽量分别走线。并且在交流接触器线圈两端要就近并联RC灭弧器（例如，R＝220Ω／1W，C＝0.2μF／600V）。交流电动机每相之间也要用一个灭弧器，每个交流电动机用三个。这些措施对整个数控机床的可靠性是很重要的。目前已有很多厂家生产系列灭弧器，以适应不同功率的要求，使用十分方便。但要注意一般在变频器主轴电动机或进给伺服驱动电动机上不需要也不允许安装灭弧器。
... 

触点型
+24V NPN
无触点型
0 +24V
触点型
图5—50 开关量输入信号与CNC装置的接口5.4.1.2 模拟量输出
数控装置可输出0～±10V的高分辨模拟量电压信号，用于控制进给轴与主轴的转速。根据数控系统控制轴数的多少，通常有少则3路多则近10路的输出信号。由于模拟量输出是由计算机数模（D／A）转换器完成的，其分辨率与转速控制的平稳性及位置控制精度有很大的关系，故数控装置D／A转换最少为
电子开关 13位（含1位符号），多则可达16位，
保持器 为了简化结构，还可采用单路D／A加多
路保持器的原理。只要数控装置中CPU
保持器
-号 CPU
高精度 定时周期性刷新每路电压值，则同样可
D/A 达到精度要求，如图5—51所示。
在模拟量输出信号使用中，应注意
保持器 以下几点。
①模拟量输出通常直接连接至进给
图5—51 多路D／A实现原理示意图与主轴驱动装置，必须采用屏蔽电缆传
输，并且屏蔽层一端接外壳（即接地），传输信号线应尽可能短。屏蔽线非屏蔽部分不得过长（一般小于50mm）。
②驱动单元的输入阻抗不能太小（一般大于10kn）。
③控制进给驱动的模拟量输出应与驱动单元配合，使得当模拟量为±9～±9.5V时，电动机以Go0的转速旋转，这一调整通常在进给驱动上进行，调整较方便。不使±10V电压对应G00转速的原因是位置环控制是一动态过程，如使满量程最高电压±10V电压对应Go0转速，则其没有上升调整的电压裕量，易产生报警。
④许多机床主轴驱动的正反转切换是靠M03／M04控制开关量完成的，而不是靠主轴驱动控制电压的正负来完成，故有些数控装置主轴控制电压为单极性0～＋10V输出或双极性0～±10V输出可选（由系统内部参数选择）。
5.4.1.3 位置反馈输入信号与手轮信号
位置检测元件很多，较常用的有适用于半闭环的光电脉冲编码器、旋转变压器，适用于
145 

全闭环的直线光栅、直线感应同步器等，不同的检测元件与CNC数控装置的接口不同，因此一种数控系统通常只能接一种或两种位置传感器，如果数控装置已经选定，则位置传感器不能随意选择。
由于位置传感器是进给系统最终位置观测的“眼睛”，如果检测信号受到干扰，则计算机会产生错误的位置修正，由此产生的位置误差不同于由其他诸如转矩扰动，电源电压波动、伺服器件偏移等产生的误差，它是无法重新修正回来的。因此，位置传感器至数控装置的连接电缆不应过长（最大长度一般在说明书中均有要求），并采用屏蔽电缆，在布线时不可与强电特别是高频率的强电同槽。
另外，当传输线较长时，应考虑电源线（如＋5V、GND）的衰减，因此电源线与信号
线不同，通常采用较粗的线或采用两根以
上的线连接，以减小电阻。有些系统可将비
电源电压略调高一些（如调至5.15V）以至动
接收
抵消传输压降。图5—52为典型的光电脉冲年
编码器与数控装置的连接。MC3487
MC3486
光电编码器与数控装置的连接均采用CIND
GND
差动传输，因差动传输可以大大提高信号
*5V
传输的抗干扰能力。常用的差动信号输出
器件为MC 3487，差动接收器件为MC光电编码器
数控装置
3486，在数控系统的接口电路中通常还有图5—52 光电编码器与数控装置的连接
倍额处理和失线报警功能。
图5—53所示为光电编码器正转时输出的信号波形，编码器每转输出数千至数万个方波，通过倍领和计数测得电动机的转角，从而间接测得工作台的移动距离。A与B信号相位相差90°，其超前与滞后关系表示光电编码器的正转与反转。
下面介绍手轮MPG（又称手摇脉冲发生器）的接口信号，它广泛用于机床的手动轴移动操作。MPG每转能输出100个脉冲的电信号，信号分为A，B两路，均为方波信号，其相位相差90°，MPG与数控系统通过4根信号线＋5V、GND、A、B相连。数控系统通过判断其A、B信号相位超前或滞后关系来判断MPG正、反转，通过检测MPG所发脉冲个数来控制坐标轴移动的距离。图5—54为MPG正转／反转信号波形。
0
（a）MPG正转时发出的信号（A超前B 907）日
년
（b）MPG反转时发出的信号（B超前A 90）图5—53 光电编码器正转时输出
图5—54 MPG 正转／反转信信号波形（TTL电平）
号波形（TTL电平）146



5.4.1.4
连接与调试需注意的问题
数控装置与外部的连接主要包括伺服驱动、主轴驱动及机床开关量输入输出的连接等几部分，在连接与调试中需注意如下问题。
①不同公司的何服驱动装置，其构成的反馈回路形式不同，图5—55给出了一些例子。由此可见采用不同的伺服驱动时，要仔细阅读其说明书，了解其速度环的构成及位置信号的获取。
0~±10V 何服驱动
SF
伺服驱动 数控
SF
数控 装置
装置
PF.SF PF
②
(b) 0~±10V
间服驱动
0~±10V
何服驱动 数控
数控 装置
PS
装置 PF
PF.SF PF
(d) (2)
图5—55 不同伺服驱动速度环与位置环的构成
图5—55（a）、（b）为FANUC早期数控系统的速度环SF与位置环PF的构成，其中图5—55（b）中速度环SF反馈信号是由位置反馈PF信号经F／V转换获得。图5—55（c）为使用 SIEMENS、AEG、FAGOR等直流无刷驱动装置的闭环构成，其中多了PS位置检测器。图5—55（d）为使用YASKAWA等全数字交流伺服驱动装置的闭环构成，其中高精度光电编码器同时完成了速度与位置传感器的功能，该信号在驱动内部经分频处理每转可输出8192脉冲以下任意分辨率的编码器信号。
当前，除某些高档数控装置采用数字接口或光纤（如SERCOS）接口，多数仍采用0～±10V模拟电压与位置反馈信号接口的方式与伺服驱动连接。
②位置传感器的选择应与机械传动、位置分辨率等一起考虑。例如，当选用方波型输出光电编码器时，数控系统内倍频数可选x1、x2、x4，当选用正弦波输出光电编码器时，倍频数可选为x5、x10、x20．再如，当电动机与丝杠直接相连，要求分辨率为1μm，丝杠螺距为8mm，选用方波型光电编码器时，光电编码器只能选用8000脉冲／r（设定倍频数为x1）或4000脉冲／r（设定倍频数为x2）或2000脉冲／r（设定倍频数为x4），不能随意选择。
此外需注意的是，最快移动速度不仅与伺服驱动的最高转速有关，还与机械传动、伺服分辨率以及位置反馈接口和位置传感器自身的最高频率有关。
③进给驱动与数控装置模拟控制电压、位置反馈回路及相应的开关量信号（如使能等）接好后，须经过如下调试步骤。
a.根据所配电动机及负载情况，参照伺服驱动说明书检查并调整其短路棒、电位器等至相应位置，若此时输出模拟电压，电动机能相应转动，表明转速环工作正常。
b.连接好位置环线路，如果手动指令发出后出现跟随误差过大报警，则需检查位置反
147 

馈是否为正反馈，如果是，需调换A、B相信号或修改数控系统相应参数。
c.零漂调整。首先将伺服驱动速度控制电压设定为零（信号与地短接），用万用表200mV挡测量测速机速度反馈信号，调整零漂电位器使所测电压为零，此时完成粗调。然后执行如下程序：
N10 G00 G90 X200 N20 X-200 N30 G25 N10
调整零漂电位器直至正反向运动时跟随误差相同，完成精调。
d．最高进给速度调整。调整伺服驱动器上的增益调整电位器，使得数控装置输出9.5V时对应G00速度。调整时同样可运行上述运动程序，对应模拟电压应为—9.5V和＋9.5V。使模拟电压为9.5V而不是10V对应G00速度的道理在前面已经介绍过了。
c．变增益参数调整。首先使k1＝k2或设定Eb为一个很大的值，使k2无效，设定值为“单位增益”通常会取得较满意的效果。这是一个经验值，实际上它对应：
k1=k2=
1000mm/min
=16.67(s-1) 1mm
如果希望取得更佳的性能，则需使用示波器测量定位过程中位置的响应曲线，以达到不产生超调的最大增益设定。通常在数控机床上，增益的范围为15～80（s—1）。然后运行如下程序（设最大切削速度为5m／min）；
N10 G01 G90 X200 F5000 N20 X-200
N30 G25 N10
数控系统显示器上显示出的就是最大切削速度时对应的跟随误差。实际上，如果k1＝k2为“单位增益”，此时跟随误差大约为5mm。设定E，为此值或略大于此值，如可设为6mm。最后，设定k2为k1的50％～70％左右即可。
1．增益最终校正。为取得最小的轮廓加工误差，各插补轴的增益必须尽可能准确一致。为此，需反复调整各轴增益，使在不同速度下各轴跟随误差一致。
④数控系统对主轴驱动的转速控制有模拟电压方式与开关量方式两种。开关量方式又分为2位BCD码、4位BCD码及12位二进制码三种。模拟量方式连接简单，只需两根信号线，而开关量方式则有传送距离远、信号无漂移、没有转换误差等优点，因此，在不同的场合均得到广泛的使用。
不同的数控系统与主轴驱动支持不同转速控制方式，在使用时需注意。当指定不同的S指令值时，在数控装置的输出接口应测得相应的电压或开关量编码。例如，最高转速设定为4000r／min，当指定S1234时，相应不同转速控制方式的输出信号如表5—5所示。
⑤开关量控制涉及到的外部电器较多，也是较易发生故障的地方。调试时首先要确认每一路开关量输入与输出信号的接口、连线直至执行电器是否正常。在线路连接完毕后，进
表5—5 相应不同转速控制方式的输出信号
控制方式
输出信号
控制方式
输出信号 模拟电压
3.08V
4位 BCD码
0001001000110100 2位BCD码
12位二进制码
010011101111 10000000
148 

人开关量诊断画面：
INPUT:
11 12 13···In 0 1 0
0 OUTPUT:
01 02 O3···On 0
0 0 0
此时，INPUT中可实时显示出外部开关量输入的状态，可手动使开关量输入一一有效，然后可一一置OUTPUT中开关量输出有效，观察外部相应动作是否执行，从面检查输出通道是否正常，只有外部开关量1／O信号连接无误，才能进行PLC程序的调试。
5.4.2 典型数控系统的应用
数控系统是数控机床的核心，在国内外有很多规格不同、性能指标各异的数控系统，数控机床根据功能和性能要求，配置不同的数控系统。系统不同，其指令代码、连接方式、PLC程序编制等都有差异，使用时应根据具体系统的编程手册、连接手册、PLC使用手册等相关资料进行。本节以国内数控的代表产品华中数控为例，介绍其典型应用。
5.4.2.1 华中I型数控系统的结构特点
在国内，广泛使用的一些国外知名品牌的数控系统稳定性好、可靠性高，得到了国内众多企业的普遍认可，但这些系统技术相对封锁，难以进行二次开发，对于一些特殊用户和设备难以根据实际情况扩展其功能。
由于华中I型数控系统采用了以工业PC机为硬件平台，DOS、Windows 及其丰富的支持软件为软件平台的技术路线，使主控制系统具有质量好，性能价格比高，新产品开发周期短，系统维护方便，系统更新换代和升级快，系统配套能力强，系统开放性好，便于用户二次开发和集成等许多优点。华中I型数控系统在其操作界面，操作习惯和编程语言上按国际通用的数控系统设计。国外系统所运行的G代码数控程序，基本不需修改，可在华中I型数控系统上使用。但是，华中I型数控系统采用汉字用户界面，提供完善的在线帮助功能，便于用户学习和使用，系统提供类似高级语言的宏程序功能，具有三维仿真校验和加工过程图形动态跟踪功能，图形显示形象直观。与SIEMENS和FANUC的普及型数控系统相比较，华中I型数控系统在功能上毫不逊色，在价格上更为低廉，在维护和更新换代方面更为方便。
可以说华中I型比较彻底地贯彻了PC—NC的技术路线，以PC＋软件完成全部的NC功能，因而以国外低档数控系统的价格，实现了国外高档系统的功能，具有优良的性能价格比。系统结构框图如图5—56所示。
华中I型数控系统界面分为硬件和软件界面。硬件界面针对系统不同情况而不同。例如，系统的位置单元接口可根据使用伺服单元的不同而有不同的具体实现方法：当伺服单元为数字式时，位置单元接口采用标准RS—232串行接口；当伺服单元为模拟式交流伺服时，位置单元接口采用位置环板。华中1型数控系统控制软件任务是构成一个具有实时多任务控制的数控软件平台，提供一个方便用户的二次开发的环境，以便用户（包括系统生产厂）在此平台的基础上进行修改、增删，灵活配置派生出不同的CNC控制装置。
5.4.2.2 华中I型数控系统内置式PLC基本原理
华中数控内置式PLC已集成在数控装置内具有48路输入／输出点，华中数控PLC采用C语言编程，具有灵活、高效、使用方便等特点。
149 

CPU
操作面板 机床开关
0/1점 内存
接口 外存
主轴单元
主轴电动机 系统控制部件
伺服电动机 CRT
CRT接口
通信口 健盘
网络卡
图5—56 华中1型数控系统结构框图（1）华中数控内置式PLC的结构及相关寄存器的访问
华中铣削数控系统的PLC为内置式PLC，其逻辑结构如图5—57所示。
图中：
G
X
X 寄存器为机床输人到PLC的开关信号，内置式
数控 F PLC
最大可有128组（或称字节，下同）；系统
Y
Y 寄存器为PLC输出到机床的开关信号，B.P
R寄存器
最大可有128组： 系统函数
R 寄存器为PLC内部中间寄存器，共有图5—57 华中数控内置式PLC的逻辑结构
768组：
G 寄存器为PLC输出到计算机数控系统的开关信号，最大可有256组；F 寄存器为计算机数控系统输出到PLC的开关信号，最大可有256组：
P 寄存器为PLC外部参数，可由机床用户设置（运行参数子菜单中的PMC用户参数命令即可设置），共有100组：
B 寄存器为断电保护信息，共有100组。
X、Y寄存器会随不同的数控机床而有所不同，主要和实际机床的输入／输出开关信号（如限位开关、控制面板开关等）有关，但X、Y寄存器一旦定义好，软件就不能更改其寄存器各位的定义；如果要更改，必须更改相应的硬件接口或接线端子；R寄存器是PLC内部的中间寄存器，可由PLC软件任意使用；G、F寄存器由数控系统与PLC事先约定好的，PLC硬件和软件都不能更改其寄存器各位（bit）的定义；P寄存器可由PLC程序与机床用户任意自行定义。
对于PLC来说，R寄存器是一块内存区域，系统定义如下指针对其进行访问。extern unsigned char R ［］； ／／以无符号字符型存取R寄存器
同时，为了方便对R寄存器内存区域进行操作，系统定义了如下类型指针（无符号字符型、字符型、无符号整型、整型、无符号长整型、长整型）对该内存区进行访问，即这些地址指针在系统初始化时被初始化为指向同一地址。
150
机床 

extern unsigned char
R＿uc［］；／／以无符号字符型存取R寄存器extern char
R_c[];
／／以字符型存取R寄存器extern unsigned
R＿ui［］；／／以无符号整型存取R寄存器extern int
R_i[];
／／以整型存取R寄存器extern unsigned long
R_ul[];
／／以无符号长整型存取R寄存器extern long
R_I[];
／／以长整型存取R寄存器
同理，和R寄存器一样，系统提供如下类似数组指针变量供用户灵活操作各类寄存器。extern unsigned char
X_uc[],Y_uc[],*F_uc[],*G_uc[],P_uc[],B_uc[]; extern char
X_c[],Y_c[],F_c[],*G_c[],P_c[],B_c[]; extern unsigned
X_ui[],Y_ui[],*F_ui[],*G_ui[],P_ui[],B_ui[]; extern int
X_i[],Y_i□,F_i[],*G_iC],P_i[],B_i[]; extern unsigned long
X_ul[],Y_ul[],*F_u[],*G_ul[],P_ul[],B_ul[]; extern long
X_I□,Y_I[],F_I□],G_IC],P_I[],B_IC]; extern unsigned char
X[],Y[]; extern unsigned
F[],*G[],P[],BC];
（2）华中数控内置式PLC的软件结构及其运行原理
和一般C语言程序都必须提供main（）函数一样，用户编写内置式PLC的C语言程序必须提供如下系统函数定义及系统变量值。
extern void init(void);
／／初始化PLC extern unsigned plcl_timei
／／函数plc1（）的运行周期（单位为ms）extern void plel (void);
／／PLC程序入口1extern unsigned ple2 _time;
／／函数plc2（）的运行周期（单位为ms）extern void plc2(void);
／／PLC程序入口2
①函数init（）是用户PLC程序的初始化函数，系统将只在初始化时调用该函数一次。该函数一般设置系统M、S、B、T等辅助功能的响应函数及系统复位的初始化工作；
②变量plel＿time及ple2＿time的值分别表示plcl （）、ple2（）函数被系统周期调用 的周期时间，单位为ms。系统推荐值分别为16ms及32ms，即plcl＿time＝16，plc2＿time=32;
③函数plcl（）及ple2（）分别表示数控系统调用PLC程序的入口，其调用周期分别由变量plel＿time及plc2＿time指定。
系统初始化PLC时，将调用PLC提供的init（）函数（该函数只被调用一次），在系统初始化完成后数控系统将周期性地运行如下过程。
①从硬件端口及数控系统成批读入所有X、F、P寄存器的内容。②如果plc1＿time所指定的周期时间已到，调用函数plc1（）。③如果plc2＿time所指定的周期时间已到，调用函数plc2（）。④系统成批输出G、Y、B寄存器。
一般地，plcl＿time总是小于plc2＿time，即函数plcl（）较ple2（）调用的频率要 高，因此华中数控称函数plcl（）为PLC高速扫描进程，plc2（）为低速扫描进程。
因此，用户提供的plc1（）函数及plc2（）函数必须根据X及F寄存器的内容，正确计算出G及Y寄存器的值。
151 

5.4.2.3“世纪星”HNC—21M在数控铣床上的典型应用设计（1）系统简介
机床为四坐标铣床，X、Y、Z为直线坐标轴，＋A为旋转坐标轴（数控转台）：控制柜结构为强电控制柜＋吊挂箱；主轴控制采用变频器，液压换挡，分高速、低速两挡。表5—6列出了典型铣床数控系统设计采用的主要器件。
表5—6 典型铁床数控系统设计采用的主要器件序号
名称
规格
主要用途
备
注 数控装置
HNC-21MC
控制系统
华中数控 1
2
软驱单元
HFD-2001
数据交换
华中数控 3
手持单元
HWL-1001
手摇控制
华中数控 何服控制电源，开关电源供电
AC380/220V 300W AC380/110V 250W
热交换器及交流接触器电源4
控制变压器
AC380/21V 100W
华中数控 肌明灯电源
AC380/24V 100W
HNC-21MC 电源 5
何服变压器
3相AC380／200V 7.5kW
为HSV—11型电源模块供电
华中数控 开关电源
AC220/DC24V 50W
开关量及中间■电器
明玮 5
7
开关电源
AC220/DC21V 100W
升降油胞闸及电磁阀
明玮 8
何眼电源模块
HSV 11P
为同动器供强电
华中数控 9
何服■动器
HSV-11D075
X轴电动装置
华中数控 10
何服■动器
HSV-11D050
A油电动装置
华中数控 11
主轴变额器
CIMR-G5A45P51A5.5kW
主轴电机■动装置
安川 12
伺服电机
IFT6074(14N·m)
X.Y轴进给电机
兰州电机厂 13
主轴电机
4kW
矢量控制变额电机
河北 14
何服电机
1FT6074＋G45（14N·m推用）
Z轴进给电机
兰州电机厂 15
何服电机
130STZ6-1(6N·m)
A轴进给电机
华中数控
数控装置HNC—21M采用先进的开放式体系结构，内置嵌人式工业PC机，高性能32位中央处理器，配置7.5in彩色液晶显示屏和标准机床面板，集成进给轴接口、主轴接口、手持单元接口、内嵌式PLC接口、远程1／0板接口于一体；最大联动轴数为4轴，可选配各种类型的脉冲式、模拟式交流伺服驱动器或步进电机驱动器及HSV—11系列串行式伺服单元：具有直线、圆弧、螺旋线插补、固定循环、旋转、缩放、镜像、刀具补偿、宏程序等功能。
（2）总体框图
图5—58所示为HNC—21M数控装置与其他装置、单元连接的总体框图。XS40～XS43为4个串行伺服进给轴输出接口，连接4个HSV—11系列交流伺服驱动装置与4个交流伺服电机构成的交流伺服驱动系统，分别控制X、Y、Z、A轴的伺服进给；XS9为主轴输出接口，控制交流变频调速主轴单元，在一定范围内实现主轴的无级变速；XS10、XS11为开关152



XS10,XS11
输入开关量（操作按钮，机床检测输入）XS20
输出开关量（问服、继电器控制）软驱单元
HNC-21
X轴编码器 RS-232接口
XS5 X540
HSV-11型同服X
何服电机X PC■盘
轴编码器 XS41
HSV-H1型问服
伺服电机／ 软率
X84 以太网接口
XS3
Z轴编码器 XS42
HSV-11型同服Z
伺服电机Z 远程扩展1／0接口
XS6
4轴编码器 XS43
HSV-11型问服A
何服电机4 手持单元
XS8
主轴编码器 XS9
主轴变频器
主轴电机 图5—58 典型铣床数控系统设计总体框图
量输入接口，接收操作按钮、机床检测等输入开关量信号；XS20为开关量输出接口，用以实现伺服检测、主轴换挡、冷却等的继电器控制；软驱单元提供3.5in软盘驱动器接口，RS—232接口、PC键盘接口，以太网接口，通过转接线可与数控装置的XS4、XS5、XS2、XS3连接使用；XS8为手持单元接口，连接华中数控的HFD—2001手持单元，实现手摇、急停、使能、坐标选择、倍率选择控制；XS6为远程扩展I／O接口。
（3）电源部分
图5—59为铣床数控系统电气原理图的电源部分。系统采用三相AC380V供电，图中，QF0～QF4为三相空气开关；KM1～KM4为三相交流接触器，分别控制伺服电源模块、主轴变频器、液压电机及冷却电机的电源，可看出KM1～KM4受运行允许继电器KA1的控制；QF5～QF11为单相空气开关；RC1～RC3为三相阻容吸收器（灭弧器）；RC4～RC7为单相阻容吸收器（灭弧器）；V1、V2、V3、VZ为续流二极管；YV1、YV2、YV3、YVZ为电磁阀和Z轴电机抱闸。
控制电源通过控制变压器提供，分别输出AC 220V、AC 110V、两个AC24V，照明灯的AC24V电源和HNC—21的AC24V电源是各自独立地工作，电流较大的电磁阀用DC24V电源与输出开关量（如继电器伺服控制信号等）用的DC24V电源也是各自独立的，且中间用一个低通滤波器隔离开来。
总电源进线、变压器输入端等处的抗干扰磁环和高压瓷片电容未在图中表示出来。（4）继电器部分
图5—60为典型铣床数控系统电气原理图的继电器部分，KA1～KA10为直流24V中间继电器，由输出开关量控制，主要控制主轴正反转、换挡、冷却、润滑、刀具及伺服控制等。
图中，SQX—1、SQX—3分别为X轴的正、负超程限位开关的常闭触点；SQY—1、SQY—3分别为Y轴的正、负超程限位开关的常闭触点；SQZ—1、SQZ—3分别为Z轴的正、负超程限
153 

AC38QA三相
RC1 伺服变压器
R HSV-
何服电源
☆ QF1
AC380/
KMI
S
模块 200V 7kW
T VOS
VOS QF2
KM2
5.5kW
主轴
☆ VII
交频器 WII
VOS
RC2 QF3
液压电机 VOS
RC3 QF4
KM4
冷却电机 SDA
VOS QF8
KAI QF5
ACLOV 3A 250W
KA8 QF7
AC24V 100W 6A
RC4
RC6
RC7 AC380V
750W
电柜风扇 热交换器 QF6
照明灯
指示灯 AC24V
数控装置 6A
100W
HNC-21MC
伺服强电 主轴强电
液压电机
冷却电机 〒
QF9
吊挂风扇
低通滤波器 AC220V
AC250V 300W
3A
开关电源 AC220V
开关电源
AC220V 控制变压器
100W /DC24V
50W
/DC24V 自动
0130 110
润滑站
3A V9
24V1
24V 100 220A
220B KA6
KA9
101 2100 到Z轴问服 到：
到： 本
YVI本V2Z本
仁
樊电器
伺服电源模块 数控装置
何服驱动器 同服驱动器
主轴变類器
☆ 主轴换挡阀 刀具松阀
主轴润滑阀
2轴拖闸 表示该部分信号在其他原理图中需委使用
口
图5—59 典型铣床数控系统电气原理图的电源部分
位开关的常闭触点；440为来自伺服电源模块与伺服驱动模块的故障联锁；100为图5—59中DC 24V 50W开关电源的地。
（5）输入／输出开关量154



XN20
YO0
运行允许■电器 8SX
00 25 01 YO.L
系统复位 DOAS EI
23 ·5V0
12 02
问服允许 26%
转业 12 80
24 03 YOL
SV CML 24 HA
04 Y0.4
2．轴胞胞电器 11
11 0280
指示灯
23 05 YO1
冷即开维电器 23 0200
Y36
10 06 YO.A
刀具松■电器 10 0300
22
07 22 0310
X40
9 Y1.0
主输正转继电器 额
9 1320 X41
21 09 YIL
主轴反转■电器 21
1330 X4.2
8 0100 8 1340
20 X43
20 9110 Y14
主轴换挡駐电器 7 1360
X44 Xlo
7 0120 1x
19 1370 X45
19 0130 X46
IX100
6.0140 6 1380
009 18 1390
使款
18 0150 5 호0
急Q
空O
001 17ES1P3
17ESTOP3 4ESTOP20
4ESTOPIO
（■电器DC24V地）16 124V0
16 OTHS20
限位急停健
外部运行允许 3124VO
3 OTHSIO
维电器 15 24VG0
15 24VGO 2.24V00
手持单元
2 N4VGO 14.24VGo-
14 24VG9 1 24VG0
1 24VG0
100
（■电器DC24V地）图5—62 典型铣床数控系统输入输出开关量电气原理图2
图5—61、图5—62为输入输出开关量电气原理图，输人开关量主要是指进给装置、主轴装置，机床电气等部分的状态信息与报警信息，输出开关量控制相应的继电器。
XS8插座中的130～139信号与XS11插座中各同名信号均为井联关系，留给手持单元使用，直接由XS8引出。
对输人1和输出O重新标号为X和Y，是为了与PLC状态显示相一致，在PLC编程中也更方便，X0.0，Xo．1、··、X1.2与10、11，·、110相对应，即X0代表PLC输入第0个字节，X1代表PLC输入第1个字节，X1.3代表PLC输入第1个字节的第三位，即输人开关量的111。
100为图5—59中DC 24V 50W开关电源的地；SQI，SQ2为主轴换挡到位检测行程开关；主轴报警、主轴速度到达、主轴零速信号来自于主轴变频器。
（6）主轴单元接线图
图5—63为典型铣床数控系统主轴单元电气原理图。主轴启停控制由PLC承担，利用Y1.0、Y1.1（对应中间继电器KA4、KA5）输出即可控制主轴装置的正、反转及停止。—般定义接通有效，这样当Y1.0接通时可控制主轴装置正转，Y1.1接通时，主轴装置反转，二者都不接通时，主轴装置停止旋转。在使用某些主轴变频器或主轴伺服单元时也用¥1.0、Y1.1作为主轴单元的使能信号。
如果主轴装置的运转方向由速度给定信号的正、负极性控制，这时可将主轴正转信号用作主轴使能控制，主轴反转信号不用；如果主轴控制器有速度到达和零速信号，这时可使用主轴速度到达和主轴零速输入，实现PLC对主轴运转状态的监控。
156
州学 肃出 

制动电
6000 100W
主轴电机 U11
B1 B2 U(TI)
U
主轴编码器 R(LI)
V S(L2)
V(T2)
4kW IIA
W11
T(1.3)
W(T3)
车 TVL
OV 主轴风扇
OV 2
+5V 3 KAS
KA4
A+4 主输正转
A-5 KAS
主轴反转
B+6 主轴复位
B-7 10%
TA2(E) 110
主轴变類器
主轴报管
-X30 CIMR-G5A45P51A
主轴零速
X32 AOUT2 14
013
5.5kW
主轴速度到达
X31 GND
017
20.27
001 GND7.8.15
图5—63 典型铣床数控系统主轴单元电气原理图
HNC—21M通过XS9主轴接口中的模拟量输出可控制主轴转速，其中AOUT1的输出范围为—10～＋10V，用于双极性速度指令输人的主轴驱动单元或变频器，这时采用使能信号控制主轴的启、停，AOUT2的输出范围为0～＋10V，用于单极性速度指令输入的主轴驱动单元或变频器，这时采用主轴正转、主轴反转信号控制主轴的正、反转。由图可知，本系统采用单极性速度指令控制，由KA4、KA5控制主轴的正转和反转。
（7）伺服单元接线图
HNC—21型数控装置提供了三类轴控制接口，即串行接口、脉冲接口、模拟接口，可与目前流行的大多数伺服驱动装置连接，其对应关系如表5—7所示。
表5—7 数控装置与三类轴控制接口的关系型号
HSV-11
步进电机驱动
脉冲接口伺服
模拟接口伺服 HNC-21□A
HNC-21□C
✓ HNC-21□D
✓ HNC-21□F
人
人 く
注：□表示M或T.
人
本侁床数控系统选用HNC—21MC数控装置，配置与华中数控生产的HSV—11系列交流伺服驱动装置连接的专用串行进给驱动接口，连接简便，抗干扰能力强，无漂移。
图5—64所示为典型铣床数控系统伺服驱动电气原理图。电源模块的工作电源为三相380V，由R、S、T端输入，输出220V为4个伺服驱动模块提供工作电源，由220A、220B端引出；图中，440端为电源模块和4个伺服驱动模块故障联锁信号的串联，正常为“0”，KA3（图5—60）吸合，伺服OK，只要一个模块出现故障，440就变为“1”，KA3失电，外部允许继电器KA1断开，电源模块的使能信号断开；KA7（图5—60）为Z轴抱闸信号；Y03端为Z轴减电流信号，从XS20（图5—62）输出。
157 B2%
位置卡 
