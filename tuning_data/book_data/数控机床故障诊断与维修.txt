《数控机床故障诊断与维修〉
编委会

主编 罗庚合黄万长

副主编 夏罗生 张志军 余斌高

编委 罗庚合黄万长夏罗生

张志军 余斌高

前 言

改革开放以来，数控机床的推广应用，促进了我国机械制造业的发展。数控机床是典

型的机电一体化设备，综合了计算机、精密机械、自动控制、检测等高新技术。随着数控系

统的不断更新换代，其维修理论、技术和手段都与传统设备产生巨大的变化，随着数控机

床的大量普及和应用，特别急需数控机床维修人才。为制造业发展和高职教育的需要，我

们编写了本书。

本书由西安航空技术高等专科学校的罗庚合和陕西法士特齿轮有限公司高级工程师

黄万长任主编，他们有多年的高职高专的教学和长期从事数控机床维修的实践经验。黄

万长是陕西机械工程学会数控自动化学会理事，长期从事数控机床的维修及培训工作。

教材中的许多案例都是作者多年数控机床维修的实例和经验。

本书的特点：系统性与实用性相结合；以典型产品带教学；维修实例均来自工厂的维

修一线；各章的习题针对性强并保证足够的训练；重点介绍工厂企业市场份额最大的技术

先进的 FANUC OiC 及 SIEMENS 802D、 840D 数控系统；增加并加强了同类教材缺少的

数控机床编程与操作故障分析。

本书将维修实例穿插到不同的内容中，突出数控机床电气控制原理的分析，比较详细

地介绍了 PLC 指令和应用，介绍了 FANUCOi 、 SIEMENS 802D 、 840D 数控系统的参数调

整，以及利用 l/0 接口状态、 PLC 梯形图在线监控和故障诊断方法，对维修中经常遇到的

数控机床编程与操作方面的故障作了实例分析。

本书由罗庚合、黄万长任主编，夏罗生、张志军、余斌高任副主编。本书绪论和第 2 章

由罗庚合编写，第 1 章和第 6 章由黄万长编写，第 3 章由夏罗生编写，第 4 章由余斌高编

写，第 5 章由张志军编写，附录由李懿整理。

本书在编写过程中，得到了西安航空技术高等专科学校、陕西法士特齿轮有限公司、

张家界航空工业职业技术学院、陕西国防工业职业技术学院的大力支持与帮助，在此表示

衷心感谢！

尽管我们做了很多努力，力求用典型产品来展开教学，力求理论联系实际，但由于我

们的经验和学识所限，还是有不足之处，恳请同仁不吝赐教，提出宝贵的意见。

编者

N 

目录

第 0 章绪论．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 1

0.1  数控机床工作过程及组成........................…....................................... 1 
0.1.1  数控机床工作过程．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 1

0.1.2  数控机床组成．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 2

0.2  数控机床维修的基本要求......…..................……...….........…......…...... 4 
0.2.1  维修人员的素质要求．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 4

0.2.2  必要的技术资料．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 6

0.2.3  必要的维修器具与备件．．．......………....................................... 7 
0.3  数控机床常见故障分类······............................................................... 9 

0.3.1  按数控机床发生故障的部件分类...…………………………………… 9
0.3.2  按数控机床发生故障的性质分类…………………...……·…..……… 9

0.3.3  按数控机床发生故障时有无报警显示分类·………·………………·… 10
0.3.4  按数控机床发生故障的原因分类…...……...……..……....………… 11
0.4  数控机床故障排除的思路和原则...….........….........…........................ 11 
0.4.1  数控机床故障排除的思路.................................…...…...…...... 11 
0.4.2  故障排除应遵循的原则......................................................... 12 

0.5  数控机床维修的基本步骤...…..................…...............…….........…... 14 
故障记录........................................................................... 14 

0.5.1 

0.5.2 

维修前的检查..................................................................... 15 

0.5.3  CNC 故障自诊断．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 16

0.5.4  故障诊断与排除的基本方法......…......…...…........................... 20 
小结................................................................................................... 27 

习题................................................................................................... 29 

第 1 章数控机床电气控制．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 31

1.1  HTC2050Z 数控车床参数及性能简介………………………………………… 31
1.1.1  典型机械机构简介............................................................... 31 
1.1.2  技术参数........................................................................... 35 

1. 2  HTC2050Z 数控车床的电气控制．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．..…......... 35 
1.2.1  数控系统连接框图............................................................... 35 

V 

1.2.2  NC 数控装置的连接．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 37

1.2.3  交流主轴伺服驱动连接···········································:············· 38 
1.2.4  交流进给伺服驱动连接························································· 39 
1.2.5  辅助电路分析·····································................................ 40 
1.2.6  维修实例及分析·································································· 45 
小结··································································································· 45 
习题··································································································· 46 

第 2 章数控机床可编程控制器．．．．．．．．．．．．．．．．．....….........…........................... 47 

2.1  数控机床用 PLC 简介····································································· 47 
2.1.1  数控机床用 PLC 的功能．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 47

2.1.2  数控机床 PLC 分类．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 48

2.1.3  PLC 在数控机床中的配置方式 ..……………..……………...…… ..50 
2.1.4  PLC 与外部的信息交换 ...................................................... 51 

2.1.5  FANUCOi 系统 PMC 内存地址的含义...……·…········………… ...53
2.2  数控机床用 PLC 指令系统............….........…......…...…......……......... 54 
2.2.1  FANUC 系列的 PLC 的基本指令 ......……..............................  54 

2.2.2  FANUC 系列的 PLC 的功能类型指令简介 ………....……………..  56 
2.2.3  FANUC 系列的 PLC 的功能类型指令应用 …·……...……………..  58 
2.3  数控机床 PMC 控制应用举例 ..........................................…......…… 75 

2.3.1  数控机床工作状态开关 PMC 控制……·……………...…………….. 75 
2.3.2  数控机床加工程序功能开关 PMC 控制．…………………………….. 77 
2.3.3  数控机床倍率开关 PMC 控制…..…………·…·……...……...…… ..81
2.3.4  数控机床润滑系统 PMC 控制...…............…........................... 83 
2.3.5  数控车床自动换刀 PMC 控制．．．．．．．．．......…......…......……......... 85 
2.3.6  刀库自动选刀控制······......................................................... 87 
2.4  数控系统 PLC 故障诊断.................................................................. 91 

2.4.1  数控机床中 PLC 的作用．..………............…...….........…......… 91
2.4.2  PMC 内装调试功能．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 92

2.4.3  PMC 的诊断界面 (PMCDGN 界面）……………·…...……..………… 96

2.4.4  PMC 参数界面 (PMCPRM 界面）…………………………………… 100

2.5  FANUC 数控系统 PMC 控制的故障诊断…………………………………… 101
2.5.1  通过 PMC 查找故障的方法 …......………...……......…...…......、 102
2.5.2  PMC 故障诊断与维修实例......…......…...…......…......…....….. 102 
2.5.3  刀库机械手部分故障实例·…...........…...…........................... 104 

小结．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 110

习题．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 110

M 

第 3 章 典型数控系统维修技术...….................................…............…...... 114 

3.1  FANUC 数控系统维修技术基础··················…......………·················· 114 
3. 1.1  FANUC Oi 、 16i/18i/2li 系列数控系统的组成及特点……·……….. 114 
3.1.2  FANUC Oi 系列数控系统的功能连接·……..……………·……….. 118 

3. 1. 3  FANUC  16i/18i/21i 系统的功能连接……………………………… 127
3. 2  SINUMERIK 数控系统维修技术基础 …………....…..…………………...  133 
3. 2.1  SINUMERIK 802D 、 840D 数控系统的组成与特点………·…·……· 133 
3. 2. 2  SINUMERIK 802D 系统功能连接 ...……...…...….........…......  138 
3. 2. 3  SINUMERIK 840D 系统功能连接 ............…….....................  144 
3.3  NC 参数及设定．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 152

3.3.1  FANUC Oi 系列的参数及设定．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 153

3. 3. 2  SINUMERIK 802D 的参数及设定 ………………………·………..  157 
3.4  系统故障诊断与维修····································································· 169 
3.4.1  FANUC Oi - A 系统的 CNC 故障诊断与维修……………·…·……· 169 
3. 4. 2  SINUMERIK 802D 系统的 CNC 故障诊断与维修………·……….. 194 

小结．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 207

习题．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 207

第 4 章数控机床主轴维修技术··········································………............ 210 

4.1  数控机床主轴传动系统及部件.........………............…··················…... 210 

4.1.1  数控机床对主传动系统的要求……………………………·……….. 210 

4.1.2  数控机床主传动系统的配置方式…..…………·…………………… 210
4.1.3  主轴轴承的主要配置形式......……······································· 212 

4.1.4  数控机床主轴内刀具的自动夹紧和切屑的清除装置……………… 213
4.1.5  主轴定向装置．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 214

4.1.6  主轴组件的润滑与密封．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 215
4.1.7 

电主轴．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 215

4.2  模拟量控制的主轴驱动装置及维修技术……..………………………………· 216 

4.2.1 

变频调速技术概述．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 216

4.2.2  通用变频器的组成与端子功能…………………………………… ··1 217 

4.2.3  变频器的功能参数的设定及操作…………………………………… 224
4.2.4  数控机床主轴变频的应用电路分析..………………·…·………….. 226 

4.2.5  变频器报警代码及维修技术………………………………………… 227
4.3  串行数字控制的主轴驱动装置及维修技术…………………………·……….. 231 
4.3.1  电源模块及维修技术·········….........….........………··············· 231 
4.3.2  串行数宇控制的主轴驱动装置及连接……………………·……….. 233 

VII 

4.3.3  串行数宇控制的主轴驱动装置报警代码与故障原因分析……·….. 235 
4.3.4  串行数字控制的主轴系统的参数设定与初始化操作·…………….. 237 
4.3.5  串行数字控制的主轴系统报警号及故障诊断方法·……………….. 238 
4.4  数控机床主轴的位置与速度控制装置及故障分析…·……………………….. 240 
4.4.1  串行数字控制的主轴电动机速度检测装置（编码器作用与原理）… 240
4.4.2  数控机床主轴独立编码器的作用与信号连接……·……………….. 241 
4.4.3  主轴的位置装置检测常见故障及维修技术·……………………….. 242 
4.5  故障实例分析·············································································· 243 
4.5.1  主轴定向过程中的 AL-02 报警...…...…...............…············ 243 
4.5.2  驱动系统出现交流伺服电机过热报警的故障维修…·…………….. 244 
4.5.3  驱动系统出现过电流报警的故障诊断与维修………·…………….. 244 
4.5.4  驱动系统出现传感器报警的故障诊断与维修………·…………….. 245 
4.5.5  主轴缺少轴使能信号的故障诊断与维修……………·…………….. 245 
4.5.6  FANUC OMC 系统 400 号、 409 号报警的处理………·…………….. 246 
4.5.7  FANUCOMC 系统多次出现 409 号报警的处理……·…………….. 246 
4.5.8  FANUC OMC 系统多次出现 1003 号、 409 号报警的处理……·….. 247 
4. 5. 9  SIEMENS 840D 系统多次出现 25040 号报警的处理·…………….. 247 
小结．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 247

习题．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 247

第 5 章 数控机床进给伺服系统及维修技术……..………..……………………….. 250 

5.1  数控机床进给系统传动部件...............…...............…············……...… 250
5.1.1  滚珠丝杠螺母副．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 250
5.1.2  静压蜗杆一蜗轮条传动．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 253
5.1.3  齿轮齿条传动机构．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 254
5.1.4  数控机床的导轨．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 255
5.1.5  进给系统齿轮间隙消除机构.........…...…...………...…............ 258 
5.1.6 

带传动．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 260

5.2 ：心卢二二动：正二：．二：二：二：二：二：二：．．．．二：二：二：二：．．．二：二
!:~:~  ;:;~:::了名原理．．．． .. . .  ... ......::::::::::::: ~:: 

5.2.3  伺服系统的分类．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 266
5.3  FANUC 伺服驱动装置及其维修技术……………………………………·….. 267 
5.3.1  FANUC a 系列伺服单元驱动装置......…································· 267 
5.3.2  FANUC ~i 系列伺服单元驱动装置............……......…·········… 270
5.3.3  FANUC a 系列伺服模块驱动装置...…...…······…….................. 272 

VIIl 

5.3.4  FANUC ai 系列伺服模块驱动装置···············…...…...…········· 274 

5.4  SIEMENS 伺服驱动装置及其维修技术……………………………………… 276
5.4  l. SIMODRIVE 611U 系列伺服模块驱动装置 ..……………………·  277 
5. 4. 2  SIMODRIVE 611D 系列伺服模块驱动装置…………………....….. 284 
5.5  检测装置的故障及诊断································································'· 286 
5.5.1  绝对编码器报警代码及维修技术…………………………………… 286

5.5.2  串行编码器报警代码及维修技术…………………………………… 288
5.6  数控机床伺服系统参数的设定......…….........…......……..................... 289 
5.6.1  FANUC 伺服系统参数的设定………...………......………......... 289 
5.6.2  SIMODRIVE 611U 伺服系统参数的设定 …..……………………·  292 
...................................... ;......  295 

5.7  数控机床进给伺服系统报警及维修技术

5.7.1  FANUC 伺服系统常见报警及维修...….....................…......... 295 

5.7.2  进给系统传动间隙误差的测定及补偿……………………………… 301

5.8  数控机床伺服系统故障诊断与维修实例……………………………………… 302

常见故障形式．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 302

5.8.1 
5.8.2  故障诊断方法及维修案例......….........…….........…......……... 304 

小结．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 308

习题．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 308

第 6 章数控机床编程与操作故障............…….........…························…... 310 

: . . :   ：：盂．．．．．．：．．： :..: :..: :....: :..: :..: :..: :....: :....: :..: :....: :..: :....: : :..: : :..: :....: :....: :....: :..: :....: :......: :..: ：．．盄

6.2.1  准备功能字 G ··································································  312 
6.2.2  进给功能字 F ··································································  315 
6.2.3  主轴转速功能字 S............................................................ 315 

::~:;  : : : : : : :  :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::：芦
6.3  加工程序的编写格式····································································· 317 

6.4 刀具补偿功能的正，严四：．：：二：．．：．．：．二二二：二： ：．．：：．：二二二二二： 317 
318 
6.5  编程故障实例分析
6.5.1  非法小数点或小数点省略．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．::··.·· 318 
6.5.2  正负号输入错误 ·······························································  319 
6.5.3  语句格式不当．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 319

6.5.4  刀具长度补偿
320 
6. 5. 5  X 伺服轴出现；1．4;；口；．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．：::::::::: ; ;~  

6.5.6  安全距离设定不当造成事故………………………………………… 320
6.5.7  参数设定不当或不全．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 320

IX 

6.6  操作故障实例分析........................................................................ 321 
6.6.1  数控机床回参考点．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 321
6.6.2  误操作．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 327

6.6.3  数控机床超程故障及处理方法……………………………………．．． 329

小结．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 330

习题．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 330

附录 A FANUC  Oi 系统常用信号表．．．．．．．．．．．．．．．．．．．..…..................…............ 331 
附录 B FANUC 16/18/21/0i/Oi Mate 系统参数表...…………………………… ...333
附录 C FANUC 系统程序错误报警表......…..................…........................ 339 
附录 D FANUC Oi 系统程序错误报警表…………………………………………… 349
参考文献．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．．． 350

x 

第 0 章绪论

数控机床的故障诊断与维修，在内容、手段和方法上与传统机床的故障诊断与维修有
很大的区别。学习和掌握数控机床的故障诊断与维修技术，已越来越引起企业和工程技
术人员的关注，数控机床的故障诊断与维修已成为正确使用数控机床和发挥其效率的关

键因素之一。现代数控机床的维修意义体现在以下几个方面。

1 ．技术的需要
现在尽管数控机床的新技术发展很快，但应该说，随着数控设备的大量运用，其控制
方法已形成体系，即数控设备间具有一定共性，通过对其共性的理论进行总结、归纳，再
结合对某一类典型的数控系统进行系统的学习，就可以形成对数控设备进行维修的

思路。

2. 企业效益的需要
数控设备对于用户来说，其意义在于最大化地为企业服务，但在使用中，各种因素

如误操作、设备元器件老化、元器件质量差等，都可能造成设备的故障甚至停机。这将
直接影响企业生产的顺利进行，所以企业应有掌握数控维修技术的人员，能够尽快对设备
进行维修及恢复。这些人员能够对一些普通故障进行维修，也将降低企业的维修

成本。

3. 市场的需要
市场的需要直接推动了数控维修技术培训的开展，这个市场是指人才市场，数控设备

的大量使用，每个企业都需要一大批具备数控维修技术的人员为企业进行技术服务

工作。

开展现代数控机床维修的学习及培训，有助于减少数控设备的故障停机时间，降低设

备的维修成本，提高企业的效益。

0.1  数控机床工作过程及组成

0.1.1  数控机床工作过程

根据被加工零件的图纸与工艺方案，用规定的代码和程序格式将刀具的移动轨迹、加
工工艺过程、工艺参数和切削用量等编写成数控系统能够识别的指令形式，即编写加工程
序。编写程序可以由人手工编写，也可以根据图纸与工艺方案通过 CAD/CAM 编程软件

自动生成数控加工程序。

可以将所编写的加工程序通过数控系统的键盘直接输入到数控系统，在计算机上编
程并仿真后将程序存储到存储卡或软硬盘上，再通过数控系统的输入设备（软盘驱动器）

或串行接口输入到数控系统中。

显示器可以显示程序的编辑和加工过程、报警信息、坐标位置等各种信息进行人机对

话交流。

数控装置对输入程序进行译码、运算处理，并向各坐标轴的伺服驱动装置和辅助机能

控制装置输出相应的控制信号，以控制机床各部件的运动。

在运动过程中，数控系统需要随时检测机床的坐标轴位置、行程开关的状态，并与程

序的要求做比较，以决定下一步的动作，直到加工出合格的零件为止。

加工者可以随时对机床的加工情况、工作状态进行观察、检查，必要时还需要对机床

动作和加工程序进行调整，以保证机床安全、可靠地运行。

数控机床的主要组成部分与基本工作过程如图 0-1 所示。

0.1.2  数控机床组成

1 ．数控加工程序载体（控制介质）
程序载体是存储加工程序并转接到数控系统中的存储设备。常见的程序载体有加工

程序清单（手写或打印）、穿孔纸带、磁带、软磁盘、硬磁盘、 Flash （闪存、 U 盘）。

2.  CNC 装置
CNC 装置是数控系统的核心部分。硬件主要包括 CPU 、各种 RAM/ROM、主轴控制
模块、进给伺服控制模块、 PLC 控制模块和显示卡控制模块等。软件可分为系统软件和
应用软件。系统软件包括程序管理、参数管理、程序执行、机床状态监控、诊断、图形模拟
和补偿等。系统软件基本上由系统制造商设计， PLC 程序和机床参数由机床制造厂家设

计，零件加工程序由用户编制。
3. 插补运算位置控制接口
中央处理器执行系统程序，读取加工程序，经过译码、预处理计算，然后根据加工程序
段指令进行实时插补，并通过与各坐标轴伺服系统的位置和速度反馈信号比较后，从而控
制机床各坐标轴的位移，将主轴的速度控制信号发给主轴驱动单元，将辅助运动的控制信

号给 PLC ，由 PLC 再对辅助运动进行控制。

4 ．主轴驱动单元
主轴驱动单元一般包括主轴放大器、主轴电动机、主轴传动机构及主轴编码器等。根
据数控系统主轴模块发出的控制信号，实现数控机床主轴的速度和位置控制、主轴与进给
轴的同步控制、主轴准停与定向控制等。

5 ．进给伺服驱动单元

进给伺服驱动单元包括伺服放大器、伺服电动机、进给传动机构、机械负载（如工作
台）及位置检测装置等。根据数控系统伺服驱动模块发出的控制信号，实现数控机床进给

装置的速度与位置控制。

6. 可编程控制器 (PMC) 与辅助控制装置
目前数控系统的可编程控制器大多为内装型 PMC （与系统做成一体），不同的系统
PMC 的类型不同，其控制功能也不同。 FANUC-PMC 接口又有内装型 1/0 模块和外接
1/0 接口板的 1/0-Link 模块。 SIEMENS、华中系统的 PMC 接口基本上使用内装型 II
0 模块。

2 

数控系统

-7 . ,  __ _ 

L , .  

娠
降
军
卧

口接

一一.'

-  -  - 

军
纪
狐
拦
赵
禁
每
出

蒜
莘
记
者
蠼
甘

接口

接口

ATC 刀具自动交换

APC 工件自动交换

液压系统

润滑系统

瞩
盘
罢

切削液装置

排屑装置

过载与限位保护

迦
军
皂
晤

匕

图 0--1 数控机床的主要组成部分与基本工作过程

辅助控制机构指介于数控装置与机床机械、液压部件之间的控制部件，其主要作用是接
收数控装置输出的主轴转速、转向和启／停指令，刀具选择交换指令，冷却、润滑装置的启／停
指令，工件和机床部件的松开、夹紧指令，工作台转位等辅助指令信号，以及机床上检测开关
的状态等信号，经必要的编译、逻辑判断、功率放大后直接驱动相应的执行元件，带动机床机
械部件、液压气动等辅助装置完成指令规定动作，通常由 PLC 和强电控制回路构成。

7. 系统显示装置和操作面板
显示装置是用来显示各种信息及图形画面的。数控机床常用的系统显示装置有 9in

单色 CRT 、 10.4in 彩色 CRT 、 7.2in 黑白液晶 LCD 、 8.4in 和 10.4in 彩色液晶 LCD。操作
面板的功能是实现操作者与 CNC 装置及机床的人机对话，包括系统操作面板和机床操作
面板。系统操作面板又包括系统 MDI 键盘操作面板和系统软键操作面板。机床操作面
板有符合国际标准化设计的系统厂家操作面板和机床厂家按机床的功能设计的机床厂家

的操作面板两种。

8. 机床本体
机床本体就是数控机床的机械结构件，由主传动系统、进给传动系统、床身、工作台以

及辅助运动装置、液压／气动系统、润滑系统、冷却装置、排屑、防护系统等部分组成。为了
满足数控技术的要求，充分发挥机床性能，数控机床与普通机床相比较，机床本体在总体
布局、外观造型、传动系统结构、刀具系统以及操作性能方面已发生了很大的变化。机床
本体的机械部件包括床身、箱体、立柱、导轨、工作台、主轴、进给机构、刀具交换机构等。

与普通机床比较，数控机床的机械主轴和进给传动系统简单，但机床的精度、刚度要

求高，主轴调速范围宽等。

9. 机床的强电控制柜

数控机床的电气控制部分包括：工频三相交流电 380V 供给辅助运动控制用的电机

和模拟主轴变频控制主电源的输入，伺服变压器输出工频三相交流 200V 到进给伺服驱
动器的电源输入和数字伺服驱动电源模块的输入，控制变压器输出 110V 、 220V 交流电供
交流接触器线圈， 36V 或 24V 交流电作照明用电，开关型稳压电源产生 24V 直流供给数

控系统、外置 I/0 接口模块和伺服驱动等。

辅助运动的电器元件包括继电器、接触器、空气断路器、熔断器和接线端子板等。

0.2  数控机床维修的基本要求

数控机床是一种综合应用计算机技术、自动控制技术、精密测量技术和机床设计理论
等先进技术的典型机电一体化产品，其控制系统复杂、价格昂贵，因此数控机床对维修人
员的素质、维修资料的准备、维修仪器的使用等方面提出了比普通机床更高的要求。

0.2.1  维修人员的素质要求

维修工作要达到高的效率和好的效果，均取决于维修人员的素质。为了迅速、准确地
判断故障原因，并进行及时、有效的处理，恢复机床的动作、功能和精度，要求维修人员应
具备以下基本素质。

4 

寸作态度要端正
应 高度的责任心和良好的职业道德。

2. 具有较广的知识面
由于数控机床是集机械、电气、检测、液压气动等为一体的加工设备，机床的各个部分
之间具有密切的联系，其中任何一个部分发生故障，都有可能影响其他部分的正常工作。
根据故障现象，对故障的真正原因和故障部位进行判断是数控机床维修的第一步，这是维
修人员必须具备的素质；如何快速地判断故障对维修人员素质也提出了很高的要求。对

数控机床维修人员主要有如下方面的要求。

(1) 掌握或了解计算机原理、电子技术、电工原理、自动控制与电动机拖动、检测技

术、机械传动及机械加工工艺方面的基础知识。

(2) 既要懂电气方面（包括强电和弱电）的知识，又要懂机械方面（包括机械、液压和
气动）的知识。维修人员还必须经过数控技术方面的专门学习和培训，掌握数字控制、伺
服驱动及 PLC 的工作原理，懂得数控加工程序和 PLC 编程。

(3) 维修时为了对某些电路与零件进行现场测试，数控机床维修人员还应当具备一

定的电路图分析和工程识图能力。

3. 具有一定的外语基础和专业外语基础

一个高素质的维修人员要能对国内、外各种数控机床进行维修。但国外数控系统的

配套说明书、资料往往使用外文资料，数控系统的报警文本显示亦以外文居多。为了能根

据说明书所提供的信息与系统的报警提示迅速确认故障原因，加快维修进程，数控机床维

修人员应具备专业外语的阅读能力，以便分析、处理问题。

4. 勤千学习，善于学习，善千思考

一个数控机床维修人员不仅要注重分析问题与积累经验，而且还应当勤于学习，善于

学习，善于思考。国外、国内的数控系统种类繁多，而且数控系统说明书的内容通常也很
多，包括操作、编程、连接、安装调试、维护维修、 PLC 编程等多种说明。资料的内容多，若
不勤于学习，不善于学习，就很难对各种知识融会贯通。每台数控机床内部各部分之间的

联系紧密，故障涉及面很广，而且有些现象不一定真实反映了故障的原因。数控机床维修

人员一定要透过故障的表象，针对各种可能产生故障的原因，通过分析故障产生的过程，

仔细思考分析，这样才能迅速找出发生故障的根本原因并予以排除。应做到“多动脑，慎

动手”，切忌草率下结论，盲目更换元件。

5. 有较强的动手能力和实验技能

数控系统的维修离不开实际操作，数控机床维修人员不仅能熟练操作数控机床，而且

能进入一般操作者无法进入的特殊操作模式，如机床以及硬件设备自身参数的设定与调

整、利用编程器进行在线监控等。此外为了判别故障原因，维修过程可能需要编制相应的

加工程序，对机床进行必要的运行试验和对工件进行必要的试切削，还应该能熟练使用维

修所必需的工具、仪器和仪表等。

6. 养成良好的工作习惯

数控机床维修人员要胆大心细，动手时必须有明确的目的、完整的思路，进行细致的

操作。数控机床维修人员在维修时需要注意以下儿个方面。

(1) 维修前仔细思考、观察，找准切入点。

(2) 维修过程要做好记录，尤其是对电器元件的安装位置、导线号、机床参 调整值勺

等都必须做好明显的标记，以便恢复。

(3) 维修完成后，应做好”收尾”工作，将机床、系统的罩壳、紧固件等安装到位，将电

线、电缆整理整齐等。

在维修数控系统时应特别注意：数控系统的某些模块是需要电池保持参数的，对于这
些电路板和模块切勿随意插拔，更不可以在不了解元件功能的前提条件下，随意调换参数

装置、伺服、驱动等部件中的元件、设定端子、调整电位器的位置，改变设定参数，更换数控

系统软件版本，以免产生更严重的后果。

0.2.2  必要的技术资料

寻找故障的准确性和寻求较好的维修效果取决于维修人员对数控系统的熟悉程度和

运用技术资料的熟练程度，所以，数控机床维修人员在平时应认真整理和阅读有关数控系

统的重要技术资料。对千数控机床重大故障的维修，还应具备以下技术资料。

1 ．数控机床使用说明书

它是由机床生产厂家编制并随机床提供的资料。通常包括以下与维修有关的内容。

(1) 机床的操作过程与步骤。

(2) 机床电气控制原理图。
(3) 机床主要传动系统以及主要部件的结构原理示意图。

(4) 机床安装和调整的方法与步骤。

(5) 机床的液压、气动、润滑系统图。

(6) 机床使用的特殊功能及其说明等。

2. 数控系统方面的资料

应有数控装置安装、使用（包括编程）、操作和维修方面的技术说明书，其中包括以下

与维修有关的内容。

(1) 数控装置操作面板布置及其操作。

(2) 数控装置内部各电路板的技术要点及其外部连接图。

(3) 系统参数的意义及其设定方法。

(4) 数控装置的自诊断功能和报警清单。
(5) 数控装置接口的分配及其含义等。
通过上述资料，维修人员可以了解 CNC 原理框图、结构布置、各电路板的作用，板上

发光管指示的意义；可以通过面板对数控系统进行各种操作，进行自诊断检测，检查和修

改参数并能做出备份；能熟练地通过报警信息确定故障范围，对数控系统提供的维修检测

点进行测试，充分利用随机的系统诊断功能。

3.  PLC 的资料

PLC 的资料是根据机床的具体控制要求设计、编制的机床辅助动作控制软件。在

PLC 程序中包含了机床动作的执行过程，以及执行动作所需的条件，它表明了指令信号、

检测元件与执行元件之间的全部逻辑关系。

另外，在一些高档的数控系统（如国内的华中数控“世纪星”系列、国外的 FANUC 数

控系统、 SIEMENS 数控系统）中，利用数控系统的显示器可以直接对 PLC 程序的中间寄

6 

存器状态点进行动态监测和观察，为维修提供了极大的便利，因此，在维修中一定要熟悉、
掌握这方面的操作和使用技能。 PLC 的资料一般包括如下内容。

(1)  PLC 装置及其编程器的连接、编程、操作方面的技术说明书。
(2)  PLC 用户程序清单或梯形图。
(3)  1/0 地址及意义清单。

(4) 报警文本以及 PLC 的外部连接图。

4. 伺服单元的资料
伺服单元的资料包括进给伺服驱动系统和主轴伺服单元的原理、连接、调整和维修方

面的技术说明书，其中包括如下内容。

(1) 电气原理框图和接线图。

(2) 所有报警显示信息以及重要的调整点和测试点。

(3) 各伺服单元参数的意义和设置。

维修人员应掌握伺服单元的原理，熟悉其连接。能从单元板上的故障指示发光管的

状态和显示屏上显示的报警号确定故障范围；测试关键点的波形和状态，并能做出比较；

检查和调整伺服参数，对伺服系统进行优化。

5 ．主要配套部分的资料

在数控机床上往往会使用较多的功能部件，如数控转台、自动换刀装置、润滑与冷却

系统、排屑器等。这些功能部件的生产厂家一般都提供了较完整的使用说明书，机床生产

厂家应将其提供给用户，以便当功能部件发生故障时作为维修的参考。

6. 维修记录

维修记录是维修人员对机床维修过程的记录与维修的总结。维修人员应对自己所进

行的每一步的维修情况进行详细的记录，而不管当时的判断是否正确。这样不仅有助于

今后的维修，而且有助于维修人员的经验总结与提高。

7. 其他

有关元器件方面的技术资料也是必不可少的，如数控设备所用的元器件清单、备件清

单，以及各种通用的元器件手册。维修人员应熟悉各种常用的元器件和一些专用元器件

的生产厂家及订货编号，以便一旦需要，就能够较快地查阅到有关元器件的功能、参数及

代用型号。

以上都是在理想情况下应具备的技术资料，但是实际中往往难以做到。因此，在必要

时，数控机床维修人员应通过现场测绘、平时积累等方法完善和整理有关技术资料。

0.2.3  必要的维修器具与备件

合格的维修工具是进行数控机床维修的必备条件。数控机床是精密设备，对于不同

、的故障，所需要的维修工具亦不尽相同。下面介绍常用的维修器具与备件。

1 ．常用测量仪器、仪表

(1) 万用表。数控设备的维修涉及弱电和强电，万用表不但可用于测量电压、电流、

电阻值，还可用于判断二极管、三极管、晶闸管、电解电容等元器件的好坏，并测量三极管

的放大倍数和电容值。

(2) 示波器。示波器用于检测信号的动态波形，如脉冲编码器、光栅的输出波形、伺

服驱动、主轴驱动单元的各级输入、输出波形等，还可用于检测开关电源、显示器的垂直、
水平振荡与扫描电路的波形等。用于维修数控机床的示波器通常选用频带宽为

lOHz~100MHz 的双通道示波器。

(3) 数字转速表。数字转速表用于测量与调整主轴的转速，以及调整数控系统及驱

动器的参数，用千使编程的主轴理想转速与实际主轴转速相符，是主轴维修与调整的测量

工具之一。

(4) 相序表。相序表主要用于测量三相电源的相序，是进给伺服驱动与主轴驱动维

修的必要测量工具之一。

(5) 常用的长度测量工具。长度测量工具（如千分表、百分表等）用于测量机床移动

距离、反向间隙值等。通过长度测量，可以大致判断机床的定位精度、重复定位精度、加工

精度等。根据测量值可以调整数控系统的电子齿轮比、反向间隙等主要参数，用以恢复机

床精度。它是机械部件维修、测量的主要检测工具之一。

(6)  PLC 编程器。不少数控系统的 PLC 控制器必须使用专用的编程器才能对其进

行编程、调试、监控和检查。例如 SIEMENS 的 PG710 、 PG750 、 PG865, OMRON 的
GPC01 /µGPC04 、 PRO — 13~PRO-27 等。这些编程器可以对 PLC 程序进行编辑和修

改，监视输入和输出状态及定时器、移位寄存器的变化值，并可在运行状态下修改定时器

和计数器的设定值；可强制内部输出，对定时器、计数器和位移寄存器进行置位和复位等。

有些带图形功能的编程器还可显示 PLC 梯形图。

(7)  IC 测试仪。 IC 测试仪可用来离线快速测试集成电路的好坏。当数控系统进行

芯片级维修时，它是必需的仪器。

(8) 逻辑分析仪和脉冲信号笔。这是专门用于测量和显示多路数字信号的测试仪

器，通常分为 8 个、 16 个和 64 个通道，即可同时显示 8 个、 16 个或 64 个逻辑方波信号。

与显示连续波形的通用示波器不同，逻辑分析仪显示的是各被测点的逻辑电平、二进制编

码或存储器的内容。

2. 常用维修器具

(1) 电烙铁。这是最常用的焊接工具，一般应采用 30W 左右的尖头、带接地保护线

的内热式电烙铁，最好使用恒温式电烙铁。

(2) 吸锡器。常用的是便携式手动吸锡器，也可采用电动吸锡器。
(3) 扁平集成电路拔放台。这是用于 SMD 片状元件、扁平集成电路的热风拆焊工作

台，可换多种喷嘴，并可防静电。

(4) 旋具类工具。配备规格齐全的一字和十字螺丝刀各一套。旋具宜采用树脂或塑

料手柄为宜。为了方便伺服驱动器的调整与装卸，还应配备无感螺丝刀与梅花形六角旋

具各一套。

(5) 钳类工具。常用的有平头钳、尖嘴钳、斜口钳、剥线钳、压线钳、慑子等。

(6) 扳手类工具。大小活动扳手，各种尺寸的内、外六角扳手等各一套。

(7) 化学用品。松香、纯酒精、清洁触点用喷剂、润滑油等。

(8) 其他。剪刀、刷子、吹尘器、清洗盘、卷尺等。

3. 常用备件

对于数控系统的维修，常用的备品、备件是一个必不可少的物质条件。若无备件可调

8 

换，则”巧妇难为无米之炊＂。如果维修人员备有一些印制电路板，采用印制电路板交换
法，通常可以快速判断出一些疑难故障发生在哪块印制电路板上，将给排除故障带来许多

方便。

配置数控系统的备件要根据实际情况来处理。通常一些易损的电气元器件，如各种
规格的熔断器、熔断丝、开关、电刷，还有易出故障的大功率模块和印制电路板等，均是应

当配备的。

0.3  数控机床常见故障分类

数控机床是一种复杂的机电一体化设备，其故障发生的原因一般都比较复杂，这给故
障诊断和排除带来不少困难。为了便于故障分析和处理，本节按故障发生的部位、故障性

质及故障原因等对常见故障作如下分类。

0.3.1  按数控机床发生故障的部件分类

1 ．机床本体故障

数控机床的机床本体部分，主要包括机械、润滑、冷却、排屑、液压、气动与防护装置。

因机械安装、调试及操作使用不当等原因而引起的机械传动故障和导轨副摩擦过大

故障，通常表现为传动噪声大、加工精度差、运行阻力大。例如：传动链的挠性联轴器松

动，齿轮、丝杠与轴承缺油，导轨塞铁调整不当，导轨润滑不良以及数控系统参数设置不当

等原因均可造成以上故障。

尤其应引起重视的是，机床各部位标明的注油点（注油孔）须定时、定量加注润滑油

（脂），这是机床各传动链正常运行的保证。

另外，液压、润滑与气动系统的故障主要表现在管路阻塞或密封不良，造成数控机床

尤法正常工作。

2. 电气故障

电气故障分弱电故障与强电故障。

弱电部分主要指 CNC 装置、 PLC 控制器、 CRT 显示器以及伺服单元、输入倩i 出装置

等电子电路，这部分又有硬件故障与软件故障之分。硬件故障主要是指上述各装置的印

制电路板上的集成电路芯片、分立元件、接插件以及外部连接组件等发生的故障。常见的

软件故障有加工程序出错、系统程序和参数的改变或丢失、计算机的运算出错等。

强电故障是指继电器、接触器、开关、熔断器、电源变压器、电磁铁、行程开关等元器

件，以及由其所组成的电路发生故障。这一部分的故障十分常见，必须引起足够的重视。

0.3.2  按数控机床发生故障的性质分类

1 ．系统性故障

系统性故障通常指只要满足一定的条件或超过某一设定，工作中的数控机床必然会

发生的故障。这一类故障现象极为常见。例如：液压系统的压力值随着液压回路过滤器

的阻塞而降到某一设定参数时，必然会发生液压系统故障报警使数控机床断电停机。又

9 

如：润滑、冷却或液压等系统由千管路泄漏引起游标下降到某一限值，必然会发生液位报

警，使数控机床停机。再如：数控机床在加工中因切削用量过大达到某一限值时，必然会

发生过载或超温报警，导致数控系统迅速停机。

因此，正确使用与精心维护数控机床是杜绝或避免这类系统性故障的切实保障。

2. 随机性故障

随机性故障，通常指数控机床在同样的条件下工作时偶然发生的一次或两次故障。

有的文献上称此为“软故障＂。由于此类故障在条件相同的状态下偶然发生一两次，因此，

随机性故障的原因分析与故障诊断较其他故障困难得多。一般而言，这类故障的发生往

往与安装质量、组件排列、参数设定、元器件品质、操作失误与维护不当以及工作环境影响

等诸因素有关。例如：接插件与连接组件因疏忽未加锁定，印制电路板上的元器件松动变

形或焊点虚脱，继电器触点、各类开关触头因污染锈蚀，以及直流电刷接触不良等所造成

的接触不可靠等。另外，工作环境温度过高或过低、湿度过大，电源波动与机械振动，有害

粉尘与气体污染等原因，均可引发此类偶然性故障。

因此，加强数控系统的维护检查、确保电柜门的密封、严防工业粉尘及有害气体的侵

袭等，均可避免此类故障的发生。

0.3.3  按数控机床发生故障时有无报警显示分类

1. 有报警显示的故障

这类故障又可分为硬件报警显示与软件报警显示两种。

1) 硬件报警显示的故障

硬件报警显示指各单元装置上的警示灯（一般由 LED 发光管或小型指示灯等组成）

有指示。在数控系统中有许多用来指示故障部位的警示灯，如控制操作面板、位置控制印

制线路板、伺服控制单元、主轴单元、电源单元等部位以及光电阅读机、穿孔机等外设装置

上常设有这类警示灯。一旦数控系统出现了故障后，借助相应部位上的警示灯可大致分

析判断出故障发生的部位与性质，这无疑给故障分析、诊断带来极大方便。因此，维修人

员在日常维护和排除故障时应认真检查这些警示灯的状态是否正常。

2) 软件报警显示的故障

软件报警显示通常是指显示屏 (CRT) 上显示出来的报警号和报警信息。由千数控系

统具有自诊断功能，因此它一旦检测到故障，即按故障的级别进行处理，同时在 CRT 上以

报警号的形式显示该故障信息。这类报警显示常见的有存储器警示、过热警示、伺服系统

警示、轴超程警示、程序出错警示、主轴警示、过载警示以及短路警示等。通常软件报警类

型少则几十种，多则上千种，这无疑为故障判断和排除提供了极大的帮助。

上述软件报警包括来自 NC 的报警和来自 PLC 的报警。 NC 报警为数控部分的故障

报警，可通过所显示的报警号，对照维修手册中有关 NC 故障报警及说明来确定产生该故

障的原因。 PLC 的报警大多数属于机床侧的故障报警，显示由 PLC 的报警信息文本所提

供，可通过所显示的报警号，对照维修手册中有关 PLC 故障报警信息、 PLC 接口说明以及

PLC 程序等内容检查 PLC 有关接口和内部继电器状态，确定产生故障的原因。通常，

PLC 报警发生的可能性要比 NC 报警高得多。

10 

2. 无报警显示的故障
这类故障发生时无任何硬件或软件的报警显示，因此分析诊断难度较大。例如在数
控机床通电后，在手动方式或自动方式运行时， X 轴出现爬行现象，且无任何报警显示；
又如机床在自动方式运行时突然停止，而 CRT 上无任何报警显示；在运行机床的某轴时

发生异常声响，一般也无报警显示等。一些早期的数控系统由于自诊断功能不强，尚未采

用 PLC 控制器，无 PLC 报警信息文本，所以出现无报警显示故障的情况会更多一些。

对于无报警显示故障，通常要具体情况具体分析，要根据故障发生的前后变化状态进

行分析判断。例如： X 轴在运行时出现爬行现象，首先判断是数控部分故障还是伺服部

分故障。具体做法是：在手摇脉冲进给方式中，可均匀地旋转手摇脉冲发生器，同时分别

观察、比较 CRT 上 Y 轴、 Z 轴与 X 轴进给数字的变化速率。通常，如数控部分正常，则三

个轴的变化速率应基本相同，从而可确定 X 轴的爬行故障是伺服部分还是机械传动所造

成的。有关伺服系统的进一步检查内容可参阅本书有关章节。

0.3.4  按数控机床发生故障的原因分类

1. 数控机床自身故障

这类故障是由数控机床自身原因引起的，与外部使用环境条件无关。数控机床所发

生的绝大多数故障均属该类故障，但应区别有些故障并非由机床本身而是由外部原因所

造成的。

2. 数控机床外部故障

这类故障是由外部原因造成的。例如，数控机床的供电电压过低，电压波动过大，电

压相序不对或三相电压不平衡；环境温度过高；有害气体、潮气、粉尘侵人数控系统；外来

振动和干扰，如电焊机所产生的电火花干扰等，均有可能使数控机床发生故障。还有人为

因素所造成的故障，如操作不当、手动进给过快造成超程报警，自动切削进给过快造成过
载报警。又如由于操作人员不按时按量给机床机械传动系统加注润滑油，易造成传动噪

声或导轨摩擦系数过大而使工作台进给超载。据有关资料统计，首次使用数控机床或由

技能不熟练的工人来操作数控机床，在使用的第一年内，由操作不当所造成的外部故障要

占 1/3 以上。

除上述常见故障分类外，还可按故障发生时有无破坏性分为破坏性故障和非破坏性

故障；按故障发生的部位分为数控装置故障，进给伺服系统故障，主轴系统故障，刀架、刀

库、工作台故障等。

0.4  数控机床故障排除的思路和原则

0.4.1  数控机床故障排除的思路

L 确认故障现象，调查故障现场，充分掌握故障信息

当数控机床发生故障时，维护维修人员对故障的确认是很有必要的，特别是在操作使
用人员不熟悉机床的情况下尤为重要。此时，不应该也不能让非专业人士随意开动机床，

特别是出现故障后的机床，以免故障的进一步扩大。

11 

在数控系统出现故障后，维护维修人员也不要急于动手，盲目处理。首先要查看故障
记录，向操作人员询问故障出现的全过程；其次，在确认通电对数控系统无危险的情况下，
再通电亲自观察。特别要注意主要故障信息，包括数控系统有何异常、 CRT 显示的报警

内容是什么等，具体如下。

(1) 在故障发生时，报警号和报警提示是什么？有哪些指示灯和发光管报警？
(2) 如无报警，数控系统处千何种工作状态？数控系统的工作方式和诊断结果如何？
(3) 故障发生在哪个程序段？执行何种指令？故障发生前进行了何种操作？
(4) 故障发生时，进给在何种速度下？机床轴处于什么位置？与指令值的误差量有

多大？

(5) 以前是否发生过类似故障？现场有无异常现象？故障能否重复发生？

(6) 观察数控系统的外观、内部各部分是否有异常之处？
2. 根据所掌握故障信息明确故障的复杂程度，井列出故障部位的全部疑点
在充分调查和现场掌握第一手材料的基础上，把故障问题正确地罗列出来。俗话说，

能够把问题说清楚，就已经解决了问题的一半。

3. 分析故障原因，制定排除故障的方案

在分析故障时，维修人员不应仅局限于 CNC 部分，而要对机床强电、机械、液压气动
等方面都做详细的检查，并进行综合判断，制定出故障排除的方案，达到快速确诊和高效

率排除故障的目的。

分析故障原因时应注意以下两个方面。

(1) 思路一定要开阔，无论是数控系统、强电部分，还是机械、液压、气压传动等，要将

有可能引起故障的原因以及每一种解决的方法全部列出来，进行综合判断和筛选。

(2) 在对故障进行深入分析的基础上，预测故障原因并拟定检查的内容、步骤和方

法，制定故障排除方案。

4. 检测故障，逐级定位故障部位
根据预测的故障原因和预先确定的排除方案，用试验的方法进行验证，逐级来定位故
障部位，最终找出发生故障的真正部位。为了准确、快速地定位故障，应遵循“先方案后操

作”等原则。

s. 故障的排除
根据故障部位及发生故障的准确原因，应采用合理的故障排除方法，高效、高质量地

修复数控机床，尽快让数控机床投入生产。

6. 解决故障后资料的整理

故障排除后，应迅速恢复机床现场，并做好相关资料的整理工作，以便提高自己的业

务水平，方便机床的后续维护和维修。

0.4.2  故障排除应遵循的原则

在检测故障的过程中，应充分利用数控系统的自诊断功能，如系统的开机诊断、运行
诊断、 PLC 的监控功能等，根据需要随时检测有关部分的工作状态和接口信息，同时还应
灵活应用数控系统故障检查的一些行之有效的方法，如交换法、隔离法等。在本书后续章

节中将介绍这些方法。

12 

另外，在检测、排除故障中还应掌握以下若干原则。

1 ．先方案后操作（或先静后动）
维护维修人员碰到机床故障后，应先静下心来，考虑解决方案后再动手。维修人员本
身要做到先静后动，不可盲目动手，应先询问机床操作人员故障发生的过程及状态，阅读
机床说明书、图样资料后，方可动手查找和处理故障。

2. 先检查后通电
确定方案后，对有故障的机床要秉承“先静后动”的原则，先在机床断电的静止状态
下，通过观察、测试、分析，确认为非恶性循环性故障或非破坏性故障后，方可给机床通电；
在运行的工况下，进行动态的观察、检验和测试，查找故障。对恶性的破坏性故障，必须先

排除危险后方可通电，在运行的工况下进行动态诊断。

3. 先软件后硬件
当发生故障的机床通电后，应先检查数控系统的软件工作是否正常。有些故障可能

是软件的参数丢失，或者是操作人员的使用方式、操作方法不当而造成的。

4. 先外部后内部
数控机床是机械、液压、电气等一体化的机床，故其故障必然要从机械、液压、电气这
三个方面综合反映出来。在检修数控机床时，要求维修人员遵循“先外部后内部”的原则。
即当数控机床发生故障后，维修人员应先采用望、闻、听、问等方法，由外向内逐一进行检
查。比如在数控机床中，外部的行程开关、按钮开关、液压气动元件的连接部位，印制电路
板插头座、边缘接插件与外部或相互之间的连接部位，电控柜插座或端子板这些机电设备
之间的连接部位，因其接触不良造成信号传递失真是造成数控机床故障的重要因素。此
外，由于在工业环境中，温度、湿度变化较大，油污或粉尘对元件及线路板的污染，机械的
振动等，都会对信号传送通道的接插件部位产生严重影响。在检修中要重视这些因素，首
先检查这些部位就可以迅速排除较多的故障。另外，应尽量避免随意启封、拆卸或不适当
的大拆大卸，这样往往会扩大故障，使数控机床丧失精度，降低性能。

5. 先机械后电气

由于数控机床是一种自动化程度高、技术较复杂的先进机械加工设备，一般来讲，机
械故障较易察觉，而数控系统故障的诊断则难度要大些。“先机械后电气”的原则就是指
在数控机床的检修中，首先检查机械部分是否正常、行程开关是否灵活、气动液压部分是
否正常等。从经验来看，很大部分数控机床的故障是由机械动作失灵引起的。所以，在故
障检修之前应首先逐一排除机械性的故障，这样往往可以达到事半功倍的效果。

6. 先公用后专用

公用性的问题往往会影响到全局，而专用性的问题只影响局部。如数控机床的几个
进给轴都不能运动时，应先检查各轴公用的 CNC 、 PLC 、电源、液压等部分，并排除故障，
然后再设法解决某轴的局部问题。又如电网或主电源故障是全局性的，因此一般应首先
检查电源部分，看看熔断器是否正常，直流电压输出是否正常等。总之，只有先解决影响
面大的主要矛盾，次要矛盾才有可能迎刃而解。

7. 先简单后复杂

当出现多种故障相互交织掩盖、一时无从下手时，应先解决容易的问题，后解决难度
较大的问题。常常在解决简单故障的过程中，难度大的问题也可能变得容易，或者在排除

13 

简易故障时受到启发，对复杂故障的认识更为清晰，从而也就有了解决的办法。

8. 先一般后特殊
在排除某一故障时，要先考虑最常见的可能原因，然后再分析很少发生的特殊原因。

例如当数控车床 Z 轴回零不准时，常常是由降速挡块位置变动而造成的。

一旦出现这一故障，应先检查该挡块位置；在排除这一故障常见的可能性之后，再检

查脉冲编码器、位置控制等其他环节。

总之，在数控机床出现故障后，要视故障的难易程度，以及故障是否属于常见性故障，

合理采用不同的分析问题和解决问题的方法。

0.5  数控机床维修的基本步骤

0.5.1  故障记录

数控机床发生故障时，操作人员应首先停止机床，保护现场，然后对故障进行尽可能
详细的记录，并及时通知维修人员。故障的记录可为维修人员排除故障提供第一手材料。

记录内容应包括下述儿个方面。

1 ．故障发生时的情况记录

需要记录的具体内容如下。

(1) 发生故障的机床型号，采用的控制系统型号，系统的软件版本号。

(2) 发生故障的部位以及故障的现象，如有异常声音、烟、异味等。
(3) 故障发生时数控系统所处的操作方式，如 AUTO/SINGLE （自动／单段方式）、
MDI（手动数据输入方式）、 STEP （步进方式）、 HANDLE （手轮方式）、 JOG （手动方式）、

HOME （回零方式）等。

(4) 若故障发生在自动方式下，则应记录故障发生时的加工程序号、出现故障的程序

段号、加工时采用的刀具号以及刀具的位置等。

(5) 若故障发生在精度超差或轮廓误差过大时，则应记录被加工工件号，并保留不合

格工件。

(6) 在发生故障时，若系统有报警显示，则应记录报警显示情况与报警号。
(7) 通过诊断画面，记录机床故障时所处的工作状态。如数控系统是否在执行 M 、 S 、
T 等功能，数控系统是否进入暂停状态或是急停状态，数控系统坐标轴是否处千＂互锁＂状

态，进给倍率是否为 0 ％等。

(8) 记录故障发生时各坐标轴的位置跟随误差的值。
(9) 记录故障发生时各坐标轴的移动速度、移动方向，主轴转速、转向等数据。

2. 故障发生的频繁程度的记录

需要记录的具体内容如下。
(1) 故障发生的时间与周期，如机床是否一直存在故障，若为随机故障，则一天发生

儿次，是否频繁发生。

(2) 故障发生时的环境情况，如是否总是在用电高峰期发生。故障发生时（如雷击

后），周围其他机械设备的工作情况如何。

14 

(3) 若为加工工件时发生的故障，则应记录加工同类工件时发生故障的概率。

(4) 检查故障是否与“进给速度”、"换刀方式”或＂螺纹切削”等特殊动作有关。

3. 故障的规律性记录

需要记录的具体内容如下。

(1) 在不危及人身安全和设备安全的情况下，是否可以重现故障现象。

(2) 检查故障是否与机床的外界因素有关。

(3) 如果是在执行某固定程序段时出现故障，则可利用 MDI 方式单独执行该程序

段，检查是否还存在同样的故障。

(4) 若机床故障与机床动作有关，在可能的情况下，应在手动方式下执行该动作，检

查是否也有同样的故障。

(5) 机床是否发生过同样的故障，周围的数控机床是否也发生同一故障等。

4. 故障的外界条件记录

需要记录的具体内容如下。

(1) 周围环境温度是否超过允许温度，是否有局部的高温存在。

(2) 周围是否有强烈的振动源存在。
(3) 数控系统是否受到阳光的直射。

(4) 电气柜内是否有切削液、润滑油、水的进入等。

(5) 输入电压是否超过了数控系统允许的波动范围。

(6) 车间内或线路上是否有使用大电流的设备正在进行启动、制动。

(7) 机床附近是否存在吊车、高频机械、焊接机或电加工机床等强电磁干扰源。

(8) 附近是否正在安装或修理、调试机床，是否正在修理、调试电气和数控系统。

0.5.2  维修前的检查

维修人员在维修故障前，应根据故障现象与故障记录，认真对照数控系统与机床使用

说明书进行各项检查，以便确认故障的原因。这些检查包括以下几个方面。

1 ．数控机床的工作状况检查

需要记录的具体内容如下。

(1) 数控机床的调整状况如何，工作条件是否符合要求。

(2) 加工时所使用的刀具是否符合要求，切削参数的选择是否合理、正确。

(3) 自动换刀时，坐标轴是否到达了换刀位置，程序中是否设置了刀具偏移量。

(4) 数控系统的刀具补偿量等参数设定是否正确。

(5) 数控系统的坐标轴的间隙补偿量是否正确。

(6) 数控系统的设定参数（包括坐标旋转、比例缩放因子、镜像轴、编程尺寸单位选择

等）是否正确。

(7) 数控系统的工件坐标系的“零点偏置值”的设置是否正确。
(8) 工件安装是否合理，测量手段与方法是否正确、合理。
(9) 机械零件是否存在因温度、加工而产生变形的现象等。

2. 数控机床运转情况检查

需要记录的具体内容如下。

15 

(1) 在自动运转过程中是否改变或调整过操作方式，是否插入了手动操作。

(2) 是否处千正常加工状态，工作台、夹具等装置是否处千正常工作位置。

(3) 操作面板上的按钮、开关位置是否正确，是否处于锁住状态，倍率开关是否设定

为 “O” 。

(4) 各操作面板上、数控系统上的＂急停”按钮是否处于急停状态。

(5) 电气柜内的熔断器是否有熔断现象，自动开关、断路器是否有跳闸现象。

(6) 操作面板上的方式选择开关位置是否正确，进给保持按钮是否被按下等。

3. 数控机床与数控系统之间连接情况的检查

需要记录的具体内容如下。

(1) 检查电缆是否有破损，电缆拐弯处是否有破裂、损伤现象。

(2) 电源线与信号线布置是否合理，电缆连接是否正确、可靠。

(3) 数控机床电源进线是否可靠接地，接地线的规格是否符合要求。

(4) 信号屏蔽线的接地是否正确，端子板上接线是否牢固、可靠，数控系统接地线是

否连接可靠。

(5) 继电器、电磁铁等电磁部件是否装有噪声抑制器（灭弧器）等。
4.  CNC 装置的外观检查

需要记录的具体内容如下。

(1) 是否在电气柜门打开的状态下运行数控系统，有无切削液或切削粉末进入柜内，

空气过滤器清洁状况是否良好。

(2) 电气柜内部的风扇、热交换器等部件的工作是否正常。

(3) 电气柜内部系统、驱动器的模块、印制电路板是否有灰尘、金属粉末等污染。

(4) 在使用纸带阅读机的场合，检查阅读机上是否有污物，阅读机上的制动电磁铁动

作是否正常。

(5) 电源单元的熔断器是否熔断。

(6) 电缆连接器插头是否完全插入、拧紧。

(7) 数控系统模块、线路板的数量是否齐全，模块、线路板安装是否牢固、可靠。

(8) 数控机床操作面板 MDI/CRT 单元上的按钮有无破损，位置是否正确。

(9) 数控系统的总线设置、模块的设定端的位置是否正确等。

总之，在维修时应记录、检查的原始数据、状态越多，记录越详细，维修就越方便。维

修人员最好根据本部门的实际情况，编制一份故障维修记录表，在数控机床出现故障时，

操作者可以根据表中的要求，及时填入各种原始数据，供维修时参考。

0.5.3  CNC 故障自诊断

功能齐全的 CNC、 PLC 装置都配有故障诊断系统，它们可以将由各种开关、传感器反

映的油位、温度、油压、电流、速度等状态信息，设置成数百个报警提示，并诊断、指示出发

生故障的部位。维修人员在维修时要首先利用自诊断提示进行故障处理。自诊断程序主

要包括启动自诊断、在线诊断、离线诊断等主要部分。所谓诊断程序就是对数控机床的各

部分，包括 CNC 系统本身进行状态或故障监测的软件，当数控机床出现故障时，可利用该

诊断程序诊断出故障范围及其具体位置。

16 

1. 启动自诊断（初始化诊断）
启动自诊断是指在数控系统通电时，由数控系统内部诊断程序自动执行的诊断，类似

千计算机的开机自检。

启动自诊断可以对数控系统中的关键硬件，如 CPU 、存储器、 1/0 接口单元、 CRT/
MDI 单元、纸带阅读机、软驱等装置或外部设备进行自动检查，确定数控系统的安装、连
接状态与性能。部分数控系统还能对某些重要的芯片，如 RAM 、 ROM 、专用 LSI 等进行

诊断。

数控系统的自诊断功能在开机时启动，只有当全部检查项目都被确认无误后，才能进

入正常运行准备状态，即 CRT 显示进入正常运行的基本画面（一般为位置显示画面）。如

果检查出有错，数控机床则不再转入正常运行状态，而是进入报警状态，它通过 CRT 或硬
件（发光二极管）显示报警信息或报警号。诊断的时间取决于数控系统，一般只需数十秒，
有的采用硬盘驱动器的数控系统则需要几分钟，如 SINUMERIK 840C 数控系统因要调

用硬盘中的文件，诊断时间略长一些。上述启动自诊断可将故障原因定位到电路板或模

块上，甚至可定位到芯片上，如指出哪块 EPROM 出了故障，但在不少情况下仅将故障定

位在某一范围内，维修人员需要通过维修手册中所指出的可能造成故障的原因及相应排

除方法，经分析、判断后，才能找到真正的故障并加以排除。

在对数控系统进行维修时，维修人员应了解该数控系统的自诊断能力，以及所能检查

的内容及范围，才能做到心中有数。在遇到级别较高的故障报警时，可以关机后重新开

机，让数控系统启动自诊断，检查数控系统这些关键部分是否正常。下面举例介绍开机自

诊断在排除数控系统故障中的应用。

例 0 一 1 由意大利 F90 钻床改制的大型数控导轨钻床，采用了 FANUC-6M 数控

系统。数控系统通电，进行开机自诊断时， CRT 上出现 “SYSTEMERROR 908“ 报警信息，

数控系统不能进入正常工作状态。

故障分析 908 号报警为磁泡驱动器软件奇偶校验错故障。现对磁泡存储器重新初

始化，然而，故障仍存在。将备用磁泡存储器存储板 (BMU) 调换，调换前将备板的故障信

息记下，以便对其进行初始化时输入新的故障信息。调换备板并进行初始化后，故障依然

存在。初步判断故障不在 BMU 板上。从故障记录上发现，该机在频繁出现 908 号报警

时，曾在 CRT 上偶尔出现过 081 号 (ROM 故障）报警。因此，可采用调换 ROM 或 ROM

板的方法来排除故障疑点。将备用 ROM 电路板与原 ROM 板调换之后，故障消除。

上述维修实例表明，开机自诊断可保证所检测重要部件的可靠性，一旦发生故障，数

控系统会立即禁止机床运行，同时，也为维修人员排除一些疑难故障提供帮助。然而，目

前数控系统的自诊断的功能尚存在着局限性，不可能将全部故障原因准确定位到一个具
体的模块上。因此，维修人员思路要开阔，不放过任一故障疑点，逐一排除，最终找出故障
的真正原因。

2. 在线诊断（后台诊断）

CNC 机床的在线诊断是指 CNC 系统通过内装程序，在数控系统处于正常运行状态

时，对 CNC 系统内部的各种状态以及与其相连的各执行部件进行自动诊断、检查。在线

诊断包括 CNC 系统内部设置的自诊断功能和用户单独设计的对加工过程状态的监测与
诊断功能，这些功能都是在机床正常运行过程中监视其运行状态的。只要数控系统不断

17 

电，在线诊断就一直进行而不停止。

另外，在线诊断采用监控的方式来提示报警，所以也称在线监控。它可分为 CNC 系

统内部监控与外部设备监控两种诊断形式。

CNC 系统内部监控是通过 CNC 系统的内部程序，对每一部分的状态进行自动诊断、

监视和检查的一种方法。在线监控的范围包括 CNC 系统本身，以及与 CNC 系统相连的

伺服单元、伺服电动机、主轴伺服单元、主轴电动机、外部设备等。在线监控功能在 CNC

系统工作过程中始终生效。

数控系统内部监控包括接口信号显示、内部状态显示和故障信息显示三个方面的

内容。

1) 接口信号显示

接口信号显示功能可以显示 CNC 和 PLC 、 CNC 和机床之间的全部接口信号的现行

状态，表示输入倩料顷启刊信号的通断情况，可以用来帮助分析故障。

在维修时，必须了解上述信号所代表的意义，以及信号产生、撤销应具备的各种条件

后，才能进行相应的检查。数控系统生产厂家提供的”功能说明书”、“连接说明书”以及机

床生产厂家提供的“机床电气原理图”是进行数控机床状态检查的技术指南。

2) 内部状态显示

一般来说，利用内部状态显示功能，可以显示以下几方面的内容。

(1) 显示造成循环指令（加工程序）不执行的外部原因。例如： CNC 系统是否处于

”到位检查”中；是否处于“机床锁住”状态；是否处千”等待速度到达“信号接通；在使用主

轴每转进给编程时，是否等待＂位置编码器”的测量信号；进给速度倍率是否设定为0 ％等。

(2) 复位状态显示。显示数控系统是否处于＂急停＂状态或“外部复位“信号接通

状态。

(3) 存储器内容是否能被正常读取的显示。

(4) 负载电流的显示。

(5) 位置跟随误差的显示。

(6) 伺服驱动部分的控制信息显示。

(7) 编码器、光栅等位置检测元件的输入脉冲显示等。

3) 故障信息显示

在数控系统中，故障信息一般以“报警显示＂的形式在 CRT 上显示。报警显示的内容

根据数控系统的不同有所区别。这些信息大都以“报警号“加文本形式出现，具体内容以

及排除方法在数控系统生产厂家提供的“维修说明”中可以查阅。

外部设备监控是指采用计算机、 PLC 编程器等设备，对数控机床各部分的状态进行

自动诊断、检查和监视的一种方法。如：通过计算机、 PLC 编程器对 PLC 程序以梯形图或

功能图的形式进行动态监测，它可以在机床生产厂家未提供 PLC 程序时，进行 PLC 程序

的阅读、检查，从而加快数控机床的维修进度。此外，伺服驱动、主轴驱动系统的动态性能

测试、动态波形显示等内容，通常也需要借助必要的在线监控设备进行。

随着计算机网络技术的发展，作为外部设备在线监控方式中的一种，以网络为媒介的

远程诊断技术正在进一步普及、完善。通过网络，数控系统生产厂家可以直接对其生产的

产品在现场的工作情况进行检测、监控，及时解决数控系统中出现的问题，并可为现场维

18 

修人员提供指导和帮助。

在线诊断一旦监视的信息超限，诊断系统就会通过显示器或指示灯等装置发出报警
信号，提供报警号，并配以适当注释显示在屏幕上。维修人员可根据这些故障信息，经过
分析，确认故障点并及时排除故障。

当然，实际诊断并不是那么容易的，因为系统所提供的报警信息，并非是唯一准确的，
而仅仅是故障的可能原因，即仅仅提供了一些查找故障原因的线索。维修人员应结合机
床结构，查阅机床维修手册，凭借自己的实践经验，注意排除故障假系，往往一种故障所引
发出的现象是由几种原因引起的，或一种原因引起几种故障，即大部分故障是以综合形式

出现的。

CNC 机床自诊断系统功能的强弱是评价 CNC 系统性能的一项重要指标。
各种 CNC 机床的自诊断功能报警号不尽完全相同，只能根据具体机床的使用说明书
和维修手册进行分析、诊断。不过报警编号的分类方法大同小异，一般是按机床上各元器
件的功能分别编号的。例如某型号的 CNC 系统的报警信号编组如下。

(1) 与 CNC 系统硬件（如存储器、伺服系统等）有关的报警编号为 1~99 。

(2) 与机械控制有关的报警编号为 100~339 。

(3) 与操作失误有关的报警编号为 400-499 。

(4) 与外部通信对话有关的报警编号为 500-599 。

(5) 与加工程序编制错误有关的报警编号为 600-699 。

此外，还有可编程控制器故障，连接方面的故障，温度、压力、液压等不正常，行程开关
（或接近开关）状态不正常等都应有对应的编号。在每一类报警范围内，又按故障分类报
警，如过热报警类、数控系统故障报警类、存储器故障报警类、伺服系统报警类、行程开关
报警类、印制线路板间的连接故障报警类、编程／设定错误报警类、无操作报警类等。

机床自诊断功能的故障报警显示给维修工作带来了极大的方便，故在使用和维修数
控机床的过程中，一定要充分重视故障报警显示的状态信息，经分析后加一些必要的测
试，最后找出真正的故障原因。

在维修时，要特别重视、注意保护系统软件及系统数据，特别是 CNC 与 PLC 中有关
机床的数据、 PLC 用户程序、报警文本等随机携带的 CNC 系统的关键技术资料，它们是

用电池保存在 RAM 存储器中的。

例 0-2 配置 FANUC 数控系统的卧式加工中心在工作过程中 Y 、 Z 轴突然不能动

作，并发出 401 号报警，关机后再启动，还能继续工作，此后关机再启动也不起作用。

故障分析 401 号报警内容为 X 、 Y 、 Z 轴速度控制 “READY“ 信号断开。据此检查
X 、 Y 、 Z 轴的速度控制单元板，发现 Y 轴速度控制单元板 (A06B - 6045 - COOl) 的 TGLS
报警灯亮，说明是 Y 轴伺服系统的故障。提示可能原因有如下几个方面。

(1) 印制电路板设定不合适。

(2) 速度反馈电压没给或是断续给。

(3) 伺服电动机动力电缆没有接到速度控制单元 TI 板的 5 、 6 、 7 、 8 端子上或动力电

缆短路。

经检查， Y 轴伺服电动机因电刷损坏致使动力电缆烧断。更换电刷及电缆后，故障

排除。

19 

维修实例表明，数控系统的自诊断功能在故障的诊断中起着十分重要的作用，它不但

能保证系统的可靠运行，而且是维修人员排除故障的基本手段和方法。

3. 离线诊断
当 CNC 系统出现故障或要判断其是否真正有故障时，往往要停机检查，此时称为离
线诊断（或脱机诊断）方法。采用这种方法的主要目的是最终查明故障和进行故障定位，
力求把故障定位在尽可能小的范围内，如缩小到某一模块上、某块线路板上或线路板上的
某部分电路，甚至某个芯片或元器件。这种诊断方法属于高层次诊断。

数控系统的离线诊断需要专用的诊断软件或专用的测试装置，因此，这种方法只能在
数控系统的生产厂家或专门的维修部门使用。随着计算机技术的发展，现在 CNC 的离线
诊断软件正在逐步与 CNC 控制软件一体化，有的数控系统已将“专家系统”引入到故障诊
断。通过这样的软件，操作者只要在 CRT/MDI 上做一些简单的会话操作，即可诊断出
CNC 系统或机床的故障。例如，美国 A — B 公司 8200 系统在作离线诊断时，只需要把专
用的诊断程序读入到 CNC ，即可在运行中检查故障。有些数控系统将诊断程序与 CNC
控制程序一同存入 CNC 中，维修人员可随时用键盘调用诊断程序并使之运行，在 CRT 上
观察诊断结果。离线诊断可以在现场、维修中心或 CNC 系统制造厂进行操作。

0.5.4  故障诊断与排除的基本方法

当数控机床出现报警、发生故障时，维修人员不要急千动手处理，而应多观察。维修
前应遵循下述两条原则。一是充分调查故障现场，充分掌握故障信息，这是维修人员取得
第一手材料的一个重要手段。在调查故障现场时，一方面要查看故障记录单，向操作者询
问出现故障的全过程，详细了解曾发生过什么现象、采取过什么措施等；另一方面要亲自
对现场做细致的勘查，从数控系统的外观到数控系统内部的各个印制线路板都应细心察
看，看是否有异常之处，在确认数控系统通电无危险的情况下，方可通电，观察数控系统有
何异常， CRT 显示哪些内容。二是认真分析故障的起因，确定检查的方法与步骤。目前
所使用的各种数控系统，虽有多种报警指示灯或自诊断程序，但智能化的程度还不是很高
（往往同一报警号可以有多种起因），不可能自动诊断出发生故障的确切部位。因此，在分
析故障的起因时，一定要开阔思路。往往当数控自诊断出某一部分有故障时，究其起源，
却不在数控系统本身，而是在机械部分。所以，分析故障时，无论是 CNC 系统、数控机床
强电部分，还是机械系统、液（气）压系统等部分，只要有可能引起该故障的原因，都要尽可
能全面地列出来，进行综合判断和筛选，然后通过必要的试验，达到确诊和最终排除故障

的目的。

对于数控机床发生的大多数故障，总体上来说可采用下述几种方法进行故障诊断和

排除。

1. 直观法（常规检查法）
直观检查指依靠人的感觉器官并借助于一些简单的仪器来寻找机床故障的原因。这
种方法在维修中是常用的，也是首先采用的。“先外后内＂的维修原则要求维修人员在遇
到故障时应先采取问、看、听、触、嗅等方法，由外向内逐一进行检查。

1) 问

指向操作者了解机床开机是否正常，比较故障前后工件的精度和传动系统、走刀系统

20 

是否正常，出力是否均匀，吃刀量和走刀量是否减少，润滑油牌号、用量是否合适，机床何

时进行过保养检修等内容。

2) 看
就是用肉眼仔细检查有无保险丝烧断、元器件烧焦、烟熏、开裂现象，有无断路现象，
以此判断板内有无过流、过压、短路问题。看转速，观察主传动速度快慢的变化，主传动齿

轮、飞轮是否跳、摆，传动轴是否弯曲、晃动等。

3) 听
利用人的听觉可探到数控机床因故障而产生的各种异常声响的声源，如电气部分常

见的异常声响有：电源变压器、阻抗变换器与电抗器等因为铁芯松动、锈蚀等原因引起的

铁片振动的吱吱声；继电器、接触器等的磁回路间隙过大，短路环断裂、动静铁芯或镶铁轴

线偏差，线圈欠压运行等原因引起的电磁嗡嗡声或者触点接触不良的嗡嗡声，以及元器件

因为过流或过压运行失常引起的击穿爆裂声。伺服电动机、气控或液控器件等发生的异

常声响基本上和机械故障方面的异常声响相同，主要表现在机械的摩擦声、振动声与撞击

声等。

4) 触

也称敲捏法。 CNC 系统由多块线路板组成，板上有许多焊点，板与板之间或模块与

模块之间又通过插件或电缆相连。所以，任何一处的虚焊或接触不良，都会成为产生故障

的主要原因。在检查数控系统时，用绝缘物（一般为带橡皮头的小锤）轻轻敲打可疑部位

（即认为虚焊或接触不良的插件板、组件、元器件等）。如果确实是因虚焊或接触不良而引

起的故障，则该故障会重现，有些故障会在敲击后消失，则也可以认为敲击处或敲击作用

力波及的范围为故障部位。同样，用手捏压组件、元器件时，如故障消失或故障出现，可以

认为捏压处或捏压作用力波及范围为故障部位。

这种“触＂的方法常用于检查因虚焊、虚接、碰线、多余物短路、多余物卡触点等原因引

起的时好时坏的故障。在敲捏过程中，要实时地观察机床工作状况。在敲捏组件、元器件

时，应一个人专门敲捏，另外的人负责观察故障是否消失或故障复现。如果一个人又敲

捏、又判断故障现象，一心二用，可能会敲偏漏检。检查时，敲捏的力度要适当，并且应由

弱到强，防止引入新的故障。

5) 嗅

在诊断电气设备或故障后产生特殊异味时采用此方法效果较好。因剧烈摩擦，电器

元件绝缘处破损短路，使附着的油脂或其他可燃物质发生氧化蒸发或燃烧而产生的烟气、

焦瑚味，用此法往往可以迅速判断故障的类型和故障部位。利用外观检查，可有针对性地

检查疑似故障的元器件，判断明显的故障，如热继电器脱扣、熔断丝状况、线路板（损坏、断

裂、过热等）、连接线路、更改的线路是否与原线路相符等，外观检查的同时，注意获取故障

发生时的振动、声音、焦瑚味、异常发热、冷却风扇运行是否正常等信息。这种检查很简

单，但非常必要。利用人体的视觉功能可观察到设备内部器件或外部连接的状态变化。

如电气方面可观察线路元器件的连接是否松动，短线或铜销断裂，继电器、接触器与各类

开关的触点是否烧蚀或压力失常，发热元器件的表面是否过热变色，电解电容的表面是否

膨胀变形，保护器件是否脱扣，耐压元器件是否有明显的电击点以及碳刷接触表面与接触

压力是否正常等。另外，对开机发生的火花、亮点等异常现象更应再重点检查。在机械故

21 

障方面，主要观察传动链中的组件是否间隙过大，固定锁紧装置是否松动，工作台导轨面、
滚珠丝杠、齿轮及传动轴等表面的润滑状况是否正常，以及是否有其他明显的碰撞、磨损

与变形现象等。

在现场维修中，利用人的嗅觉功能和触觉功能可检查因过流、过载或超温引起的故障

并可通过改变参数设置或 PLC 程序来解决。

例如，某龙门式加工中心在安装调试后不久， Z 轴运动时偶尔出现报警，实际位置与

指令不一致。采用直观法发现， Z 轴编码器外壳因被撞而变形，故怀疑该编码器已损坏，

调换一个新编码器后上述故障排除。

例 o- 3  配置某系统的 TClOOO 型加工中心，控制面板显示消失，经检查面板

MS401 板电源熔丝烧断，而其内部无短路现象，更换熔丝后，故障消失，显示恢复正常。

例 0-4 WY203 型自动换向数控组合机床， Z 轴一启动就出现跟随误差过大而报

警停机。经检查发现位置控制环反馈元件光栅电缆由于运动中受力而拉伤断裂，造成丢

失反馈信号所致。

例 0-5 TClOOO 型加工中心，一启动就发生 114 号报警，经检查发现 Y 轴光栅适

配器插头松脱。

例 0-6 TH6350 型加工中心在加工中突然停机，打开电器柜发现 Y 轴电动机主电
路保险管烧坏，经检查与 Y 轴有关的元器件发现， Y 轴电动机动力线外表面被划伤，损
伤处碰到机床外壳上造成短路而烧断熔丝。

2. 系统自诊断法

充分利用数控系统的自诊断功能，根据 CRT 上显示的报警信息及各模块上的发光二

极管等器件的指示，可判断出故障的大致起因。进一步利用数控系统的自诊断功能，还能

显示数控系统与各部分之间的接口信号状态，找出故障的大致部位，它是故障诊断过程中

最常用有效的方法之一。

3. 拔出插入法

拔出插入法是通过相关的接头、插卡或插拔件拔出再插入这个过程，确定拔出插入的

连接件是否为故障部位。有的本身就只是接插件接触不良而引起的故障，经过重新插入

后，问题就解决了。

在应用拔出插入法时，需要特别注意的是，在插件板或组件拔出再插入的过程中，改

变状态的部位可能不只是连接接口。因此，不能因为拔出插入后故障消失，就肯定是接口
的接触不良，还存在内部的焊点虚焊恢复接触状态、内部的短路点恢复正常等可能性（虽
然这种可能性很小）。

4. 参数检查法

数控系统的机床参数是经过理论计算并通过一系列试验、调整而获得的重要数据，是

保证机床正常运行的前提条件，直接影响着数控机床的性能。

参数通常存放在数控系统的存储器 (RAM) 中，一旦电池电量不足或受到外界的干扰
或数控系统长期不通电，可能导致部分参数的丢失或变化，使机床无法正常工作。通过核
对、调整参数，有时可以迅速排除故障。特别是在数控机床长期不用的情况下，参数丢失

的现象经常发生。因此，检查和恢复机床参数，是维修中行之有效的方法之一。另外，数

控机床经过长期运行之后，由于机械运动部件磨损，电器元器件性能变化等原因，也需要

22 

对有关参数进行重新调整。

例 0-7 配置某系统的 XK715 型数控立铣床，开机后不久出现 403 伺服未准备好、

420 、 421 、 422 号 (X 、 Y 、 Z 各轴超速）报警。

故障分析 这种现象常与参数有关。检查参数后，发现数据混乱。将参数重新输入，

上述报警消失。再对存储器重新分配后，机床恢复正常。

在排除某些故障时，对一些参数还需进行调整。因为有些参数（如各轴的漂移补偿
值螺距误差补偿值、KV 系统、反向间隙补偿值、定位允差等）虽安装调整过，但由于受加
工的局限、加工要求或控制要求的改变，个别参数会有不适应的情况。

同样，由于长时间的运行，机械传动部件会磨损，电器元件性能变化或调换零部件所

引起的变化也需要对有关参数进行调整。

在参数调整、修改前，有的系统还要求输入保密参数值。如西门子公司的 SINU­

MERIK 810 、 840 、 880 等数控系统应输入 11 号保密值。

5. 功能测试法

所谓功能测试法，是指通过功能测试程序检查机床的实际动作来判别故障的一种方

法。可以对数控系统的功能（如直线定位、圆弧插补、螺纹切削、固定循环、用户宏程序等

G,M 、 S 、 T 、 F 功能）进行测试：用手工编程方法编制一个功能测试程序，并通过运行测试

程序来检查机床执行这些功能的准确性和可靠性，进而判断出故障发生的原因。

这种方法常常应用于以下场合。

(1) 机床加工造成废品而一时无法确定是编程、操作不当，还是数控系统故障。

(2) 数控系统出现随机性故障，一时难以区别是外来干扰，还是数控系统稳定性不

好。如不能可靠执行各加工指令，可连续循环执行功能测试程序来诊断系统的稳定性。

(3) 闲置时间较长的数控机床再投入使用时，或对数控机床进行定期检修时。

例 0-8 在配备 FANUC-7CM 数控系统的加工中心加工中，出现零件尺寸相差甚

大，数控系统又无报警时，可使用功能程序测试法，将功能测试输入数控系统空运行。测

试过程如图 0-2 所示。

故障分析 当运行到含有 GOl 、 G02 、 G03 、 G18 、 G19 、 G41 等指令的四角带圆弧的长

方形典型程序时，发现机床运行轨迹与所要求的图形尺寸不符，从而确认机床刀补功能不

良。该系统的刀补软件存放在 EPROM 芯片中，调换该集成电路后机床加工恢复正常。

6. 交换部件法（或称部件替换法）

现代数控系统大都采用了模块化设计，按功能不同划分为不同的模块。随着现代数

控技术的发展，使用的集成电路的集成规模越来越大，技术也越来越复杂。按照常规的方

法，很难将故障定位在一个很小的区域。在这种情况下，交换部件法也是在维修过程中最

常用的故障判别方法。

所谓部件替换法，就是在大致确认了故障范围，并确认外部条件完全相符的情况下，

利用装置上同样的印制电路板、模块、集成电路芯片或元器件来替换有疑点部分的方法。

部件交换法简单、易行、可靠，能把故障范围缩小到相应的部件上。

在使用交换部件法时要注意以下几个方面。

(1) 在备件交换之前，应仔细检查、确认部件的外部工作条件；在线路中存在短路、过

电压等情况时，切不可以轻易更换备件。

23 

所加工零件尺寸不符

自动回零有故障

直线插补有故障

圆弧插补有故障

刀补功能有故障

自动换刀有故障

固定循环有故障

图 0-2 功能程序测试流程图

(2) 有些电路板，例如 PLC 的 1/0 板上有地址开关，交换时要相应改变设置值。

(3) 有的电路板上有跳线及桥接调整电阻、电容，应调整到与原板相同时方可交换。

(4) 模块的输入、输出必须相同。以驱动器为例，互换时型号要相同；若不同，则要考

虑接口、功能的影响，避免故障扩大。

(5) 备件（或交换板）应完好。

数控机床的进给模块、检测装置备有多套，当出现进给故障时，可以考虑采用模块互

换的方法。

例 0-9 某数控车床， X 轴不动，其他功能正常。故障判断就可以采用交换法进

行。 X 、 Z 轴连接如图 0-3 所示。

故障分析 X 轴不能动，故障可能发生在数控系统、驱动器或电动机。将 X 、 Z 两轴

步进电动机驱动电缆交换，发现 X 轴电动机正常，而 Z 轴电动机不动，说明原 X 轴电动

机正常，数控系统到驱动器之间信号也正常。由此判断原 X 轴驱动器损坏。后经更换相

同型号驱动器，故障排除。

24 

CNC 
系统

X 轴步进电动机

Z 轴步进电动机

图 0-3 X 、 Z 轴连接示意图

交换部件法是电器修理中常用的一种方法，主要优点是简单和方便。在查找故障的

过程中，如果对某部分有怀疑，只要有相同的替换件，换上后故障范围大都能分辨出来，所

以，这种方法在电气维修中经常被采用。但是，如果使用不当，也会带来许多麻烦，造成人

为的故障。因此，正确认识和掌握交换部件法的使用范围操作方法，可提高维修工作效率

和避免人为故障。

在电气修理中，采用交换部件法来检查判断故障时应注意其使用范围。对一些比较

简单的电气元件，如接触器、继电器、开关、保护电气及其他各种单一电气元件，在对其有

怀疑而一时又不能确定故障部位的情况下，使用”部件替换“法效果较好。对于由电子元

件组成的各种电路板、控制器、功率放大器及所接的负载，替换时应小心谨慎。如果无现

成的备件替换，需从相同的其他设备上拆卸时则应慎重从事，以防故障没找到，替换上的

新部件又损坏，造成新的故障。

使用部件替换法应注意以下儿个方面。

(1) 低压电器的替换应注意电压、电流和其他有关的技术参数，并尽量采用相同规格

的替换。

(2) 如果没有相同的替换的电子元件，应采用技术参数相近的，而且主要参数最好能

覆盖被替换的元件。

(3) 在拆卸时应做好记录，特别是接线较多的地方，应防止接线错误引起的人为故障。

(4) 在有反馈环节的线路中，更换时要注意信号的极性，以防反馈错误引起其他故障。

(5) 在需要从其他设备上拆卸相同的备件替换时，要注意方法，不要在拆卸中造成被

拆件的损坏。如果替换电路板，在新板换上前要检查一下使用的电压是否正常。

在确认对某一部分要进行替换前，应认真检查与其连接的有关线路和其他相关的电

器。在确认无故障后才能将新的备件替换上去，防止外部故障损坏替换上去的部件。

此外，在交换 CNC 系统的存储器或 CPU 板时，通常还要对数控系统进行某些特定的

操作，如存储器的初始化操作等，并重新设定各种参数，否则数控系统不能正常工作。这

些操作步骤应严格按照数控系统的操作说明书、维修说明书进行。

7. 隔离法

当某些故障（如轴抖动、爬行等），因一时难以区分是数控部分，还是伺服系统或机械部分

造成的，常采用隔离法来处理。隔离法将机电分离，数控系统与伺服系统分开，或将位置闭环

分开，做开环处理等。这样，将复杂的问题就化为简单的问题，就能较即也找出故障原因。

例 0-10 配置某系统的 JCS-018 立式加工中心， Z 轴忽然出现异常振动声，马上

停机，将 Z 轴电动机与丝杠分开，试车时仍然振动，可见振动不是由机械传动机构的原因

所造成的。为区分是伺服单元故障，还是电动机的故障，采用了 Y 轴伺服单元控制 Z 轴

25 

电动机的方法，还是振动，所以初步可判断为 Z 轴电动机故障。更换后，故障排除。

8. 升降温法
当设备运行时间比较长或者环境温度比较高时，机床容易出现故障。这时可人为地

（例如可用电热器或红外灯直接照射）将可疑的元器件温度升高（应注意器件的温度参数）

或降低，加速一些温度特性较差的元器件产生“病症”或使“病症“消除来寻找故障原因。

例 0 一 11 配有某系统的一台 XK715 型数控立式铣床工作数小时后，液晶显示屏

(LCD) 中部逐渐变白，直至全部变暗，无显示。关机一定时间，再开机工作数小时后，又

“旧病复发”。故障发生时机床其他部分工作正常，估计故障在 LCD 部分，且与温度有关。

打开数控系统，故意将内部冷却风扇停转，使温度上升，发现开机后，马上就出现上述故

障，可见该显示器散热参数不符合条件。更换 LCD 后，故障消除。

9. 电源拉偏法

电源拉偏法就是拉偏（升高或降低电压，但不能反极性）正常电源电压，制造异常状

态，暴露故障或薄弱环节，便于查找故障或处于临界状态的组件、元器件位置。

电源拉偏法常用千工作较长时间才出现故障，或怀疑电网波动引起故障等场合。拉

偏正常电源电压，可能导致具有破坏性的结果，所以在使用拉偏法时要先分析整个数控系

统是否有降额设计或保险系数，控制拉偏范围（为正常工作电压的 85%-120% ），三思而

后行。

10. 测量比较法（对比法）

为了调整、维修的便利，在数控系统的印制电路板上，通常都设置有检测用的端子。

维修人员利用这些检测端子，可以测量、比较正常的印制电路板和有故障的印制电路板之

间的电压或波形的差异，进而分析、判断故障原因及故障所在位置。有时，还可以将正常

部分试验性地造成“故障”或报警（如断开连线、拔去组件），看其是否和相同部分产生的故

障现象相似，以判断故障原因。

通过测量比较法，有时还可以纠正因在印制电路板上的调整、设定不当而造成的“故障”。

测量比较法使用的前提是维修入员应了解正确的印制电路板关键部位、易出故障部

位的正常电压值、正确的波形，这样才能进行比较分析，而且这些数据应随时做好记录并

作为资料积累。

例 0-12 某数控立铣床， Y 轴移动时出现振动，快速时尤为明显，甚至伴有冲击，

而其他轴皆运行正常。将故障轴 Y 与正常轴 X 进行对比，用示波器观查低速时 X 轴和

Y 轴测速发电动机的输出，可以看出 Y 轴测速发电动机输出的电压纹波明显大千 X 轴。

拆开 Y 轴测速发电动机检查，发现其电枢被碳刷粉末污染。清除碳粉后再测其波形，纹

波大为减小。移动 Y 轴，原抖动故障消除。
'  11 ．原理分析法（逻辑线路追踪法）

原理分析法是排除故障的最基本方法之一。当其他检查方法难以奏效时，可从电路

的基本原理出发，一步一步进行检查，最终查出故障原因。

所谓原理分析法，是指通过追踪与故障相关联的信号，从中找到故障单元，相据 CNC

系统原理图（即组成原理），从前往后或从后往前地检查有关信号的有无、性质、大小及不

同运行方式的状态，并与正常情况比较，看有什么差异或是否符合逻辑关系。对于＂串联”

线路，当发生故障时，可依次、逐一地找到故障单元位置；对于两个相同的线路，可以对它

26 

们进行部分地交换试验，这种方法类似于把一个电动机从其电源上拆下，接到另一个电源
上去试验电动机。类似地，也可以在这个电源上另接一个电动机试验电源，这样可以判断

出电动机还是电源有问题。但是对数控机床来说，问题就没有这么简单。交换一个单元，

一定要保证该单元所处大环节（即位置控制环）的完整性。否则闭环可能受到破坏，保护

环节失效，积分调节器输入不平衡等。

硬接线（继电器—接触器）系统具有可见接线、接线端子、测试点等。当出现故障时，

可用试电笔、万用表、示波器等简单测试工具测量电压、电流信号的大小、性质、变化状态，

电路的短路、断路、电阻值变化等，从而判断出故障的原因。

以上这些检查方法各有特点，维修人员可以根据不同的故障现象加以灵活应用，逐步

缩小故障范围，最终排除故障。

数控机床是机、电、液（气）、光等应用技术的结合，在诊断中应紧紧抓住微电子系统与

机、液（气）、光等装置的结合点，这些结合点是信息传输的交点，了解此处信号的特征对故

障诊断大有帮助，可以很快地初步判断故障发生的区段，如故障可能是在 CNC 系统、

PLC、 MT ，还是液压等部分，以缩小检查范围。

小结

数控机床是典型的机电一体化产品，基本组成包括加工程序、输入确料淳灌勺枚控系

统、伺服系统、辅助控制装置、反馈系统和机床本体。其自动控制表现在：数控系统根据加

工程序生成各种信息和指令，控制机床的主轴运动、进给运动及辅助运动等。

数控机床常见故障分类、排除思路和原则及数控维修的基本步骤和方法见表 0-1 。

表 0-1 数控机床常见故障分类、排除思路和原则及数控维修的基本步骤和方法

素质要求

数控维修的基本要求

工作态度要端正

要有较宽的知识面

有一定的外语基础

善于学习和善于思考

有较强的实践技能

要有良好的工作习惯和作风

数控机床使用说明书

数控系统安装于连接说明书

数控系统 PMC 编程手册

技术文献管理

数控机床参数与调整备份表

数控机床电气控制原理图和梯形图

数控机床辅助部件说明书

数控机机床维修记录

维修工具与仪器

常用仪器仪表

维修工具

易损备件

27 

（续）

按数控机床发生故障部件分类 机床本体故障和电气控制的故障

数控机床常见

按机床发生故障的性质分类

系统性故障和随机性故障

故障分类

发生故障时有无报警号分类

硬件和软件报警时显示的故障

按发生故障的原因分类

机床本身故障和机床外部故障

故障发生时观察现象、调查现场、掌握相关信息

根据故障信息，列出故障部位的全部疑点

数控机床故障排除的思路

分析故障原因，制定排除故障的方案

检测故障，逐级定位故障部位

故障的排除和后期的维修记录

数控机床故障排除的

思路和原则

故障排除应遵循的原则

故障记录

数控机床维修

的基本步骤

维修前的检查

先方案后操作

先检查后通电

先软件后硬件

先外部后内部

先机械后电气

先公用后专用

先简单后复杂

先一般后特殊

故障发生时的情况记录

故障发生时的频繁程度记录

故障的规律性记录

故障的外界条件记录

数控机床的工作状态检查

数控机床的运行情况检查

数控机床与数控系统之间的连接情况检查

CNC 装置的外观检查

CNC 系统启动自诊断

CNC 故障诊断

CNC 在线诊断（故障报警号、 I/0 接口状态和内部信息等）

离线诊断

问看、听触、嗅

直观法

系统自诊断法

拔出插入法

参数检查法

功能测试法

交换部件法

隔离法

升、降温法

电源拉偏法

测量比较法

原理分析法

故障诊断与排除的

基本方法

28 

习题

一、简答题

1. 简述数控机床加工零件的工作过程。

2. 数控系统的组成和各部分的作用。

3. 叙述数控机床常见故障的分类方法。

4. 列举数控机床故障排除的原则。

5. 列举故障排除的基本方法。

二、填空题

1. 数控机床维修的意义在于

需要、

需要、

需要。

2. 编写程序可以由人一编写，也可以根据图纸与工艺方案通过

自动生成

数控加工程序。

3. 编写的加工程序可以通过数控系统的

直接输入到数控系统，在计算机上

编程并仿真后将程序存储到

上，再通过数控系统的输入设备（软、硬盘驱动

器）或

接口输入到数控系统中。

4. 存储加工程序并转接到数控系统中的存储设备。常见的程序载体有加工程序清

单（手写或打印）、

、磁带、软、硬

、

。

5. 

是数控系统的核心部分。硬件主要包括 CPU 、各种 RAM,ROM 、

模块、

模块、

模块和显示卡控制模块等。软件可分为

软件和

软件。系统软件包括程序管理、参数管理、程序执行、机床状态监控、诊

断、图形模拟和补偿等。系统软件基本上由

设计，

由机床制造厂家设

计，

程序由用户编制。

6. 主轴驱动单元一般包括

放大器、主轴

、主轴传动机构及主

等，根据数控系统主轴模块发出的控制信号，实现数控机床主轴的

和

控制、主轴与进给轴的

控制、主轴

与

控制等。

7. 进给伺服驱动单元包括

放大器、伺服

、进给传动机构、机械负载

（如工作台）及位置检测装置等，根据数控系统伺服驱动模块发出的控制信号实现数控机

床进给装置的

与

控制。

8. 目前数控系统的可编程控制器大多为

PMC （与系统做成一体）。

FANUC-PMC 接口又有内装型 I,0 模块和外接

模块。 SIEMENS 、华中系

统的 PMC 接口基本上使用

模块。数控机床辅助运动的控制基本上都是由

控制的。

9. 辅助控制机构指介于数控装置与机床机械、液压部件之间的控制部件，其主要作

用是接收数控装置输出的主轴转速、

和

指令，刀具

指令，冷却、

润滑装置的启俾；指令，

的松开、夹紧指令，工作台

等辅助指令信号，以

及机床

的状态等信号，经必要的编译、逻辑判断、功率放大后直接驱动相应的执

行元件，带动机床机械部件、液压气动等辅助装置完成指令规定的动作。它通常由

和

回路构成。

29 

10. 工频三相交流电

V 供给辅助运动控制用的电机和模拟主轴变频控制主

电源的输入，伺服变压器输出工频三相交流

V 进给伺服驱动器的电源输入和数

字伺服驱动电源模块的输入，通常控制变压器输出

交流电供交流接触器线圈。

交流电作照明用电，开关型稳压电源产生

直流供给数控系统、外置 I,0

接口模块和伺服驱动等。

11. 辅助运动的电器执行元件包括

、

、

和接线

端子板等。

12. 数控机床的机床本体部分，主要包括机械、

、冷却、

、液压、气动

与防护装置。因机械安装、调试及操作使用不当等原因而引起的机械传动故障和导轨副

摩擦过大故障通常表现为传动

大，加工

13. 液压、润滑与气动系统的故障主要表现在

差，运行

阻塞或

大。

不良，造成数

控机床无法正常工作。

14. 电气故障分一电故障与＿~弱电部分主要指

装置、

控制器、 CRT 显示器以及

单元、输入输出装置等电子电路。硬件故障

主要是指印制电路板上的集成电路芯片、分立元件、接插件以及外部

组件等发生

的故障。常见的软件故障有

出错、系统程序和参数的

、运算出错等。强

电故障是指继电器、

、开关、熔断器、

、电磁铁等元器件，以及由其所组成

的电路发生故障。

三、分析题

某数控车床， X 轴不动，其他功能正常。维修人员采用交换法进行故障诊断与维修。

将 X 、 Z 轴的伺服驱动控制电缆交换，连接如图 0-4(b) 所示，发现 X 轴仍不动，后来将

驱动器与电机控制电缆交换，如图 0-4(c) 所示，出现报警 (K2 为编码器与驱动器连接电

缆）。该连接有错误，如何正确连接才能确定故障在驱动器还是电机或编码器？

CNC 

CNC 

X伺服电机

Z 伺服电机

X伺服电机

Z 伺服电机

K2 

K2 

K2 

(a) 

(b) 

图 0-4 采用交换法确定进给驱动部分故障示意图

(a) 原进给系统连接框图；（ b ）交换 X 、 Z 与 CNC 的控制电缆；（ c）交换驱动器与电机连接电缆。

30 

第 1 章数控机床电气控制

数控机床很大部分故障是电气控制系统故障，作为维修人员，熟悉机床电气控制系统

原理，对数控机床维修有很大帮助。根据电气控制系统的连接框图，可以了解所用的数控

系统和伺服系统的类型、 1/0 接口板的方式，位置和速度反馈的形式；根据电源控制和辅

助功能电路图，结合 CNC 中的 PLC 的 I/0 接口信号比较容易地分析辅助电路的电气控

制原理。数控机床电气维修应当包括数控装置、主轴与伺服驱动、 I/0 接口模块、接口电

路、强电控制电路以及操作部件等。本章以典型的 HTC2050Z 数控车床为例，学习如何

分析阅读数控机床电气控制原理图，力求用典型产品来开展教学，使维修人员对数控机床

电气维修有较清楚的认识。

1.1  HTC2050Z 数控车床参数及性能简介

1.1.1  典型机械机构简介

HTC2050Z 是沈阳第一机床厂生产的车削中心。车削中心的主要特征是主轴（称为

C 轴）可以分度和进行伺服控制，回转刀架上除了安装车削刀具外，还可以安装钻削和铣

削等自动驱动刀具。工件一次安装，能自动完成车削，铣平面、键槽、铣螺旋槽，钻轴向孔
或径向孔等工艺内容。车削中心加工有效地提高了生产率，进而提高了数控车削的柔性
化和自动化水平。

机床由床身、导轨机构、主传动系统、刀架进给系统、尾座、液压系统、冷却系统、润滑

系统、排屑系统等部分组成。

1.  HTC2050Z 数控车床的主轴机械结构

主轴箱为单轴主轴箱，轴和电机经皮带轮连接，驱动主轴。改变电机旋转方向，可以

对主轴正、反转控制。主轴刹车由电机制动来实现。高精度螺纹切削是通过主轴上的圆

形光栅尺，通过检测主轴的转角信号来实现的。主轴定向停车是通过带 C 轴的主电机来

实现的，并由两对液压油缸和一个刹车盘机构来紧固主轴。

C 轴分度进给由主电机经齿形带轮，连接同步齿形带传给主轴，主轴上的环形光栅

尺将信号反馈给数控系统，由 PMC 发信号给电动刀架，实现 C 轴与 X 轴、 Z 轴联动。

前支承采用预加负荷的超精密级角接触球轴承，三个一组，其中两个用于承受向后的

推力，另一个承受向前的推力；后支承采用双列滚子轴承，能承受较大的径向力。因为这

种结构在高转速时可降低主轴温升，减少热变形。主轴轴承的松紧要适度，如果拧得过

紧，会使主轴在高转速时轴承温升太高，甚至研磨损坏。

主轴的最高转速与主轴箱结构有关，还受所选用卡盘油缸最高转速的限制，用户在更

31 

换卡盘油缸时应特别注意。

刀具主轴（第二主轴）由交流伺服电机驱动，通过同步带、传动轴、传动齿轮、端面齿离

合器将动力传递到动力刀夹，再通过刀夹内部的齿轮传动带动刀具回转，实现主动切削。

刀具主轴（第二主轴）操作（卡盘必须处于夹紧状态下，才能启动刀具主轴。）

在进行手动操作前，要先进行第一主轴和刀具主轴状态的切换，在 MDI 或自动方式，

输入 M70 ，第一主轴由速度轴切换为 Cs 轴状态，这时第二主轴手动操作生效。

(1)” 主轴正转”按钮：按此键，刀具主轴将逆时针旋转（面对主轴端面定义），按钮内

指示灯亮，此按钮仅在手动状态下时起作用，若主轴正在反转，则必须先按“主轴停”按钮，

待主轴停转后，再按主轴正转按钮。主轴的转速由手动数据输入或程序中的 S 码指令决

定 (S 码为主轴的转速码）。

(2)“ 主轴反转”按钮：按此键，刀具主轴将顺时针旋转（面对主轴端面定义），按钮内

指示灯亮，此按钮仅在手动状态下时起作用，若主轴正在正转，则必须先按“主轴停”按钮，

待主轴停转后，再按主轴反转按钮。主轴的转速由手动数据输入或程序中的 S 码指令决

定 (S 码为主轴的转速码）。

(3)” 主轴停止”按钮：该按钮在所有状态下均起作用。此按钮按下后，刀具主轴立即

停止旋转。在自动状态下时，如循环启动停止。此按钮按下后，主轴立即停止，若重新启

动主轴，必须把状态开关放在手动位置，按相应主轴正反转按钮。

(4) 主轴倍率开关：此开关可以调整主轴的转速，即改变 S 码速度，使之按主轴的转

速调整范围 50% ～ 120 ％之间的倍率发生变化，此开关在任何工作状态下均起作用。

(5)” 主轴点动”按钮：按此键，刀具主轴就开始旋转，松开此键，主轴就停止。此键在

点动的状态下，才会起作用。

在自动或 MDI 操作方式下可不用进行 M70 的切换，只要输入相应的 M93 （正转）、

M94 （反转）、 M95 （停止），即可操作刀具主轴的动作。

Cs 轴的操作：卡盘必须处于卡紧状态下，在 MDI 或自动方式下，输入 M70 ，第一主轴

由速度轴切换为 Cs 轴状态，这时 Cs 轴可进行手动和自动操作。在点动方式下，按 “C+"

按钮，使 C 轴正向移动；按 “C-” 按钮，使 C 轴负向移动。

2.  HTC2050Z 数控车床的进给机构

刀架进给 X 轴和 Z 轴由伺服电机经传动机构来实现。 X 轴滚珠丝杠与伺服电机用

联轴器连接，传动无间隙。 Z 轴滚珠丝杠与伺服电机通过同步齿型带传动。为了使编码

器发出的脉冲信号与滚珠丝杠同步，采用滚珠丝杠与编码器直接用弹性联轴器连接，这样

编码器可直接反馈滚珠丝杠的传动信号，避免齿型带传动造成的误差。

3.  HTC2050Z 数控车床的动力刀架
机床采用 DUPLOMATIC 动力刀架 BSDT-16 — 270/0 - 12 - C/30 - 380 - 50 。刀架
中心高 80mm ，工具孔分布圆 1,270mm ；刀架配备径向动力刀座 PRR - 30 - ER25/40 - T 、
轴向动力刀座 PRA - 30 - ER25/40 - R 和非动力刀座，可进行自动换刀及驱动铣削动力

刀头，实现车削和铣削加工。数控车削中心与普通数控车床的主要区别就在于数控车削

中心具备强大的铣削功能，数控车削中心的铣削功能是通过其动力刀架上安装的铣削动

力头来完成的。铣削动力刀头安转在 DUPLOMATIC 动力刀架上，该刀架内置传动齿

轮，动力通过齿轮传动带动铣削动力刀头转动，进行铣削进给。铣削动力刀头分轴向铣削

32 

动力刀头和径向铣削动力刀头，分别用于轴向铣削和径向铣削。

转塔刀架控制过程如下：在进行选刀前，要先进行刀具主轴（第二主轴）回零操作，在
MDI 或自动方式下，输入 M12 即可。当第二主轴定位完成后，转塔刀架可通过 T 码进行
自动转位选刀，也可用“手动选刀”按钮进行手动转位选刀。

“手动选刀”按钮手动时，在点动状态，按下此键，刀架转过一个工位并在最近的一个
工位停止锁紧，如继续按下不松开，刀架始终转位。手动转位只能一个方向。在 MDI 和

自动方式下，手动转位失效。

自动选刀方法如下：

(1) 将状态选择按钮选在手动数据输入状态；

(2) 按 “PRGRM”键在 MDI 画面；

(3) 再按 T 码和数字键 0~9 选择刀号及刀补号；

(4) 按 “EOB” 及 “INSERT”输入；

(5) 按＂循环启动”按钮。

刀架转至指定位置落下夹紧。转塔刀架的电气控制、转塔刀架 PLC 控制见相关

章节。

4.  HfC2050Z 数控车床的液压系统

HTC2050Z 数控车床的液压系统如图 1-1 所示。卡盘、尾座用液压控制，压力可分

别用减压阀进行调整。借助压力表开关，在压力表上指示。加工薄壁零件时，需要较小的

夹持力；当对轴类零件粗加工时，卡盘需要较大的夹紧力，但最高不超过 2.5MPa。若加

工轴类工件需用尾座顶紧工件时，可根据轴的粗细调整压力，但最高不超过 lMPa 。

机床液压卡盘的松开、夹紧可由脚踏开关控制，尾台套筒的伸出退回与卡盘联动。

卡盘与尾台的操作必须在主轴停转时有效。

(1) 卡盘控制分为手动和自动两种。

叩手动时，在主轴停止状态，按下“卡盘”按钮，“卡盘”指示灯亮，指示卡盘松开；再按

下“卡盘”按钮，“卡盘”指示灯灭，指示卡盘夹紧。

＠自动时，在主轴停止状态，输入 M11 ，卡盘松开；输入 MlO ，卡盘夹紧。

(2) 尾台套筒控制分为手动和自动两种。

心手动时，在主轴停止状态，按下“顶尖”按钮，“顶尖”指示灯亮，指示尾台套筒伸出；

再按下“顶尖”按钮，“顶尖”指示灯灭，指示尾台套筒缩回。

＠自动时，在主轴停止状态，输入 M52 ，尾台套筒伸出；输入 M53 ，尾台套筒缩回。
5.  HfC2050Z 数控车床的润滑系统

动导轨部分的润滑与滚珠丝杠润滑共用一套自动润滑系统，有手动和自动两种工作

状态。手动时，按下此键，指示灯亮；自动时导轨润滑为间歇润滑，间歇时间可调，其控制

由 PLC 来实现。

6. 冷却系统

(1) 机床的冷却系统。本机床采用链板湿式排屑装置的内设水箱（必备）进行冷却。

(2) 机床冷却系统清洗。为了获得最佳性能，更换新切削液前应对系统进行彻底清

洗，包括放掉残留液、除掉机加工碎屑及生聚集物等。

切削液的控制部分有自动和手动控制两种。

33 

34 

尾台顶尖压力变换

卡盘夹紧松开

卡盘正反夹

10 

11 

' -  l2 

尾台套筒油缸向前

后退

14 

卡盘油缸

定向油缸 l

定向油缸2

尾台油缸

图 1 - 1  fITC2050Z 数控车床的液压系统图
1—滤油器； 2一直接式变董叶片该； 3—压力表； 4—压力继电器； 5—减压阀； 6一单向阀； 7、 17一二位四通电磁换向阀；
8一手动换向阀； 9一单向阀组合； 10一自动换向阀； 11一叠加式液压阀； 12—叠加式减压阀； 13—叠加式单向阀；

14一电磁换向阀； 15一叠加式单向节流阀； 16一叠加式减压阀。

(1) 手动控制。按＂切削液开关”按钮，冷却泵启动，＂切削液开关”按钮指示灯亮。再

按＂切削液开关”按钮，则指示灯灭，切削液停。

(2) 自动控制。自动控制时可在程序中通过 MO8 指令来实现。当有切削液开指令
(MO8) 时，冷却泵启动，则＂切削液开关”按钮指示灯亮；当有切削液停指令 (M09) 时，切削

液停，则＂切削液开关”按钮指示灯灭。

1.1.2  技术参数

卡盘直径： 210mm

床身上最大回转直径： 450mm

最大加工直径： 200mm

轴类最大加工长度： 450mm

滑鞍最大纵向行程： 600mm

滑板最大横向行程： 160mm

主轴孔径： 55mm
主轴转速（无级）（单轴主轴箱（交流主轴驱动））： 40r/min - 4000r /min 
车刀刀方： 20mm X 20mm 

最小输入当量：纵向 (Z 轴） 0.001mm ；横向 (X 轴） 0.001mm（直径上）

快移速度：纵向 (Z 轴） 12m/min ；横向 (X 轴） lOm/min

尾座套简直径： 80mm

套筒最大行程： 100mm

顶尖锥孔：莫氏 5 号

主电机功率 (AC):llkW

伺服电机 (Z 、 X 轴）： 6N·m

液压站电机： 1 ． 5kW

运屑器电机： 0.2kW

切削液电机： 0.55kW
主机外形尺寸（长 X 宽 X 高）： 2884rnmX 1660mmX 1650mm 

净重： 5000kg

1. 2  HTC2050Z 数控车床的电气控制

对数控机床电气控制的分析应从以下儿个方面入手： CNC 连接电路图、 CNC 互连图，

交流主轴伺服驱动、全数字交流进给伺服驱动电路图，辅助功能电路图、交流电源控制电

路图、直流电源及控制电路、 PLC 控制及 1/0 接口连接电路、超程与急停控制等。

1.2.1  数控系统连接框图

图 1-2 中，比较清楚地表明了主板与电源模块 PSM 、主轴伺服模块 SPMl 、 SPM2 进

给伺服模块 SVM 、输入僧i 出 l/0 接口板、手动数据输入 MDI 键盘、机床操作面板的连

35 

rll 

.. 

__ 昙遥于豆II' 

电源输入 DC24V

200V 

CZI 传感器

IIIIIIIIIIIIIIIIIIIIIIIII 

IBI  CX2A  JFI 
CZ2L 

SVM 

归
CZ2M 

___ 

l1111111 

_____ 

lIIIIIII1L 

JD u 

IIIIIII 

,RS232 

蹬
一

__ 

T 

电源输入直流 24V

电源输入直流 24V

CA64 

JDIB 

主面板 B

CM65CM邸 CM67I 操作站

子面板 Bl

图 1-2 fITC2050Z 数控车床的数控系统连接框图

接。 NC 系统为 FANUCOi-TC。型号 A02B - 3090 - B522 。伺服模块 SPMl 是第一主

轴模块（速度轴）；模块 SPM2 是第二主轴模块（刀具主轴）； SVM 模块是双轴伺服模块 (X

轴、 Z 轴）。

CNC 装置相关接口信息如下：

CPlA:DC IN （电源输入接口）。该接口是与外部 DC24V 直流电源连接，为 CNC 装

置提供电源。

JA7A ：串行主轴／主轴位置编码器信号接口。当主轴为串行主轴时，与主轴放大器的

JA7B 连接，实现主轴模块与 CNC 系统的信息传递；当主轴为模拟量主轴时，该接口又是

主轴位置编码器的主轴位置反馈信号接口。

COPlOA ：伺服系统高速串行通信 FSSB 光缆接口，与伺服放大器的 COPlOB 连接。

光缆口的连接顺序是从 COPlOA 到 COPlOB。此光缆是从系统的轴卡出来，一级一级地

依次连接各伺服放大器。

JDlA ：连接外置 1/0Link 信号接口。

CA55 ：系统 MDI 键盘信号接口。

36 

JD36B: RS232C 串行通信接口。

1.2.2  NC 数控装置的连接

HTC2050Z 数控车床的 NC 系统为 FANUCOi-TC ，型号 A02B - 3090 - B522 。其连

接框图如图 1-3 所示。

轴控制卡
－轴控制用 CPU
－轴控制回路
－轴控制用存储器
-FSSB 控制回路

显示控制卡
－显示控制用 CPU
－显示控制回路
－显示控制用存储器

CPU 卡

-CNC 用 CPU
－主存储器（系统软件）
-BOOT 存储器

F-BUS 
（至背板）

主板

FSSB 
（至伺服放大器）

PMC 控制回路
DI/DO 用存储器
I/OLink 控制回路

模拟输出 MDI 接口

位置 存储卡接口
编码器

串行主轴
高速 DI

1/0LINK  RS-232-CDC24V 

图 1 - 3  fITC2050Z 数控车床的 NC 系统连接框图

系统由中央处理单元 CPU 模块 (CPU 卡）、控制卡、伺服轴控制卡、 FROM/SRAM 存
储器模块、模拟量主轴控制卡、 PMC 控制回路和电源单元等组成。 CPU 模块中的主存储
器存放系统软件通过 BUS 总线与各功能块通信，实现 CNC 的控制；显示卡用于显示系统
文字、程序、参数、图形；伺服控制卡通过高速串行总线 (FSSB) 实现伺服单元的控制。
FROM/SRAM 存储器模块中， FROM 用来存储数字伺服， PMC ，其他 CNC 功能用的系统
软件和用户软件（如 PMC 梯形图，宏程序等）； SRAM 用来存储系统参数，零件加工程序，
各种补偿值。模拟量主轴控制卡用于实现模拟量主轴控制；电源单元为系统提供各种直
流电源，电源单元的输入电压为直流 DC24V;PMC 控制回路经 1/0-LINK 及总线 BUS

实现机床辅助功能的顺序逻缉控制。 HTC2050Z 数控车床无模拟主轴控制。

电源接通，系统开始进行自诊断， BOOT 执行， NC 系统启动开始，系统开始进行初始
化。系统软件从 FROM 装载到动态存储器 DRAM 中，等待系统处理器 1D 设定，系统处
理器 ID 设定完毕显示回路初始化完毕。然后对 FANUC 系统主 CPU 和 BUS 总线初始
化。如果系统出现硬件故障或软件不良，屏幕上会出现 900 号～ 973 号系统报警。系统

37 

初始化完毕后对 PMC 软件及 PMC 程序初始化。最后系统进行数字伺服初始化，系统
FROM 中装载系统数字伺服软件到主板的 RAM 中，数字伺服和主轴初始化完毕。至此，

系统完成开机自诊断后，进入正常操作的显示画面。

1.2.3  交流主轴伺服驱动连接

HTC2050Z 数控车床的交流主轴伺服驱动电路如图 1 — 4 所示。

3g 

第一主轴驱动模块

Mi p s 

五

讨
J

—

第二主轴驱动模块 ［动力头零位开关7
SPM2 

L+ －一二
L-

UOIVOl@ 

M s 一
，
厂
望

产吁 @ 

图 1 - 4  ITTC2050Z 数控车床的交流主轴伺服驱动电路图

电源模块 PSM 将 L1 、 L2 、 L3 输入的 200V 三相交流电整流、滤波成直流电 DC
300V ，为主轴模块和伺服模块提供直流电源；将 200R 、 200S 端输入的交流 200V 电转换
成直流电 OC24V 、OC5V ，为电源模块本身及各伺服驱动单元提供电源。若无 200V 电

压，则所有放大器的数显灯均不亮，出现 750 号和 5136 号报警。

L+ 、 L- ：直流 OC300V 输出母线。
CXA2A 、 CXA2B ：主轴放大器的 OC24V 直流电源输入和输出，电源模块、主轴放大

器、伺服放大器的温度报警与飞SP （急停）信号的串联。

插头 CX3 是控制机床 MCC 的吸合，插头 CX4 是外部急停的输入 (ESP 信号），这两

个插头中的任何一个外部连接不正常，都将出现 401 号（伺服未准备好）系统报警。

主轴伺服驱动模块 SPM 第一主轴速度轴， aisP15 型号 A06B - 6112 - H15 #  550 ，容

量 17.5kW。主轴最高转速 4000r/min 。

第二主轴 CS 轴， Aips5.5 型号 A06B-6111- H006# 550 ，容量 6.8kW。主轴最高转

速 10000r/min。它作为进给伺服轴工作，可与其他进给轴一起插补，加工出轮廓曲线。

JA7B ：串行主轴输入连接接口，与控制单元的 JA7A 接口连接。
JA7A ：串行主轴输出连接接口，与下一主轴的 JA7B 接口连接。
JYA2 ：连接主轴电动机速度传感器和电动机过热检测装置。若传感器损坏或连接电

缆破损将出现 9073 号报警，主轴放大器的数字显示为 “73” 。

38 

JYA3 ：连接主轴位置控制用的磁传感器。

JYA4 ：连接主轴光电编码器。

1.2.4  交流进给伺服驱动连接

HTC2050Z 数控车床的交流进给伺服驱动采用的伺服驱动模块为 aisv40/80 ，其型号

为 A06B- 6114 - H208 ，容量 lOkW ，其连接如图 1 — 5 所示。

-

[TBl 

L+ 

L-

伺服驱动舷
-

sVM 

I 

l 

- 

勹

s: 

SP呾

W37 

NC 单元

CZ2L 

U  V 

A  B  C  D 

三

CZ2M 

WIO 

A  B  C  D 

0/g 

图 1 - 5  fITC2050Z 数控车床的交流进给伺服驱动

L+ 、 L- ：直流 OC300V 输出母线。

CXA2B ：直流 OC24V 。
COPlOB ：伺服系统高速串行通信 FSSB 光缆接口。
JFl 、JF2 ：伺服电动机内装串行编码器接口，取 X 轴、 Z 轴的速度和位置反馈信号。

若编码器损坏或连接电缆破损，将出现 368 号报警。

U 、 V 、W ：伺服电机动力线。
FANUCai 系列伺服系统控制系统如图 1-6 所示，为电流、速度、位置三环闭环控
制，为实现高速度、高精度、高效率加工，控制系统采用 1nm 为插补计算单位，因此，发送
到数字伺服控制器的指令极为稳定，由此来提高表面加工精度。由千采用高响应向量
HRV(High Response  Vector) 控制的高增益伺服系统，可以实现高速加工，避免机械谐振。
系统增加了 HRV 滤波器，实现稳定的高增益伺服控制。采用高性能的 d 系列 AC 伺服电
机、高精度的电流检测、高分辨率的脉冲编码器（可达 16000000/r) 以及高性能的伺服控制。
39 

CNC 

高响应高分辨率反馈

脉冲编码器

16000000/r 

图 1-6 FANUC ai 系列伺服系统控制框图

1.2.5  辅助电路分析

图 1-7 为 HTC2050Z 数控车床的辅助功能的强电电路图，它包含液压、冷却、排屑

器、转塔刀架控制以及自动润滑。控制原理设计在 PLC 电气控制中。熟悉 PLC 的 1/0

地址及梯形图，利用状态信息来诊断数控机床的相关外设及附属设备的故障。仅以转塔

刀架控制为例，作一简单分析。其他都是三相异步电动机的启动停止或正反转的控制。

电源保护

电源开关

冷却水电机

刀架电机
正转 1  反转

液压电机

排屑器电机

正转

1  反转

勹 l l l  l l l  l l l  l l l 

厂言二二5F

M02 

.= 

MO5 

图 1-7 HI'C2050Z 数控车床的辅助电路图

数控机床的数控系统主要是实现数字控制和顺序控制。数字控制主要是控制刀具的

轨迹，也就是位移控制。而顺序控制部分主要是控制机床的辅助机械动作。它接收数控

40 

部分送来的以“二—十”进制代码表示的 S、 T 、 M 等机械顺序动作的信息并对其进行译
码，转换成与辅助机械动作相对应的信号，控制各部件顺序动作。诸如主轴的正转、反转
及停止；自动换刀，工作台交换，冷却，润滑的控制。

1 ．转塔刀架的电气控制
在进行选刀前，要先进行刀具主轴（第二主轴）回零操作，在 MDI 或自动方式下，输入

M12 ，第二主轴定位完成后，方可进行选刀操作。图 1-8 为动力头信号输入电路。

动力头信号

I 动力头郅开关 I 
［三－

[XT丿］

I  ov 

+24V 

ov 

24E 

KA26 

497 

1499 

厂__(6)-

二6

1(5)f(3) 勹

I 
L-: 

I — | '  

- - 

-  -

- -」

图 J-8 HC2050Z 数控车床的动力头信号输入电路

转塔刀架电气控制如图 1-'入图 1-8 、图 1-9 所示。接触器 KM3Z 控制刀架电动机

正转，接触器 KM3F 控制刀架电动机反转， KM3Z 、 KM3F 分别由继电器 KA2 、 KA3 控制。

它们又由 PLC 的输出信号 Y2.1 、 Y2.2 控制。断路器 QF3 实现电动机的短路和过载保

护。继电器 KA23 控制电动机的抱闸线圈，当 KA23 闭合，抱闸线圈得电动作；当 KA23

断开，抱闸线圈失电，电动机松开。当刀塔转到目标位置的前一位置时，继电器 KA22 获

电动作，预定位电磁铁线圈得电；当刀塔转到换刀位置时，电磁铁推动插销移动，分度到位

检测开关 SQ29 （地址 X7.7) 发出信号，电动机停止转动。延时一段时间，电动机开始反转

进行锁紧，锁紧到位后，开关 SQ28 （地址 X7.6) 发出信号，继电器 KA23 获电动作，电动机

制动抱闸，完成换刀控制后 .KA22 、 KA23 断电。

2. 转塔刀架 PLC 控制

机床与 PLC 间输入哺础信号 (I/0) 地址可分为以下两类： MT （机床侧 )-PMC 的输

入地址为 X;PMC-Mf（机床侧）的输出地址为 Y 。图 1-9 和图 1-10 中可以清楚看出

系统 PLC 输入缰础信号地址分配。地址 X7.0 、 X7.1 、 X7.2 、 X7.3 为来自角度编码器的

刀塔分度位置编码检测信号，地址 X7.4 为编码器的选通信号，地址 X7.5 为刀架电机过

热信号，经 SQ27 开关信号接入。地址 X7.6 刀塔到位锁紧信号，经 SQ28 开关信号接入。

地址 X7.7 为预定位电磁铁动作检测信号，经 SQ27 开关信号接入。地址 Yl.1 为预定位

41 

刀架信号

A 

I  B 

|  C  I D 

奇叩磕 1
I 却i 1 嚣 I]f飞寻
1 由闺黜邸翌劂圉阁圈l

i___ 

447 

447 

I 453 

I 455 

1457 

I 459 

I 461 

I 463 

I 465 

I 467 

IOV 

I 24E 

O  I 预定位

电磁铁

h 

(15) I  I (1) 

• 

- 

-

(16) 

-

-

• 

(JI) 

• 

(12) 

-

• 

(13) 

- 

• 

(14) 

产 ----_J 
L_ 

(10) 

I (s) 

1(9) 

(7)1 

(2)1  @  1<4>  I (6) 

I<~ -(3) 

SQ29 

YV7 

_.  YV6 

1 

图 1 - 9  HTC2050Z 数控车刀架信号输入和电磁铁抱闸电路

刀架控制

正转

1  反转

刀架

预定位

刀架

抱闸

SPJ 轴
松开

动力头
零位控制

KA2 

KA3 

KA22 

KA23 

KA巧

图 1 — 10

fITC2050Z 数控车刀塔刀架输出信号电路图

电磁铁线圈输出信号，经中间继电器 KA22 输出，经电磁阀 YV7 执行。地址 Yl.2 为刀架

电动机的抱闸线圈输出信号，经中间继电器 KA23 输出，经电磁阀 YV6 执行。地址 Y2.1

为刀架电动机正转输出信号，经中间继电器 KA2 输出。地址 Y2.2 为刀架电动机反转输

出信号，经中间继电器 KA3 输出。地址 Yl.4 为 1 第一主轴 SP 松开信号，经中间继电器

KA25 输出。地址 X4.0 为动力头零位控制信号，经 SQ76 开关信号接入。地址 Yl.5 为

42 

动力头零位控制信号，经中间继电器 KA26 输出。 24E 、 ov 为 I/0 接口电源。

有关 PLC 的相关知识及 PLC 控制梯形图，见相关章节。

3. 直流电源电路图
HTC2050Z 数控车的 CNC 、 1/0 接口和操作面板等所用的直流电源电路如图 1-11
所示。 AC220V 经 L 、 N 送入 NC 稳压电源输入，输出＋ 24V 、 COM ，经 QF12 断路器和继
电器触点 KAO 后，供给 CNC、 1/0 单元和机床操作面板单元电源。 QF12 为断路器，接通
OC24V 并起短路及过热保护。当压下启动按钮 SB2 ，继电器 KAO 线圈得电，继电器吸
合， KAO 常开触点闭合， OC24V 送往 CNC 电源和 1/0 单元。另一 KAO 常开触点闭合并

自保。 SBl 为停止按钮。

NC 稳压电源

-- 

N
C

二
三
小

电
－

制
＇

，畔
二

c

O
v
C

1/0 单元电源控制

', 

面…FA 

+24V 
'(!) 

OV 
(2)' 

三

－

单三
尸
宁

O
v
C

图 1-11 ITTC2050Z 数控车直流电源电路图

4. 超程急停控制电路
急停控制的目的，是在紧急情况下，使机床上所有运动部件制动，并在最短的时间内
停止。一般情况下切断数控系统、驱动系统和其他机床电气部件的电源。数控机床有两
种设计方案。其一不需要 PLC 的任何控制，急停电路是将 X 轴、 Y 轴、 Z 轴等轴的正、负
向超程限位开关和急停开关的常闭触点串联在一起，任意一个常闭触点断开都会造成急
停线圈失电，从而断开伺服的输入电源，系统停止。要使系统退出保护，只需压下超桯解
除开关，使伺服系统恢复供电。再通过机床面板选择手动方式，选择相应的轴，向超程急
停的反方向移动即可退出超程急停，然后复位。这种方案，维修和操作者无法区分故障的
原因是急停，还是哪个轴的哪个方向出现硬限位超程，或为什么硬限位超程开关不取常开
点而用常闭点。另一种方案的硬超程故障可直接通过 PLC 处理。每个坐标轴的正负向
超程限位开关的开关状态直接连接到 PLC 的输入端。 PLC 应用程序如梯形图将激活运
行，当接收到超程的限位信号后，急停信号送入 CNC ，系统立刻就会响应，坐标轴停止运

43 

行且报警，切断伺服电源，使能断开。

图 1-12 和图 1-13 是上述两种方案的控制图。图 1-12 是 SIEMENS 802D 系统，

不需要 PLC 的任何控制，将 X 轴、 Y 轴、 Z 轴等轴的正、负向超程的限位开关和急停开关

手轮的常闭触点均串联在急停电路中，任意一个常闭触点断开都会造成急停继电器 KA1

线圈失电，使得 KAl 的触点断开，从而切断伺服驱动器控制使能端子 64 与 9 的接通。图

1-13 是 FANUCOi 数控车床 HTC2050Z 超程急停梯形图。

电源模块

控制使能

225 

端子
9 

M3  端子
64 

端子号

地址

模块号

ov  I  24V  I  X 轴厂行： IZ 轴 1 急停 IX 轴 1?:位|Z 轴 I 二

P3 

M3 

g 

亿，

2 

223 

224 

f  f  f 了 223! 224!  1 t 

5 

6 

7 

8 

9 

IO 

3 

4 

ov 

24V 

13.0 

13.1 

13.2 

13.3 

13.4 

13.5 

13.6 

13.7 

PI'72/48 模块一

接口： Xlll

注： P3 和 M3 分别为外部 24V 直流稳压电源的＋24V 和 ov

图 1 - 12  SIEMENS 802D 超程链的设计（不用 PLC 的控制）

Xl007.6  XlOll.7  Xl009.7  X1011.6 
曰曰 f-------i
XlO.O 

R0.2 

NOT 
OVERTRAVEL 

XIO卢飞言｀］＝

F45.0 

RO~尸斤

容上需GENCY

图 1-13 FANUC Oi 数控车床 HTC2050Z 超程急停梯形图

地址分配：
X1007.6 
XlOll. 7 
X1009. 7 
X1011.6 

44 

Z 轴正超程信号 +LZ 
X 轴正超程信号 + LX 
Z 轴负超程信号 -LZ 
X 轴负超程信号 -LX 

XOOlO.O  超程解除
XlOll.4  液压保护开关
X1008.4  急停输出
X1005.5  润滑电机
X1009.6  导轨润滑压力开关 SP2 
*ESPl 
R0.2 

RLT 
QF2 
*ESP 
QF25 

R0.2 
G8.4 
KlO.O 
Kl0.6 
F45.0 

*ESP2 
*ESP 

LB.SP 
SP25H 

ALMA 

1.2.6  维修实例及分析

1.  2002 号报警： A0.2 （信息继电器闭合）防护门打开

原因和处理：防护门打开，检查开关地址 X9.7 ，将防护门 SQ7 关闭。

2.  2003 号报警： A0.3 （信息继电器闭合）卡盘松开

原因和处理：卡盘未夹紧，请先踩脚踏开关。如故障未消除，检查开关地址 X8.0 ，检

查线路。

3.  1011 号报警： Al.3 （信息继电器闭合）刀架未锁紧

原因和处理：刀架检测时由 SQ28 夹紧信号（开关地址 X7.6) 引起，检查刀架到位状

态、 SQ28 开关的好坏、连接导线等。

4.  2029 号报警： A3.5 （信息继电器闭合）导轨润滑油位低

原因和处理：导轨润滑油位低检测 SLlO （地址 X5.4) 开关引起的，加油到油位。

5.  2030 号报警： AJ.56 （信息继电器闭合）二主轴未回零

原因和处理： MDI 方式下输入 M12 并执行，使二主轴定向停车，到零位后，才能

进刀。

小结

通过本章的学习，以数控车 HTC2050Z(FANUC OiC) 为典型，了解数控机床硬件的总

体连接图，熟悉硬件各功能模块间的连接，掌握数控系统电源模块、辅助直流电源的连

接， PLC 输入倩i 出 (DI八幻）的信号地址，辅助机械的强弱电控制，硬超程急停控制等。

FANUCi 系列代表产品的硬件集成度高，通信功能强，并采用高速的矢量控制 (HRV 控

制），响应时间最快达 62.5µs。

FANUC 还有高档系统 FS 30i/3li 系统，其特点是：

(1) 最大控制系统为 10 个系统（通道）。

(2) 最多轴数和最大主轴配置为 40 轴：其中进给轴 32 轴，主轴为 8 轴；最大同时控

制轴数为 24 轴／系统。

45 

(3) 最大 PMC 系统数为 3 个系统，最大 1/0 点数为 4096 点／4096 点， PMC 基本指令

执行时间为 25ns 。

(4) 最大可预读程序段为 1000 段。此外还有 FS 160/1801210 开放式、带有 PC 功能

的数控系统，可执行从 Windows 98 到 Windows XP 的操作系统。

习题

1. 用框图画出 FANUC OiC-T 的连接图。

2. 标明 FANUCOiC-'---T 主板上各接口的定义。
3.  FANUC OiC-T 的电源模块的作用是什么？输入输出电压为多少？

4. 如何获取＋ 24V 直流辅助电源？它的作用是什么？

5. 数控车 HTC2050Z 的选刀采用何种控制方式？如何完成手动和自动换刀？

6. 数控车 HTC2050Z 第一主轴和第二主轴的功能作用是什么？如何切换到第二主

轴功能？

7. 硬超程急停的连接为什么超程限位开关采用常闭点连接，而不是常开点？

8. 试分析比较硬超程急停的两种设计方案。

46 

第 2 章数控机床可编程控制器

可编程控制器 (Programable Logic  Controller, PLC) 是一种数字逻辑运算系统，专为工

业环境下运用而设计。它采用可编程序的存储器，用千存储执行逻辑运算、顺序控制、定

时、计数和算术运算等特定功能的用户指令，并通过数字式或模拟式的输入和输出，控制

各种类型的机械或生产过程。

数控机床作为自动控制设备，是在自动控制下进行工作的。数控机床所受的控制可

分为两类：一类是最终实现对各坐标轴运动的“数字控制”，即控制机床各坐标轴的移动距

离，各轴运行的插补、补偿等；另一类是“顺序控制”，即在数控机床运行过程中，以 CNC 内

部信号和机床的各行程开关、传感器、按钮、继电器等开关量信号状态为条件，并按照预先

规定的逻辑顺序对诸如主轴的启停、换向，刀具的更换，工件的夹紧、松开，液压、冷却、润

滑系统的运行等进行的控制。与“数字控制”相比，“顺序控制”的信息主要是开关量信号。

在 PLC 出现以前，机床的顺序控制是以机械设备的运行状态和时间为依据，使其按

预先规定好的动作次序顺序地进行工作的一种控制方式。这种控制方式是由传统的继电

器逻辑电路 (Relay Logic  Circuit,RLC) 实现的。这种电路是继电器、接触器、开关、按钮等

分立元件用导线连接而成的电路。在实际应用中， RLC 存在着难以克服的缺点，如只能

实现定时、计数等几种有限功能控制，难以实现对数控机床所需的许多特殊的控制功能；

修改控制逻辑需增减元件重新布线；继电器、接触器等元件体积较大，工作触点数有限，当

机床受控对象较多时， RLC 体积庞大、功耗高、可靠性差。 PLC 是由计算机简化而来的，

具有面向用户的指令和专用于存储器用户程序的存储器；用户程序多采用图形符号和逻

辑顺序关系与继电器电路十分相似的＂梯形图”编辑，形象直观，工作原理易于理解和掌

握；没有接触不良、触点熔焊、线圈烧坏等故障；还可以和个人计算机相连接，方便地实现

程序的显示、编辑、存储和传送等操作。现在 PLC 已经成为数控机床不可缺少的控制

装置。

2.1  数控机床用 PLC 简介

2.1.1  数控机床用 PLC 的功能

1 ．机床操作面板控制

将机床操作面板上的控制信号直接送入，以控制数控系统的运行。例如 FANUC 早

期的数控系统如 OCIOD 、 OiMB/MC 等，许多操作的功能按键都占用 I/0 接口的地址。

2. 机床外部开关输入信号控制

将机床侧的开关信号送入 PLC ，经逻辑运算后，输出给控制对象。这些开关包括各

47 

类控制开关、行程开关、接近开关、压力开关和温控开关等。

3. 输出信号控制

PLC 输出的信号经强电柜中的继电器、接触器，通过机床侧的液压或气动电磁阀，对

刀库、机械手和回转工作台等装置进行控制，另外还对冷却泵电动机、润滑泵电动机及电

磁制动器等进行控制。

4. 伺服控制

控制主轴和伺服驱动装置的使能信号，以满足伺服驱动的条件，通过驱动装置驱动主

轴电动机、进给伺服电动机和刀库电动机等。

5. 报警处理控制

PLC 收集强电柜、机床侧和伺服驱动装置的故障信号，将报警标志区中的相应报警

标志位置位，数控系统便显示相应的报警号及报警提示信息，以方便故障诊断。

6. 软盘驱动装置控制
有些数控机床用计算机软盘取代了传统的光电阅读机。通过控制软盘驱动装置，实

现与数控系统进行零件程序、机床参数、零点偏置和刀具补偿等数据的传输。

7. 转换控制

有些加工中心可以实现主轴立／卧转换。 PLC 的主要工作包括切换主轴控制接触

器；通过 PLC 的内部功能，在线自动修改有关机床数据位；切换伺服系统进给模块，并切

换用于坐标轴控制的各种开关、按键等。

2.1.2  数控机床 PLC 分类

数控机床 PLC 分为两大类：一类为内装型 (Built- in  Type)PLC ，另一类为外置型或

称独立型 (Stand-alone Type)PLC 。

1. 内装型 PLC

内装型 PLC 包含在数控系统内部，通过 CNC 输入俐讨j 接口实现信号传送，如图

2-1 所示。

r - - - - - - - - - - - - - - - - - - - - -1  
I 
I 
I 
l 
| 
I 
| 
| 

x 

骂
壬
癖

f--------1 扣挝肺面板 1
I 厂———-———————— 7

PLC 

F 

NC 

Y 

I
Y
撫

' 1 ,  I 

三刀库伺服单元 1

: 

I 
1 

L 

-

CNC皿

..J

l_ __  邸电咂＿＿』

图 2-1

内装型 PLC 的 CNC 系统

48 

内装型 PLC 有以下特点。
(1) 内装型 PLC 实际上是数控系统装置本身带有 PLC 功能，内装型 PLC 功能通常

是作为可选功能提供给用户的。

(2) 内装型 PLC 的性能指标（如输入绢础点数、程序最大步数、每步执行时间、程序

扫描时间、功能指令数目等）是根据所从属的 CNC 系统的规格、性能、适用机床的类型等

确定的，其硬件和软件部分是被作为 CNC 系统的基本功能或附加功能与 CNC 系统一起

设计制造的。因此系统硬件和软件整体结构十分紧凑， PLC 所具有的功能针对性强，技

术指标较合理、实用，较适用于单台数控机床及加工中心等场合。

(3) 数控装置内部，内装型 PLC 可与数控系统共用一个 CPU ，也可以单独有一个专

用的 CPU ；硬件电路可与数控系统电路制作在同一块印制电路板上，也可单独制成一个

附加板，当数控系统需要具有 PLC 功能时，将此板插在数控系统的显示器上。内装型

PLC 控制电路的电源可与数控系统共用，不需专门配置。

(4) 有些内装型 PLC 可利用数控系统的显示器和键盘进行梯形图或语言的编程调

试，无需装配专门的编程设备。

另外，由于大规模集成电路的采用，带与不带内装 PLC 数控系统的外形尺寸已无明

显差别。内装 PLC 与数控系统之间没有连线，信息交换量大，可靠性好。

目前世界上著名的 CNC 厂家在其生产的 CNC 系统中，大多开发了内装 PLC 功能。
常见的有 FANUC 公司的 FS-O(PMC- LIM) 、 FS-3(PC-D) 、 FS- 6  (PC-A、 PC­
B) 、 FS-10/ll(PMC-1) 、 FS-15(PM& N);SIEMENS 的 SINlJMERIK 810/820;A-B 

公司的 8200 、 8400 、 8500 等。

2. 独立型 PLC

独立型 PLC 在数控系统外部，自身具有完备的硬软件功能，其结构框图如图 2-2

所示。

—

LIl|

-CN} 

-- __ -- 

71

＿
皿
}

11

—

IIIIIII|111

喜
壬
毒

I
Y
撫

NC 

|
1
|

「

|
|
I
I
I
T
1
|
1

广一一一一—一一一一—一一一一— 7

口

ICRT/MDI 面板 1

1 机曙作面板 1

广一一一一一一一一一一—一

1 三：

控制阁路

, 

1 

三！

I 

厂＿＿壅钾旦＿＿1

——

|11 

]c 

—

I|1 

图 2-2 独立型 PLC 的 CNC 系统

独立型 PLC 有以下特点。

(1) 独立型 PLC 的基本功能结构与通用型 PLC 完全相同。

49 

(2) 独立型 PLC 的 1/0 模块种类齐全，其输入点数可通过增减 1/0 模块灵活配置。
(3) 与内装型 PLC 相比，独立型 PLC 功能更强。但一般要配置单独的编程设备。独
立型 PLC 与数控系统之间的信息交换可通过 1/0 接口对接方式，也可以采用通信方式。
1/0 对接方式就是将数控系统的输入僧扭L点通过连线与 PLC 的输入俐i 出点连接起来，
适应千数控系统与各种 PLC 的信息交换。但由于每一点的信息传递需要一根信号线，所
以这种方式连线多，信息交换量小。采用通信方式可克服上述 1/0 对接的缺点。但采用
这种方式的数控系统与 PLC 必须采用同一通信协议。一般来说数控系统与 PLC 需是同
一家公司的产品。采用通信方式时，数控系统与 PLC 的连线少，信息交换量大而且非常

方便。

2.1.3  PLC 在数控机床中的配置方式

PLC 在数控机床中有四种不同的配置方式。

第一种 PLC 的配置方式，如图 2-3(a) 所示。

CNC  严 I

ICNC 

竺

(a) 

| 

| 

冒

I 邸侧

I  n 根线

(c) 

CNC 

I  口 I

ICNC 

1  机床侧

(b) 

(d) 

图 2-3 数控机床中的配置方式

PLC 安装在机床侧，用于完成传统继电器的逻辑控制， PLC 与数控系统之间通过 IIO
点连线对接交换信息， PLC 通过 IIO 点再控制机床的逻辑动作。在这种配置中 PLC 可选
用任意一种型号的产品，可选择余地大。此时 PLC 需 n+m 根连线，因此连线复杂。

第二种 PLC 的配置方式，如图 2-3(b) 所示。

采用内装 PLC 此时 PLC 仅有 m 根输入倩江1 连线控制机床，而 PLC 与数控系统之
间的信息交换在数控系统内部完成，因此连线少，易于维修，成本也较低，目前大多数内置
IIO 模块的 FANUC 、 SIEMENS 和华中数控等都属于这种模式。

第三种 PLC 的配置方式，如图 2 — 3(c) 所示。
独立型 PLC 安装在靠近 CNC 处（或使用内置 PLC) ，但将 PLC 的 IIO 模块安装在机
床侧， PLC 与 IIO 模块之间使用远程 IIO 通信线连接（通常 PLC 均有远程 IIO 模块）。
这种配置特别适用于重型、大型机床，可使用多个远程 IIO 模块，各远程 IIO 模块安装在
靠近各自的控制对象处，从而减少和缩短了连线，简化了强电结构，提高了系统的可靠性。
早期的 FANUCOC/0D、 FANUCOi 等系统普遍采用这种模式。

50 

第四种 PLC 的配置方式，如图 2-3(d) 所示。
使用独立型 PLC,PLC 与数控系统之间通过通信线连接，简化了连线，通信信息量大

大增加。

2.1.4  PLC 与外部的信息交换

讨论 PLC、 CNC 和机床各机械部件、机床辅助装置、强电线路之间的关系时，常把数

控机床分为 "NC 侧”和 “MT 侧＂（即机床侧）两大部分。 “NC 侧“包括 CNC 系统的硬件和

软件、与 CNC 系统连接的外部设备。 “MT 侧“包括机床机械部分及其液压、气压、冷却、

润滑、排屑等辅助装置，机床操作面板，继电器线路，机床强电线路等。 PLC 处于 CNC 和

MT 之间，对 NC 侧和 MT 侧的输入（输出）信号进行处理。

PLC 处千 CNC 和 MT 之间，对数控系统及机床的信息交换包括如下四部分。
(1)  MT-PLC ：机床侧的开关量信号可通过 PLC 的开关量输入接口送入 PLC 中。

除极少数信号外，绝大多数信号的含义及所占用 PLC 的地址均可由 PLC 程序设计人员

自行定义。图 2-4 为 FANUCOi 系统的 MT-PLC 输入接口的电路图，输入信号高电平

有效。 RV 是输入接口电路包括电平转换和光电隔离电路等。

厂飞担号
厂位号

+24V 

厂酐号

CBI04(BOI) 

CB104(A02) 

CBI04(B02) 

CB104(A03) 

CB104(B03) 

CB104(A04) 

CB104(B04) 

CB104(A05) 

CB!04(B05) 

CB104(A06) 

CBI04(B06) 

CB104(A07) 

CBI04(B07) 

CB104(A08) 

CBI04(B08) 

CBI04(A09) 

CBI 呻）

ov 

图 2-4 FANUCOi 系统的 MT-PLC 输入接口电路图

输入信号属于漏极型。触点容量：大于 30V 、 16mA ；断路时的触点之间的泄漏电流：

小于 1mA(26.4V) ；接通时的触点之间的压降：小于 2V。

51 

(2)  PLC—MT:PLC 控制机床的信号通过 PLC 的开关量输出接口送至 MT 中。所

有开关输出信号的含义及所有占用的地址可由 PLC 程序设计者自行定义。

输出信号是源极型的，接通时的最大负载电流小于 200mA；接通时饱和电压当负载
电流为 200mA 时最大为 1.0V ；耐压为小千 24VX (1 + 20% ）；断路时的泄漏电流小于

lOOmA。图 2-5 所示是 FANUCOi 系统的 PLC—MT 输出接口的电路图，输出信号高电

平有效。这里要特别说明的是，数控机床的输出信号基本上是晶体管（场效应管）输出，分

PNP 和 NPN 两种类型，高电平输出和低电平输出有效。

「——

端子号

CB104(A24,B24,A25,B25) 
CBI05(A24,B24,A25,B25) 
CBI06(A24,B24,A25,B25) 
杠OM I CBlff7(A24,B24,A25,B25) 

YOOOO.O 

ov 

CB104(Al6) 

CBI04(B16) 

CB104(Al7) 

CB104(B17) 

CB104(Al8) 

CB104(Bl8) 

CB104(Al9) 

CB104(Bl9) 

CB104(A20) 

CB104(B20) 

CB104(A21) 

CB104(B21) 

CB104(A22) 

CB104(B22) 

CB104(A23) 

CB104(B23) 

CB104(AOI 

图 2-5 FANUCOi 系统的 PLC—Mr 输出接口的电路图

(3)  CNC—PLC:CNC 送至 PLC 信息可由开关量输出信号完成，也可由 CNC 直接送

入 PLC 的寄存器中。所有 CNC 送至 PLC 的信号含义和地址（开关量或寄存器地址）均

已由 CNC 厂家确定， PLC 编程者只可使用，不可更改和删除。

如 FANUCOi 系统工作状态的 CNC—PLC 信号： F3.6 表示系统处千编辑 EDIT 状

态， F3.5 表示系统处于自动运行 AUTO 状态， F3.3 表示系统处于手动数据输入 MDI 状

态， F3.4 表示系统处于 DNC 状态， F3.2 表示系统处于手动连续进给 JOG 状态， F4.5 表

示系统返回参考点 REF 状态。

52 

(4)  PLC-CNC:PLC 送至 CNC 的信息由开关量输出信号完成，所有 PLC 送至 CNC

的信息地址与含义由 CNC 厂家确定， PLC 编程者只可使用，不可改变和删添。

如 FANUCOi 系统工作状态的 PLC—CNC 信号是由 G43.7 、 G43.5 、 G43.2 、 G43.1 、
G43.0 来实现的。表示数控机床加工功能的开关信号：机床所有轴锁住信号 G44.1 ，辅助
功能锁住信号 G5.6 ，程序空运转 G46.7 ，程序单段运行 G46.1 ，程序再启动 G6.0 ，程序段
跳过 G44.0 ，程序选择停 G7.1 ，程序循环启动 G7.2 ，程序进给暂停 G8.5 。

不同数控系统 CNC 与 PLC 之间的信息交换方式、功能强弱差别很大，但其最基本的
功能是 CNC 将所需执行的 M、 S、 T 功能代码送至 PLC ，由 PLC 控制完成相应的动作，然

后由 PLC 送给 CNC 完成信号 FIN 。

2.1.5  FANUC Oi 系统 PMC 内存地址的含义

地址用来区分信号。不同的地址分别对应机床侧的输入倩江j 信号、 CNC 侧的输入／

输出信号、内部继电器、计数器、保持型继电器和数据表。在编制程序时所需的四种类型

的信号如图 2-6 所示，图中 MT 与 PLC 相关的输入倩础信号经由 1/0 板的接收电路和

驱动电路传送。其余信号仅在存储器（如 RAM) 中传送。

4 
XlOO 
T 工位号 0~7

工地址号（字母后四位数以内）

图 2-6 PLC 的信号和地址

地址的格式用地址号和位号表示，如图 2-6 所示，地址号的开头必须指定一个字母

表示信号的类型，字母与信号的类型的对应关系见表 2 — 1 。在功能指令中指定的字节单

位的地址位号可以省略。

表 2-1 地址字母与信号类型的对应关系

字母 FANUCOi

信号类型

SIEMENS STEP 5 

信号类型

X 

Y 

F 

G 

由机床向 PLC 的输入信号 (MT

-+-PLC) 

由 PLC 向机床的输出信号 (PLC

-MT) 

由 NC 向 PLC 的输人信号 (NC

--PLC) 

由 PLC 向 NC 的输出信号 (PLC

-NC) 

I 

Q 

V 

M 

PLC 的输人信号：（ MT-PLC) 或 (NC-

PLC) 

PLC 的输出信号：（ PLC---Mr) 或 PLC-+

NC) 

变量寄存器：

可以是位、字节、字、双字

内部辅助继电器不直接驱动外部负载，只

起中间状态的暂存作用

53 

字母 FANUCOi

信号类型

SIEMENS STEP 5 

信号类型

R 

D 

C 

K 

T 

内部继电器

保持型存储器

计数器

保持型继电器

可变定时器

SM 

s 

特殊标志位（提供特殊控制功能及信息）

状态元件（使用步进控制指令时使用）

C(H实）

计数器嘀速计数器

AC 

T 

累加器 Aco~AC3

定时器

（续）

接口地址分配： CNC-PLC 相关信号的地址为 FO ~  F255; PLC-CNC 相关信号的地

址为 GO~G255 。

PLC 与机床 (MT) 之间的地址分配：当使用 I/0 Link 时， PLC-MT 的地址为 YO~
Y127,Mr-PLC 的地址为 XO~X127 ；当使用内装 l/0 卡时， PLC于Mr 的地址为 YlOOO~
Y1014,MT-PLC 的地址为 X1000~X1019 。

2.2  数控机床用 PLC 指令系统

在 FANUC 系列的 PLC 中，有基本指令和功能指令两种指令。型号不同时，只是功

能指令的数目有所不同，除此之外，指令系统是完全一样的。

在基本指令和功能指令的执行中，用一个堆栈寄存器暂存逻辑操作的中间结果，堆栈
寄存器有 9 位，如图 2-7 所示，按先进后出和后进先出的原理工作。”写“操作结果压入
时，堆栈各原状态全部左移一位，相反地，”取“操作结果时，堆栈全部右移一位，最后压入
的信号首先恢复读出。

堆栈寄存器（存储逻辑操作的中间结果）

/ 

1 

| ST8  |  sT7  |  ST6  1  ST5  |  ST4  1  ST3  |  sT2  | STl 

存放当前逻辑操作结果
三
II  STO  I 

、 、~2 、、一一 、 、~2 、~ 、～－/ 、
、、、、、．一4' 、、、

图 2-7 堆栈寄存器操作顺序

2.2.1  FANUC 系列的 PLC 的基本指令

基本指令 PMC-L 有 12 种基本指令，见表 2-2 基本指令格式如图 2-8 所示。

序号

指令

处理内容

表 2-2 PMC-L 型 PLC 的基本指令

RD 

RD.NOT 

WRT 

读出给定的信号状态，并写入 ST0 位，在一个梯级编码时节点是常开时使用

将信号的“非”状态读出，送入 ST0 位，在一个梯级编码时节点是常闭时使用

将运算结果 (STO 的状态）写入（输出）到指定的地址单元

WRT.NOT 

将运算结果 (sro 的状态）的“非“写入（输出）到指定的地址单元

1 

2 

3 

4 

54 

（续）

序号

指令

处理内容

5 

6 

7 

8 

9 

10 

11 

AND 

AND.NOT 

OR 

OR.NOT 

RD.STK 

将 sro 的状态与指定地址的状态执行逻辑”与“后再置入 sro

将 STO 的状态与指定地址的状态的“非“执行逻辑”与“后再置入 STO

将 S'T0 的状态与指定地址的状态执行逻辑”或“后再置入 sro

将 STO 的状态与指定地址的状态的“非“执行逻辑”或“后再置人 STO

堆栈寄存器左移一位，并把指定地址的状态置于 “STO” 中

RD.NOT.STK 

堆栈寄存器左移一位，并把指定地址的状态的“非＂置于 “sro” 中

AND.STK 

将 STO 和沉1 的内容执行逻辑”与“，结果存于 STO ，堆栈寄存器右移一位

12  OR.STK 

将 STO 和 STl 的内容执行逻辑”或“，结果存于 STO ，堆栈寄存器右移一位

如 RD 100.6 ，其中， RD 为操作指令码， 100.6 为操作数，即指令 XX

操作对象。它实际上是 PLC 内部数据存储器某一单元中的一位，指瑾咋码

100.6 表示 100 号存储单元的第 6 位。 RDl00.6 执行的结果，就是把

0000.  0 
地址号位数

操作数据

1000.6 这一位的数据状态 ”1”或“O“读出并写入结果寄存器 sro 中。

图 2-8 基本指令

例 2 一 1 图 2-9 是某功能的梯形图，写出对应的语句表程

的格式

序，并说明堆栈寄存器的存取变换情况。

解写出语句表程序和堆栈寄存器存取情况，见表 2-3 。

15.0 

J 

图 2-9 例 2-1 题图

表 2-3 例 2-1 题解题过程

序号

指令

地址号位数 注释

堆栈寄存器存取情况

ST2 

STl 

1 

2 

3 

4 

5 

6 

7 

8 

9 

RD 

AND.NOT 

RD.NOT.STK 

AND.NOT 

OR.STK 

RD. srk 

AND 

RD.STK 

AND.NOT 

1.0 

1.1 

1.4 

1.5 

1.2 

1.3 

1.6 

1. 7 

A 

B 

C 

D 

E 

F 

G 

H 

AB 

AB 

AB+CD 

A+CD 

EF 

EF 

AB+CJj 

AB+CD 

STO 

A 

A 
c 
@} 

AB+ @) 

E 

EF 

G 

GH 

55 

序号

指令

地址号位数 注释

10  OR.STK 

11  AND.STK 

12  WRT 

13  WRT.NOT 

14 

RD.NOT 

15  OR 

16  AND.NOT 

15.0 

15.1 

2.0 

2.1 

2.2 

Rl 

R2 

I 

J 

K 

17  WRT 

15.2 

R3 

（续）

堆栈寄存器存取情况

sr2 

STl 

AB+CD 

STO 

EF+GH 

(AB+a5)·(EF+GH) 

CAB+CD)·CEF+GH) 

(AB+Ef5)·(EF+GH) 

I 

I+] 

(I+J)K 

(I+ J)K 

2.2.2  FANUC 系列的 PLC 的功能类型指令简介

数控机床用 PLC 的指令必须满足数控机床信息处理和动作控制的特殊要求，例如
CNC 输出的 M 、 S 、 T 二进制代码信号的译码 (DEC) ；机械运动状态或液压系统动作状态
的延时 (TMR) 确认；加工零件的计数 (CTR) ；刀库、分度工作台沿最短路径旋转和现在位
置至目标位置步数的计算 (ROT) ；换刀时数据检索 (DSCH) 和数据变址传送指令
(XMOV) 等。对于上述的译码、定时、计数、最短路径选择，以及比较、检索、转移、代码转
换、四则运算、信息显示等控制功能，仅用一位操作的基本指令编程，实现起来将会十分困
难，因此要增加一些具有专门控制功能的指令，这些专门指令就是功能指令。功能指令都
是一些子程序，应用功能指令就是调用相应的子程序。 FANUC 的 PLC 功能指令数目视
型号不同而不同，其中 PMC-A 、 C 、 D 为 22 条， PMC—B 、 G 为 23 条， PMC-L 为 35 条。

表 2-4 所列为 PMC—L 功能指令和处理内容。

功能指令的一般格式如图 2-10 所示，功能指令中待定参数包括控制条件、指令、参

数和输出儿个部分。

A 

B 

历 II I  I 

I 

指令 1 参数 11 参数 2

w 

R415.0 

指令

参数

输出

图 2-10 功能指令的一般格式

控制条件：每条功能指令控制条件的数量和含义各不相同。控制条件存千堆栈存储器中。
指令：数控机床要执行的任务，见表 2-4 和有关手册等。

56 

表 2-4 功能指令和处理器

指

令

序号

格式 1 用于梯形图

格式 2 用于纸带穿空

和程序显示

格式 3 用于程序输入

处理内容

1 

2 

3 

4 

5 

6 

7 

8 

9 

10 

11 

12 

13 

14 

15 

16 

17 

18 

19 

20 

21 

22 

23 

24 

25 

26 

27 

28 

29 

30 

31 

32 

33 

34 

35 

ENDl 

ENI辽

END3 

TMR 

TMRB 

DEC 

CTR 

ROT 

COD 

MOVE 

COM 

COME 

JMP 

JMPE 

PARI 

DCNV 

COMP 

COIN 

DSCH 

XMOV 

ADD 

SUB 

MUL 

DIV 

NU邓

PACTL 

CODB 

DCNVB 

COMPB 

ADDB 

SUBB 

MlJLB 

DIVB 

NlJMEB 

DISP 

SBUl 

SBU2 

SUB48 

TMR 

SUB24 

DEC 

SUBS 

SUB6 

SUB7 

SUB8 

SUB9 

SUB29 

SUBlO 

SUB30 

SUB11 

SUB14 

SUB15 

SUB16 

SUB17 

SUB18 

SUB19 

SUB20 

SUB21 

SUB22 

SUB23 

SUB25 

SUB27 

SUB31 

SUB32 

SUB36 

SUB37 

SUB38 

SUB39 

SUB40 

SUB49 

S1 

S2 

S48 

T 

S24 

D 

S5 

S6 

S7 

S8 

S9 

S29 

S10 

S30 

S11 

S14 

S15 

S16 

Sl7 

S18 

S19 

S20 

S21 

S22 

S23 

S25 

S27 

S31 

S32 

S36 

S37 

S38 

S39 

S40 

S49 

1 级（高级）程序结束

2 级程序结束

3 级程序结束

定时器处理

固定定时器处理

译码

计数处理

旋转控制

代码转换

数据”与“后传送

公共线控制

公共线控制结束

跳转

跳转结束

奇偶校验

数据转换（二进制-BCD)

比较 (BCD)

符合检查

数据检索

变址数据传送

加法运算

减法运算

乘法运算

除法运算

定义常数

位置 Mate-A

二进制代码转换

扩展数据转换

二进制比较

二进制数加

二进制数减

二进制数乘

二进制数除

定义二进制常数

在 NC 的 CRT 上显示信息

57 

参数：参数的数目和含义随指令不同而异。与基本指令不同，功能指令可以处理数

据，取样或存有数据的地址可作为参数写入功能指令。

输出：功能指令的操作结果用逻辑 “0” 或 “1” 状态输出到 w,w 的地址由编程者任意

指定。有些功能指令不用 W 。

R9000- R9005 为功能指令结果寄存器。这些寄存器一般用于功能指令，其中的信

息根据功能指令的不同而有所区别，它可被顺序程序读出，但顺序程序不能往其中写入。

功能指令计算结果可保存到同一级程序中的下一个功能指令执行完毕，所以功能指令执

行完毕后应立即读出结果，否则在下一指令执行完毕后，这一信息会丢失。

2.2.3  FANUC 系列的 PLC 的功能类型指令应用

1. 程序结束指令

1) 第 1 级程序结束指令 ENDl

其格式如图 2-11 所示。每隔 8ms 读取的程序，主

要处理系统急停、超程、进给暂停等紧急动作。因为第

1 级程序过长将会延长 PMC 整个扫描周期，所以第 1

级程序不宜过长。如果不使用第 1 级程序时，必须在

PMC 程序开头指定 ENDl ，否则 PMC 无法正常运行。

2) 第 2 级程序结束指令 END2

图 2-11 ENDl 梯形图格式

第 2 级程序用来编写普通的顺序程序，如系统就绪、运行方式切换、手动进给、手轮进

给、自动运行、辅助功能 (M 、 S、 T 功能）控制、调用子程序及信息显示控制等顺序程序。

通常第 2 级的步数较多，在一个 8ms 内不能全部处理完（每个 8ms 内都包括第 1 级程

序），所以在每个 8ms 中顺序执行第 2 级的一部分，直至执行第 2 级的终了（读取 END2) 。

在第 2 级程序中，因为有同步输入信号存储器，所以输入脉冲信号的信号宽度应大千

PMC 的扫描周期，否则顺序程序会出现误动作。

3) 程序结束指令 END

将重复执行的处理和模块化的程序作为子程序登录，然后用 CALL 或 CALLU 命令

由第 2 级程序调用。包含子程序 PMC 的梯形图的最后必须用 END 指令结束。

图 2-12 为某一数控立式加工中心应用 PMC 程序结束指令的具体例子。

2. 定时器指令

在数控机床梯形图编制中，定时器是不可缺少的指令，用于程序中需要与时间建立逻

辑关系的场合。功能相当于一种通常的定时继电器（延时继电器）。 FANUC 系统 PMC

的定时器按时间设定形式不同可分为可变定时器 (TMR) 和固定定时器 (TMRI切两种。

1) TMR 

TMR 指令的定时时间可通过 PMC 参数进行更改，指令格式和工作原理如图 2-13

(a) 所示。

指令格式包括三部分，分别是控制条件、定时器号、定时继电器。

控制条件：当 ACT=O 时，输出定时继电器 TMOl=O ；当 ACT=l 时，经过设定延时

时间后，输出定时继电器 TMOl=l 。

定时器号： PMC-SA3 为 1 个～ 40 个，其中 1 号～ 8 号最小单位为 48ms （最大为

58 

Xl008.4  F45.0  R800.0 
1f- 
—廿一－－计
*ESP.M  ALM.A 心T

F0.6 

Fl.7 
寸卜－－H
MA 
邓．0

SA 

•SPPB 
XI003.0XI0032X1003.4  X1003.l  XI003.3  X1003.5 

1----11--11 

11 

11 

1 

•+XOT *+YOT  •廿幻T •-XOT  •-YOT  •-ZOT 
浮60已
CALL 

Xl006.6 

G84 

系统急停

主轴急停

- _ - 
•ESPA 
O－垂直轴 (Z 轴）

Y1002.。制动线圈
G&5 

进给保持

机床超程

G44.l 

MLK 

机床锁柱

AQ.O 

I 1000 
机床超程报警

换刀子程序
(PMC 轴控制）

图 2-12 程序结束指令的应用

1572.8s) ;9 号以后最小单位为 8ms （最大为 262.ls) 。定时器的时间在 PMC 参数中设定
（每个定时器占两个字节，以十进制数直接设定）。

定时继电器：作为可变定时器的输出控制，定时继电器的地址由机床厂家设计者决

定，一般采用中间继电器。

定时器工作原理如图 2-13(b) 所示。当 ACT=l 时，定时器开始计时，到达预定的

时间后定时继电器 TMOl 接通；当控制条件 ACT=O 时，定时继电器 TMOl 断开。

碑

SUB3 

定时器号

(a) 

ACT_J 
: 

1M01 

设定时间

(b) 

L 

图 2-13 可变定时器的指令格式和工作原理

图 2 — 14 为某数控机床利用定时器实现机床报警灯闪烁的例子。
X1008.4 为机床急停报警， R600.3 为主轴报警， R600.4 为机床超程报警， R600.5 为
润滑系统油面过低（润滑油不足）报警， R600.6 为自动换刀装置故障报警， R600.7 为自动
加工中机床的防护门打开报警。当上面任何一个报警信号输入时，机床报警灯

59 

XI008.4 
扒
*EXP 
R600.3 
寸SPER卜
R600.4 
计
LITER 
R600.S 
寸卜
OLOW 
寸R妫卜.6 

TERDR 
R600.7 
计
001 
R600.2 
---v1 
TM02 

R600.I 

1M01 

R600.I 

11 
TMOI 

YIOOO.O 

c 虹报如
MALM 

芦 1
卢 I 

02 

01  I  Q勹，1\1

TMOl 

定时器 1 (5s) 

R5.^^  」定时器2(5s)

1M02 

(YlOOO.O) 都闪亮（间隔时间为 5s) 。通过 PMC 参数的定时器设定画面分别输入定时器

图 2-14 机床报警灯闪烁示例

TOl 、 T02 的时间设定值 (5000ms) 。

2)  TMRB 

在梯形图中设定 TM团讨的时间，在指令和定时器号的后面加上一项预设定时间参

数，与顺序程序一起被写入 FROM 中，因此定时器的时间不能用 PMC 参数改写。固定定

时器一般用于机床固定时间的延时，不需要用户修改时间。如机床换刀的动作时间、机床

自动润滑时固定定时器的指令格式如图 2-15(a) 所示，包括以下几部分：

控制条件：当 ACT=O 时，输出定时继电器 TM03=0 ；当 ACT=l 时，输出定时继电

器 TM03=1 。

定时器号： PMC-SA3 共有 100 个，编号为 001-100 。

设定时间：设定时间的最小单位为 8ms ，设定范围为 8rns-262136ms。

定时继电器：作为可变定时器的输出控制，定时继电器的地址由机床厂家决定，一般

采中间继电器。

TMRB 

定时器号

SUB241 眈时间

TMRB10001 
5000 
SUB24  I 

(a) 

(b) 

图 2-15 固定定时器的指令格式和应用实例

(a) 指令格式； （ b) 固定发定时器的应用。

60 

如图 2- lS(b) 所示，当 XOOO.O= 1 时，经过 5000ms 的延时，定时继电器 ROOO.O=l 。

3. 计数器指令

计数器主要功能是进行计数，可以是加计数，也可以是减计数。计数器的预置值形式

是 BCD 代码还是二进制代码形式，由 PMC 的参数设定（一般为二进制代码）。图 2 — 16

为计数器的指令格式和计数加工工件件数的应用。

Wl 

计数器输出

Y6.0 

0001 

(a) 

(b) 

图 2-16 计数器的指令格式和应用举例

(a) 指令格式； （ b ）计数器用于计数加工工件应用。

1) 计数器的指令格式

计数器的指令格式如图 2 -16(a) 所示，包括如下各项：

指定初始值 (CNO) :CNO= 0 ，计数器的计数从 0 开始； CNO=l ，计数器从 1 开始

计数。

指定加或减计数 (UP/DOWN): UP /DOWN= 0 ，指定为加 1 计数器； UP/DOWN=l,

指定为减 1 计数器。

复位 (RST) :RST=O ，解除复位； RST=l ，计数器复位到初始值。
控制条件 (ACT) :ACT= 0 ，计数器不执行； ACT=l ，从 0 变 1 的上升沿计数。

计数器号： FANUC 系统 PMC-SA3 的计数器有 20 个 (00-19),PMC- SB7 的计数

器有 100 个 (000-099) 。每个计数器占用系统内部断电保持寄存器 4 个字节（计数器的

预置值占两个字节，当前计数值占两个字节）。

计数器输出 (Wl) ：当计数器为加计数器时，计数器计数到预置值，输出 Wl=l ；当计

数器为减计数器时，计数器计数到初始值 (0) ，输出 Wl=l 。计数器的输出地址由厂家来

设定。

2) 计数器在数控机床 PMC 控制上的应用

计数器可以实现自动计数加工工件的件数；作为分度工作台的自动分度控制及加工

中心自动换刀装置中的换刀位置自动检测控制等。

图 2-16(b) 为自动计数加工件数的 PMC 控制。其中 R9091.0 为逻辑 0,X56.0 为

机床面板加工件数的复位开关， Y6.0 为机床加工结束灯， R0.3 为加工程序结束信号

(M30) 。计数器的初始值 CNO 为 0 （逻辑 0 指定），加工件数从 0 开始计数；加减计数形

式 UP/DOWN 为 0 （逻辑 0 指定），即指定计数器为加计数。通过 PMC 参数画面设定计

数器 1 的预置值为 100 （如果加工 100 件）。每加工一个工件，通过加工程序结束指令

M30(R0.3) 进行计数器加 1 累计，当加工 100 件时，计数器的计数值累计到 100 ，计数器

61 

输出 Y6.0 为 1 ，通知加工结束，并通过 Y6.0 的常闭点切断计数器的计数控制。如果重
新进行计数，可通过机床面板的复位开关 X56.0 进行复位，当 X56.0 为 1 时，计数器输出
Y6.0 变成 0 ，计数器重新计数。

4. 译码指令

数控机床在执行加工程序中规定的 M 、 S 、 T 功能时， CNC 装置以 BCD 或二进制代码

形式输出 M 、 S 、 T 代码信号。这些信号需要经过译码才能从 BCD 或二进制状态转换成具

有特定功能含义的一位逻辑状态。根据译码形式不同， PMC 译码指令分为 BCD 译码指

令 DEC 和二进制译码指令 DECB 两种。

1)  DEC 指令

DEC 指令的功能是，当两位 BCD 代码与给定值一致时，输出为 “1” ；不一致时输出为

"O",DEC 指令主要用于数控机床的 M 、 T 码的译码。一条 DEC 译码指令只能译一个 M

代码。 DEC 指令格式如图 2 — 17(a) 所示，包括以下几部分：

DEC  I 译砌f号郔上 1

SUB4  I  译码方式

I :SUl:S4  I 山 II

DEC 

FlO 

1 日

M03 

M04 

芦尸MF勹口三 riv 曰

尸 MO5

(a) 

(b) 

图 2-17 DEC 译码指令格式和应用举例

控制条件： ACT=O ，不执行译码指令； ACT=l ，执行译码指令。

译码信号地址：指定包含两位 BCD 代码信号的地址。

译码方式：译码方式包括译码数值和译码位数两部分。译码数值为要译码的两位

BCD 代码；译码位数 01 为只译低 4 位数、 10 为只译高 4 位数、 11 为高低位均译。

译码输出：当指定地址的译码数与要求的译码值相等时为 1 ，否则为 0 。

图 2-17(b) 中，当执行加工程序的 M03 、 M04 、 MO5 时， R300.3 、 R300.4 、 R300.5 分

别为 1 ，从而实现主轴正转、反转及主轴停止自动控制。其中 F7.0 为 M 码选通信号，

Fl.3 为移动指令分配结束信号， FlO 为 FANUC 16/18/0i 系统的 M 码输出信号在 PMC

的地址。

2)  DECB 指令

DECB 指令的功能是，可对 1 、 2 或 4 个字节的二进制代码数据译码，所指定的 8 位连

续数据之一与代码数据相同时，对应的输出数据位为 1 。 DECB 指令主要用于 M 代码、 T

代码的译码，一条 DECB 代码可译 8 个连续 M 代码或 8 个连续 T 代码。图 2 -18 为
DECB 译码指令格式和应用举例。 DECB 指令格式如图 2 - 18(a) 所示，主要包括以下

几项：

译码格式指定： 0001 为 1 个字节的二进制代码数据， 0002 为 2 个字节的二进制代码

数据， 0004 为 4 个字节的二进制代码数据。

62 

译码信号地址：给定一个存储代码数据的地址。

译码指定数：给定要译码的 8 个连续数字的第一位。

译码结果输出：给定一个输出译码结果的字节地址。
图 2- 18 (b) 中，加工程序执行 M03 、 M04 、 MO5 、 M06 、 M07 、 MO8 、 M09 、 MlO 时，

R300.0 、 R300.1 、 R300.2 、 R300.3 、 R300.4 、 R300.5 、 R300.6 、 R300.7 分别为 1 。

译码格式指定
DECB  I 译咖号心北

SUB25  I 译码指定数

译码结果输出

(a) 

DECB 
SUB25 

0001 

FlO 

0003 

R300 

(b) 

图 2-18 DECB 译码指令格式和应用举例

5. 比较指令

比较指令用千比较基准值与比较值差值的大小。主要用千数控机床编程的 T 码与

实际刀号的比较。 PMC 比较指令分为 BCD 比较指令 COMP 和二进制比较指令 COMPB

两种。

1)  COMP 指令

COMP 指令的输入值和比较值为 2 位或 4 位 BCD 代码。其指令格式与应用例子如

图 2-l9 所示。 COMP 指令格式如图 2-19(a) 所示，包括以下几项：

指定数据大小： BYT=O ，处理数据（输入值和比较值）为 2 位 BCD 代码； BYT=l ，处

理数据为 4 位 BCD 代码。

COMP  基准数据

输入数据格式: 
SUBl51 比叩较坟－据地址

| 三T  I  。
口6

SUBl5 

COMP 

7 

( a ) ( b )  

图 2-19 COMP 比较指令格式和应用举例

控制条件： ACT=O ，不执行比较指令； ACT=l ，执行比较指令。

输入数据格式： 0 为用常数指定输入基准数据； 1 为用地址指定输入基准数据。

基准数据：输入的数据（常数或常数存放的地址）。

比较数据地址：指定存放比较数据的地址。
比较结果输出：当基准数据大千比较数据时， Wl 为 0 ；当基准数据小于或等千比较数

据时， Wl 为 1 。

图 2-19(b) 为某数控车床自动换刀 (6 工位）的 T 码检测 PMC 控制梯形图。加工程

序中的 T 码大于或等于 7 时， R601.0 为 1 ，并发出 T 码错误报警。其中 F7.3 为 T 码选

通信号， F26 为系统 T 码输出信号的地址。

63 

2)  COMPB 指令

COMPB 指令功能是，比较 1 个、 2 个或 4 个字节长的二进制数据之间的大小，比较的

结果存放在运算结果寄存器 (R900.0) 中。其指令格式和应用例子如图 2-20 所示。

COMPB 指令格式如图 2-20(a) 所示，主要包括以下几项：

控制条件： ACT=O ，不执行比较指令； ACT=l ，执行比较指令。

输入数据格式 (*00*) ：首位表示基准数据是常数还是常数所在的地址， 0 为用常数

指定输入数据； 1 为用地址指定输入数据；末位表示基准数据的长度， 1 为一个字节， 2 为

两个字节， 4 为四个字节。

基准数据：输入的数据（常数或常数存放的地址）。

比较数据地址：指定存放比较数据的地址。

比较寄存器 R9000.0 ：当基准数据等于比较数据时， R9000.0= 1 ；当基准数据小于比

较数据时， R9000.1 = 1 。

图 2-20(b) 中， R400 用来存放加工中心的当前主轴刀号， F26 为加工程序的 T 码输

出信号地址， JMP 为 PMC 的跳转功能指令， JMP-JMPE 为自动换刀的动作程序。当加

工程序读到 T 码时，如果程序的 T 码与主轴刀号相同，则跳出换刀动作程序，接着执行下

面的程序。

三竺－::气驾

I~－什—上盆。

比貂酌跳址 I

骂
邸

。

跳出
换刀程序

(a) 

(b) 

图 2-20 ffiMPB 比较指令指令格式和应用举例

6. 常数定义指令

1)  NUME 指令

NUME 指令是 2 位或 4 位 BCD 代码常数定义指令。其指令格式和应用例子如图

2-21 所示。 NUME 指令格式如图 2-21(a) 所示，主要包括以下几项：

常数的位数指定： BYT=O ，常数为 2 位 BCD 代码； BYT=l ，常数为 4 位 BCD 代码。

控制条件： ACT=O ，不执行常数定义指令； ACT=l ，执行常数定义指令。

常数输出地址：设定所定义常数的输出地址。

NVME  I  常数

SUB23 

I 常数输出地址

(a) 

NUME1°7 
S08231  D320 

一寸门—
.3  X2.4 

(b) 

图 2-21 NUME 指令格式和应用举例

64 

图 2-2l(b) 为某数控车床的电动刀盘实际刀号定义，其中， X2.0 、 X2.1 、 X2.2 、 X2.3
为电动刀盘实际刀号输出信号 (8421 码）， X2.4 为电动刀盘的码盘选通信号， D320 为存
放实际刀号的数据表。当电动刀盘转到 7 号刀时，刀盘选通信号 X2.4 接通，同时刀号输
出信号 X2.3 、 X2.2 、 X2.1 、 X2.0 发出 7 号代码 (0111) ，通过 NUME 指令把常数 07(2 位
BCD 代码）输出到实际刀号存放的地址 D320 中，此时， D320 存储的数据为 00000111 。

2)  NUMEB 指令

NUMEB 指令是 1 个字节、 2 个字节或 4 个字节长二进制数的常数定义指令。其指

令格式和应用例子如图 2-22 所示。 NUMEB 指令格式如图 2-22(a) 所示，主要包括以

下几项：

控制条件： ACT=O ，不执行常数定义指令； ACT=l ，执行常数定义指令。

常数长度指定： 0001 为 1 个字节长度的二进制数； 0002 为 2 个字节长度的二进制数；

0004 为 4 个字节长度的二进制数。

常数：以十进制形式指定的常数。
常数输出地址：定义二进制数据的输出区域的首地址。

NUMEB 常数长度指定

SUB40 1” 

常数输出地址

NUMEB 
SUB的

0002 

50 

Gl80 

(a) 

(b) 

图 2-22 NUMEB 指令格式和应用举例

图 2 — 22(b) 为某数控加工中心的刀库旋转的速度给定，该刀库旋转轴采用 PMC （附

加伺服轴）控制。其中 R201.2 为刀库自动转位信号， R140.0 为刀库手动转位信号，要求

刀库旋转速度为 50mm/min （常数为 50),G180 、 G181 为系统 PMC 轴控制的进给速度给

定信号地址。通过 NUMEB 指令后， G181 G180 地址的数据为 00000000 00110010 。

7. 判别一致指令和逻辑与后传输指令
1)  COIN 指令

此指令用来检查参考值与比较值是否一致，可用于检查刀库、转台等旋转体是否到达

目标位置等。功能指令格式和应用例子如图 2-23 所示。

输入数据格式

罕＼霍嘉晶

比较数据地址

(a) 

sClJBOIN l61 

门凇习

。

。

F26 

l 
R400 
D320 

(b) 

尺盂°

图 2-23 仅）IN 指令格式和应用举例

65 

COIN 指令格式如图 2-23(a) 所示，主要包括以下几项：

指定数据的大小： BYT=O ，数据大小为 2 位 BCD 代码； BYT 一＝ 1 ，数据大小为 4 位

BCD 代码。

控制条件： ACT=O ，不执行 COIN 指令； ACT=l ，执行 COIN 指令。

输入数据格式： 0 为常数指定输入数据； 1 为地址指定输入数据。

输入数据：基准数据的常数或基准数据常数所在的地址（常数或常数所在地址由输入

数据格式决定）。

比较数据地址：比较数据所在的地址。

结果输出： W=O ，表示基准数据不等于比较数据； W=l ，表示基准数据等千比较数。

图 2-23(b) 中， F26 为系统 T 码输出地址， R400 为所选刀具的地址， D320 为刀库换

刀点的地址。当 R600.0 为 1 时，说明程序中输入了 TOO 的错误指令（因为换刀号是从 1

开始的）。当 R600.1 为 1 时，说明刀库中选择的刀具转到了换刀位置，停止刀库的旋转

且可以执行换刀。

2)  MOVE 指令

该指令的作用是把比较数据（梯形图中写入的）和处理数据（数据地址中存放的）进行

逻辑”与”运算，并将结果传输到指定地址，也可用于将指定地址里不需要的 8 位信号消除

掉。指令格式和应用例子如图 2-24 所示。

MOVE 

SUB8 

比较数据高 4 位
比较数据低 4 位
输入数据地址
输出数据地址

(a) 

MOVE I 

SUB8 

1111 

llll 
D431 
D叨

(b) 

图 2-24 MOVE 指令格式和应用举例

MOVE 指令格式如图 2-24(a) 所示，主要包括以下几项：

当 ACT=O 时， MOVE 指令不执行；当 ACT=l 时， MOVE 指令执行。输入数据 (1

个字节）与比较数据的高、低 4 位数据 (0 或 1) 进行逻辑与运算，把逻辑与后的结果数据传

送到输出数据的地址中。

图 2-24(b) 中， D431 为刀库中当前要换刀所在的地址， D400 为主轴刀号的存放地

址， R600.0 为换刀结束信号。加工中心执行自动换刀控制时，系统接收到换刀结束信号

后，把当前刀库的换刀刀号写到主轴刀号所在的地址中，从而实现随机换刀的自动

控制。

8. 旋转指令
1)  ROT 指令

此指令用来判别回转体的下一步旋转方向；计算出回转体从当前位置旋转到目标位

置的步数或计算出到达目标位置前一位置的位置数。它一般用于数控机床自动换刀装置
的旋转控制。功能指令格式和应用例子如图 2-25 所示。 ROT 指令格式如图 2 - 25(a) 

所示，主要包括以下几项：

指定起始位置数： RNO=O ，旋转起始位置数为 O;RNO=l ，旋转起始位置数为 1 。

66 

＿尸ROT  I  当前位置地址

SUB6 I  目标位置地址
结果输出地址

40 

芦“上 :: 

INC 

ROT  I  moo 

I  Wl 

SUB6  D300 

I R680.0 

R700 

灯C

(a) 

(b) 

图 2-25 Ror 指令格式和应用举例

指定处理数据（位置数据）的位数： BYT=O ，指定两位 BCD 码； BYT=l ，指定 4 位

BCD 码。

选择最短路径的旋转方向： DIR=O ，不选择，按正向旋转； DIR=l ，选择。

指定计算条件： POS=O ，计算现在位置与目标位置之间的步距数； POS=l ，计算目标

前一个位置的位置数。

指定位置数或步距数： INC=O ，计算目标位置的号（表内号）； INC=l ，计算到达目标

的步数。

控制条件： ATC=O ，不执行 ROT 指令， Wl 不变化； ACT=l ，执行 ROT 指令，并有旋

转方向输出。

旋转方向输出：选择较短路径时有方向控制信号，该信号输出到 Wl 。当 Wl=O 时

旋转方向为正，当 Wl=l 时旋转方向为负（反转）。若转子的位置数是递增的，则为正转；

若转子位置数是递减的，则为反转。 Wl 地址可以任意选择。

图 2 — 25(b) 中， R9091.0 为逻辑 O,R9091.1 为逻辑 1 主7.3 为 T 码选通信号（程序中

读到了 T 码）， 40 为刀库容量 (40 把刀）， D200 为当前要换刀的刀具所在地址， D300 为刀

库换刀点的刀具所在地址。执行该指令后，把刀库的当前刀具转到换刀位置的前一位置

的地址存储到的 R700 中，以便进行刀库接近换刀点的减速控制或预分度到位控制。通

过 R680.0 输出是否为 “1”来控制刀库是否反转。

2)  ROTB 指令

ROTB 指令与 ROT 指令的功能基本相同，但 ROTB 指令可用地址指定回转体的分

度数，处理数据的形式均为二进制数形式。功能指令格式和应用例子如图 2-26 所示。

ROTB 指令格式如图 2-26(a) 所示，其中格式指定意义如下。 0001 表示处理的数据

为 1 个字节二进制数， 0002 表示处理的数据为 2 个字节二进制数， 0004 表示处理的数据

为 4 个字节二进制数。

图 2-26(b) 中， D100 为存储刀库容量数据的地址，这样设定的好处是梯形图不变，

用户就可以通过修改 D100 的数据来改变刀库的容量。执行该指令后，把刀库当前要换

的刀具到换刀点位置的步距数存储到计数器的 COOOl 中，以便刀库旋转位置的步数控

制。通过 R680.0 输出是否为 “1” 来控制刀库是否反转。

67 

格式指定

ROTB 回转体的分度数

(a) 

(b) 

图 2-26 RCTIB 指令格式和应用举例

9. 数据检索指令

1)  DSCH 指令

该指令的功能是在数据表中搜索指定的数据 (2 位或 4 位 BCD 代码）并且输出其表

内号，常用于刀具 T 码的检索。功能指令格式和应用例子如图 2-27 所示。 DSCH 指令

格式如图 2-27(a) 所示，主要包括以下几项：

芦

T77 
叩
g
/
g
曰
虹
妇
：
勹

(a) 

WI 

址

二
＿i

检
8 

F26  | 

1 

D43I| 

2 

检索结果输出地址

OUT-I 

R600.0 

DSCHI 
SUBI7 
I 

Fl.l 

F7.3 

0011 

D420 

F26 

D43l 

(b) 

表内号——勹

数据表

。

23,IIIIIIIIIl 

l 

(c) 

图 2-27 DSCH 指令格式和应用举例

指定处理数据的位数 (BYT) :BIY = 0 ，指定 2 位 B(1) 码； BIY=l ，指定 4 位 B(1) 码。

复位信号 (RST) :RST=O, Wl 不进行复位 (Wl 输出状态不变）； RST=l,Wl 进行复

位 (Wl=O) 。

执行命令 (ACT) :ACT=O ，不执行 DSCH 指令， Wl 不变； ACT=l ，执行 DSCH 指令，

没有检索到数据时， Wl 输出 1 。

数据表数据数：指定数据表的大小。如果数据表的表头为 0 ，数据表的表尾为 n ，则

数据表的个数为 n + 1 。

数据表起始地址：指定数据表的表头地址。

68 

检索数据地址：指定检索数据所在的地址。

检索结果输出地址：把被检索数据所在的表内号输出到该地址。
图 2-27(b) 为加工中心自动换刀的 T 码检索的应用，图中 0011 表示加工中心的刀

库为 12 工位 (12 把刀）， D420 表示数据表的首地址， F26 为程序中的 T 码， D431 用千存
储检索到刀号所在的地址（刀库中所要用刀的刀座号）主7.3 为 T 码选通信号。具体的检

索过程如图 2 — 27(c) 所示。
2)  DSCHB 指令
该指令的功能与氏江1 一样，也是用来检索指定的数据。但与氏汀1 指令有两点不同：

该指令中处理的所有的数据都是二进制形式；数据表的数据数（数据表的容量）用地址指定。

功能指令格式和应用例子如图 2-28 所示。 0001 表示数据的长度为 1 个字节二进

制数据； 0002 表示数据的长度为 2 个字节二进制数据； 0004 表示数据的长度为 4 个字节

二进制数据。

形式指定

DSSUB气34 数数据据表表数起据始地地址址

检索数据地址

检索结果输出地址

(a) 

WI  勹尸D431 our 

I  R600.l 

(b) 

图 2-28 DSCHB 指令格式和应用举例

数据表数据地址：指定数据表容量存储地址。

数据表起始地址：指定数据表的表头地址。

检索数据地址：指定检索数据所在的地址。

检索结果输出地址：把被检索数据所在的表内号输出到该地址。

图 2 — 28(b) 的 D100 用来存储数据表的容量（如果是 10 把刀的刀库，则数据表容量

为 0011) ，数据表的表头是 D420 。如果从数据表中检索到程序所需要的刀号，则把该刀

号所在的地址（表内号）传送到地址 D431 中。如果在数据表中没有检索到程序的刀号，

则 R600.1 为 “1" ，并发出 T 码错误报警信息。

10. 变地址传输指令

1)  XMOV 指令

用该指令可读取数据表的数据或写入数据表的数据，处理的数据为 2 位 BCD 代码或

4 位 BCD 代码。该指令常用千加工中心的随机换刀控制。其指令格式和应用例子如图

2-29(a) 所示。 XMOV 指令主要包括以下几项：

数据的位数指定 (BYT) :BYT= 0 ，数据表中的数据为 2 位 BCD;BTY=l ，数据表中

的数据为 4 位 BCD 。

读取饵入的指定 (R/W):RW=O 表示从数据表读出数据； RW=l 表示向数据表写

入数据。

复位信号 (RST) :RST=O,Wl 不进行复位 (Wl 输出状态不变）； RST= 1,Wl 进行复

位 (Wl=O) 。

69 

执行命令 (ACT): ACT= 0 ，不执行 XMOV 指令， W1 不变； ACT=1 ，执行 XMOV 指

令，没有检索到数据时， W1 输出为 1 。

图 2-29(b) 为数控加工中心的自动换刀 PMC 控制。其中，刀库共有 10 把刀，数据

表头为 D420 （存储主轴当前的刀号），数据表 D421-D430 分别为刀库的刀座号 (1 号～ 10

号刀座）， D431 为程序 T 码所检索到的刀号地址（要换刀的刀座号）， D432 用来存储 D431

地址内的数据（要换刀所在刀座的刀号）。如图 2 — 30 所示，通过 XMOV 指令后，把刀库

中 2 号刀座的 8 号刀输出到 D432 中。

数据表的数据数 1

1 尸广

XMOVI 皿表的起始
SUB18 

地址
输入输出数据

存储地址

表内号存储地址

0011 

D420 

D432 

D43l 

I  R600.l 

(a) 

(b) 

图 2-29 XMOV 指令格式和应用举例

表内号勹

数据表

D4311 

D4321 

2  I 
/ 
R  4 

。

2 

3 

10 

图 2-30 XMOV 指令读取数据表内指定数据的过程

2)  XMOVB 指令

该指令的功能与 XMOV 一样，也是用来读取数据表的数据或写入数据表的数据。但

与 XMOV 指令不同有两点：该指令中处理的所有数据都是二进制形式；数据表的数据数

（数据表的容量）用地址形式指定。功能指令格式和应用例子如图 2-31 所示。读取庄寸

入的指定 (RIW):RW=O 表示从数据表读出数据； RW=l 表示向数据表写入数据。

复位信号 (RST) :RST=O,Wl 不进行复位 (Wl 输出状态不变）； RST=l,Wl 进行复

位 (Wl=O) 。

执行命令 (ACT): ACT= 0 ，不执行 XMOVB 指令， Wl 不变； ACT=l ，执行 XMOVB

指令，没有检索到数据时， Wl 输出 1 。

数据格式指定： 0001 表示数据形式为 1 个字节的二进制数， 0002 表示数据形式为 2

70 

数据格式指定 1 

I  I  ~厂，:--·

I 

| 

0001 

XMOVB  数U据=表的数据数仅W~I  I R909~~1 . .l l  I XMOVB 
SUB35  I 黜表地址的起始

I 

输入输出数据
存储地址

表内号笚者地址 I

(a) 

', 
I  I ' ' · ' I  

勹门

|  OlIT2 

DlOO 

D420 

I  D420 

D431 

(b) 

图 2-31 XMOVB 指令格式和应用举例

个字节的二进制数， 0004 表示数据形式为 4 个字节的二进制数。

数据表的数据数存储地址：指定数据表的大小（以地址形式存储）。

数据表起始地址：指定数据表的表头地址。

输入僧础数据存储地址：当读取数据时，把表内号存储地址的数据输出到该地址中；

当写入数据时，指定数据表中要传输数据的地址。

表内号存储地址：当读取数据时，指定数据从数据表输出的表内号地址；当写入数据

时，指定数据写入数据表的表内号地址。

图 2- 31 (b) 为数控加工中心的自动换刀 PMC 控制。其中，刀库共有 10 把刀，数据

表头为 D420 （存储主轴当前的刀号），数据表 D421-D430 分别为刀库的刀座号 (1 号～ 10

号刀座）， D431 为与主轴交换的刀号地址（要换刀的刀座号）。如图 2-32 所示，通过

XMOVB 指令后，把主轴的 5 号刀 (D420 存储的刀号）写入到 D431 指定数据表的表内号

的地址中，即把主轴刀号写入到刀库中与主轴交换刀具的刀座中（如 2 号刀座中）。

表内号~

数据表

3 

10 

图 2-32 XMOVB 指令用千写入数据到表内指定数据的过程

11. 代码转换指令

1)  COD 指令

该指令是把 2 位 BCD 代码 (0~99) 数据转换成 2 位或 4 位 BCD 代码数据的指令。

具体功能是把 2 位 BCD 代码指定的数据表内号数据 (2 位或 4 位 BCD 代码）输出到转换

数据的输出地址中。一般用于数控机床面板的倍率开关的控制，比如进给倍率、主轴倍率

等的 PMC 控制。功能指令格式和应用例子如图 2-33 所示。

71 

表内号勹。 三阳扭

叫 数数据据格表式的湘容量定

SUB7  转换数据输入

Vj__l 

RIOO  I  2 

| 

邸 I

转换数据输出

错误输出 I  Rlm  I  20,r 

2 

3 

地址

(a) 

I 

8 

80 

(b) 

图 2-33 COD 代码指令格式及应用举例

(a)  COD 功能指令格式； ( b)  COD 指令转换数据的过程。

转换数据表的数据形式指定 (BYT) :BYT= 0 ，将数据表的数据转换为 2 位 BCD 代

码； BYT=l ，将数据表的数据转换为 4 位 BCD 代码。

错误输出复位 (RST) :RST= 0 ，取消复位（输出 Wl 不变）； RST=l ，转换数据错误，

输出 Wl 为 0 （复位）。

执行条件 (ACT) :ACT=O ，不执行 COD 指令； ACT=l ，执行 COD 指令。

数据表的容量：指定转换数据表的范围 (0-99) ，数据表的开头为 0 号，数据表的最后

单元为 n 号，则数据表的大小为 n +l 。

转换数据输入地址：指定转换数据所在数据表的表内号地址，一般可通过机床面板的

开关来设定该地址的内容。转换数据输出地址：将数据表内指定的 2 位或 4 位 BCD 代码

转换成数据输出的地址。错误输出 (Wl) ：在执行 COD 指令时，如果转换输入地址出错

（如转换地址数据超过了数据表的容量），则 Wl 为 1 。

图 2-33(b) 为把指定数据表的 2 位 BCD 代码数据输出到地址 R102 中，其中 RlOO

是由机床面板进给倍率开关指定的倍率值（如 0% 、 10% 、 20% 、 30 ％等）的地址。当进给

倍率开关在 30 ％位置时，通过 COD 指令就把数据表的 20 (2 位 BCD 代码）输出到 Rl02

地址中，然后再把 R102 的数据传送到 CNC 系统中实现进给倍率的控制。

2)  CODB 指令

该指令是把 2 个字节的二进制代码 (0~255) 数据转换成 1 个字节、 2 个字节或 4 个

字节的二进制数据指令。具体功能是把 2 个字节二进制数指定的数据表内号数据 (1 个

字节、 2 个字节或 4 个字节的二进制数据）输出到转换数据的输出地址中。一般用于数控

机床面板的倍率开关的控制，比如进给倍率、主轴倍率等的 PMC 控制。指令格式如图

2-34 所示。

错误输出复位 (RST) :RST= 0 ，取消复位（输出 Wl 不变）； RST=l ，转换数据错误，

输出 Wl 为 0 （复位）。

执行条件 (ACT) :ACT= 0 ，不执行 CODB 指令； ACT=l ，执行 CODB 指令。

数据格式指定：指定转换数据表中二进制数据的字节数， 0001 为 1 个字节二进制数；

0002 为 2 个字节二进制数； 0004 为 4 个字节二进制数。

数据表的容量：指定转换数据表的范围 (0-255) ，数据表的开头为 0 号，数据表的最

72 

数据格式指定

数据表的容量
SCOUBD2B7|  转换数据输入

地址

|  错误输出

转换数据输出

地址

图 2-34 OODB 代码指令格式

后单元为 n 号，则数据表的大小为 n +1 。

转换数据输入地址：指定转换数据所在数据表的表内号地址，一般可通过机床面板的

开关来设定该地址的内容。

转换数据输出地址：指定数据表内的 1 个字节、 2 个字节或 4 个字节的二进制数据转

换后的输出地址。

错误输出 (Wl) ：在执行 CODB 指令时，如果转换输入地址出错（如转换地址数据超过

了数据表的容量），则 W1 为 1 。

图 2 — 35 为某数控机床主轴倍率 (50% - 200% ）的 PMC 控制的梯形图，其中
X1005. 0- X1005. 3 是机床面板主轴倍率开关的输入信号 (4 位二进制代码格式输入控

制）， G30 为 FANUCOi 系统的主轴倍率信号（二进制形式指定）。

R526.0 

R526.l 

R5262 

R527.0 

RST 

勹

1.1 

I 0002 
I CODB I 00016 
SUB27 

ACT I 

1 二26

曰 I

R叩 l.l

000 
003 
006 
009 
012 
015 

00050 
00080 
00110 
00140 
00170 
00200 

00060 
00090 
00120 
00150 
00180 

00070 
00100 
00130 
00160 
00190 

图 2-35 数控机床主轴倍率的 PMC 控制 (FANUCOi 系统）

12. 信息显示指令

信息显示指令 (DISPB) 用于在系统显示装置 (CRT 或 LCD) 上显示外部信息，机床厂

73 

家根据机床的具体工作情况编制机床报警号及信息显示。 DISPB 指令格式如图 2 — 36

所示。

DISPB 
SUB41 

显示信息数

图 2-36 DISPB 指令格式

信息显示条件：当 ACT=O 时系统不显示任何信息；当 ACT=l 时，依据各信息显示
请求地址位（如 AO~A24) 的状态，显示信息数据表中设定的信息，每条信息最多为 255
个字符，在此范围内编制信息。

显示信息数：设定显示信息的个数。 FANUCOiA 系统最多可编制 200 条信息。
FANUCOiB/0iC 系统最多可编制 4000 条信息（系统 PMC 类型为 PMC-SB7 时）。
信息显示功能指令的编制方法如下。

(1) 编制信息显示请求地址。从信息继电器地址 AO~A24 （共 200 位）中编制信息显
示请求位，每位都对应一条信息。如果要在系统显示装置上显示某一条信息，将对应的信
息请求位置为 “1" ，如果将该信息请求位置为 “0" ，则清除相应的显示信息。

(2) 编制信息数据表。信息数据表中每条信息数据内容包括信息号和该信息号的信
息两部分，信息号为 1000~1999 时，在系统报警画面显示信息号和信息数据；信息号为
2000~2999 时，在系统操作信息画面只显示信息数据而不显示信息号。信息数据表与
PMC 梯形图一起存储到系统的 FROM 中， FANUCOiA 系统需要插入梯形图编辑卡才能
查看信息数据表的内容，而 FANUC OiB/OiC 系统不需要梯形图编辑卡就可以在 PMC 画
面查看信息数据表的内面通过实例介绍数控机床厂家报警信息的编制。

图 2 — 37 为某数控机床厂家报警信息显示的 PMC 梯形图，表 2 — 5 为该机床报警信

DISPB 
SUB41 

0004 

Xl008.4 

AO.I 

ALMI 
AO.2 

ALM2 
A0.3 

ALM3 

A0.4 

ALM4 

F
O
的
s
卜
s
C
l
H
L
A
l F 

l 

兀

RST 

言
詈
T
F
A
O
J

ALM3 
XIOOl.4 

OLOW 

74 

图 2-37 数控机床报警信息显示 PMC 控制梯形图

息数据。图 2-37 中， X1008.4 为机床面板的急停开关的常闭点， XlOOl.2 为机床的防护
门开关， F9.4 为系统程序结束指令 (M30),F9.5 为系统结束指令 (M02),F7.3 为系统 T
码选通信号， F64.0 为系统刀具寿命管理信号， Fl.1 为系统复位信号， XlOOl.4 为机床润

滑系统的液面检测开关。

信息号

AO.O 

A0.1 

A0.2 

A0.3 

表 2-5 机床报警信息表

信息数据

1001  EMERGENCY  SID Pl 

1002  DCX)R  NEED  CL<汜E!

1003  TOOL LIFE EXGAUSf  ! 

2000  PLEASE CHECK GEAR  LUBE OIL LEVEL  ! 

2.3  数控机床 PMC 控制应用举例

2.3.1  数控机床工作状态开关 PMC 控制

1 ．系统的工作状态

多数 FANUC 数控系统控制的数控机床操作功能键盘都是由机床制造厂家设计制造

（表 2-6) ，常用工作状态开关的操作面板用波段开关来选择，如图 2-38 所示，选用的是

3 刀 8 掷开关，占用 PMC 的输入接口的 X2.5 、 X2.4 、 X2.3 分别对应 000-110 ；也有用按

键来进行功能选择，如图 2-39 所示，程序中占用 PMC 的输入接口的地址为 X0004.1-

X0004.7 。

序号

工作状态

功

能

表 2-6 系统的工作状态

1 

编辑状态 (EDIT)

改删除和字的替换。编辑操作还包括删除整个程序和自动插入顺序号。扩展程

在此状态下，编辑存储到 CNC 内存中的加工程序文件。编辑操作包括插入、修

序编辑功能包括复制、移动和程序的合并

又称自动运行状态 (AUTO) 。在此状态下，系统运行的加工程序为系统存储器内

的程序。当选择了这些程序中的一个并按下机床操作面板上的循环启动按钮后，

2  存储运行状态 (MEM) 启动自动运行，并且循环起动灯点亮。存储器运行在自动运行中，当机床操作面

板上的进给暂停按钮被按下后，自动运行被临时中止。当再次按下循环启动按钮

3 

手动数据输入状态

(MDI) 

后，自动运行又重新进行

在此状态下，通过 MDI 面板可以编制最多 10 行的程序并被执行，程序格式和通

常程序一样。 MDI 运行适用于简单的测试操作（在此状态下还可以进行系统参数

和各种补偿值的修改和设定）

在此状态下，刀具可以通过旋转机床操作面板上的手摇脉冲发生器微量移动。使

用手轮进给轴选择开关选择要移动的轴。手摇脉冲发生器旋转一个刻度时刀具

4 

手轮进给状态 (HND) 移动的最小距离与最小输入增量相等。手摇脉冲发生器旋转一个刻度时刀具移

动的距离可以放大 1 倍、 10 倍、 100 倍或 1000 倍的最小输人增鼠（通过手轮倍率

开关选择）

75 

（续）

序号

工作状态

功

能

5 

手动连续进给状态
(JOG) 

在此状态下，持续按下操作面板上的进给轴及其方向选择开关，会使刀具沿着轴
的所选方向连续移动。手动连续进给最大速度由系统参数设定，进给速度可以通
过倍率开关进行调整。按下快速移动开关会使刀具快速移动（由系统参数设定），
而不管 JOG 倍率开关的位置，该功能叫做手动快速移动

6  机床返回参考点 (REF)

即确定机床零点状态 (ZRN) 。在此状态下，可以实现手动返回机床参考点的操
作。通过返回机床参考点操作， CNC 系统确定机床零点的位置

7 

在此状态下，可以通过阅读机（加工纸带程序）或 RS-232 通信口与计算机进行通
DNC 运行状态 (RMT) 信，实现数控机床的在线加工。 DNC 加工时，系统运行的程序是系统缓冲区的程
序，不占系统的内存空间，是目前数控机床的基本配置

0 

回零

0 

编辑

0 

0 

MDI 

0 

0 

DNC 

三飞

点动

手脉

( a ) ( b )  

图 2-38 数控机床工作状态开关（机床操作面板）

(a) 机床厂家操作面板； （ b) 系统标准机床操作面板。

过 1-----l I  R200.7 
DNC 
酗 II­
ZRN 

R200.7 

R200.7 

Z
R

N三IS-§-~ 

DNC 
状态

回零状态

自动运
行灯

编辑灯

鄙）------j MDI 灯

旦卜DNC.M''DNO 

虑 J-i DNC 灯

S2  I 

F4.5,,  043.7 
一一—lI
ZRN.M··  ZRN 

l 

昙尸回零灯

S3 

HND.M 

轰 J--i 点动灯

气HND.L 尸手轮灯

三硐

忐
严

g
骂

图 2-39 系统工作状态的 PMC 控制梯形图 (FANUCOi 系统）

76 

2. 系统工作状态信号
系统的工作状态由系统的 PMC 信号通过梯形图指定 CNC 的状态。系统工作状态

与信号的组合见表 2-7 ，表中的 “1” 为信号接通， “0” 为信号断开。

表 2-7 系统工作状态与系统的组合

系统及系统状态显示

ZRN 

DNCl 

MD4 

MD2 

MDl 

工作状态

FS  16/18 戊 1/0i

FS 16i/18il21i 

FSOC/0D 

G120. 7 

G127.5 

G122.2 

G122.1 

G122.0 

G43.7 

G43.7 

G43.2 

G43.1 

G43.0 

程序编辑

自动运行

手动数据输入

手轮进给

手动连续进给

返回参考点

DNC 运行

EDIT 

MEM 

MDI 

HND 

JOG 

REF 

RMT 

EDIT 

AUTO 

MDI 

HND 

J仅；

ZRN 

RMT 

。

。

。

。

。

1 

。

。

。

。

。

。

。

1 

。

。

。

1 

1 

1 

。

1 

。

。

。

。

。

。

1 

1 

。

。

1 

1 

1 

下面以 FANUC 16/18 心 1/0iA 系统或 FANUC 16i/18i/21i/OiB/OiC 系统为例，且机
床操作面板采用标准操作面板，设计 PMC 梯形图，如图 2-39 所示。状态开关信号的输
入倩础地址是由系统 I/0 Link 模块进行分配的。

编辑状态：输入信号（面板操作开关）地址为 X4.1 ，输出信号（指示灯）地址为 Y4.1 。
存储运行（又称自动运行）：输入信号（面板操作开关）地址为 X4.0 ，输出信号（指示灯）地

址为 Y4.0 。

远程运行（又称 DNC) ：输入信号（面板操作开关）地址为 X4.3 ，输出信号地址为

Y4.3 。

手轮进给（又称手摇脉冲进给）：输入信号（面板操作开关）地址为 X6.7 ，输出信号（指

示灯）地址为 Y4.0 。

手动数据输入：输入信号（面板操作开关）地址为 X4.2 ，输出信号（指示灯）地址为

Y4.2 。

手动连续进给（又称点动进给）：输入信号（面板操作开关）地址为 X6.5 ，输出信号（指

示灯）地址为 Y6.5 。

返回参考点（又称回零）：输人信号（面板操作开关）地址为 X6.4 ，输出信号（指示灯）

地址为 Y6.4 。

信号 F3.6 表示系统处千编辑状态；信号 F3.5 表示系统处千自动运行状态；信号
F3.3 表示系统处于手动数据输人状态；信号 F3.4 表示系统处于 DNC 状态；信号 F3.2 表
示系统处于手动连续进给状态；信号 F3.1 表示系统处于手轮控制状态；信号 F4.5 表示
系统处于返回参考点状态。

2.3.2  数控机床加工程序功能开关 PMC 控制

1. 数控机床加工程序功能开关的用途及标准操作面板
数控机床操作面板上的加工程序功能开关如图 2-40 所示。

77 

0 

。

0 

已 丿 。

程序段跳过
0 

程序单段

。

- -

程序再启

。

0 

机床锁住

程序选择停

。

3 

程序空运行

0 

[Q] 

[I]  三］

进给暂停

循环启动

辅助功能锁住

图 2-40 数控机床操作面板的加工程序功能开关（标准面板）

1) 机床锁住

在自动运行状态下，按下机床操作面板上的机床锁住开关，执行循环启动时，刀具不

移动，但是显示器上每个轴运动的位移在变化，就像刀具在运动一样。系统有两种类型的

机床锁住：所有轴的锁住（停止沿所有轴的运动）和指定轴的锁住（如立式数控铣床或立式

加工中心是 Z 轴锁住）。在机床锁住的状态下，可以执行 M 、 S 、 T 和 B 指令。 FANUC

OCIOD 系统的机床所有轴锁住信号 (MLK) 为 G117.1 ，机床每个轴锁住信号 (MLKl~

MLK4) 为 G128.0 、 G128.1 、 G128.2 、 G128.3 。机床所有轴锁住状态信号 (M邓JK) 为

F176.6 。 FANUCOi 系统的机床所有轴锁住信号 (MLK) 为 G44.l ，机床每个轴锁住信号

(MLK1-MLK4) 为 G108.0 、 G108.1 、 G108.2 、 G108.3 。机床所有轴锁住状态信号 (MM­

LK) 为 F4.l 。

2) 程序辅助功能的锁住

程序运行时，禁止执行 M 、 S 、 T 指令。一般与机床锁住功能一起使用，用千检查程序

是否编制正确。 MOO 、 M01,M02 、 M30 、 M98 和 M99 指令即使在辅助功能锁住的状态下
也能执行。 FANUCOC/0D 系统的辅助功能锁住信号 (AFL) 为 G103. 7, FANUC Oi 系统

的辅助功能锁住信号 (AFL) 为 G5.6 。

3) 程序的空运转

在自动运行状态下，按下机床操作面板上的空运行开关，刀具按参数（各轴快移速度）

中指定的速度移动，而与程序中指令的进给速度无关。快速移动倍率开关也可以用来更

改机床的移动速度。该功能用来在机床不装工件时检查刀具的运动，或通过坐标值的偏

移功能（车床是 X 轴坐标值的偏移、数控立式铣床或立式加工中心是 Z 轴坐标值的偏移）

来检查刀具的运动。 FANUCOC/0D 系统的程序空运转信号 (DRN) 为 Gl18.7 ，程序空运

转状态信号 (MDRN) 为 F176.7 。 FANUCOi 系统的程序空运转信号 (DRN) 为 G46.7 ，程

序空运转状态信号 (MDRN) 为 F2.7 。

4) 程序单段运行

按下单程序段方式开关进入单程序段工作方式。在单程序段方式中按下循环启动按钮

78 

后，刀具在执行完一段程序后停止。通过单段方式一段一段地执行程序，可仔细检查程序。

FANUCOC/0D 系统的程序单段信号 (SBK) 为 G116.1 ，程序单段状态信号 (MSBK)
为 F176.5 。 FANUCOi 系统的程序单段信号 (SBK) 为 G46.1 ，程序单段状态信号 (MS­

BK) 为 F4.3 。

5) 程序再启运行
该功能用于指定刀具断裂或者公休后重新启动程序时，将要启动程序段的顺序号，从
该段程序重新启动机床，也可用于高速程序检查。程序的重新启动有两种方法： P 型和 Q
型（由系统参数设定）。 P 型操作可以在任意地方重新启动，这种方法用千刀具破裂时的
重新启动； Q 型操作时，重新启动之前刀具必须移动到程序的起始点（加工起始点）。
FANUCOC/0D 系统的程序再启动信号 (SRN) 为 G130.0 ，程序再启动状态信号(SRN­
MV) 为 F188.4 。 FANUCOi 系统的程序再启动信号 (SRN) 为 G6.0 ，程序再启动状态信

号 (SRNMV) 为 F2.4 。

6) 程序段跳过

在自动运行状态下，当操作面板上的程序段选择跳过开关接通时，有斜杠(/)的程序
段将被忽略。 FANUCOC/0D 系统的程序段跳过信号 (BDTl) 为 Gl16.0 ，程序段跳过状态
信号 (MBDTl) 为 F176.4 。 FANUCOi 系统的程序段跳过信号 (BDTl) 为 G44.0 ，程序段跳

过状态信号 (MBDTl) 为 F4.0 。

7) 程序选择停

在自动运行时，当加工程序执行到 MOl 指令的程序段后也会停止。这个代码仅在操

作面板上的选择停止开关处于通的状态时有效。

8) 程序循环启动运行

在存储器方式 (MEM) 、 DNC 运行方式 (RMT) 或手动数据输入方式 (MDI) 下，若按下

循环启动开关，则 CNC 进入自动运行状态并开始运行，同时机床上的循环启动灯点亮。
系统循环启动信号为下降沿触发（信号 ST 从 1 变 0) 。 FANUC OC/0D 系统的循环启动
信为 G120.2 ，循环启动状态信号 (STL) 为 F148.5 。 FANUC 16/18 戊 1/0iA 系统和
FANUCOi 系统的循环启动信号 (ST) 为 G7.2 ，循环启动状态信号 (STL) 为 F0.5 。

9) 程序进给暂停

自动运行期间按下进给暂停开关时， CNC 进入暂停状态并且停止运行，同时，循环启
动灯灭。如再重新启动自动运行时，需按下循环启动按钮开关。 FANUCOC/0D 系统的
进给暂停信号 (*SP) 为 G121.5 ，进给暂停状态信号 (SPL) 为 F148.4 。 FANUCOi 系统的

进给暂停信号 (*SP) 为 G8.5 ，进给暂停状态信号 (SPL) 为 F0.4 。

2. 数控机床加工程序功能开关的 PMC 控制

数控机床加工程序功能开关的 PMC 控制如图 2-41 所示。
输入倩础信号地址通过系统的 1/0 Link 模块进行地址的分配。程序循环启动按钮
的输入地址为 X6.1 ，程序循环启动指示灯的输出地址为 Y6.1 。程序进给保持按钮的输
入地址为 X6.0 ，程序进给保持指示灯的输出地址为 Y6.0 。机床锁住按钮的输入地址为
X5.1 ，机床锁住指示灯的输出地址为 Y5.1 。程序单段按钮的输入地址为 X4.4 ，程序单段
指示灯的输出地址为 Y4.4 。程序段跳过按钮的输入地址为 X4.5 ，程序段跳过指示灯的

输出地址为 Y4.5 。

79 

X61 
廿－
F0.5 

X60 

F0.4 

X5.l 

X5.1 

酗．0

X4.4 
4 
X4.4 

寸才
R200.2 

~I 
X45 
-| 
X45 

R200.4 
I 

R初．4

循环

G72 

|  启动 I  X5.0 

R201.2 

G8.5 

| 

| 

飞、＾＾ I

1 

进给
保持

Y6.0 

机床
锁住

R201.1 
| 
X5.2 

\.JO,U 

片
邸1.4

R?rYl1 

X5.3 

R2001 

十卜—」
G牛 1

R初．3

G46.l 

仆—」 : 

片
R2005 

嚣

R2015 

GS.6 

R201.5 

G5.6 

片

酗．5

| 

|  X4.6 

/Y 4 5  f程序 叩6

R201.0 

R2006 

R201.0 

了』

G牡．0

邸 11

夕＾ 霖

Y5.0 
。
C} 

邸1.3

R五）］．4

赞

运转

骂

锁住

Y5.2 
。
0 

邸1.5

邸1.6

Y5.3 
。

R初．7

二Y4.6 盓停

图 2-41 数控机床加工程序功能开关的 PMC 控制梯形图 (FANUCOi 系统）

程序再启按钮的输入地址为 X5.0 ，程序再启指示灯的输出地址为 Y5.0 。程序空运
行按钮的输入地址为 X5.2 ，程序空运行指示灯的输出地址为 Y5.2 。程序辅助功能锁住

按钮的输入地址为 XS.3 ，程序辅助功能锁住指示灯的输出地址为 Y5.3 。程序选择停按

钮的输入地址为 X4.6 ，程序选择停指示灯的输出地址为 Y4.6 。

循环启动按钮开关按下 (X6.1 为 1) 时，系统循环启动信号 G7.2 为 1 ，当松开循环启

动按钮 (X6.0 为 0) 时，系统循环启动信号由 1 变成 0 （信号的下降沿），系统执行自动加
工，同时系统的循环起动状态信号 F0.5 为 1 。程序自动运行中，按下进给暂停按钮 (X6.0
常闭点断开），系统进给暂停信号 G8.5 为 0 ，程序停止运行，同时系统进给暂停状态信号
F0.4 为 1 ，当系统暂停状态信号为 1 时，系统的循环启动状态信号为 0 。机床锁住、程序
单段、程序段跳过、程序再启、程序空运行、辅助功能锁住及程序选择停功能开关的 PMC
控制逻辑关系是相同的，只是信号的地址不同。

下面以机床锁住功能开关为例，分析程序功能开关的 PMC 具体控制过程。当机床

80 

锁住功能开关 X5.1 按下，通过继电器 R200.0 和 R200.l 获得一个扫描周期的脉冲信号

(R200.0) ，继电器 R200.0 的常开点闭合，机床锁住信号 G44.l 和机床锁住状态指示灯

Y5.1 为 1 并自保（松开机床锁住按钮时信号维持 1 不变）。当再次按下机床锁住按钮时，

通过继电器 R200.0 的常闭点拉断机床锁住状态信号 G44.l 的自保回路，机床解除轴锁

住状态，松开按钮后，机床锁住状态信号 G44.l 保持不变，仍然维持 0 状态。

2.3.3  数控机床倍率开关 PMC 控制

1 ．数控机床面板上倍率开关的功能及信号地址

l) 进给速度倍率信号

通过进给倍率开关选择百分比（％）来增加或减少编程进给速度。一般用于程序检

测。例如，当在程序中指定的进给速度为 lOOmm/min 时，将倍率设定为 50% ，使机床以

50mm/min 的速度移动。切削进给速度倍率信号共有 8 个二进制编码信号（倍率值在范

围 0%-254 ％内以 1 ％为单位进行选择），进给倍率信号为负逻辑信号，即位为 0 有效。

FANUCOi 系统进给倍率信号地址为 G12 。

2) 主轴倍率信号

主轴速度倍率信号使加工程序中指令的主轴速度 S 值乘以 0%-254 ％的倍率。例

如，当在程序中指定主轴速度为 lOOOr/min 时，将主轴倍率开关选择在 50% ，使主轴的实

际转速为 500r/min。但在进行攻丝循环加工或螺纹切削时，主轴倍率无效（强制为

100% ）。主轴倍率值信号为 8 位二进制信号，倍率单位为 1%,FANUC Oi 系统主轴倍率

信号的地址为 G30 。

3) 快移速度倍率信号

数控机床无论自动运行快移速度还是手动快移速度都是在系统参数（如 FANUCOi

系统参数为 1420) 中设定各轴的快移速度（倍率 100 ％的速度），而无需在加工程序中指

定。自动运行中的快速移动包括所有的快速移动，如固定循环定位、自动参考位置返回

等，而不仅仅对移动指令 GOO 有效。手动快速移动也包含了参考位置返回中的快速移

动。通过快速移动倍率信号可为快速移动速度施加倍率，快速移动速度倍率为 25% 、

50 ％和 100% ，其中 FO 由系统参数（如 FANUCOi 系统参数为 1421) 设定各轴固定进给速

度。 FANUCOi 系统快移速度倍率信号地址为 G14.0(ROV1) 、 G14.l(ROV2) 。图 2-42

90  JOO  110 

80 

70 泛三／ 120

504030 

130 

140 
150 
160 

170 

180 

70 

120130 

100 勹FO 

。

(a) 

50 

150 

(b) 

(c) 

图 2-42 数控机床倍率开关

(a) 进给速度倍率开关； （ b ）主轴速度倍率开关； （ c）快移速度倍率开关。

81 

为某数控机床机床操作面板上的倍率开关图。

2. 倍率开关的 PMC 控制
机床的进给倍率开关不仅控制自动运行 (MEM 、 MDI 、DNC) 的进给速度的倍率（程序
中进给速度的百分比），而且同时控制点动连续进给 (J仅；）的速度（手动连续进给速度，单
位为 mm/min) 。 PMC 控制梯形图如图 2 — 43 所示。

勹3

MDF3I . .M 4 

曰

DNCM 

厂
口32

MEMM 

JOG.M 
勹11
RST 

F3.3 
勹 I

MEM.M 

勹MDLM- 
卢MEM觅4M 

FU 
厂[

二f

JOGM 

ACT 

MOVE 
SUB8 

0001 

llll 

X40 

RIOO 

RST 

IGODB 

SUB27 

ACT 

I 

000 
003 
006 
009 
012 
015 
018 

00000 
00030 
00060 
00090 
00120 
00150 
00180 

ACT  ISt总

0001 

I 

A1.0 

0021 

RIOO 

R102 

00010 
00040 
00070 
00100 
00130 
00160 
00190 

0001 

R102 

Gl2 

00020 
00050 
00080 
00110 
00140 
00170 
00200 

RST 

ACT 

CODB 
SUB27 

0001 
0021 
RIOO 
Rl04 

嚣 00000 
00144 
006 
0骂1040 

20000 
00400 

詈

018 

00074 
00200 
00040 
00280 
0001540 4的 00740. 
02000 
04000 
05400 
14知
210400 
8000 
40000 

勹JOG.M 

ACT  I SNUB6OT 2 

0001 
R104 
GlO 

图 2-43 数控机床进给速度倍率和点动速度的 PMC 控制梯形图

82 

倍率开关的输入信号地址为 X40.0 、 X40.1 、 X40.2 、 X40.3 、 X40.4 （以二进制代码形

式组成 21 种状态），通过逻辑与传输指令 MOVE 发送到继电器 RlOO 中。 F3.2 、 F3.3 、

F3.4 、 F3.5 分别为系统的点动连续进给、手动数据输入 (MD队在线加工 (DNC) 及自动运

行 (MEM) 状态信号，该类信号作为功能指令的选通条件。通过代码转换指令 CODB 把开

关位置指定表格的数据转换成二进制数值分别传送到继电器 R102 （进给速度倍率）、

R104 （点动连续进给速度）中。由千系统的进给倍率和点动进给速度信号（二进制代码）

为负逻辑控制，所以再通过逻辑非指令 NOT 分别把继电器 R102 、 R104 数值转换后输送

到系统进给倍率信号 G12 和系统点动连续进给速度信号 GlO 中，从而完成系统 PMC

控制。

2.3.4  数控机床润滑系统 PMC 控制

数控机床润滑系统主要包括机床导轨、传动齿轮、滚珠丝杠及主轴箱等润滑，其形式

有电动间歇润滑泵和定量式集中润滑等，其中电动间歇润滑泵用得较多，其润滑时间和每

次泵油量可根据要求进行调整或用参数设定。

1. 数控机床润滑系统的电气控制要求

(1) 首次开机时，自动润滑 15s(2. 5s 打油、 2.5s 关闭）。

(2) 机床运行时，达到润滑间隔固定时间（如 30min) 自动润滑一次，而且润滑间隔时

间用户可以进行调整（通过 PMC 参数）。

(3) 加工过程中，操作者根据实际需要还可以进行手动润滑（通过机床操作面板的润

滑手动开关控制）。

(4) 润滑泵电动机具有过载保护，当出现过载时，系统要有相应的报警信息。

(5) 润滑油箱油面低于极限时，系统要有报警提示（此时机床可以运行）。

｀芒的三飞图助和气二三；口短女；勹五霍芦芦

+24VE 

润滑泵电动机

图 2-44 润滑系统电气控制线路

+24V 
ov 

83 

PMC 控制输出继电器 KA6 ，继电器 KA6 常开控制接触器 KM6 线圈，从而实现机床润滑

自动控制。

系统 PMC 输入喻出信号中， Q们为空气断路器的常开点，作为系统润滑泵过载与

短路保护的输入信号； SL 为润滑系统油面检测开关（润滑油面下限到位开关），作为系统

润滑油过低报警提示（需要添加润滑油）的输入信号； SB5 为数控机床面板上的手动润滑

开关，作为系统手动润滑的输入信号； KAl 为机床就绪继电器（如机床液压泵控制继电器）

的常开点，作为系统机床就绪的输入信号； HL 为机床润滑报警灯的输出信号。润滑系统

PMC 控制梯形图如图 2-45 所示。机床自动润滑时间和每次润滑的间歇时间由于不需
要用户修改，所以系统 PMC 采用固定时间定时器 12 、 13 来控制每次润滑的间歇时间

(2.5s 打油、 2.5s 关闭），固定定时器 14 用来控制自动运行时的润滑时间 (15s) ，固定定时

器 15 用来控制机床首次开机的润滑时间 (15s) 。自动润滑的间隔时间根据机床实际加工

情况不同，用户有时需要进行调整，所以自动润滑的间隔时间控制采用可变定时器，且采

用两个可变定时器 (TMROl 和 TMR02) 的串联，来扩大定时的时间，用户可通过 PMC 参

TMRB  I  12 

SUB24 

2500 

呻 13 
SUB24 

2500 

TMRB 
SUB24 

14 
15000 

1MR  I 

SUB3 

01 

s诬lJB3  1 

02 

TMRB  I  15 

SUB24 

15000 

R5262 

R526.l 

R526.5 

R526.3 

R526.4 

Xl6.7 

润滑过程的
间歇时间

运行时的
润滑时间

运行的润滑
间隔时间 1

运行的润滑
间隔时间 2

首次开机
润滑时间

嚣泵

R526.6 

Xl6.7 

X0.5 

X0.6 

X0.7 

R526.l 

润滑油不足
报警灯

# 1007 润滑泵
短路或过载

Y0.6 

A0.7 

84 

图 2-45 润滑系统 PMC 控制梯形图

数界面的定时器界面进行设定或修改，来改变自动润滑的间隔时间。

当机床首次开机时，机床准备就绪信号 Xl6.7 为 1 ，启动机床润滑泵电动机 (Y0.5 输
出），同时启动固定定时器 15 ，机床自动润滑 15s(2.5s 打油、 2.5s 关闭）后，固定定时器 15
的延时断开常闭点 R526.6 切断自动润滑回路，机床停止润滑，从而完成机床首次开机的
自动润滑操作。机床运行过程中，通过可变定时器 TMR.01 和 TMR02 设定的延时时间
后，机床自动润滑一次，润滑的时间由固定定时器 14 设定 (15s) ，通过固定定时器 14 的延

时断开常闭点 R526.3 切断运行润滑控制回路，从而完成一次机床运行时润滑的自动控

制，机床周而复始地进行润滑。当润滑系统出现过载或短路故障时，通过输入信号 X0.7

切断润滑泵输出信号 Y0.5 ，并发出润滑系统报警信息(# 1007 ：润滑系统故障）。

当润滑系统的油面下降到极限位置时，机床润滑系统报警灯闪亮，提示操作者需加润

滑油。

2.3.5  数控车床自动换刀 PMC 控制

数控车床应用最多的是转塔式刀架（又称电动刀塔）。转塔式刀架是用转塔头刀座安

装或夹持各种不同用途的刀具，通过转塔的旋转分度定位来实现机床的换刀动作。下面

以常州电动刀架 BW区0-1 为例，分析数控车床自动换刀的 PMC 控制过程（系统采用

FANUCOiTB) 。该电动刀塔为 6 工位，采用蜗杆蜗轮传动，定位销进行粗定位，端齿啃合

进行精定位。通过电动机正转实现松开刀塔并进行分度，电动机反转进行锁紧并定位，电

动机的正反转由接触器 KM3 、 KM4 控制，刀塔的松开和锁紧靠微动行程开关 SQ 进行检

测。电动刀塔的分度由刀塔主轴后端安装的角度编码器进行检测和控制。具体控制电路

如图 2-46 所示。

AC380V 

I  I  I 

系统 I/0 模块
I 

ACllOV TT 

+24E 
ov 
X2.l 
X2.2 
X2.3 
X2.6 
24E 
X2.7 

X2.5 
X2.4 

Y2.4 

k沁 KM4

ov 

图 2-46 数控车床电动刀塔电气控制线路

对 BW卫0-1 电动刀塔 PMC 控制的要求如下。机床接收到换刀指令（程序的 T 码

指令）后，转塔电动机正转进行松开并分度控制，分度过程中要有转位时间的检测，检测时

间设定为 10s ，每次分度时间超过 10s ，系统就发出转塔分度故障报警。转塔进行分度并

85 

到位后，通过电动机反转进行转塔的锁紧和定位控制，为了防止反转时间过长导致电动机

过热，要求转塔电动机反转控制时间不得超过 0.7s ，转塔电动机正反转控制过程中，还要

求有正转停止延时时间控制和反转开始的延时，自动换刀指令执行后，要进行转塔锁紧到

位信号的检测，只有检测到该信号，才能完成 T 码功能结束。自动换刀控制过程中，要求

有电动机过载、短路及温度过高保护，并有相应的报警信息显示。自动运行中，程序的 T

码错误 (T=O 或 T~7) 时相应有报警信息显示。

图 2 — 47 为怒CK-20 数控车床电动刀塔 PMC 控制梯形图。图 2-47 中的 X2.1 、

X2.2 、 X2.3 为角度编码器的实际刀号检测输入信号地址， X2.6 为角度编码器位置选通

输入信号（每次转到位就接通）地址，通过常数定义指令 (NUME) 把转塔当前实际位置的

刀号写入到地址 D302 中。通过判别一致指令（ COIN) 把当前位置的刀号 (D302 中的数
值）与程序的 T 码选刀刀号 (F26 中的数值）进行判别，如果两个数值相同，则 T 码辅助功
能结束（说明程序要的刀号与当前实际刀号一致）；如果两个数值不相同，则进行转塔的分

度控制。通过判别指令（ COIN) 和比较指令 (COMP) 与数字 0 和数字 7 进行比较，如果程

序指令的 T 码为 0 或大于等千 7 时，系统要有 T 码错误报警信息显示，同时停止转塔分

度指令的输出。当程序指令的 T 码与转塔实际刀号不一致时，系统发出转塔分度指令

（继电器 R0.3 为 1) ，转塔电动机正转（输入继电器 Y2.4 为 1) ，通过蜗杆蜗轮传动松开锁

紧凸轮，凸轮带动刀盘转位，同时角度编码器发出转位信号 (X2.l 、 X2.2 、 X2.3) ，当转塔

转到换刀位置，系统判别一致指令（ COIN) 信号 RO.O 为 1 ，发出转塔分度到位信号（继电

器 R0.4 为 1) ，转塔电动机经过定时器 01 的延时（定时器 TMROl 为 50ms) 后，切断转塔

电动机正转输出信号 Y2.4 ，同时接通反转运行开始定时器 02 ，经过延时后，系统发出转

塔电动机反转输出信号 Y2.5 ，电动机开始反转，定位销进行粗定位、端齿盘啃合进行精定

位，锁紧凸轮进行锁紧并发出转塔锁紧到位信号 (X2.5) ，经过反转停止延时定时器 03 的

延时（定时器 TMR03 设定为 0.6s) 后，发出电动机反转停止信号 (R0.7 为 1) ，切断转塔电

动机反转运转输出信号 Y2.5 。通过转塔锁紧到位信号 X2.5 接通 T 辅助功能完成指令

(Rl.1 为 1) ，继电器 R0.1 为 1 后，使系统辅助功能结束指令信号 G4.3 为 1 切断转塔分

三了二气
勹0.4二勹

T=O H  1-----T----i I-

R0.4 

Y2.4 

Y2.5 

R0.3 

R0.5 

R0.3 

RO.O 

I 

螂
睬
晌
器
衄
电
机
正
转
停
止
延
时

电
停
延
反

机
止
时
转

1>7 曰曰

R0.4  R0.3 

品

曰

R0.3  Y2.4 

R0.2 

86 

R叨 1.0

INUMEI 

1 

| 

仆即3－ 邸H5 主|主了耜: 

I rot|

函lO 尸尸 H 四卫

~11 1.0 

INUMEI 

3 

尸 I

Rl.O 

R0.3 
I __ I T03 曰X2.4 

反转
停止
延时

转塔

I岛1 飞夕一巨
器

R62 

I

廿
X2.7 

———扦－

函］．0 曰尸宁 H 叫飞R62卫H 曰Fl.I  二厂霆

+ F7.3 + RO.O  ROJ 

R909~ 曰』芦尸厂厂勹尸R1勹厂—~日

R9091.0 

曰曰

F7.0 

F7.3 

F7.0 

T06 曰 IR6.l 

R6.2 

哼

报？

Al.I 

Al.2 

图 2 — 47 SSCK-20 数控车床电动刀塔 PMC 控制梯形图

度指令 R0.3 ，从而完成换刀的自动控制。在换刀整个过程中，当换刀过程超时

(TMR04 入电动机温升过高 (X2.4) 及电动机过载／短路保护断路器 QF4(X2.7) 信号动作

时，系统立即停止换刀动作并发出系统换刀故障信息。

2.3.6  刀库自动选刀控制

在具有自动换刀的数控机床上，刀库选刀控制 (T 指令）和刀具交换控制 (M06 指令）

是 PLC 控制的重要部分。目前刀库选刀一般有两种控制方式：一是刀套编码方式的固定

选刀，二是随机选刀。

1. 刀套编码方式

刀套编码方式是对刀库中的刀套进行编码，并将与刀套编码相对应的刀具一一放入

指定的刀套中，然后根据刀套的编码选取刀具。图 2-48 所示为采用刀套编码的选刀控

制。图中，如采用与刀库同时旋转的绝对值编码器，则 l~12 刀套编号对应的 BCD 码为
0000-1100, (1)-(12) 为刀具编号，刀具编号与刀套编号一一对应。当执行 M06 T04 指

令时，首先将刀套 7 转至换刀位置，由换刀装置将主轴中的 7 号刀装入 7 号刀套内，随后

87 

目标刀具位置

减速位置

/ 

皇换刀吐

图 2-48 刀套编码选刀控制

刀库反转，使 4 号刀套转至换刀位置，由换刀装置将 4 号刀装入主轴内。由此可以看出，

刀套编码方式的特点是只认刀套不认刀具，刀具在自动交换过程中必须将用过的刀具放

回原来的刀套内。

当刀库选刀采用刀套编码方式控制时，要防止把刀具放入与编码不符的刀套内而引

起的事故。

2. 随机换刀

在随机换刀方式中，刀库上的刀具能与主轴的刀具任意地直接交换。随机换刀控制

方式需要在 PLC 内部设置一个模拟刀库的数据表，其长度和表内设置的数据与刀库的容

量和刀具号相对应。图 2-49 所示为随机换刀方式刀库，表 2-8 为刀号数据表。

巨］

\ 
\ 

ccw 

cw 

萎口

` 换刀位置
＠三主轴 m

表 2-8 刀号数据表

数据表

数据表序号（刀套号）

刀具号

地址

0172 

0173 

0174 

0175 

0176 

0177 

0178 

0179 

0180 

(2 位 BCD 码）

(2 位 BCD 码）

0(00000000) 

1(00000001) 

2(00000010) 

3 (00000011) 

4(00000100) 

5(00000101) 

12(00010010) 

11 (00010001) 

16(00010110) 

17(00010111) 

15(00010101) 

18(00011000) 

6(00000110)---

14(00010100)-

7(00000111) 

8(00001000) 

13(00010011) 

19(00011001) 

图 2 — 49 随机换刀方式

1 检索结果输出地址 01s1 I 

I 检索数据地址 0117

88 

数据表的表序号与刀库刀套编号相对应，每个表序号中的内容就是对应刀套中所放
的刀具号，图 2 — 49 中， 0 ～ 8 为刀套号，也是数据表序号，其中 0 是将主轴作为刀库中的
一个刀套，（ ll) ～（ 19) 为刀具号。由于刀具数据表实际上是刀库中存放刀具的一种映像，
所以数据表与刀库中刀具的位置应始终保持一致，对刀具的识别实质上转变为对刀库位
置的识别。当刀库旋转时，每个刀套通过换刀位置（比较值地址）时，由外部检测装置产生
一个脉冲信号送到 PLC ，作为数据表序号指针，通过换刀位置时的计数值总是指示刀库

的现在位置。

当 PLC 接到寻找新刀具的指令 (TX X) 后，在模拟刀库的刀号数据表中进行数据检
索，检索到 T 代码给定的刀具号，将该刀具号所在数据表中的表序号存放在一个地址单
元中，这个表序号就是新刀具在刀库的目标位置。刀库旋转后，测得刀库的实际位置与刀
库目标位置一致时，即识别了所要寻找的新刀具，刀库停转并定位，等待换刀。在执行
M06 指令时，机床主轴准停，机械手执行换刀动作，将主轴上用过的旧刀和刀库上选好的
新刀进行交换，与此同时，修改现在位置地址中的数据，确定当前换刀位置的刀套号。

在 FANUC PLC 中，应用数据检索功能指令 (DSCH) 、符合检查功能指令（仅）IN 汃旋

转指令 (ROT) 和逻辑”与“后传输指令 (MOVE) 即可完成上述随机换刀控制。

现根据图 2-49 和表 2-8 ，执行 M06 T14 换刀指令。换刀结果：刀库中的 T14 刀装

入主轴，主轴中原 T12 刀插入刀库 6 号刀套内。控制梯形图如图 2-50 所示。

图 2-49 中，换刀位置（刀库现在位置）的地址为 0164 ，在 CDIN 功能指令中作为比
较值地址，该地址内的数据为在换刀位置的刀套号（数据表序号），其值由外部计数装置根
据刀库旋转方向进行加 1 或减 1 计数。图中所示的当前刀套号为 5 ，该值以 2 位 BCD 码

的形式 (00000101) 存入 0164 地址中。

在 DSCH 功能指令中，参数 1 为数据表容量，本例刀库共有 9 把刀，建立的刀号数据
表有 9 个数，故本参数设定值为 0009 ；参数 2 为数据表的头部地址，本参数为 0172 ；参数 3
为检索数据地址，其作用就是将 T 指令中的 14 号刀从数据表中检索出来，并将 14 号刀
以 2 位 BCD 码的形式 (00010100) 存入 0117 地址单元中，故本参数为 0117 ；参数 4 为检索
结果输出地址，其作用就是将 14 号刀所在数据表中的序号 6 以 2 位 BCD 码的形式

(00000101) 存入到 0151 地址单元中，故本参数为 0151 。

上电后，常闭触点 A(128. l) 断开，故 DSCH 功能指令按 2 位 BCD 码处理检索数据。
当 CNC 读到 T14 指令代码信号时，将此信息送入 PLC 。 TF(114.3) 闭合，开始 T 代码检
索，将 14 号刀号存入 0117 地址，数据表序号 6 存入 0151 ，同时 TEER(128.2) 置 ”1” 。

在仅）IN 功能指令中，由控制条件可知，参数 1 和参数 2 分别为参考值地址 0151 和
比较值地址 0164 ，并按 2 位 BCD 形式进行处理，其中 0151 存放的是指令刀号 14 ，而 0164

存放的是当前刀套数据表序号 6 。

当 TERR 由 DSCH 指令置 ”l” 后 ,CDIN 指令即开始执行。因地址 0151 与 0164 内数

据不一致，则输出 TCDIN(l28.3) 为 “0” ，作为刀库旋转 ROT 功能指令的启动条件。

在 ROT 功能指令中，计算刀套的目标位置与现在位置之间相差的步数或位置号，并
把它置入计算结果地址，可以实现最短路经将刀库旋转至预期位置。参数 1 为旋转检索
数，即旋转定位点数，对本例，该参数为 8 ；参数 2 为现在位置的地址，因当前刀套号 5 存
在 0164 地址内，故参数 2 为 0164 ；参数 3 为目标位置地址，因指令要求 T14 号刀具的刀

89 

SID 
BCD 两位数

复位

执行命令

S5D 

BCD 两位数

地址为参考值

执行命令

S15D 
刀套开始数为 0

BCD 两位数

选择捷径

圉倍

计算步数

gSUB17 如
骂
盂

表
头
地

0
1

芦
翌

的
部
址
7
2

笠
归
酗
妞
咖

OT R 

旋
转
检
索
数UB6 

s 

现
在
位
置
的
地
址
氐

目
标
位
置
的
地
址

计
算
结
果
输
出
地
址
1
5。

。g 

1 5 1 。

执归｀｀TF'|ll4.3  REV,l  l28.4  1 

S2 

S25D 

2 

CW.M 

S30D 

S35D 

TF，四

罔？IN
1 28 .3 l28  
n 

,MOVEhmhm|0151|0164 

T 代码检索
S5D 

刀位判别一致
S15D,  S20D 
S25D,  S30D 

刀库旋转方向
S20D,  S25D 

反向旋转

T 功能完成

S35D 
逻辑”与“传送

图 2-50 随即换刀控制梯形图

套号 6 存在 0151 地址内，故参数 3 为 0151 ；参数 4 为计算结果输出地址，本例选定为

0152 。

当刀具判别指令执行后， TCOIN(128.3) 输出为 “0" ，其常闭触点闭合， TF(l14.3) 此

时仍为 “1" ，故 ROT 指令开始执行。根据 ROT 控制条件的设定，计算出刀库现在位置与

目标位置相差步数为 “1" ，将此数据存入 0152 地址，并选择出最短旋转捷径，使 REV

(128.4) 置 “0” ，正向旋转方向输出。通过 CW.M 正向旋转继电器，驱动刀库正向旋转一

步，即找到了 6 号刀位。

在本梯形图中， MOVE 功能指令的作用是修改换刀位置的刀套号。换刀前的刀套号

5 已由换刀后的刀套号 6 替代，故必须将地址 0151 内的数据照全样传输到 0164 地址中，

因此 MOVE 指令中的参数 1 （高 4 位）参数 2 （低 4 位）均采用全 ”1" ，经与 0151 地址内数

据 6(BCD 码 00000110) 相”与“后，其值不变，照原样传送到 0164 地址中。当刀库正转一
步到位后， ROT 指令执行完毕。此时 T 功能完成信号 TFIN(128.5) 的常开触点使
MOVE 指令开始执行，完成数据传送任务。

下一扫描周期， COIN 判别执行结果，当两者相等时，使 TCOIN 置 ”1" ，切断 ROT 指

令和 CW.M 控制，刀库不再旋转，同时给出 TFIN 信号，报告 T 功能已完成，可以执行

M06 换刀指令。

90 

当 M06 执行后，必须对刀号及数据表进行修改，即序号 0 的内容改为刀具号 14 ，序号

6 的内容改为刀具号 12 。

2.4  数控系统 PLC 故障诊断

在数控机床中，除了对各坐标轴的位置进行连续控制外，还需要对诸如主轴正转和反

转、进给运动的启动和停止、刀库及换刀机械手控制、工件夹紧松开、工作台交换、冷却和
润滑等辅助动作进行顺序控制。顺序控制的信息主要是输入哺i 出 (l/0) 控制，如控制

开关、行程开关、压力开关和温度开关等输入元件，继电器、接触器和电磁阀等输出元件的

控制；同时还包括主轴驱动和进给伺服驱动的使能控制和机床报警处理等。数控机床采

用可编程逻辑控制器 (PLC) 来完成上述功能，输入倩i 出故障是数控机床运行过程中最常

见的故障，这是因为组成输入倩i 出的各类开关元件受到机械磨损、油气侵蚀等因素的影

响，造成开关可靠性下降以致失灵，引起机床动作障碍。

2.4.1  数控机床中 PLC 的作用

FANUC 数控机床的输入倩江i 由 PMC 控制完成。各种信号的传递分述如下。

1. 机床操作面板控制

将机床操作面板上的控制信号直接送入 PMC ，以控制数控系统的运行。机床操作面

板上各类控制开关的功能见机床电气控制原理图。

2. 外部开关输入信号控制

将机床侧的开关信号送到 PMC ，经逻辑运算后，输出给控制对象。这些控制开关包

括各类控制开关、行程开关、接近开关、压力开关和温控开关等。

3. 信号控制

PMC 输出信号经强电柜中的继电器接触器，通过机床侧的液压或气动电磁阀，对刀

库、机械手和回转工作台等装置进行控制，另外还对冷却泵电动机、润滑泵电动机及电磁

制动器等进行控制。

4. 伺服控制

控制主轴和伺服进给驱动装置的使能信号，以满足伺服驱动的条件，通过驱动装置，

驱动主轴电动机、伺服进给电动机和刀库电动机等。

5. 报警处理控制

PMC 收集强电柜、机床侧和伺服驱动装置的故障信号，将报警标志区中的相应报警

标志位置位，数控系统便显示报警号及报警文本以方便故障诊断。

6. 软盘驱动装置控制

数控机床用计算机软盘取代了传统的光电阅读机。通过控制软盘驱动装置，实现与

数控系统进行零件程序、机床参数、零点偏置和刀具补偿等数据的传输。

7. 转换控制

有些加工中心的主轴可以立／卧转换，当进行立／卧转换时， PMC 完成下述动作： O 切

换主轴控制接触器；＠通过 PMC 的内部功能，在线自动修改有关机床数据位；＠切换伺

91 

服系统进给模块，并切换用千坐标轴控制的各种开关、按键等。

FANUC 数控系统可通过屏幕对 PMC 实施操作，实行梯形图的显示、各种信号的监

控与诊断、 PMC 寄存器的参数设定、编辑程序以及系统参数查阅等。

2.4.2  PMC 内装调试功能

顺序程序的显示功能一可以在屏幕上动态显示 PMC 梯形图。

诊断功能一PMC 标题数据显示；各种输入倩础信号状态显示（可显示符号方向）；
PMC 报警显示；输入输出信号扫描；存储器内容显示；信号波形显示（并）； I/0 连接状态

显示（＊） （标有＊的功能对某些机种有限制）。

数据设定和显示－~可以对定时器、计数器、保持型继电器、数据表等寄存器进行设

定和显示。

顺序程序编辑功能一能够对梯形图进行编辑（需要梯形图编辑卡）。

1.  PMC 界面的显示方法

下面介绍 PMC 的各种界面的显示与操作。

(1) 按功能键 "SYSTEM” 。

(2) 按软键 [PMC] ，则在屏幕上显示出 PMC 界面，如图 2-51 所示。

PMCCON顶OL SYSTEM MENU 

MONITRUN 

SELECT  ONE OF  FOLLOWING SOFT KEYS 

PMCLAD 
PMCOON 
PMCPRM 
RUN/S10P 
EDIT 
1/0 
SYSPRM 
MONIT 

: DYNAMIC LADDER DISPLAY 
: DLAGNOSIS FUNCTION 
: PARAMETER (T/C/K/D) 
: RU心10P SEQUENCE PROORAM 
: EDIT SEQUENCB PROORAM 
: 1/0 SEQUENCE PROORAM 
: SYSTEM PARAMETER 
: PMC MONITOR 

(PMCLAD)(PMCDGNXPMCPRM)()( 

『
＇
已
内
编
运

装
程
动

的
器
时

PMC 钰画面

显示 PMC 输入输出信号

顺序程序的动态显示

(S1DP)  (EDIT) ( 1 / 0 )   (SYSPRM)  (MONTI) 

/二二系统钰乙监控界面

顺序程序的输入／输出

顺序程序的编辑

顺序的 RUN/S1DP

图 2-51 屏幕上的 PMC 画面

CNC 屏幕和 PMC 基本菜单界面的切换方法。
CNC 屏幕到 PMC 屏幕：按下 CRT/MDI 面板上的 SYSTEM 功能键，选择软键

[PMC] ，显示 PMC 界面基本菜单。

92 

PMC 屏幕界面到 CNC 屏幕界面：按下 PMC 基本菜单屏幕上的正 [RETURN] 软键

（最左端的键），将 PMC 基本菜单层改变为 CNC 软键菜单。选择 PMC 屏幕上的功能键，

将屏幕改为对应的 CNC 屏幕。

在图 2 — 51 的 PMC 界面上显示的基本菜单及软键项目的用途，见表 2-9 中的

说明。

表 2 — 9 PMC 界面上的软键用途

软键

用途

[PMCLAD] 

动态显示顺序程序的界面

[PMCDGN] 

显示 PMC 的输入输出信号的界面

[PMCPRM] 

显示 PMC 参数界面

STOP 

顺序程序的 RUN/STOP

软键

[EDIT] 

[I/0] 

[SYSPRM] 

[MONIT] 

用途

顺序程序的编辑

顺序程序的输入倩江j

显示系统参数界面

监控界面

注：显示的软键菜单随有无编辑卡而不同（没有编辑卡，则没有 [RUN/STOP] 和 [SYSPRM] 软件）

2.  PMC 屏幕界面种类

图 2 — 52 是 PMC 界面，在这个界面之下，还有若干子界面。对 PMC 的调试需要在

屏幕上显示 PMC 的子界面，在不同的子界面上进行 PMC 程序的调试操作。在图 2-50

的 PMC 界面上可打开三种 PMC 的子界面。

梯形图显示

LADDER 

LOOI 

显示的网号

RUN/STDP 的状态

NETOOOI～如 MONITRUN

LOGl, 

}. 

注释

ALWAYSI 

X008.4 

*ESP 

呻GENCY
STOP 

PORD 

POR 

POWERON 
RESET 

(TOP  l (BOTIDM)  (SRCH  l  (W-SRCH) (N-SRCH) 

图 2-52 PMCLAD 界面（梯形图显示）

(1)  PMC  1/0 信号和内部继电器的显示界面 (PMCDGN 界面）。在 PMC 基本菜单

中按 [PMCDGN] 软键，就能显示 PMCDGN 界面， PMCDGN 界面有下列屏幕界面：

叩标题数据显示屏幕界面；

＠状态屏幕界面；

＠报警屏幕界面；

＠跟踪功能屏幕界面。

(2)  PMC 数据设置及显示界面 (PMCPRM 界面）。在 PMC 基本菜单中按 [PM­

CPRM] 软键，就能显示 PMCPRM 界面。 PMCPRM 界面提供了下列 PMC 数据：定时器；

93 

计数器；保持型继电器；数据表。

(3) 顺序程序梯形图的显示界面 (PMCLAD 界面）。在 PMC 基本菜单中按 [PM­

CLAD] 软键，就能显示 PMCLAD 界面。

3. 动态显示梯形图程序 (PMCLAD 界面）

PMC 梯形图可以在 CRT 上显示。通过使用梯形图显示功能所提供的直观的梯图显

示，可有效地发现故障原因。在 PMCLAD 界面上通过使用软键，可执行下述功能：

CD 搜索和显示梯形图中的任意触点和线圈；

＠梯形图的动态显示；

＠屏幕分割显示；

＠信号状态监控。

在 PMC 基本菜单中按 [PMCLAD] 软键，就能显示 PMCLAD 界面，梯形图就会显示

出来。在 CRT 屏幕上每行可显示 7 个继电器触点和一个继电器线圈。如果继电器触点

的个数超过 7 个，可以用两行或更多行来显示，如图 2-50 所示。此界面上动态显示

PMC 程序，即 PMC 梯形图。梯形图执行时的逻辑开闭状态可用高亮度线条表现出来，以

此确认系统动作的控制状态。

1) 显示内容的规定

(1) 显示为绿色（低亮度），如果表示触点，断开；如果表示继电器，闭合。

(2) 显示为白色（高亮度），如果表示触点，闭合；如果表示继电器，断开。

2) 梯形图的检索方法

(1) 用光标移动键和翻页键可以变更显示位置。

(2) 软键 [TOP] 用千检索梯形图的开头。

(3) 软键 [BOTTOM] 用千检索梯形图的底部。

(4) 按键盘输入“地址和位”，然后按软键 [SRCH] 。或者键入“信号名＂，然后按软键

[SRCH] ，用于检索 PMC 梯形图中寄存器的“地址”和＂位”。

(5) 按键盘输入“功能指令号 ”-[F-SRCH] 。或者键入“功能指令名 “-+-[F­

SRCH] 

(6) 可以对 PMC 地址指定相应的符号和注释。 [ADRESS] 用地址号显示信号。压

下正 [ADRESS] 软键，触点和线圈用相应的地址表示。

(7)  [SYM印L] ：用信号名（符号）显示信号（编程时如果没有输入符号，则显示地

址）。压下 [SYMBOL] 软键，触点和线圈用相应的符号表示。

检索功能是从现在显示的开始位置向后进行，并且在开始显示首次检索到信号的梯

形图；因为可能有几个接点，所以重复同样的检索。若一直检索到程序（梯形图）的最后仍

没有发现指定的信号时，返回程序的开头，继续检索。

3) 梯形图的 DUMP 显示

梯形图和信号状态可以同时显示。状态显示在梯形图的最后一行进行 DUMP 显示。

按软键 [DUMP] 时，用两行监控显示 PMC 地址。使用页面键 “PAGE” 和软键 [SEARCH]

变更地址。软键 [DUMP] 的功能如下。

(1)  [BYTE] ：显示字节型 (1 字节）的 DUMP 界面。显示如下：

"GOOOO  00  14  00 00  01  00 00  00 00 00 00 00 00 00  00 00  " 

94 

"G0016 00 00  00  00 00 00  00 00  00 00 00  00 00  00  00 00  " 
(2)  [WORD] ：显示字型 (2 字节）的 DUMP 界面。显示如下：

"GOOOO  0014 0000 0010  0000  0000 0000 0000  0000  " 

"G0016 0000 0000  0000  0000 0000  0000  0000  0000" 
(3)  [D.WORD] ：显示长字型 (4 字节）的 DUMP 界面。显示如下·:

"GOOOO  0014 0000 0000 0100  0000  0000 0000 0000" 

"G0016 0000 0000 0000 0000 0000 0000 0000 0000" 

4) 梯形图参数显示

在功能指令内显示梯形图的功能指令参数内容。软键 [DPARA] 的功能如下。

(1)  [DPARA] ：在功能指令内显示功能指令参数的内容。

(2)  [NDPARA] ：在功能指令内不显示功能指令参数的内容。

5) 用信号触发器停止梯形图监控

用手动或者用触发信号可以停止梯形图的显示。随着显示的梯形图状态，用此功能

可在某信号变化时准确地检测梯形图的全部信号状态。可以规定在指定地址信号的上升

沿或下降沿处停止，以检测信号状态。

触发器的设定显示为在标题显示位置上显示设定地址／设定条件／设定次数。
例如标题显示为： “MOOE: ON: XOOOOO: 0: 0001" 

MOOE:ON: —ON 信号上升沿 (TRGON) 的指定。

OFF 信号下降沿 (TRGOFF) 的指定。

xoooo ：一触发器指定地址。

0 ：一一Point ：触发器检查位置（省略时为 0) 。

O:ENDO 梯形图第一级开头；

1:ENDl 执行后；

2:END2 执行后；

3:END3 执行后。

0001—count ：触发器检查次数（省略时为 1) 。

设定形式：＂ adr;Pl;P2 ＋软键[ TRGONITRGOFF]”( ＂；”是指 “EOB” 键）。

其中：＂ adr” （触发器指定地址）， “Pl" （触发器检查位置）， “P2" ［触发器检查次数 (1~

65535)] 。

因为参数写入保持型存储器中，即使停电，数据也不会丢失。另外，因为事先设定了

抽样参数，当保持继电器 Kl8 的 bit2= 1 时，一接通电源，本功能就自动地开始。

按软键 [TRIGER] ，可显示如图 2-53 所示的屏幕菜单。

软键 [TRIGER] 功能下的子菜单如下。

(1)  [TRGON] 指定地址信号上升，变成 ON 状态时停止。
(2)  [TRGOFF] ：指定地址信号下降，变成 OFF 状态时停止。
(3)  [START] ：触发器进行执行／停止切换。在执行中 “TRG“ 闪烁。
(4)  [TRGSRC] ：指定地址信号检索触发器停止指令，进行闪烁显示。
(5)  [INIT] ：触发器的初始化设定。

6) 梯形图分割显示

95 

START 

DUMP  I  OPARA 

TRGSRC  I 

INIT 

图 2-53 软件 [TRIGER] 显示的屏幕菜单

梯形图分割显示功能用千分割显示界面时，最多可分割 6 份进行显示。按软键

[WINDOW] ，屏幕上出现菜单，如图 2 — 54 所示。

SEARCH  I  ADRESS  I  TRIGER  I WJNOOW 

DMDE 

I CANCEL  I  DELETE  I  SELECT 

I WIDTH 

图 2-54 分割显示界面

软键 [WINDOW] 的功能如下。
(1)  [DIVIDE] ：分割显示现在显示的界面，指定梯型图的网号后可以进行界面分割

显示 (NET number+ [DIVIDE] ）。

(2)  [CANCEL] ：结束界面分割，显示一个界面。
(3)  [DELETE] ：结束操作对象界面分割。
(4)  [SELECT] ：切换操作对象的界面。对于操作对象界面把标题用紫色翻转显示，

其他界面翻转成蓝色显示。黑白 CRT 用亮度变化显示。

(5)  [WIDTH] ：用于变更界面宽度时，选择 [EXPAND] 、 [SHRINK] 。
(6)  [EXPAND] ：扩大操作对象的界面的行数。
(7)  [SHRINK] ：缩小操作对象的界面的行数。

2.4.3  PMC 的诊断界面 (PMCDGN 界面）

按软键 [PMCDGN] ，能够显示 PMC 的诊断 (PMCDGN) 界面。在 PMCDGN 界面中
可以分别显示： TITLE （标题）界面、 STATUS （状态）界面、 ALARM （报警）界面、 TRACE
（跟踪）界面、存储器显示 (M.SRCH) 和 ANALY （分析）等界面，下面对前四种界面给予
阐述。

1.  TITLE （标题）界面
系统内已经有梯形图程序时，应首先显示在内存中的标题数据，即 TITLE （标题）界

面，如图 2-55 所示。按 [TITLE] 软键页可以显示此界面。

标题界面总共有 3 页，用页面键可以翻页查阅。第 1 页的显示内容见表 2-10 。

96 

厂页号

PMC  TITLE  DATA#l 

MONIT  RUN 

PMCPROGRAMNO. 
EDffiONNO. 
PMC CON1ROL PROGRAM 

SER正S:4088 EDillON:01 
(SERIES:4089  EDffiON:01) 

PMC TYPE CON1DRL:SA3 PROGRAM:SA3 
MEMORY USED 
LADDER 
SYMBOL 
MESSAGE 
SCAN TIME 
SCAN MAX:016 MS MIN: 006 MS 

: 
KB 
: 
KB 
: 
KB 
: 
KB 
:  MSEC 

(1ITLE)  （ ST础S) (ALARM l  (TRACE)  ( 

图 2-55 PMCDGN 界面中的标题界面

表 2-10 PMCDGN 的标题界面

界面上的标识

用途

界面上的标识

用途

PMC PROGRAM EDITION NO  制做 PMC 时设定

MEMORY USED 

LADDER 
PMC  CON1ROL  PROGRAM  PMC 控制软件的系 SY四L
SERIES EDITION 

列和版号

MESSAGE 

制作 PMC 时设定

2.  STATUS （权态）界面

STATUS（状态）界面用于显示输入、输出的信号，内部继电器等的开、关状态。

程序中所有的使用地址 (X 、 Y 、 F,G 、 R,A、 C 、 K,D 、 T 、 M 、 N) 的内容可在 CRT 屏幕上

显示，这都是以 “0” 或 “1” 的位模式来显示，符号数据与给符号数据定义的地址一同显示。

操作步骤如下。

(1) 按下 [STATUS] 软键， CRT 屏幕如图 2-56 所示，软键菜单也改变。

P
g
二
篮
M
二
C
二

AL 

S
T
7画0
加0
g。

。
。

ATU 

S
6
郘
心
。
邸

0
0
0

(SEARCH)  ( 

) ( 

\. 

5
E
。
D
印
s
E
。
A
S
o
o
o

M
O
2
酰0
E
D
3。
z
。
。
o

NIT 
R
I
E
砌
D
0
l
E
l
A
i
o
o
o

4
职
0
g。
因
。
。
。

志
咖
必
O
O
F
I
N
o

) ( 

) ( 

、

UN 

OEDOOEDSOEAOOOO 

二

名
的

酝

0
0

号
号
态

信
信
状
F
仆
}
翌
F
I
1
O
N

图 2-56 STATUS（状态界面）

(2) 键入要显示的地址后按下 [SEARCH] 键。

(3) 指定地址显示在屏幕顶端，连续的 8 字节数据以位模式显示。

97 

(4) 按下 [SEARCH] 或翻页键来显示另一地址。

STATUS（状态）界面的检索步骤：

(1) 按页面键，向前、向后显示界面；

(2) 按光标键，向前、向后显示诊断号；

(3) 检索已指定的地址或信号名（符号），输入“地址号”或“信号名”后，按软键

[SEARCH] 。

3.  ALARM （报警）界面的显示

ALARM （报警）界面用于显示 PMC 中发生的报警。如果 PMC 发生报警，按下 PMC

软键，可以显示报警信息，如图 2-57 所示。 “ALM” 在屏幕右下角闪烁。如果发生了一

致命错误，顺序程序不能启动。对千界面上所显示的信息的意义，见附录＂报警信息列

表”。在 PMCDGN 界面下，按软键 [ALARM] ，也可以显示 ALARM （报警）界面。

PMC ALARM MESSAGE 

MONITRUN 

ER32 NO VO  DEVICE 

报警显示
报警的详细
情况请参照
附录 A

(TITLE)  (STATUS) (ALARM) (TRACE) ( 

ALM 吁闪烁显示

图 2 －了 ALARM( 报警）界面

4.  TRACE （跟踪）界面

该功能可检查信号变化的履历。使用一或二字节地址，在跟踪存储器中记录了信号

变化的状态。为此，使用此功能可以有效地调查间歇故障。对于二字节的地址，可设定不

连续地址。在 PMCDGN 屏幕按下 [TRACE] 软键，可显示在信号读入时的跟踪屏幕，如

图 2-58 所示。信号未读入时，则显示读入信号的参数设定屏幕。显示完毕后，按下跟踪

屏幕上的 [TACDRM] 软键，仍可以显示参数设定屏幕，按下参数设定屏幕上的 [DISP] 键，

则显示跟踪屏幕。

设定跟踪参数。为了进行跟踪，查看信号的履历，必须设定允许对位号进行读取的参

数，即设定跟踪参数。设定跟踪参数需要在跟踪参数界面下完成。在 PMCDGN 界面下，

按软键 [TRACE] ，可以显示 TRACE （跟踪）参数界面，如图 2-58 所示。这些参数是：跟

踪模式、地址类型、地址、跟踪数据范围。

设定跟踪参数之后，即可进行 TRACE （跟踪）。操作方法如下：

(1) 跟踪参数界面，如图 2-58 所示。
CD  TRACEMODE ：选择跟踪方式，为读取信号设定模式。
（跟踪模式） 0 ＝存储一个字节的信号变化。

1 ＝存储二个字节的信号变化。

98 

2 ＝存储连续二个字节的信号变化。

@  ADDRESS TYPE ：选择地址类型。

（地址类型） 0 ＝存储一个字节的信号变化。

1 ＝存储二个字节的信号变化。

2 ＝存储连续二个字节的信号变化。

®ADDRESS（地址）：设定跟踪信号的地址。

PMC  SIGNAL TRACE 

MONITRUN 

TRACEMODE. 
(0:IBYTE/1 :2BYTFJ2:WORD) 
!ST  TRACE  ADDRESS  CONDmON 

ADDRESS  TYPE 
ADDRESS 
MASK  D凡A

:  (O:PM矶PHY)
: 
: 

2ND  TRACE  ADDRESS  CONDmON 

ADDRESS  TYPE 
ADDR岱S
MASK  D凡A

: 

(0:PMCJI:PHY) 

(T.DISP  J (EXEC  J  ( 

) ( 

) ( 

L一切换到显示即淙存储器内容画面的软键

图 2-58 跟踪参数界面

@M悠KDATA: （跟踪数据范围）用 16 进制（两位）可以指定跟踪位。例如：跟踪位

"#7,#6,#5 和＃ 0“数位的信号，用 16 进制数设定为 “El” 。 “El” 的二进制形式如下：

EHl  参数位

#7  #6  #5  #4  #3  #2  # 1  #0 
1 

1  。 。 。 。

1 

1 

此时，即使＃ 4,#3,#2,#1 位变化，也不进行跟踪（存储），只有在进行跟踪时，才存

储信号的状态。以上的跟踪参数在断电后保存。

(2) 跟踪存储器内容显示界面，如图 2-59 所示。

PMCSIGNAL TRACE 

MONIT RUN 

1ST ADDRESS=X008(EI) 

2ND 

76543210 

No.  76543210 
0000.. 
0001  I . . . . . . . . . . . . . . .  
0002  11.. 
.~... ~..'... :.. :.. :...'... :........... ·...,.. :... ·... :..,.. : .  
0003 
0004. 
0005. 
0006. 
0007 
0008. 

(TRCPRM)  (  SIDP 

) ( 

) ( 

) ( 

4~ 跟踪地址
括号内为
标志数据

+－－最新状态

图 2-59 TRACE（跟踪）存储器界面

99 

0 软键 [TRCPRM] ：返回到跟踪参数设定界面（前一页界面）。

＠软键 [EXEC] ：开始跟踪。清除跟踪存储器，指定信号的每次变化的状态都被存储

下来。跟踪存储器有 256 个字节。在两个字节的跟踪中，若跟踪了 128 次，就再从存储器

开头重复存储状态。

＠软键 [STOP] ：结束跟踪。

设定跟踪参数，即使电源关断也能保持跟踪时记录的状态。

参数 K017 的第＃ 5 位设定如下：

0—用软键 [EXEC] 开始跟踪；

1 ——电源接通后，自动开始跟踪。

2.4.4  PMC 参数界面 (PMCPRM 界面）

按软键 [PMCPRM] ，能够显示 PMC 的参数 (PMCPRM) 界面。在 PMCPRM 界面中

可以分别显示： TIMER （定时器）界面、 COUNTR （计数）界面、 DATA （数据表）界面、

KEEPRL（保持继电器）界面等。

1. 用 MDI 输入 PMC 参数方法

(1) 置于 MDI 方式或紧急停止方式。

(2) 将设定界面的”写入参数”设为 1 ，或程序保护信号 “KEY4”设为 1 。

(3) 按软键，选择显示界面：

[TIMER] —定时器界面；

[COUNTR] —计数器界面；

[KEEPRL] 一保持继电器界面；

[DATA] —数据表界面。

(4) 按光标键，把光标移到希望的号上。

(5) 输入“数值＂，按功能键 "INPUT" ，数据被输入。

(6) 数据输入后，把设定界面的”写入参数”或 “KEY4“ 复原为 “0” 。
2.  DATA （数据表）界面

下面阐述 DATA（数据表）界面。数据表包括两种界面，即数据表控制数据界面和数

据表界面。在 PMCPRM 界面下，按软键 [DATA] ，可以显示 DATA（数据表）设定界面，如

图 2-60 所示。

(1) 数据表控制数据界面。通常只有在编好 PMC 顺序程序时进行本操作。设定

PMC 参数时，对内部参数没有影响。

0 软键 [DATA] ：选择数据表的数据显示界面。

＠键入”组数”，按软键 [G.CONT] ，设定数据表的组数。

＠键入”组数”，按软键 [NO.SRH] ，把光标移到指定的组上（设定组号）。

＠软键 [INIT] 将数据表的设定初始化。组数为 l,ADDRESS （地址）为 IX)000 ，参数

(PARAMETER) 为 00000000 ，类型 lTYPE} 为 0 ，数据号为 1860 。

(2) 数据显示界面，如图 2-61 所示。

0 软键 [C.DATA] ：返回到数据表的数据设定界面（图 2 — 58) 。

＠组号。键入”组号”，按软键 [G-SRCH] ，选择指定组的开头。

100 

画面数

PMC DATA  TBL CONTROL#001 

MONITRUN 

GROUP  TABLE COUNT =2 

数据表组数

No001002003004005006007008 

ADDR区S
DOOOO 
陨20

PARAMETR 
00000000 
00000011 

TYPE 
。
I 

No.OFDATA 
10 
20 

各数据表
的数据数
数据长
表的参数

数据表的
开头地址

(G.D杠A) (G.CONT)(NO.SRH)( 

)(JNIT) 

图 2-60 DATA（数据表）的设定界面

AT D 

MONITRUN 
A 
oooooooooo 

丿二婴＄

PMCPRM(DATA)  001/001 

D叨3

D础
D0001 
D叨2

NO.  ADDRESS 
000 
001 
002 
003 
004 
005 
006 
007 
008 
009 

D叨7
D0008 
D吵

D仪U
D0005 
D妞

(C.D杠A) (G-SRCH)  (SEARCH)  ( 

)  ( 

图 2-61 DATA（数据表）的数据显示界面

＠地址。键入“地址＂，按软键 [SEARCH] ，检索当前所选组的地址。

2.5  FANUC 数控系统 PMC 控制的故障诊断

当数控机床出现有关 PMC 方面的故障时，一般有三种表现形式：

(1) 故障可通过 CNC 报警直接找到故障的原因。

(2) 故障虽有 CNC 报警显示，但引起故障的原因较多，难以找出真正的原因。

(3) 故障没有任何提示。

对于后两种情况，可以利用数控系统的自诊断功能，根据 PMC 的梯形图和输入、输

出状态信息来分析和判断故障的原因，这种方法是解决数控机床输入、输出故障的基本

方法。

101 

2.5.1  通过 PMC 查找故障的方法

1 ．观察 PMC 状态，判断开关量是否已输入
在 “PMC 状态”中观察所需的输入开关量，或系统变量是否已正确输入，若没有，则检
查外部电路。对于 M 、 S 、 T 指令，可以写一个检验程序，以自动或单段的方式执行该程
序，在执行的过程中观察相应的地址位。应该提醒的是：含该指令的零件程序在 MDI 方

式下，正在执行程序的过程中是不能观察 PMC 状态的。

2. 观察 PMC 状态，判断开关量是否已输出
在 PMC 状态中观察所输出开关量或系统变量是否正确。若没有，则检查 CNC 侧，

分析是否有故障。

3. 检查相关电器元件的状态
检查由输出开关量直接控制的电气开关或继电器是否动作，若没有动作，则检查连线

或元件。检查由继电器控制的接触器等开关是否动作，若没有动作，则检查连线或元件。

4. 检查执行单元状态

检查执行单元，包括主轴电动机、步进电动机、伺服电动机等。

5 ．结合工作原理，查找故障点

观察 PMC 动态梯形图，结合系统的工作原理，查找故障点。

6. 利用 PLC 对数控机床进行故障检测的注意事项

要做好用 PLC 检测数控机床故障应注意以下几点：

(1) 了解机床各组成部分检测开关的安装位置，如加工中心的刀库、机械手和回转工
作台，数控车床的旋转刀架和尾架，机床的气、液压系统中的限位开关、接近开关和压力开

关等，弄清检测开关作为 PLC 输入信号的标志。

(2) 了解执行机构的动作顺序，如液压缸、汽缸的电磁阀等，弄清对应的 PLC 输出信

号标志。

(3) 了解各种条件标志，如启动、停止、限位、夹紧和放松等信号标志。

(4) 借助必要的诊断功能，必要时用编程器跟踪梯形图的动态变化，搞清故障原因，

根据机床的工作原理作出诊断。

2.5.2  PMC 故障诊断与维修实例

1 ．根据故障号诊断故障
数控机床的 PLC 程序属千机床厂家的二次开发，即他们根据机床的功能和特点，编

制相应的动作顺序以及报警文本，对控制过程进行监控，当出现异常情况时，会发出相应

报警，在维修过程中，要充分利用这些信息。

例 2-2 某数控机床的换刀系统在换刀指令时不动作，机械臂停留在行程中间位置
上， CRT 显示某报警号，查手册得知该报警号信息提示为换刀系统机械臂位置检测开关

信号为 “0” ，即“刀库换刀位置错误”。

根据报警内容，可诊断故障发生在换刀装置和刀库两部分，由于相应的位置检测开关
无信号送至 PLC 的输入口，从而导致机床中断换刀。造成开关无信号的可能原因有两

102 

个：一是由千液压或机械上的原因造成动作不到位而使开关得不到感应；二是接近开关

失灵。

首先检查刀库中的接近开关，用一薄金属片接近感应开关，通过检查发现开关正常。

因机械臂停留在中间位置，所以两个信号都为 “0” 。

机械装置检查：＂臂缩回＂的动作是由电磁阀 YV21 控制的，手动该电磁阀，把机械臂
退回至＂臂缩回”位置，机械恢复正常，这说明手控电磁阀能使换刀位置定位，从而排除了

液压或机械上的阻滞造成换刀系统不到位的可能性。

由以上分析可知， PLC 的输入信号正常，输出动作无误，问题出在操作不当或 PLC 设
置不当上，经过操作观察，两次换刀时间的间隔小于 PLC 规定的要求，从而造成 PLC 程

序执行错误引起报警。

2. 根据动作顺序诊断故障
数控机床上刀具及托盘等装置的自动交换动作都是按照一定的顺序来完成的，因此

观察机械装置的运动过程，比较正常与故障时的情况，就可发现疑点，诊断出故障原因。

3. 根据控制对象的工作原理诊断故障
数控机床的 PLC 程序是按照控制对象的控制原理来设计的，通过对控制对象工作原

理的分析，结合 PLC 的 1/0 状态来检查。

例 2-3 数控车床工件夹紧故障。
故障现象 该数控车床配备 FANUC OT 系统，当脚踏尾座开关使套筒顶尖顶紧工件

时，系统产生报警。尾架套筒的 PLC 输入开关如图 2-62 所示。

SA4.IO 

.}-•-------

SA4.ll 

../--－千一一一一一

罕寸 I

SIA.11SA42 

X042  X043 

XOO.O  X00.1  "  X00.2  X17.6  Xl73 

向前向后向后限位向前限位压力润滑油尾架套筒
转换开关

（尾架套筒）

（尾架套筒脚踏）

液位

图 2-62 尾座套筒的 PLC 输人开关

故障诊断 在系统诊断状态下，调出 PLC 输入信号，发现脚踏尾座开关输入 X04.2
为 “1" ，尾座套筒转换开关 X17.3 为 “1" ，润滑油液面开关 X17.6 为 “1" 。调出 PLC 输出
信号，当脚踏尾座开关被压下时，输出 Y49.0 为 “1” ，同时电磁阀也得电。这说明系统
PLC 输入倩i 出状态均正常，分析尾座套筒液压系统的故障可能性较大。当电磁阀
YV4.1 ，得电后，液压油经溢流阀、流量控制阀和单向阀进入尾座套筒液压缸，使其向前顶
紧工件。松开脚踏尾座开关后，电磁阀处千中间位置，油路停止供油。由千单向阀的作
用，尾座套筒向前时的油压得到保持，该油压使压力继电器常开触点接通，在系统 PLC 输入
信号中 X00.2 为 ”1” ，但检查系统 PLC 输入信号 X00.2 为"O" ，说明压力继电器有问题。

103 

4. 根据 PLC 的 I/0 状态诊断故障
数控机床中，输入倩i 出信号的传递一般都要通过 PLC 接口来实现，因此许多故障都
会在 PLC 的 I/0 接口这个通道中反映出来。数控机床的这个特点为故障诊断提供了方

便，不用万用表就可以知道信号的状态，但要熟悉有关控制对象的正常状态和故障状态。

经进一步检查发现其触点损坏。

5 ．通过梯形图诊断故障

根据 PLC 的梯形图分析和诊断故障是解决数控机床外围故障的基本方法，用这种方

法诊断机床故障首先应搞清机床的工作原理、动作顺序和连锁关系，然后利用系统的自诊

断功能或通过机外编程器，根据 PLC 梯形图查看相关的输入确让以文标志位的状态，从而

确定故障原因。

例 2-4 某卧式加工中心出现回转工作台不旋转的故障，根据故障对象用机外编程

器调出有关回转工作台的梯形图。 FANUC 系统可利用系统显示器面板调出梯形图。

根据回转工作台的工作原理，首先将工作台气动浮起，然后才能旋转，气动电磁阀

YV12 受 PLC 输出 Ql.2 控制。加工工艺要求，只有当两个工位的分度头都在起始位置

时，才满足回转工作台的旋转条件， 19. 7 、 110.6 检测信号分别反映两个工位的分度头是否

在起始位置，正常情况下两者应该同步， F122.3 是分度头到位标志。

从 PLC 的 PB20.10 中观察，由于 F97.0 未闭合，导致 Ql.2 无输出，电磁阀 YV12 不

得电，继续观察 PB20.9 ，发现 F120.6 未闭合导致 F97.0 低电平。向下检查 PB20.7,

F120.4 为 “0” 引起 F120.6 未闭合。继续跟踪 PB20.3,F120.3 未闭合引起 F120.4 未闭

合。继续向下检查 FB20.2, Fl22.3 未满足，导致 F120.3 未闭合。观察 PB21.4 ，发现
19. 7 、 110.6 总是相反，故 F122.3 总是 “O” 。

故障原因：两个分度头不同步。

处理方法：检查两个工位分度头的机械装置是否错位；检查检测开关的位置是否

移动。

6. 动态跟踪梯形图诊断故障

有些数控系统带有梯形图监控功能，调出梯形图画面，即可以看到输入倩i 出点的状

态和梯形图执行的动态过程，有的系统则需要机外编程器才能在线监控程序的运行。有

些 PLC 在发生故障时，因过程变化快，查看 I/0 及标志尤法跟踪。此时需要通过 PLC 动

态跟踪，实时观察 I/0 及标志位状态的瞬间变化，根据 PLC 的工作原理作出诊断。

2.5.3  刀库机械手部分故障实例

ATC 是数控机床加工中心的重要执行机构，它们的可靠性如何将直接影响机床的加

工质量和生产率。 ATC 结构较复杂，且在工作中又频繁运动，所以故障率较高。目前，机

床上有 50 ％以上的故障都与之有关。

ATC 的常见故障有：刀库运动故障，定位误差过大，机械手夹持刀柄不稳定，机械手

动作误差过大等。这些故障最后都造成换刀动作卡位，整机停止工作。进行维修时应重

视对现场设备操作人员的调查，由千 ATC 装置都是由 PLC 可编程序控制器通过应答信

号控制的，因此大多数故障出现在反馈环节（电路或反馈元件）上，需通过电路分析与信

号、动作、定位、限位等有关环节的综合分析来判断故障所在，故难度较大。

104 

下面主要就刀库和换刀机械手的故障作简要介绍。

1. 刀库与换刀机械手的维护要点

(1) 严禁把超重、超长的刀具装入刀库，防止在机械手换刀时掉刀或刀具与工件、夹

具等发生碰撞。

(2) 顺序选刀方式必须注意刀具放置在刀库中的顺序要正确。其他选刀方式也要注

意所换刀具是否与所需刀具一致，防止因换错刀具而导致事故发生。

(3) 用手动方式往刀库上装刀时，要确保装到位、牢靠，并检查刀座上的锁紧应可靠。
(4) 经常检查刀库的回零位置是否正确，检查机床主轴回换刀点位置是否到位，并及

时调整，否则不能完成换刀动作。

(5) 要注意保持刀具刀柄和刀套的清洁。

(6) 开机时，应先使刀库和机械手空运行，检查各部分工作是否正常，特别是各行程
开关和电磁阀能否正常动作。检查机械手液压系统的压力是否正常，刀具在机械手上锁

紧是否可靠，发现不正常时应及时处理。

2. 刀库的主要故障

(1) 刀库不能转动或转动不到位。刀库不能转动的可能原因有： CD 连接电动机轴与
蜗杆轴的联轴器松动；＠变频器故障，应查变频器的输入俐江j 电压正常与否；＠ PLC 尤
法控制输出，可能是接口板中的继电器失效；＠机械连接过紧，或黄油黏涩；＠电网电压过
低（低千 370V) 。刀库转动不到位的可能原因有：电机转动故障，传动机构误差。

(2) 刀套不能夹紧刀具。可能原因是：刀套上的调整螺母松动或弹簧太松，造成卡紧

力不足；刀具超重。

(3) 刀套上下不到位。可能原因是装置调整不当或加工误差过大而造成拨叉位置不

正确；因限位开关安装不准或调整不当而造成反馈信号错误。

(4) 刀套不能拆卸或停留一段时间后才能拆卸。应检查操纵刀套的气阀是否松动、

气压足不足、刀套的转动轴是否锈蚀等。

3. 换刀机械手的主要故障

(1) 刀具夹不紧。可能原因有风泵气压不足，增压漏气，刀具卡紧气压漏气，刀具松

开弹簧上的螺帽松动。例某 VMC-65A 型加工中心使用半年后出现主轴拉刀松动，无任
何报警信息。分析主轴拉不紧刀的原因是： CD主轴拉刀碟簧变形或损坏；＠拉力液压缸动
作不到位；＠拉钉与刀柄夹头间的螺纹连接松动。经检查，发现拉钉与刀柄夹头的螺纹连
接松动，刀柄夹头随着刀具的插拔发生旋转。该台机床的拉钉与刀柄夹头间无任何连接
防松的锁紧措施。在插拔刀具时，若刀具中心与主轴锥孔中心稍有偏差，刀柄夹头与刀柄
间就会存在一个偏心摩擦。刀柄夹头在这种摩擦和冲击的共同作用下，时间一长，螺纹松
动退丝，出现主轴拉不住刀的现象。若将主轴拉钉和刀柄夹头的螺纹连接用螺纹锁固密
封胶锁固及锁紧螺母锁紧后，故障消除。

(2) 刀具夹紧后松不开。可能原因有松锁刀的弹簧压合过紧，应逆时针旋松卡刀簧

上的螺帽，使最大载荷不超过额定数值。

(3) 刀具从机械手中脱落。应检查刀具是否超重，机械手卡紧锁是否损坏或没有弹

出来。

(4) 刀具交换时掉刀。换刀时主轴箱没有回到换刀点或换刀点漂移，机械手抓刀时

105 

没有到位，就开始拔刀，都会导致换刀时掉刀。这时应重新操作主轴箱运动，使其回到换

刀点位置，重新设定换刀点。

(5) 机械手换刀速度过快或过慢。可能是因气压太高或太低和换刀气阀节流开口太

大或太小。应调整气压大小和节流阀开口的大小。

例 2-5 卧式加工中心，配用 FANUC6M-B 数控系统。机械手无法从主轴和刀

库中取出刀具。

故障现象 换刀过程中，动作中断：报警指示灯闪烁， CRT 显示器报警显示报警号为

2012 ，显示内容为 ARMEXPANDINGTROUBLE （机械手伸出故障）。

机床操作面板上状态显示灯一直亮着，表示仍在换刀过程中。

故障检查与分析换刀详细程序如下： CD 主轴箱回到换刀点 (Z 、 Y 轴回零点），同时

主轴定位；＠机械手夹爪同时抓住主轴和刀库中的刀具；＠液压系统把卡紧在主轴和刀库
中的刀具松开；＠机械手从主轴和刀库中取出刀具（机械手伸出）；＠机械手旋转 180° ，交

换新旧刀具；＠将更换后的刀具插入主轴和刀库；＠同时夹紧主轴和刀库中的刀具；＠机

械手松开主轴和刀库中的刀具。

当机械手夹爪松开刀具或接近松开刀具后，接近开关发出“换刀结束“信号，主轴自

由，可以进行加工。程序第＠步未动作，是因为第＠步未完成；或者执行第＠步时，本身条

件无法建立。

产生故障的原因有：

(1)“松刀“感应开关失灵。在换刀过程中，各动作的完成信号均由感应开关发出，只

有上一个动作完成后才能进行下一个动作。第＠步＂刀库松刀”和“主轴松刀＂，如果有一

个感应开关未发信号，则机械手＂拔刀“电磁阀就不会动作。检查两感应开关，信号正常。

(2)“松刀“电磁阀失灵。刀具与主轴的“松刀”，是由电磁阀接通液压缸来完成的。

如电磁阀失灵，则液压缸未进油，刀具就“松”不了。检查刀库和主轴的“松刀“电磁阀动作

均正常。

(3)“松刀＂液压缸因液压系统压力不够或漏油而不动作，或行程不到位。检查刀具
库松刀液压缸，动作正常，行程到位；打开主轴箱后盖，检查主轴松刀液压缸，发现也已到

达松刀位置，油压也正常，液压缸无漏油现象。

(4) 机械手系统有问题，建立不起“拔刀”条件。其原因可能是：＂拔刀“电磁阀失灵或

＂拔刀＂液压缸有毛病。检查结论：＂拔刀“电磁阀已激磁，＂拔刀＂液压系统正常。

(5) 主轴系统有问题。主轴结构示意图如图 2-63 所示。

刀具 1 是靠碟形弹簧 5 通过拉杆 6 、锥套 4 ，压迫 6 个钢球 3 而将刀具柄尾端的拉钉 2

拉紧的；松刀时，液压缸 9 的活塞杆顶压顶杆 10 ，顶杆 10 通过空心螺钉 8 推动拉杆 6 ，一

方面使钢球松开刀具 1 的拉钉 2 ，另一方面又顶动拉钉 2 使刀具 1 左移而在主轴锥孔中

变“松”。

主轴系统不松刀的原因估计有四点：少刀具尾部拉钉 2 的长度不够，致使液压缸虽已

运动到位，而仍未将刀具顶“松”;＠拉杅 6 尾部空心螺钉 8 位置起了变化，使液压缸行程
满足不了“松刀”的要求；＠顶杆 10 出了问题（曾出现过折断）而使刀具无法松开；＠主轴
刀程序时才熄灭。显然，根据“报警内容”，机床是因为无法执行换刀第 4 步（从主轴和刀

装配调整时，刀具左移量（使刀具在锥孔中松开）调得太小），致使在使用过程中因一些综

106 

2 

3 

4 

5 

6 

图 2-63 主轴结构示意图

1 —刀具； 2—拉钉； 3—钢球； 4一锥套； 5—碟形弹簧； 6一拉杆；

7一端盖； 8一空心螺钉； 9一液压缸； 10一顶杆。

合因素而导致不能满足“松刀”条件。

由于结构设计上的缺陷，以下原因无法简便地检查确定：刀具取不出来，空心螺钉 8

在主轴箱中，松刀液压缸不易拆卸。如果能方便地拆下液压缸，则修正液压缸端盖可增大

液压缸行程，从而间接排除某些故障原因，可能一举解决“松刀”问题。

(1) 主轴系统的拆检与调整。

(2) 将在拆卸主轴系统时影响到的其他部位进行相应调整。

(3) 换刀参考点的检查与修正。在下列情况下必须检查 Y 坐标零点位置并作必要

的修正，以确保换刀的正常进行：中刀库或机械手拆卸过改）主轴箱拆卸过；＠ Y 向挡块

或限位开关拆卸过；＠ Y 向感应同步器重新安装过；＠ Y 向丝杠重新调过。

重新检测：令主轴箱回到 Y 坐标零点，

测得其与换刀正确位置之间的差值为 5mm

左右，于是移动 Y 向回零挡块后再测，差值

为 0.7mm 左右，已经接近，则将此差值以 1 

0.001mm 为单位补入 NC 参数 ”#83” 中。

用手动方式分解换刀动作，检查换刀的

正确性；再以自动换刀运转，检查主轴松紧

刀、机械手松紧刀的情况，并应确保在主轴转

动时，刀柄不与机械手相摩擦；最后使用考机

程序，使机床进行 500 次连续自动换刀，要求

不得出现任何故障。

例 2-6 立式加工中心换刀臂平移至

C 时，无拔刀动作。

故障分析与排除 图 2 — 64 为自动换刀

控制示意图。

数控机床上刀具及托盘等装置的自动交

换动作都是按照一定的顺序来完成的，因此

观察机械装置的运动过程，比较正常与故障

时的情况，就可发现疑点，诊断出故障的
原因。

. 

6 

图 2-64 自动换刀控制示意图

1 一刀库； 2一刀具；

3一换刀臂升降液压缸； 4一换刀臂；

5—主轴； 6—主轴液压缸； 7一拉杆。

107 

ATC 动作的起始状态是： CD 主轴保持要交换的旧刀具；＠换刀臂在 B 位置；＠换刀臂

在上部位置；＠刀库已将要交换的新刀具定位。

自动换刀的顺序为：换刀臂左移 (B-A) 换刀臂下降（从刀库拔刀)-换刀臂右移
(A-B)- 换刀臂上升-换刀臂右移 (B-C ，抓住主轴中刀具)-主轴液压缸下降（松
刀)-换刀臂下降（从主轴拔刀)-换刀臂旋转 180° （两刀具交换位置)-换刀臂上升（装
刀)-主轴液压缸上升（抓刀）换-刀臂左移 (C-B) 刀库转动（找出旧刀具位置）-换刀
臂左移 (B-A ，返回旧刀具给刀库)-换刀臂右移 (A-B) 刀库转动（找下一把刀具）。

换刀臂平移至 C 位置时，无拔刀动作，分析原因，有儿种可能：

(1)  SQ2 无信号，使松刀电磁阀 YV2 未激磁，主轴仍处于抓刀状态，换刀臂不能

下降。

(2) 松开接近开关 SQ4 无信号，则换刀臂升降电磁阀 YVl 状态不变，换刀臂不下降。

(3) 电磁阀有故障，即使给予信号也不能动作。

逐步检查，发现 SQ4 未发出信号，进一步对 SQ4 检查，发现感应间隙过大，导致接近

开关无信号输出，产生动作障碍。

例 2-7 利用西门子 810/820CNC 系统菜单功能排除加工中心自动换刀机故障。
故障现象 当换刀机某一信号不到位而发生故障，致使整机不能运行时（西门子
810/820 系统出现故障时，一般无面板恢复功能），采用常规修理方法需熟悉换刀机液动
或气动控制原理，还要熟悉换刀机 PLC 控制信号，进而查到控制某一动作的阀。因为换
刀机控制较复杂，所以在进行手动操纵换向阀时，危险性较大。但用菜单操作方法排除换

刀机故障，操作非常简单，修理周期非常短。

故障分析 以下详述西门子 810/820 系统如何使换刀装置恢复到起始位置（单步动

作）的 CRT 菜单功能。

叩使设备（如加工中心）进入单独运动模式（模式开关至 MDI—AUTOMATIC 状
态）；＠按诊断（识别）键个或 t 至 PLC 状态（ PLCstatus) ；＠选择 FW （按 FW 软键），出现
FB 菜单；＠光标移至 FB119 ，将其设定为 1; ＠切换至 JOG （手动）状态，按个或 t 键至
TOOL—CMOTIONS 状态（单独换刀程序，如图 2-65 的 CRT 菜单），按选择键 (CRT 下
面的软键）完成所需的动作；＠将 FB119 调为 O;(J)按诊断（识别）键回复至正常菜单；＠按
下停止按钮，关断总电源以后再打开并启动机床，检查机床是否处于正常状态。

说明： FB119 为换刀机手动、自动切换 PLC 参数；如 PLC 参数不能修改，可向制造厂

索取修改码；操纵该菜单时，需合格的操作人员；操作时需细心，如换刀机一定要到降下

时，才能旋转等。

利用该功能快速修复加工中心刀具拉紧不到位、机械手机件损坏、刀具进刀库不到位

等故障，可以收到事半功倍的效果。

CRT 换刀机手动操纵菜单如图 2-65 所示。
例 2-8 德国马豪公司的 MH800C 加工中心，该机装配菲利普公司 CNC500 系列

数控系统，发现刀库换刀位置错误故障。

故障现象 换刀系统在执行某步换刀指令时不动作， CRT 显示 E98 报警＂换刀系统

机械臂位置检测开关信号为 0” 和 E116 报警＂刀库换刀位置错误”。

故障检查与分析 根据 CRT 提供的信息我们判定故障发生在换刀系统和刀库两部

108 

JOG 

Individual motions tool changer 

FUNC「ION

ACKNOWl.SPl SP2 

I.GRIPPER CLAW 
TOOLCLAMP 
0. INTERLOCK 
O.STROKE 
GRIPPER ARM 

LOCKED/lJNL 
LOCKED/lJNL 
LOCKED/UNL 
UP/DOWN 
0/180 

吓NTION:CHECK

TOOL TABLES 仇

0/1% 
0/1% 
0/1% 

l／伊lo
l/O"lo 

SELECT ~ B骂M

01 
DGR 

I 

| 

180/ 
DGR 

图 2-65 CRT 菜单

分，相应的位置检测开关尤信号送至 CNC 单元的输入接口，从而导致机床自我保护。造
成开关尤信号输出的原因有两个： CD 由千液压或机械上的原因造成动作不到位而使开关
得不到感应；＠开关失灵。根据机床结构的实际情况，决定先检查开关。首先检查刀库，
用一薄铁片去感应开关，先排除了刀库部分 3 个开关失灵的可能性，接着对结构紧凑的换
刀系统机械进行了拆卸，检测装在其内部的两个开关，结果发现机械臂停在行程中间位置

上。＂臂移出“开关 21S1 和＂臂缩回“开关 21S2 均得不到感应，造成输出信号均为 0( ＂臂

移出“开关信号为 1 时，换刀系统才有动作）。

故障处理 先用旋具顶相应的 21Y2 电磁阀芯把机械臂缩回至＂臂缩回”位置，使机
床恢复正常，接着进一步分析产生故障的原因。考虑到机床在此之前换刀正常，手控电磁
阀能使换刀系统回位，因而先否定了因液压或机械上阻滞而造成换刀系统不到位的可能
性。为此怀疑换刀动作与程序换刀指令不协调是造成故障的原因。《操作员手册》中要求
“连续运行中，两次换刀间隔时间不得小千 30s" ，经计时发现引发故障的程序段两次换刀

时间间隔仅为 21s 。修改了相应的程序，故障排除。

例 2-9 青海第一机床厂制造的 XH754 加工中心装配 FANUC6M 系统。刀库运

行时发生抖动故障。

故障现象 刀库运行时抖动。

故障检查与分析 由千刀库与转台共用一套 PWM 单元，位置控制采用一块简易定
位板，且转台正常，所以机修工误认为是机械故障。对蜗轮、蜗杆反复查原因无结果。考
虑机电一体化设备有些机械故障可用电气弥补的方法，试调快慢速时，发现简易定位板刀
库测速反馈部分稳压管击穿，选用 5V 稳压管换上后使用正常。

分析原因 当测速机反馈电压不稳定时，使输入信号与反馈信号间的关系出现错误，

导致其反馈峰值有变化，波形不稳定而造成本故障。

例 2-10

UFZ6 加工中心配置西门子 880 系统。发现机械手不能手动换刀故障。

故障现象 机床的机械手不能手动换刀。
故障检查与分析 该机床刀库配有 120 把刀位，刀具的人工装卸是通过脚踏开关控
制气阀的动作来夹紧和松开刀具。此故障发生时气阀不动作，根据我们多年的维修经验
知道，对于局部的可直接控制的动作利用 PLC 程序来判断故障是最有效的方法。由电路
图知道气阀由 N—K8 继电器控制， N一K8 继电器由 A27.6 的输出来控制。根据机床制
造厂家提供的机床 PLC 程序手册，查出 PB156-1 为控制输出 A27.6 程序，内容如下：
109 

U  M  123.3 
U  M  165.3 
U  E  26.0 
U  E  26.7 
:  A  27.6 

注：程序中字母为德文。
由上述程序知道， M123.3 和 M165.3 为 PLC 内部的程序中间继电器，输入 E26.0 由
脚踏开关 N—S06 控制，输入 E26.7 是一套由机械和电气连锁装置组成的刀库门控制

信号。

小结

数控机床的 PLC 主要功能是完成机床辅助运动的控制，机床的辅助运动包括：模拟

主轴的正、反转和停止控制，加工中心主轴的松刀、紧刀和吹屑和定向控制，全功能车床的
液压卡盘加紧和放松、电动刀架的控制、尾座的前进和后退，机床冷却启动停止、润滑启动
和停止，刀库和换刀机械手的控制，转台的控制和自动工作台的交换等。数控机床的
PLC 可分为内装型和独立型。数控机床的 PLC 与外部信息交换可分为： MT-PLC 为 X
（主要是机床操作面板的各种按键和机床上的各种开关和传感器及继电器、空开的辅助触

点信号）， PLC-MT 为 Y（主要是控制机床的执行元件如：继电器、电磁阀和指示灯和报
警等）， PLC-CNC 为 G （将面板的操作功能和加工程序功能经过 PLC 运算后通知
CNC),CNC- PLC 为 F(CNC 当前执行的状态或需要 PLC 处理的 M 、 S、 T 指令传送到

PLC 执行或显示）。

数控机床中的 PLC 指令可分为基本指令和功能类型指令，主要实现机床的所有辅助

功能的控制。本章介绍了刀库自动选刀的控制，刀套编码方式和随即选刀控制方式，刀套

编码方式是只认刀套不认刀具，刀具在交换过程中必须将使用的刀具放回到刀套内，伞塔
式旋转刀库借用液压或气压系统进行换刀；随即换刀利用双爪机械手，实现刀库的刀和主

轴刀具直接交换，相关功能类型指令可纪录相应刀座上的刀号，换刀速度快、效率高，但控

制比较复杂。

利用系统梯体形图显示画面和系统梯形图的诊断画面可以进行比较容易地进行故障
诊断，首先根据数控机床电气控制原理图，列写相关的 X 、 Y 接口表，而 G、 F 的意义是固

定的可查阅不同系统的定义。

习题

一、判别题

1. 所有 CNC 送至 PLC 或 PLC 送至 CNC 的信息含义和地址均由 CNC

厂家确定， PLC 编程者只可使用不可改变和增删。

2. 数控机床的主轴运动属于辅助运动。

110 

( 

( 

) 

) 

3.  X 是 CNC-PMC 的输出信号。
4.  FANUCOi 系统 PMC 选用外置 I OLINK 时的系统急停信号的地址巳

经固定选定为 X8.4 ，第 1 、 2 、 3 轴的回零减速信号 DECl 、 DEC2 、 DEC3 选定为

X9.0 、 X9.1 、 X9.2 。

5. 可变定时器 T01~T08 的时间设定最小单位为 8ms 。

6. 译码指令 DEC 是对换刀指令 Tx 进行执行的指令。
7.  DECB 指令可以对指定的 8 条 Mxx 指令译码。
8.  F7.3 为 T 码选通信号， F26 为系统 T 码输出信号的地址。

( 

、
丿

((((( 

、
丿
）
）
）
、
丿

二、填空
1.  F7.0 为＿＿码选通信号，

为 FANUCOi 系统的 M 码输出信号地址。

2. 显示信息指令 DISPB 用于在系统显示装置 (CRT 或 LCD) 显示外部信息，一般是

机床厂家根据具体情况编制

3. 电动刀架采用

及

传动，

信息。

进行粗定位，

进行精定位。

通过电动机

实现松刀、抬刀和转位，通过

进行分度检测，电动

机

后落刀，定位锁紧，一般换刀设定时间限制在＿ s ，反转延时时间设定

s 。

三、简答题

1. 简述数控数控机床的辅助功能都包含哪些？

2. 如图 2-66 所示，请指出该条指令可对那条 M 指令开始译码，如果执行 MO8 指令

时，对应的 R300 地址的那一位为 1 。

DECB 

SUB25 

0001 

FlO 

0003 

R300 

图 2-66 习题图

3. 如图 2-67 所示， X2.3 X2.2 X2.1  X2.0 为刀架编码器的输出信号， X2.4 为电动

刀盘的选通信号， D320 存放实际刀号的数据表，试问电动刀架转道何位置时， D320 的内

容是 07 。这时刀架编码器的输出信号是多少？

NU邓

07 

SUB23 

0320 

图 2-67 习题图

4. 简述 FANUC 系统中， CNC 系统、系统 PMC 及数控机床侧信号地址的区别。
5.  FANUCOiA 系统中，画出一个接近开关（三根线）与系统 I,0 模块（输入地址为

111 

Xl000.3) 的接线图。

6. 简述可变定时器 TMR 与固定定时器 TM团3 的区别及各自的使用场合。
7. 简述 PMC 功能指令 XMOVB 、 DSCHB 、 ROTB 的功能及应用。

8. 有几种常用的系统工作状态及其具体作用。
9. 如图 2-68(a) 所示，数控机床的工作状态是由拨段开关（单层），输入信号地址：系
统编辑状态信号地址为 XlOOO.O ，系统自动运行状态 (MEM) 信号地址为 Xl000.1 系统
MDI 状态信号地址为 Xl000.2 ，系统手轮状态信号地址为 Xl000.3 ，系统手动连续进给
(JOG) 状态信号地址为 Xl000.4, 系统返回参考点状态信号地址为 Xl000.5, 系统
DNC 状态信号地址为 Xl000.6 ，编制系统 PMC 控制梯形图，系统采用 FANUC OiA 

系统。

0 

回零

0 

编辑

0 

0 

MDI 

0 

0 

DNC 

三卫

点动

手脉

(a) 

(b) 

图 2-68 习题图

10.  CK6136 数控车床采用 4 工位的电动刀架自动换刀装置，电动机正转松开刀架并

开始转位，当刀架转到位置后，电动机反转锁紧刀架，完成自动换刀控制。换刀位置由安

装在刀架内的 4 个霍尔开关元件进行检测和控制，其信号的输入地址分别为 X4.1 、

X4.2 、 X4.3 、 X4.4 ，电动机正转输出信号地址为 Y2.1 ，电动机反转输出信号地址为 Y2.2,
编制系统 PMC 控制梯形图， CK6136 系统采用 FANUC Oi  MateTB 系统。

11. 某加工中心的自动换刀装置采用不带机械手的斗笠式换刀装置，刀库容量为 12

把刀（数据表 DOOOl - D0012 记忆刀座号，主轴刀座号记忆地址为 DOOOO) ，要求刀库可以

实现就近选刀控制，当刀库转到目标位置前一位置时刀库有减速控制，刀库的位置检测是

由角度编码器进行检测和控制，其转位信号的输入地址分别为 X1002.0 、 X1002. l 、

Xl002.2 、 X1002.3 ，选通信号输入地址为 X1002.4 ，该机床系统采用 FANUC OiA 系统。

编制 PMC 控制梯形图。

12. 上题中，如何进行刀库数据表的设定及数据的输入，写出通过 PMC 参数画面具

体操作过程。

13. 某数控机床采用手持式脉冲编码器控制，手轮控制轴选择开关和手轮倍率选择

开关如图 2-69 所示。系统采用 FANUCOi 系统，系统的第 1 轴～第 4 轴的手轮控制轴
选择信号分别为 G18.0 、 Gl8.1 、 G18.2 、 Gl8.3 ，开关控制输入信号地址分别为 X2.0 、
X2.1 、 X2.2 、 X2.3 。系统手轮倍率选择信号为 G19.5 、 G19.4 （二进制代码控制形式），信
号 “00” 为倍率 Xl ，信号 “01” 为倍率 X 10 ，信号 “10” 为倍率 XM （系统参数 7113 设定 M,

112 

具体设定为 100) ，信号 “11” 为倍率 XN （系统参数 7114 设定 N ，具体设定为 1000),

手轮倍率开关输入信号地址分别为 X2.4 、 X2.5 、 X2.6 、 X2.7 。编制系统 PMC 控制梯

形图。

X轴/厂：－U轴

l/｀000

( a ) (b )  

图 2-69 手持脉冲编码器面板控制开关

(a) 手轮控制选择； （ b ）手轮倍率选择。

113 

第 3 章典型数控系统维修技术

3.1  FANUC 数控系统维修技术基础

3.1.1  FANUC Oi 、 16i/18i/21i 系列数控系统的组成及特点

1.  FANUC Oi 系列数控系统的组成及特点

日本 FANUC 公司是当今世界上数控系统科研、设计、制造、销售实力最强大的企业，

同时也是主要的机器人厂商。 FANUC 数控系统以其高质量、低成本、高性能、较全的功

能，适用于各种机床和生产机械等特点，在市场的占有率远远超过其他数控系统。

1)  FANUCOi 系列数控系统主要特点

FANUCOi 数控装置为模块化结构，具有性价比高、操作简单、方便等优点，因此在我

国数控机床行业应用很广，主要特点如下：

(1)  FANUCOi 系统与 FANUC 16i/18il21i 等系统的结构相似，均为模块化结构。主

CPU 板上除了主 CPU 及外围电路之外，还集成了 FROM&SRAM 模块、 PMC 控制模块、

存储器和主轴模块、伺服模块等。其集成度较 FANUC 0 系统的集成度更高，因此

FANUCOi 控制单元的体积更小，便千安装排布。

(2) 采用全字符键盘，可用 B 类宏程序编程，使用方便。

(3) 用户程序区容量比 OMD 大一倍，有利千较大程序的加工。

(4) 使用编辑卡编写或修改梯形图，携带与操作都很方便，特别是在用户现场扩充功

能或实施技术改造时更为便利。

(5) 使用存储卡存储或输入机床参数、 PMC 程序以及加工程序，操作简单方便。使

复制参数、梯形图和机床调试程序过程十分快捷，缩短了机床调试时间，明显提高数控机

床的生产效率。

(6) 系统具有 HRV 功能，伺服增益设定比 OMD 系统高一倍，理论上可使轮廓加工误

差减少 1 庄。以切削圆为例，同一型号机床 OMD 系统的圆度误差通常为 0.02mm-

0.03mm ，换用 FANUCOi 系统后圆度误差通常为 O.Olmm-0.02mm 。

(7) 机床运动轴的反向间隙，在快速移动或进给移动过程中由不同的间隙补偿参数

自动补偿。该功能可以使机床在快速定位和切削进给不同工作状态下，反向间隙补偿效

果更为理想，这有利于提高零件加工精度。

(8) 系统可预读 12 个程序段，比 OMD 系统多。结合预读控制及前馈控制等功能的

应用，可减少轮廓加工误差。小线段高速加工的效率、效果优于 OMD 系统，对模具三维

立体加工有利。

(9) 与 OMD 系统相比， FANUCOi 系统的 PMC 程序基本指令执行周期短，容量大，

114 

功能指令更丰富，使用更方便。

(10)  FANUC Oi 系统的界面、操作、参数等与 FANUC 16i 、 18i 、 21i 基本相同。熟悉

FANUCOi 系统后，自然会方便地使用上述其他系统。

(11)  FANUC Oi 系统比 OM 、 OT 等产品配备了更强大的诊断功能和操作信息显示功

能，给机床用户使用和维修带来了极大方便。

(12) 在软件方面， FANUCOi 系统比 FANUCO 系统也有很大提高，特别在数据传输

上有很大改进，如 RS-232 串口通信波特率达 19200b/s ，可以通过 HSSB （高速串行总线）

与计算机相连，使用存储卡实现数据的输入倩料扎

高性价比的 FANUCOi 系列有整体软件功能包，高速、高精度加工，并具有网络功能。
其中 FANUC Oi - MB/MA 用于加工中心和铣床， 4 轴 4 联动； FANUC Oi - TBITA 用于
车床， 4 轴 2 联动； FANUC Oi - mate MA 用于铣床， 3 轴 3 联动； FANUC Oi-mate TA 用

千车床， 2 轴 2 联动。

2)  FANUCOi 系列数控系统的组成

FANUCOi 数控系统由控制单元、显示单元、机床操作面板、 I/0 模块、伺服驱动单

元、主轴驱动单元等组成，其中控制单元（即数控装置）是最核心的部分。

FANUCOi 数控装置（控制单元）由主板模块和 I/0 接口模块两部分构成，如图 3-1

所示。主板模块主要包括 CPU 、内存（系统软件、宏程序、梯形图、参数等）、 PMC 控制、
I/0 Link 控制、伺服控制、主轴控制、内存卡 IIF 及 LED 显示等。

匕习 I

I二习

主板 II/0 VL~槽

·HSSB 板

l/0 板

·电源印制如谘板（内装）

OC-OC 整流器
·DI/DO 

·阅读穿孔机接口 1/F

·MDI 控制

·显示控制

·手摇脉冲发生器控制

主板

·主 CPU

·存储器

系统软件

宏程序

梯形图程序

加工程序

参数等

·PMC 控制
· 1/0Link 控制

·伺服控制

．主轴控制

·存储卡 IIF

·LED 显示

。

—双槽

', 

-1 

图 3 — 1 FANUC Oi 系统控制单元组成

1/0 模块主要包括电源、 1/0 接口、通信接口、 MDI 控制、显示控制、手摇脉冲发生器

控制和高速串行总线等。

2.  FANUC  16i/18i/21i 系列数控系统的组成及特点
1)  FANUC 16i/18迈1i 系列数控系统的功能及特点

FANUC 16i/18il21i 主要特点如下：

(1) 超小型、超薄型。 FANUC 16i/18i 戊 1i 系列产品比 FANUCOi 系统体积进一步缩

115 

小，将液晶显示器与 CNC 控制部分溶为一体，实现了超小型化和超薄型化（无扩展槽时厚

度只有 60mm) 。

(2) 纳米插补。以纳米为单位计算发送到数字伺服控制器的位置指令，极为稳定，在

与高速、高精度的伺服控制部分配合下能够实现高精度加工。通过使用高速 RISC 处理

器，可以在进行纳米插补的同时，以适合于机床性能的最佳进给速度进行加工。

(3) 超高速串行通信。利用光导纤维将 CNC 控制单元和多个伺服放大器连接起来

的高速串行总线，可以实现高速度的数据通信并减少连接电缆。

(4) 伺服 HRV 控制。借助于纳米 CNC 的稳定指令和高响应伺服 HRV 控制的高增

益伺服系统，以及高分辨率的脉冲编码器 (16000000r-1) 实现高速、高精度加工。

(5) 丰富的网络功能。 FANUC 16i/18i/2li 系统具有内嵌式以太网控制板 (21i 为选

购件），可以与多台计算机同时进行高速数据传输，适合于构建在加工线和工厂主机之间

进行交换的生产系统。并配以集中管理软件包，以一台计算机控制多台机床，便于进行监

控、运转作业和 NC 程序传送的管理。

(6) 远程诊断。通过因特网对数控系统进行远程诊断，将维护信息发送到服务中心。

(7) 操作与维护。可以通过接触摸画面上所显示的按键进行操作；可以利用存储卡

进行各类数据的输入僧料j ；可以以对话方式诊断发生报警的原因，显示出报警的详细内

容和处置办法；显示出随附在机床上的易损件的剩余寿命；存储机床维护时所需的信息；

通过波形方式显示伺服的各类数据，便于进行伺服的调节；可以存储报警履历和操作人员

的操作履历，便千发生故障时查找原因。

(8) 控制个性化。通过 C 语言编程，实现画面显示和操作的个性化；用宏语言编程，

实现 CNC 功能的高度定制；通过 C 语言编程，可以构建与由梯形图控制的机器处理密切

相关的应用功能。

(9) 高性能的开放式 CNC。 FANUC Series  160i/180i/2lOi 是与 Windows 2000 对应

的高功能开放式 CNC。这些型号的 CNC 与 Windows 2000 对应，可以使用市面上出售的

多种软件，不仅支持机床制造商的机床个性化和智能化，而且还可以与终端用户自身的个

性化相对应。

(10) 软件环境。为了与 CNC/PMC 进行数据交换，提供可以用 C 语言或 BASIC 语

言调用的 FOCASl 驱动器和库函数；提供 CNC 基本操作软件包，它是在计算机上进行

CNC/PMC 显示、输入、维护的应用软件，通过用户界面向操作人员提供＂状态显示、位置

显示、程序编辑、数据设定”等操作画面； CNC 画面显示功能软件，是在计算机上显示出与

标准的 i 系列 CNC 相同画面的应用软件； DNC 运转管理软件包，可以完成从计算机上的

硬盘高速地向 CNC 传输 NC 程序并加以运行。

2)  FANUC 16i/18i/21i 系列数控系统的基本组成与连接
FANUC 16i/18i/2li 系统由液晶显示器一体型 CNC、机床操作面板、伺服放大器、强

电盘用 I/0 模块、 1/0 Link 阳放大器、便携式机床操作面板及适配器、 ai 系列 AC 伺服电

机、 ai 系列 AC 主轴电机、应用软件包等部分组成，如图 3-2 所示。

FANUC  18i-A 控制单元分带选择槽和不带槽两种，其外部形状如图 3 — 3 所示。

控制单元 (FANUC 18i/180i ，一体型显示器）组成如图 3-4 所示。包括主板和选择

板。主板上主要有 CNC 控制用 CPU 、电源回路、电池保护存储器、轴控制板、主轴串行接

116 

伺服放大器 1

伺服放大器 I

伺服放大器 l

主轴伺服放大器

图 3-2 FANUC 16i/18i/21i 系统基本组成与连接示意图

选择插槽数：最多 4
r 一、

槽口 no. 4 

3  2 

I 

无选择插槽

图 3-3 控制单元结构图

RISC 板 (l8i-MA)

高精度轮廓控制功能

子 CPU 板 (l8i-TA)
双.2系轴统----6控轴制控用制子 CPU

主板

CN·电C源控回制路用 CPU

串行通信板

远程缓冲器 IDNCIIDNC2

．主轴串行接口
·主轴模拟输出

HSSB 接口板

高速串行总线 1/F
(180i-A 基本选项）

I 

C 语舌板
PMC 用 C 语言功能

Symaolie CAPil 板

对话型自动编程功能

上料器控制板

上·21料4器轴控控制制功能

·PMC SAi 

．电池保护存储器

数据服务器板

数据服务功能 (35inHDD)

霖谥（竺己 I础月言妇砐

选择板

·电池保护存储器
·2 轴 4 轴控制
·主轴串行接口
·LCD 显示控制
·MDI 接口
·I/0 链路
·PMC-SB5/SB6 
·主轴模拟输出
·高速 DI
·RS-232CX2 
．存储卡接口

基本系统

图 3-4 FANUC  18i/180i-A 控制单元组成图

117 

口、 LCD 显示控制、 MDI 接口、 1/0 板、 PMC 控制板、存储卡接口、 RS-232C 通信接口等；
选择板主要有上料器控制板、数据服务器板、 C 语言板、 HSSB 接口板、子 CPU 板等，可根

据需要进行配置。

3.1.2  FANUC Oi 系列数控系统的功能连接

1. 各功能模块简介

1)  FANUCOi 数控装置接口简介

如图 3-5 所示， FANUCOi 数控装置的各指示灯及接口信号如下。由于各系统之间

有一些差别，本节内容以 BEUING FANUC Oi - A 为例。

DD 

DD 二
』

JJoPSU 

D
淏

气｀
享
己
言
霍
2
J
H由
门
A
i
尸
工

SBJB 

a

o
o厦

皿
响
应
盓

JF25 匡门

图 3-5 FANUCOi 数控装置接口

118 

(1)  "STATUS" （状态） LED 指示灯。电源接通时， “STATUS"灯通过组成不同的亮、

灭状态，表示数控装置从电源接通到进入正常运行状态的过程中，所需进行的工作流程。

当主板发生故障时，通过“STATUS" LED 指示灯的不同状态，可进行故障判断。具体含

义见表 3-1 。

表 3 — 1 电源接通时的 LED 指示灯具体意义（．：灯亮；口：灯灭）

序号

绿色 LED 显示

含

义

1 

2 

3 

4 

5 

6 

7 

8 

9 

10 

口口口口

电源没有接通的状态

■■■■ 

.亡] ■■

口口 ■■

■■ 亡］．

口．口 ■

．口口．

■■■ 亡］

口 ■■ 匕］

电源接通后，软件装载到 DRAM 中，或因错误， CPU 处于停止状态

等待系统内各处理器的 ID 设定

系统内各处理器 ID 设定完成

FANUC BUS 初始化完成

PMC 初始化完成

系统内各印制板的硬件配置信息设定完

PMC 梯形图程序的初始化执行完

等待数字伺服的初始化

．亡汇］口

初始设定完成，正常运行中

"ALA印W" （报警） LED 指示灯。出现错误时，与 “STATUS" 灯组成不同的亮、灭状

态表示不同的异常情况。具体含义见表 3-2 。

表 3 — 2 系统出现错误时 LED 指示灯具体意义（．：灯亮；口：灯灭）

序号

状态

绿色 LED 显示

含

义

1 

2 

3 

STATUS 

ALARM 

STATUS 

ALARM 

STATUS 

ALARM 

口．口口

■■ 口

口．口口

口 ■■

口．口口

口．口

主 CPU 板上出现电池报警

出现伺服报警（看门狗报警）

出现其他系统方面的报警

(2)  "BATTERY" 。数控装置断电后进行数据保存的电池。

(3)  "CP8“接口。电池接口。

(4)  "MEMORY CA即 CNMC" 插口。 PMC 编辑卡与数据备份存储卡的接口。
(5)  "RSWl"旋转开关。维修时用，一般无需作任何调整。
(6)  "JDlA", 1/0- LINK 接口，为串行接口，用于 NC 与 1/0 各种单元的连接（如机

床操作面板、 1/0 扩展单元等），可对各设备的 1/0 信号进行高速传送。

(7)  "JA7A",SPDL 口（串行主轴或位置编码器接口）。系统使用数字（串行）主轴时，

与伺服模块的 “JA7B” 接口连接。使用模拟主轴时，此接口连接位置编码器的主轴反馈

信号。

(8)  "JA8B" ，模拟主轴接口。与模拟主轴伺服放大器连接，控制模拟主轴电动机。

119 

(9)  "JSlA",SERVOl 伺服模块接口。与伺服模块定义的第 1 轴接口连接。
(10)  "JSZA",SERV02 伺服模块接口。与伺服模块定义的第 2 轴接口连接。
(11)  "JS3A",SERV03 伺服模块接口。与伺服模块定义的第 3 轴接口连接。
(12)  "JS4A",SERV04 伺服模块接口。与伺服模块定义的第 4 轴接口连接。
(13)  "JF21",SCALE! 光栅尺 1 接口。与系统定义的第 1 轴的光栅尺连接。
(14)  "JF22",SCALEZ 光栅尺 2 接口。与系统定义的第 2 轴的光栅尺连接。
(15)  "JF23",SCALE3 光栅尺 3 接口。与系统定义的第 3 轴的光栅尺连接。
•  (16)  "JF24",SCALE4 光栅尺 4 接口。与系统定义的第 4 轴的光栅尺连接。

(17)  "JF25",SC-ABS 分离式脉冲编码器电池接口。该接口连接的电池用于 ABS

绝对型光栅尺位置数据的保存。

(18)  "JD5A",RS-232 - 1 串行接口。主要用于与外部设备的连接，可以将加工程
序、参数等数据从外部设备输入到系统中或从系统中输出信号给外部设备。例如计算机

信号的传送，即通过此端口。

(19)  "FUSE" ，熔断器。此容量为 7.5A。
(20)  "PIL" ，电源指示灯。控制单元接通＋ 24VDC 电源后，该 LED 指示灯亮。
(21)  "DI/DO- 2" ，内装 l/0 卡接口 2 。为机床提供 1/0 信号接受器 (X) 和驱动器

(Y) 。

(22)  "DI/DC-1" ，内装 l/0 卡接口 1 。为机床提供 1/0 信号接受器 (X) 和驱动器

(Y) 。

(23)  "CPlA",OC IN 电源输入接口。与外部＋ 24VOC 电源连接，为控制单元提供

电源。

(24)  "CPlB" ，即 DCOUT 电源输出接口。与显示单元相连，为显示单元提供电源。

其显示单元接口是 “CP5"(LCD 时）或 “CNZ"(CRT 时）。

(25)  "JAl",CRT 显示器接口。与 LCD 液晶显示器的 “JAl“ 接口连接；或与 CRT 显

示器的 “CNl” 接口连接。

(26)  "JA2",MDI 手动数据输入装置接口。与 MDI 单元连接，即键盘的连接。
(27)  "JDSB",RS-232-2 串行接口。同 “JD5A” 接口。
(28)  "JD3B",MPG 手摇脉冲发生器接 H。用于连接手摇脉冲发生器，在手轮控制方

式下，坐标轴按手轮进给量移动。

(29)  "DI/DO — 4" ，内装 1/0 卡接口 4 。为机床提供 I/0 信号接受器 (X) 和驱动器

(Y) 。

(30)  "DIID0-3" ，内装 1/0 卡接口 3 。为机床提供 1/0 信号接受器 (X) 和驱动器

(Y) 。

(31)  "MINI SLOT",FSSB 高速串行总线接口。用于与个人计算机的通信接口。

2) 电源模块

电源模块主要是将三相交流电转换成直流电，为主轴模块和伺服模块提供（直流）电

源。而主轴模块和伺服模块在运动控制指令下，经由 IGBT 模块组成的三相逆变回路输

出三相变频交流电，控制主轴电动机和伺服电机进行精确的定位运动。

FANUC 的 a 系列电源模块主要分为 PSM 、 PSMR 、 PSM-HV 、 PSMV-HV 四种，输

120 

人电压分别为交流 200V 和交流 400V 两种。

(1) 电源模块的型号。电源模块的型号构成如下：

PSM 工—团团
PSM一电源模块；

工—制动形式，尤表示再、生制动； “R” 表示能耗制动； “V” 表示电压转换型再生制

动； “C” 表示电容制动；

匡］一输出功率；

匡］—一输入电压，无表示 200V;"HV” 表示 400V。

(2) 电源模块接口简介。如图 3-6 所示， FANUCOi 电源模块各指示灯及接口信号

如下。

0“TB1" ，即直流电源输出端。与主轴模块和伺服模块的直流输入端相连，为其提

供直流电源 (24VDC) 。

CZ)  "STATUS" （状态） LED 指示灯。用千表示电源模块所处的状态。出现异常时，显

示相关的报警代码。

@“CX1A 、 CXlB” 。 CXlA 为 200V AC 输入接口； CXlB 为 200V AC 输出接口，与主

轴模块的 CXlA 接口连接。

@“CX2A、 CX2B” 。 CX2A 为 24VDC 输入接口； CX2B 为 24VDC 输出接口，该接口

一般与主轴模块的 CX2A 连接，输出急停信号。

＠直流回路连接充电状态 LED。在该指示灯完全熄灭后，方可对模块电缆进行各种

操作，否则有触电危险。

@  "JXlB" ，即模块连接接口。一般与主轴模块的 JXlA 连接，作通信用。

©“CX3" ，即 MCC 接口。该接口连接主接触器的触点，用千控制输入电源模块的三

相交流电源的通断。

@“CX4" ，即 ESP 信号接口。该接口用于连接机床的急停信号。

@  "Sl 、 S2" ，即再生相序选择开关。一般默认 S1 短路。

＠电源模块电流、电压检查接口。

＠三相交流电电源输入端。

3) 伺服模块

伺服模块接收控制单元发出的进给速度和位移指令信号，经伺服模块转换放大后，驱

动伺服电机，使机床实现精确的工作进给和快速移动。

FANUC 的 a 系列伺服模块主要分为 SVM 、 SVM-HV 两种。前者最多可带 3 个伺

服轴，后者最多可带 2 个伺服轴。伺服模块的接口有 A 型 (TYPE A) 、 B 型 (TYPE B) 、

FSSB 型三种类型，不同的数控系统使用不同的接口类型。

(1)  FANUC Oi 伺服模块的型号。伺服模块的型号构成如下：
SVM 工—巨辽厄匡
SVM－刁可服模块；

m—轴数， “1” 表示 1 轴伺服模块； “2” 表示 2 轴伺服模块； “3” 表示 3 轴伺服模块；

121 

团—第 1 轴最大电流；

匡l—第 2 轴最大电流；

压—第 3 轴最大电流；

区］—输入电压，无表示 200V;"HV” 表示 400V。

(2)  FANUC Oi 伺服模块接口简介。如图 3-7 所示， FANUC Oi 伺服模块各指示灯

及接口信号如下。

TBl 

Q)P 
@  N  G) 

STATUS 

PIL （绿）
ALM （红）

INPUT OUTPUT 

|  ! 1 8.  8.  I @ 
I 骂二三丿©

3.SV 

lA 

CXlACXlB 

王LED
@  oc ：三＠

EX丛 CX28

JXIB 二

三门＠CX3  CX:4 

MCC  ESP 

姐互］＠

嘻勹＠

ST础S

固©

贮 Q)

曰

BATTERY 

区汇］ LED

@ 

DC~[IJ© 

CX2ACX2B 

JX5 勹仁二JI @ 

JXlA 

@ 
@ 
@ 

JXIB 

PWMll/JVIB 

PWM21/JSIB 匡二］ @ 

ENCI/JFI 匡二]@

Ll  L2  L3 

@@ 0  @匼豆

U  V  W  @  @@ 
eoo 
@O 

图 3 — 6 PSM-15 电源模块接口

图 3-7 PSM-15 伺服模块接口

CD  "P 、 N" ，即直流电源输入端。与电源模块、主轴模块和其他伺服模块的直流输入

端相连。

CZ)  "BATTERY“ 电池。用于系统断电后，保存绝对型位置编码器的位置数据。
®  "STATUS" （状态） LED 指示灯。用于表示伺服模块所处的状态。出现异常时，显

122 

示相关的报警代码。

＠直流回路连接充电状态 LED。在该指示灯完全熄灭后，方可对模块电缆进行各种

操作，否则有触电危险。

@“CX5X" ，即绝对到位置编码器电池接口。一般情况下，与电池连接或在使用分离

型电池盒时，与上一个伺服模块的 “CXSY“ 连接。

@“CX5Y" ，即绝对型位置编码器电池接 El 。一般情况下，与电池连接或在使用分

离型电池盒时，与下一个伺服模块的 “CXSX“ 连接。

(J)“S1 、 S2" ，即接口选择开关。 S1 为 A 型接口， S2 为 B 型接口。

@“F2” ，即 24V 熔断器。

@“CX2A 、 CX2B” 。 CX2A 为 24VDC 输入接口，与主轴模块或上一个伺服模块的
CX2B 连接； CX2B 为 24VOC 输出，接 El ，与主轴模块或下一个伺服模块的 CX2A 连接。
@“JX5" ，即伺服状态检查接口。该接口用于连接伺服模块状态检查电路板，可获得

内部信号的状态。

@  "JXlA” ，即模块连接接口。一般与上一个伺服模块的 JXlB 连接，作通信用。
@)  "JXlB" ，即模块连接接口。一般与下一个伺服模块的 JXlA 连接，作通信用。
@"PWMll/JVlB” ，即 A 型 NC 数控系统接口。

@“PWM21/JSlB” ，即 B 型 NC 数控系统接口，与系统控制单元对应的伺服模块接

口 JSnA(n 为轴号）连接。

®  "ENCl/JFl” ，即位置编码器接口，只在 B 型接口使用。
的三相交流变频电源输出端，与伺服电机连接。

4) 主轴模块

主轴模块用于控制驱动主轴电动机。 FANUC 的 a 系列伺服模块主要分为 SPM 、

SPMC、 SPM-HV 三种。

(1)  FANUC Oi 主轴模块的型号。主轴模块的型号构成如下：
SPM 工位］国
SPM—主轴模块；

工—电动机类型，无表示 a 系列； “C” 表示 aC 系列；

匡｝－－额定输出功率；

匡——输入电压，无表示 200V;"HV” 表示 400V。

(2)  FANUC Oi 主轴模块接口简介。如图 3-8 所示， FANUC Oi 电源模块各指示灯

及接口信号如下。

CD  "P 、 N" ，即直流电源输入端。与电源模块、伺服模块的直流输入端相连。
@  "STATUS" （状态） LED 指示灯。用于表示主轴模块所处的状态。出现异常时，显

示相关的报警代码。

®  "CXlA 、 CXlB” 。 CXlA 为 200V AC 输入接口，与电源模块的 CXlB 接 El 连接；

CXlB 为 200V AC 输出接口。

@"CX2A 、 CX2B” 。 CX2A 为 24VOC 输入接口，与电源模块的 CX2B 连接，接收急

停信号； CX2B 为 24VOC 输出接口，与伺服模块的 CX2A 连接，输出急停信号。

123 

＠直流回路连接充电状态 LED。在该指示灯

完全熄灭后，方可对模块电缆进行各种操作，否则

@  p  @ 
EB  N 

有触电危险。

@“JX4" ，即主轴伺服状态检查接口。该接口

用于连接主轴模块状态检查电路板，可获得内部信

号的状态（脉冲发生器和位置编码器的信号）。

@“JX1A" ，即模块连接接口。一般与电源模

块的 JXlB 连接，作通信用。

®  "JXlB" ，即模块连接接口。一般与伺服模

块的 JXlA 连接，作通信用。

@“JYl" ，即主轴负载功率表和主轴转速表的

连接接口。

@JA7B" ，即通信串行输入接口 1 。该接口与

控制单元的 JA7A(SPDL) 接口相连。

@  "JA7A” ，通信串行输出接口。该接口与下

一个主轴（如果有的话）的 JA7B 接口相连。

@“JY2" ，即脉冲发生器、内置探头和电动机

轴 Cs 探头接口。

@“JY3" ，即磁感应开关和外部单独旋转信号

接口。

吵 “JY4" ，即位置编码器和高分辨率位置编码

器接口。

@“JY5" ，即内置探头和主轴 Cs 探头接口。

吵 “U 、 V 、 W” ，三相交流变频电源输出端，与主

轴伺服电机连接。

2.  FANUC  Oi 数控系统连接

1) 综合连接图

PIL 

ALERR M 

（绿）
(( 红黄））

STATIJS 

I  , ! 1 8 .  8.  I@ 

盖噤I 叮但$s@

50砌60lHz 

1200R 

CXIACXIB 

区 LED

@  DC:[ill] 昙飞

1 +24V 

CX2ACX2B 

JX4  匕 @ 
JXlA  匕 @) 
[ 
JXlB 
@) 
JYl  二 @ 
JA7B  匕 @ 
JA7A  亡二习 @ 
JY2  匕二习 @ 
JY3  二 @ 
N4  仁 @ 
JY5  仁二二］ @ 

UV  W@  @@ 
ooo 
0@ 

图 3-8 SPM15 主轴模块接口

FANUCOi 数控系统主要连接主轴伺服、进给伺服、机床输入输出、显示器、键盘、手

轮及上位计算机等，如图 3-9 所示。

Oi 系统的输入电压（电源模块的 CPlA 接口）为 24V ocx (1 土 10% ），电流约 3.5A。
伺服和主轴电动机的电源为 200V AC（注意不是 220V) 。这两个电源的通电顺序是有要
求的，即先接通机床电源 (200V AC) ，再接通通过 l/0 LINK 连接的从属外部 l/0 设备的
24VOC 电源，最后接通 CNC 和 CRT 电源（后两者可同时通电）；断电时，先断从属 l/0
设备 24VOC 电源，再断 CNC 和 CRT 电源，最后断机床电源。不按照这个顺序通断电
源，就会出现报警或者造成伺服放大器的损坏。

主轴伺服可控制两种主轴电动机，即模拟主轴和数字（串行）主轴电动机。用
FANUC 的数字主轴电动机时，主轴上的位置编码器（一般是 1024 线）信号应接到主轴电
动机的驱动器上的 JY4 接口。而驱动器上的 JY2 是速度反馈接口，两者不能接错。

目前使用的 l/0 硬件有两种：内装 l/0 印制电路板和外部 l/0 模块。 l/0 板通过系

124 

主板

广－－－－－－—-
电源单元
1 
I  OC 0Uf(CP2) 
OCIN(CPI) 
L _  _ _ _ _ __ _ 
I 
CRT(JAI) 

MDI(JA2) 

RS-232C-l(JD5A) 
RS-232C-2(JD5B) 

M欧JA3)

DIDO-I(CB104) 
DID0-2(CB105) 
DID0-3(CB106) 
DID04(CB107) 

J/0 LINK(JDIA) 

A-OUT(JA8A) 

SPDL(JA?A) 

控
制
单
元

Q 
Q 

l 

l 

喊雪汇

尸

D 
D 

I 

I/0 设备（通道 I)
I/0 设备（通道 2)

长＄霖
D 雪荨莹
D-
~}妞嘈i的 DI/00

三 g
Q 

用 1/0LINK
可连接的单元

模拟主轴放大器

串行主轴放大器

SERVOI(JSIA) 

伺服放大器

SERVO认JS2A)
SERV03(JS3A) 
SERV04(JS4A) 

SCALEl(JF21) 
SCALE认JF22)
SCALE3(JF23) 
SCALE4(JF24) 

SC-ABS(JF25A) 

L- 轴光栅尺

M－轴光栅尺
N- 轴光栅尺
第 4 轴光栅尺

l 光栅尺用的 ABS 电池

图 3-9 FANUCOi 数控系统综合连接图

统总线与 CPU 交换信息； 1/0 模块用 1/0 LINK 电缆与系统连接，数据传送方式采用串

行格式，故可以远程连接。编制梯形图时这两者的地址区是不同的（在使用 l/0 模块前

应先设定地址范围）。

为了使机床运行可靠，应注意强电和弱电信号线的走线、屏蔽及系统和机床的接地。

电压为 4.SV 以下的信号线必须屏蔽，屏蔽线要接地。连接说明书中把地线分成信号地

(SG) 、机壳地 (FG) 和系统地（大地）。 FANUC 的数控装置、伺服模块和主轴模块及电动

机的外壳都要求接地。为了防止电网干扰，交流的输入端必须接浪涌吸收器。如果不处

理这些问题，机床工作时会出现 910 号、 930 号报警或是不明原因的误动作。

125 

2) 控制单元主板与 1/0 LINK 设备的连接
一般地，机床操作面板、 1/0 单元、刀库用 0 系列伺服模块（如果有）、机械手用 p 系列伺

服模块（如果有）等设备都与控制单元主板上的 JDIA(1/0 LINK) 连接，如图 3-10 所示。

尸仁二］邸操作面板

巨2 
D 
电池

JDIA 

『厂勹刀库用 6系列伺服

模块

；仁厂五手用B系列伺服

图 3-10 控制单元主板与 I/OLINK 设备的连接

3) 控制单元主板与串行主轴及伺服轴的连接
控制单元主板与串行主轴及伺服轴的连接如图 3-11 所示 。

控制单元主板

JA7A 

JSIA 

JS2A 

JS3A 

JS4A 

CX2A  JXIA 

JSIB  伺服模块
从 Y 轴
JS2B

JFl 
T82(L) 

JF2 

JSIB 

JS2B 

CX2A  JXlA 

JFJ 

伺服模块 TB2(L) 
Z、 B 轴

JF2 

TB2(M) 

图 3-11 控制单元主板与串行主轴及伺服轴的连接

B 轴伺服电机

4) 控制单元 IIO 板与显示单元的连接
FANUCOi-MA 数控系统的显示单元有两种，分为 CRT （显像管）显示和 LCD （液

126 

晶）显示单元。 LCD 显示单元以其结构紧凑、发热量少的优点成为第一选择，逐渐取代

CRT 显示单元。 FANUCOi-MA 数控系统的显示单元 1/0 板与 LCD 显示单元的连接

如图 3-12 所示。

5) 控制单元 1/0 板内装 I/0 卡的连接

控制单元 1/0 板内装 I/0 卡用千机床接口 I/0。内置 I/0 卡 DI/DO 的点数为 96164
点。如果 DI/DO 点数不够用，可以通过 FANUC 1/0 LINK 扩展 1/0 单元。当使用控制

单元 1/0 板内装 1/0 卡的 1/0 信号接收器和驱动器时，一般需要进行如图 3-13 所示的

连接。

控制单元 1/0 板

CPIB,' 

JAl,' 

机床操作面板

尸
上

LCD显示单元

控制单元 I/0 板

DI/001  l, 

CB104 

DI/D02  lI 

CB105 

DI/D03 
CB106 

Dl/D04 
CB107 

接线端子 1

,l 
叫 接线端子 2

,l 

接线端子 4

图 3-12 控制单元 I/0 板与显示单元的连接

图 3-13 控制单元 I/0 板内装 I/0 卡的连接

6) 控制单元 1/0 板与 MDI 键盘、手摇脉冲发生器和 RS — 232C 串行接口的连接

MDI 键盘和手摇脉冲发生器作为数控系统的数据和指令输入设备，是与控制单元的

1/0 板进行连接的。 MDI 键盘、手摇脉冲发生器和 RS — 232C 串行接口与控制单元 1/0

板的连接如图 3-14 所示。

控制单元 1/0 板

JA2 ，尸iCK1

MDI 键盘

JD5A,尸--1~ RS-232C 接口

碑｀—+三

图 3- 14  控制单元 I/0 板与 MDI 键盘、手摇脉冲发生器和 RS-232C 接口的连接

3.1.3  FANUC  16i/18i/21i 系统的功能连接

1.  FANUC  16i/18i/21i 控制单元的接口简介

控制单元是数控系统的核心部分，控制单元本体后视图如图 3-15 所示（以 FANUC
16i/18i/21i - A 为例）。取下本体盖板后的视图如图 3-16 所示，上面有许多接口，接口

的具体用途见表 3-3 。

127 

逆变器 PCB 或插头座

- lC JC l  

一·电池

（电池位置随装置规格而异）

装置盖板

（后面）

COPIOA 
二 (COPIOA 妇服卡上的连接器）

55 
C
A门

-- 
c 
且心

因符

因图
甘

邸
因

JD36B 

JDlA 

主板

软键电缆

图 3-15 控制单元本体后视图

逆变器 PCB

CN3 

主板

CN8B  D 
MCRD][ 

『『54 ```  CPIA 

CPIB 口

JD368 

JDIA 

图 3-16 控制单元本体接口图

128 

表 3-3 控制单元接口的上述各接口的具体用途

序号 接口编号

具体用途

序号 接口编号

具体用途

1 

2 

3 

4 

5 

6 

7 

(X)PlOA  伺服扩大器（氏过3 接 口 ）

CA55 

MDI 

CA54  伺服检查板

JD36A 

RS-232C 串 行接口 1

JD36B 

RS-232C 串行接口 2

JA40 

S 模拟输出高速接口

JDlA 

I/0 链路

8 

9 

JA41 

串行主轴／位置编码器

CPlB 

DC24V 输出

10 

CPlA  输入电源 DC24V

11  MCRDl 

PCMCIA（存储卡）接口

12 

13 

14 

CN8B 

LCD 用视频信号接口

CN3 

JNA 

存储器备用电池、风扇电动机电源

F-BLS 接口（后面板一选择插槽）

控制单元后面的状态指示灯如图 3-17 所示，上面的四个是发光二极管，通过组成不
同的亮、灭状态，表示数控装置从电源接通到进入正常运行状态的过程中，所需进行的工
作流程 。 具体含义见表 3-4 。

订［国 主板 口

图 3-17 状态指示灯

表 3-4 电源接通时的 LED 指示灯具体意义（．：灯亮；口：灯灭）

序号

LEDl 、 LED2 、匈3 、 LED4 显示

含

义

l 

2 

3 

4 

5 

6 

7 

8 

9 

10 

DD 口口

电源没有接通的状态

■■■■ 

电源接通后的初始状态，正在进行 攻幻T

■■ 口 ．

■■ 亡汇］

． 口 ■■

． 口 ． 口

■ □ 仁］ ．

口 ■■■

口 ■■ 亡］

口 DD ■

等待系统内各处理器的 ID 设定

系统内各处理器 1D 设定完成

FANUC BUS 初始化完成

PMC 初始化完成

系统内各印制板的硬件配置信息设定完

PMC 梯形图程序的初始化执行完

等待数字伺服的初始化

初始设定完成，进人正常运行

下面四个是报警指示 。 当由千某种原因而不能使用通常的显示画面时，可以用来指

示系统的异常情况 。 具体含义见表 3-5 。

129 

表 3-5 系统出现错误时报警的具体意义

序号

报警 LED 显示

含

义

1 

2 

3 

4 

SVALM 

伺服卡内检测出异常（监视器、或伺服卡内的 SRAM 发出奇偶报警）

SYSEMG 

发生系统报警时灯亮。硬件检测出系统异常

SYSFA且

发生系统报警时灯亮。软件检测出系统异常，使系统停止。执行 BOOT 过程中灯亮

PRITY 

检测出 SRAM 模块的奇偶报警或 ECC 报警

2.  FANUC  16i/18i/21i 系统的连接

图 3-18 是主板上各接口接线图，图 3-19 是带有选择槽的连接图（以带一体型显示

器的 FANUC 16i/18i/2li/160i/180i/210i - A 型为例）。

主板

24V-IN(CPIA) 

24V-0UT(CPIB) 

L
C
D

显
示
器

输入电源 DC24V

接 I/0 设备等的电源

MDI(CA55) 

0--------0言软键电缆

R232-l(JD36A) 

R232-2(JD368) 

D 
□--------- RS-232C  J/0 设备或蜘莫面板
（带氏时，触摸面板接 JD33)

A-OUT &HDI(JA40) 

匠二二主轴电动机用模拟输出

高速跳转信号输入

p RS-232C I/0 设备

赞
板
C
1
B
职
P
A
皿
D

JA3 

噤板

1/0 单元等

手摇脉冲发生器
—最多3

三
三

I/0-LINK(JDIA) 

主板

130 

勹
勹
_
i

1 伺服使用 Q 系列的接线例子 1

尸～码器

断路器

一一寸二::J-AC200V2 ¢ 

M这

位置编码器
千

主轴电动机

巳

5 D p s 

POS 

g 

1 

] 

/
—
勹
二

光缆

COP! 叩 SVM 
COPlOATBl  CX2B 点

COPlOB 
COPlOA 

SVM 

COPlOB 
COPIOA 

SVM 

光缆 I 

接下一个 SVM（最多到 6 轴或 8 轴）

分离型检测器接口装置 l
DC24V  -+--1111~ 第 1 轴直线检测元件

2 轴直线检测元件

3 轴直线检测元件

SV-CHK(CA54)  no 

伺服检查板

图 3-18 主板上各接口接线图

131 

信
冲

板
板

18 
板
板

通

缓卿
晌
D
N
C
D
N

R232-3(JD28A)  庄—-p RS-232C 1/0 设备（远醴冲器或 DNC2 板时）

R422-l(JD6A)  ；厂』 RS-422IJO 设备（远程缓冲器或DNC1 板时）

子 CPU 板

』
A-OlIT(JA40)  no 

匣互歹亨更空］

，主轴电动机用模拟输出

SPDL&POS(JA4 l) 

位置编码器

尸

断路器

断路器

ACl20V  2 
AC220V3 

位置编码器
于

电动机

厂
接第 2 主轴

光缆

叨!OB

JF 
叨JOA TB!  CX2B.IX 

SVM 

COPlOB  SVM 
COP10A 

COPlOB 
COPlOA 

SVM 

第 2 轴

电动机

比

接下一个 SVM （最多到 6 轴或 8 轴）

接分离型检测器接口装置或下一个 SVM

SV-CHK(CA54)  no----------- 伺服检查板

上料器控制板

1 伺服使用 Q 系列的接线例子 1

断路器

AC220V  2 
AC220V3 

选
择
插
槽

选
择
插
槽

132 

FSSB(COPIOA)  □D---------0 

光缆 气UsoPIOAIBl CX2B 

I 
COPIOB 
COPIOA 
二
COPIOB 
COPIOA 
二
COPIOB 
COPIOA 

SVM 

SVM 

SVM 

本图是使用 1 轴放大器的例子

SV-CHK(CA54) 匡廿—一伺劂钰板
瓦

ll<>LINK(JDIA勹二三
DC24V 庐强吐
I10虹笠勹二］

一。 JD1A

一 』

l 
接扭 IIO

HDD(CNHI) 汇_一—~巨印謹装在 MDI 如t的后面

IOBASE5(CD27)  tJD--------P Ethernet （以太网）

HSSB 

HSSB(COP7) I ]~  PC 缸和能终端

图 3-19 带有选择槽的连接图

3. 2  SINUMERIK 数控系统维修技术基础

3. 2.1  SINUMERIK 802D 、 840D 数控系统的组成与特点

SIEMENS 公司是全世界最大的自动化设备开发制造公司。 SIEMENS 公司有许多

产品，其中 SINUMERIK 系列 CNC 系统是该公司面向机械制造行业研制开发的控制系
统。 SINUMERIK 系列 CNC 系统有很多系列和型号，主要有 SINUMERIK 3 、 SINU­
MERIK  8 、 SINUMERIK 810/820 、 SINUMERIK 850/880 、 SINUMERIK 840 、 SINU­
MERIK 802 等系列。

133 

1.  SINUMERIK 802D 的组成与特点
1)  SINUMERIK 802D 的特点
SINUMERIK 802 系列系统包括 802S/Se/Sbase line 、 802C/Ce/C base line 、 802D 等型
号，它是西门子公司 20 世纪 90 年代末开发的集 CNC、 PLC 于一体的经济型控制系统。

系统性价比较高，比较适合于经济型和普及型车、铣、磨床的控制，近年来在国产经济型、

普及型数控机床上应用较多。 SINUMERIK 802 系列数控系统的共同特点是结构简单、

体积小、可靠性高，此外软件功能也较强。

SINUMERIK 802S、 802C 系列是 SIEMENS 公司专为简易数控机床开发的经济型系
统，两种系统的区别是： 802S/Se/Sbase line 系列采用步进电机驱动； 802C/Ce/Cbase line 

系列采用数字式交流伺服驱动系统。

802D 是目前普及型数控机床的常用 CNC ，与 802S 、 802C 相比，其结构、性能有了较

大的改进与提高，系统采用 SIEMENS PCU210 模块，控制轴数为 4 轴／4 轴联动， CNC 各

组成部件间利用用 PROFIBUS 总线连接，可以通过 611U 伺服驱动器携带 lOV 主轴模拟
量输出，以驱动带模拟量输入的主轴驱动系统。 802D 可配套采用 SIMODRIVE 611 Ue 
驱动装置与 1FK7 系列伺服电机，基于 Windows 的调试软件可以便捷地设置驱动参数，并

对驱动器的参数进行动态优化。 802D 内置集成 PLC ，可对机床进行开关量逻辑控制。随
机提供标准的 PLC 子程序库和实例程序，简化了制造厂设计过程，缩短了设计周期。

802D 主要用于控制车床、钻铣床和加工中心，同时也用于磨床和其他特殊用途机床。

其主要功能为四轴联动，具有直线插补、平面圆弧插补、螺旋线插补、空间圆弧 (CIP) 插补

等功能，同时具有螺纹加工、变距螺纹加工、旋转轴控制、端面和柱面坐标转换 (C 轴功

能）、前馈控制、加速度突变限制、刀具寿命监控、主轴准停、刚性攻丝、恒线速切削和

FRAME 功能（坐标的平移、旋转、镜像、缩放）。

802D 具有友好的操作界面，其单色或彩色 10.4 英寸 TIT 显示器，水平安装方式和

垂直安装方式全功能数控键盘、标准机床控制面板、 RS-232 串行接口、生产现场总线接

口、标准键盘接口、 PC 卡（用于数据备份和批量生产）都为操作和编程人员提供了方便。

在具体的操作和显示安排方面，符合不同应用水平和应用要求。例如，通过 8 个水平

软键和 8 个垂直软键的直观操作，使对刀及刀具测量、工件坐标系测量、基本坐标偏移、

MDA 方式、端面加工、程序段搜索运行、坐标轴锁定、快速空运行、后台编程、加工外部程

序（通过串行接口）等操作显得较为方便。示波器、袖珍计算器和工件计数器，语言在线切

换（最多 16 种语言可选择安装），在线公吵足制切换，机床坐标系、工件坐标系和相对坐标

系显示，加工轨迹实时显示（可辨认快速和加工轨迹），在线帮助，有效 G 功能和 M 功能显

示，坐标位置、剩余移动量以及各轴速度显示等功能可为操作、维修提供便利。

在软件上， 802D 除保留了 SIEMENS 传统的编程功能外，主要在以下两方面进行了

改进：一是增加了 PLC 程序（梯形图）显示功能，方便了维修；二是可以使用非 SIEMENS

代码指令进行编程，系统的开放性更强。
2)  SINUMERIK 802D 的的组成
SINUMERIK 802D 数控系统由硬件、软件和用户数据构成。
SINUMERIK 802D 数控系统的硬件由 PCU （面板控制装置）、水平或垂直设置的 NC

键盘、 PP72/48 （输入与输出模板）、 MCP （机床操作面板）、 611UE 伺服驱动单元组成。

134 

SINUMERIK 802D 数控系统的软件由系统软件、 PLC 编程工具 PLC 802D、用户工

具盒组成。其中系统软件，位于 PCU 永久存储器中。包括以下几部分：引导软件，用于启

动系统； HMI 软件（人机通信），包含所有操作功能； NCK 软件（数控核心），包含所有 NC

功能，控制最多带四个进给轴和一个主轴的 NC 通道。而 PLC 软件（可编程逻辑控制

器），循环执行内装 PLC 用户程序。用户工具盒包含以下几个软件，用于系统的初始化和

调试。

(1) 用于车床和铣床的安装文件。

(2) 用于车床和铣床的循环软件包。

(3) 传送程序 WINPCIN ，用于与外部 PC 进行用户数据和程序的传入／传出。

(4) 可重新装入的语言。

(5) 用于 PLC 报警文本、语言、帮助文件的管理工具。

(6)  PLC 用户库文件。

(7)  SimoCom U 是为驱动器设置参数和调试的工具。

用户数据：包括机床数据、设定数据、刀具参数、 R 参数、零点偏置、补偿数据、零件程

序、标准循环、 PLC 用户程序和用户报警文本。

2.  SINUMERIK 840D 的组成与特点

1)  SINUMERIK 840D 数控系统的特点
SINUMERIK 840D 是 20 世纪 90 年代中期设计的全数字化高性能数控系统，具有高

度模块化及规范化的结构，它将 CNC 和驱动控制集成在一块板上，将闭环控制的全部硬

件和软件集成在 1cm2 的空间中，便于操作、编程和监控。

它保持西门子前两代系统 SINUMERIK 880 和 840C 的三 CPU 结构：人机通信 CPU

(MMC — CPU) 、数字控制 CPU(NC-CPU) 和可编程逻辑控制器 CPU(PLC- CPU) 。三

部分在功能上既相互分工，又互为支持。在物理结构上， NC-CPU 和 PLC-CPU 合为一

体，合成在 NCU(Numerical C.Ontrol  Unit) 中，但在逻辑功能上相互独立。

SINUMERIK 840D 与西门子 611D 伺服驱动模块及西门子 S7-300PLC 模块构成的

全数字化数控系统，能实现钻削、车削、铣削、磨削等数控功能，也能应用于剪切、冲压、激

光加工等数控加工领域。 840D 系统的主要功能及应用有以下儿个方面。

(1) 控制类型：采用 32 位微处理器，实现 CNC 控制，可用于完成 CNC 连续轨迹控制

以及内装式 PLC 控制。

(2) 机床配置：可实现钻、车、铣、磨、切割、冲、激光加工和搬运设备的控制，备有全数

字化的 SIMODRIVE 611D 数字驱动模块。最多可控制 31 个进给轴和主轴，进给和快速

进给的速度范围为 1OOrnrn/min - 9999rnrn/min。其插补功能有样条插补、三阶多项式插

补、控制值互联和曲线表插补，这些功能为加工各类曲线曲面零件提供了便利条件。此外

还具备进给轴和主轴同步操作的功能。

(3) 操作方式：主要有 AUTOMATIC （自动）、 J仅只手动）、 TEACH IN （示教编程）、

MDA（手动数据自动化）。

(4) 轮廓和补偿： 840D 可根据用户程序进行轮廓的冲突检测、刀具半径补偿的进入

和退出策略及交点计算、刀具长度补偿、螺距误差补偿和测量系统误差补偿、反向间隙补

偿、过象限误差补偿等。

135 

(5) 安全保护功能：数控系统可通过预先设置软极限开关的方法，进行工作区域的限

制及程序执行中的进给减速，同时还可以对主轴的运行进行监控。

(6)  NC 编程： 840D 系统的 NC 编程符合 DIN 66025 标准（德国工业标准），具有高级
语言编程特色的程序编辑器，可进行公制、英制尺寸或混合尺寸的编程，程序编制与加工
可同时进行，系统具备 1.5MB 的用户内存，用于零件程序、刀具偏置、补偿的存储。

(7)  PLC 编程： 840D 的集成式 PLC 完全以标准 SIMATICS7 模块为基础， PLC 程序
和数据内存可扩展到 288KB,I/O 模块可扩展到 2048 个输入僧i 出点， PLC 程序能以极高
的采样速率监视数据输入，向数控机床发送运动停止／启动等指令。

(8) 操作部分硬件： 840D 系统提供有标准的 PC 软件、硬盘、奔腾处理器，用户可在
MS - Windows 9812000 下开发自定义的界面。此外，两个通用接口 RS-232 可使主机与
外设进行通信，用户还可通过磁盘驱动器接口和打印机并行接口完成程序存储、读入及打
印工作。

(9) 显示部分： 840D 提供了多语种的显示功能，用户只需按一下按钮，即可将用户界
面从一种语言转换为另一种语言，系统提供的语言有中文、英语、德语、西班牙语、法语、意
大利语。显示屏上可显示程序块、电动机轴位置、操作状态等信息。

(10) 数据通信： 840D 系统配有 RS - 232CITTY 通用操作员接口，加工过程中可同
时通过通用接口进行数据输入倩料i 。此外，用 PCIN 软件可以进行串行数据通信，通过
RS-232 接口可方便地使 840D 与西门子编程器或普通的个人计算机连接起来，进行加

工程序、 PLG 程序、加工参数等各种信息的双向通信。用 SINDNC 软件可以通过标准网
络进行数据传送，还可以用 CNC 高级编程语言进行程序的协调。

2)  SINUMERIK 840D 基本构成
SINUMERIK 840D 数控系统由硬件、软件和用户数据三部分组成。
SINUMERIK 840D 的硬件由 NCU （数控单元）、 SIMODRIVE 611D 数字伺服驱动单
元、人机通信中央处理单元 MMC、 MCP（机床操作面板）、OP（操作面板）、 I/0 输入与输出
模板组成。 SINUMERIK 840D 系统硬件组成原理如图 3-20 所示。

SINUMERIK 840D 软件系统包括 4 大类软件： MMC(M印 Machine Communication) 
软件系统、 NC 软件系统、 PLC 软件系统和通信及驱动接口软件。 SINUMERIK 840D 系
统软件结构如图 3-21 所示。

在 MMC102/103 以上系统均带有 5GB 或 10GB 的硬盘，内装有基本输入、输出系统
(BIOS) 、 DR-OOS 内核操作系统、 Windows95 操作系统，以及串口、并口、鼠标和键盘接
口等驱动程序，支撑 SINUMERIK 与外界 MMC-CPU 、 PLC-CPU、 NC-CPU 之间的相
互通信及任务协调。

NC 软件系统包括下列内容：
(1)  NCK 数控核初始引导软件，该软件固化在 EPROM 中。
(2)  NCK 数控核数字控制软件系统。它包括机床数据和标准的循环子系统，是西门
子公司为提高系统的使用效能，而开发的一些常用的车削、铣削、钻削和镜削功能等软件。
用户必须理解每个循环程的参数含义才能进行调用。

(3)  SINUMERIK 611D 驱动数据。它是指 SINUMERIK 840D 数控系统所配套使

用的 SIMODRIVE 611D 数字式驱动系统的相关参数。

136 

MMC-CPU 

MPI 

NCU 模块

图 3 - 20  SINUMERIK 840D 数控系统硬件组成框图

MMC 软件系统

| BIOS 系统 I
| 
|  DRAM 

串行接口 1

串行接口 2

井行接口

软盘驱动接口

鼠标或键盘接口

611D 
驱动接口

三

-NCK 

－机床数据
－标准循环
子程序
－机床厂家

级软件
－用户软件

-NCK 

系统软件
-61ID 

系烹通

NCU 

PLC 软件系统

E1>ROM 
-PLC 系统支持软件

SRAM 

、－基本 PLC 程序
－用户 PLC 程序

图 3 — 21 SINUMERIK 840D 数控系统软件结构图

137 

(4)  PCMCIA 卡软件系统，在 NCU 上设置有一个 PCMCIA 插槽，用于安装 PCMCIA

个人计算机存储卡，卡内预装有 NCK 驱动软件和驱动通信软件等。

PLC 软件系统包括 PLC 系统支持软件和 PLC 程序。
(1)  PLC 系统支持软件。支持 SINUMERIK 840D 数控系统内装的 CPU315-2DP

型可编程逻辑控制器的正常工作，该程序固化在 NCU 内。

(2)  PLC 程序。它包含基本 PLC 程序和用户 PLC 程序两部分。

通信及驱动接口软件主要用于协调 PLC-CPU 、 NC — CPU 和 MMC — CPU 三者之

间的通信。

SINUMERIK 840D 数控系统的用户数据类型与 SINUMERIK 802D 数控系统的用

户数据相同。

3.2.2  SINUMERIK 802D 系统功能连接

1.  SINUMERIK 802D 的的结构
SINUMERIK 802D 是基于 PROFIBUS 总线控制的 CNC ，它主要由 PCU 、 PP72/48 、

机床控制面板等部分组成。

1)  PCU 单元

PCU（面板控制装置）为 SINUMERIK 802D 的核心部分，其外观形状如图 3-22 所

示。 PCU 通过 PROFIBUS 总线可与 PP72/48 、伺服驱动装置等部件连接，通过仅）Ml 、手

轮、键盘等插座可实现 PCU 与其他部件的连接和数据交换。

` or 

@ 

勹, 

© 

。

© 

匪
础
芦
拙
翱
0
器
恩
0
和
3田
颐
0
匪
0
,

g
g©如

。 @ 

罕
顷
』

l

A 

COMI 

0~  
COM2 

@||。芦0
H萱

丿

图 3-22 SINUMERIK 802D PCU 外观示意图

(1)  A 处接口说明：

PROFIBUS 接口：总线接口，用于 PP72/48 、伺服驱动装置的连接。

138 

COMl 接口： 9 芯孔式 D 型插座，用于连接外部 PC 机或 RS-232 隔离器。

COM2 接口：无定义。

手轮 1-3:15 芯孔式 D 型插座，用于连接手轮。

键盘接口：用于连接键盘。
(2)  B 处接口说明：
PCU 单元 DC24V 供电电源输入口。必须确认电压在额定输入电压 (DC 24V) 的

— 15%-20 ％的范围内才能对系统进行上电调试。

(3)  PCU 正面状态指示：
在 PCU 正面前端盖内有 4 个发光二极管，用于状态指示，如图 3-23 所示。在系统

显示画面不能正常显示时，用来提示系统状态。其具体含义见表 3-6 。

伽＠ONC
即＠O问

图 3-23 四个发光二极管状态

表 3-6 四个发光二极管指示灯的含义

指示灯符号 l 颜色 l

含
I 绿色 电源指示，当该指示灯亮时表示

义

PCU 已通电

指示灯符号 颜色

含

义

WD 

红色

用于过程监控，当 PCU 出现故障

时，该指示灯亮

I 黄色 1 当 PCU 正常工作时，该指示灯闪烁

PB 

黄色 用于指示 PROFIBUS 的状态

ON 

NC 

2) 输入输出模块 PP72/48

输入输出模块 PP72/48 可提供 72 个数字输入和 48 个数字输出。每个模块具有三
个独立的 50 芯插槽，每个插槽内包含 24 个数字输入和 16 个数字输出（图 3-24) ，其输
出的驱动能力为 0.25A，同时系数为 1 。 802D 最多可配置两个 PP 模块。

X1 接口： 3 芯端子式插头， PP72/48 模块 OC24V 供电电源输入口。必须确认实测电

压在额定输入电压 (OC24V) 的－ 15% ～ 20 ％的范围内才能对该模块进行上电调试。

X2 接口： 9 芯孔式 D 型插头， PROFIBUS 总线连接接口。

S1 开关： PROFIBUS 地址设定开关。

4 个发光二极管： PP72/48 的状态指示灯，其含义见表 3 — 7 。

指示灯符号

POWER 
READY 
EXCHANGE 

OVTEMP 

颜
绿
红
绿
红

指示灯亮表示 PP72/48 模块就绪，但无数据交换

含义

电源指示，当该指示灯亮时表示 PP 已通电

表 3-7 PP72  48 模块上的指示灯的含义
色
飞
飞
一
色
色

超温指示

指示灯亮表示 PP72/48 模块就绪， PROFIBUS 已开始数据交换

139 

@  OVERTEMP 

o  @ 
0 
POWER 

RESET 

@ 

已

c x E 

HO 
G N A0AD 

E 

@-

u-H-u-H-u 

RE 

Y 

@ 

X222
1 忡，—气下——：书 1@ 谦——勹

叫

p

Xlll  叫卜

十计 I@

口

X2 

XI 

@ 

X333

叫

p

@I 片'-－尸——:4|@

心

图 3-24 PP72/48 结构图

SINUMERIK 802D 系统最多可配置两块 PP72/48 模块，模块 1 地址为 9 ；模块 2 地

址为 8 。

模块 1 三个插座对应的输入倩料伐助上如下：
Xlll :24 个数字输入 (I0.0-12. 7) 和 16 个数字输出 (Q0.0-Ql. 7); 
X222:24 个数字输入 (13.0-15. 7) 和 16 个数字输出 (Q2.0-Q3. 7); 

X333:24 个数字输入 (16.0-18. 7) 和 16 个数字输出 (Q4.0-Q5.7) 。

模块 2 三个插座对应的输入俐料埭肋上如下：

Xlll :24 个数字输入 (19.0- Ill. 7) 和 16 个数字输出 (Q6.0-Q7. 7); 

X222:24 个数字输入 (112.0- 114. 7) 和 16 个数字输出 (Q8.0-Q9.7);

X333:24 个数字输入 (115.0-117. 7) 和 16 个数字输出 (Ql0.0-Qll. 7) 。

3) 机床控制面板 MCP

机床控制面板用于机床操作方式的选择、主轴启停、轴移动

方向选择、进给和主轴倍率修调等操作。该面板的布局与

802S/C 机床控制面板相同，示意图如图 3-25 所示。

机床控制面板背后的两个 50 芯扁平电缆插座可通过扁平

电缆与 PP72/48 模块的插座连接，即机床控制面板的所有按键

输入信号与指示灯信号均使用 PP72/48 模块的输入倩i 出点。

4)  611UE 伺服驱动单元

参见 5.2 节内容。
2.  SINUMERIK 802D 的连接
SINUMERIK 802D 系统部件连接如图 3-26 所示。
1)  PROFIBUS 现场总线的连接

PCU 为 PROFIBUS 总线连接的主站， PP72/48 及伺服驱动

为 PROFIBUS 总线连接的从站。 PCU 通过 PROFIBUS 总线和 图 3 — 25 机床控制

PP72/48 、伺服驱动进行数据交换和监控，因此， PROFIBUS 总

面板示意图

140 

供

巨坑 5

件©

l 勹

三］』1:
□CDCCI口口口口口[

嚼覃卢

NC 键盘

©©© 

等
N
r
d

颐
颐
芦
菩

1IIIIIIIIIIIIIIlJ 

机床控制面板

蒜
墓
+
芸

了
世
岂

令
0

` ` ` 了

C
》

图 3-26 SINUMERIK 802D 系统部件连接图

线的正确连接对千机床的稳定工作具有非常重要的意义。

每个 PROFIBUS 从设备都具有自己的总线地址，因此，从设备在 PROFIBUS 总线上

的排序是任意的，具体连接方法如图 3-27 所示。

勹

亡
。

l 

l 

二

图 3-27 PROFIBUS 现场总线连接图

141 

PROFIBUS 的两个终端，开关应拨至 ON 位置。 PP72/48 的总线地址由模块上的地
址开关 S1 设定。第一块 PP72/48 的总线地址出厂设定为 “9" ，如选配第二块 PP72/48 模
块，则地址为 “8” 。 611Ue 的总线地址可以利用工具软件 Simo ComU 进行设定，也可以通
过 611Ue 上的输入键进行设定。总线上设备的排序不限，但总线地址不可重复，即总线

上不可出现两个相同的地址。
2)  DC24V 电源连接
在基本配置的 SINUMERIK 802D  CNC 中， DC24V 电源进线共有 PCU 单元的 X8

接口和 PP72/48 模块 Xl 接口两个地方的电源输入口，针脚的分配在插头上有标示。

3)  PCU 与手轮的连接

PCU 与手轮的连接及插头引脚分配见表 3-8 。

表 3-8 PCU 与手轮的连接及插头引脚分配表

X14,X15,X16 

信号

1P5 

含义

+5V 电源

lM 

ov 

引脚

信号

含义

引脚

+5V 电源

ov 

1P5 

lM 

A 

*A 

B 

*B 

9 

10 

11 

12 

13 

14 

15 

1 

2 

3 

4 

5 

6 

7 

8 

4)  PCU 与 PP72/48 的连接
PCU 与 PP72/48 依靠 PROFIBUS 总线进行连接， PCU 侧插座号为 X4,PP72/48 侧

插座号为 X2 ，其插头引脚分配见表 3-9 。

表 3-9 PCU 侧 X4 插头引脚分配表

引脚

信号

含义

引脚

信号

含义

1 

2 

3 

4 

5 

屏蔽

保留

RXD叮xD-P 接收／发送数据， B 线（红色）

CNTR-P  转发器控制信号（方向信号）

DGND 

数据转换程序（接地 5V)

142 

6 

7 

8 

9 

终端连接器的电源电压 (P5V)

VP 

保留

RXD叮xD-N 接收／发送数据， B 线（红色）

CNTR-N  转发器控制信号（方向信号）

5)  PP72/48 输入僧础信号与接线端子的连接
通过表 3 — 10 可查出 PP72/48 模块 1 输入倩料j 信号的逻辑地址和接口端子号对应

关系。

表 3-10 模块 1 输入／输出信号的逻辑地址和接口端子对应表

端子

Xlll 

X222 

X333 

端子

Xlll 

X222 

X333 

1 

2 

3 

4 

5 

6 

7 

8 

9 

10 

11 

12 

13 

14 

15 

16 

17 

18 

19 

20 

21 

22 

23 

OV(DICOM) 

DC24V 输出°

IO.O 

IO. 1 

10.2 

I0.3 

I0.4 

l0.5 

I0.6 

I0.7 

Il.O 

Il.1 

Il.2 

Il.3 

11.4 

Il.5 

Il. 6 

11.7 

I2.0 

12.1 

I2.2 

I2.3 

I2.4 

I3.0 

I3.1 

13.2 

13.3 

13.4 

I3. 5 

13.6 

I3. 7 

14.0 

I4. 1 

14.2 

14.3 

14.4 

14.5 

I4.6 

I4. 7 

15.0 

I5.1 

IS.2 

15.3 

15.4 

I6. 0 

I6.1 

16.2 

16.3 

I6.4 

16.5 

16.6 

I6.7 

I7.0 

I7. 1 

17.2 

I7.3 

17.4 

I7. 5 

17.6 

17. 7 

18.0 

18.1 

18.2 

I8. 3 

I8.4 

24 

25 

26 

27 、 29

28 、 30

31 

32 

33 

34 

35 

36 

37 

38 

39 

40 

41 

42 

43 

44 

45 

46 

12.5 

12.6 

I2.7 

Q).0 

心． 1

Q0.2 

Q0.3 

Q0.4 

Q0.5 

Q0.6 

Q0.7 

Ql.O 

Ql.1 

Ql.2 

Ql.3 

Ql.4 

Q1.5 

Ql.6 

I5. 5 

15.6 

I5.7 

无定义

无定义

Q2.O 

QZ.1 

Q2.2 

QZ.3 

Q2.4 

Q2.5 

Q2.6 

Q2.7 

Q3.0 

Q3.l 

Q3.2 

Q3.3 

Q3.4 

Q3.5 

Q3.6 

I8. 5 

I8. 6 

18.7 

Q4.0 

Q4.1 

Q4.2 

Q4.3 

Q4.4 

Q4.5 

Q4.6 

Q4.7 

Q5.O 

Q5.1 

QS.2 

Q5.3 

QS.4 

Q5.5 

Q5.6 

Ql.7 

Q3.7 

QS.7 

47 、 49

48 、 50

DOCOM© 

IXXX)M© 

O ：可以作为输入信号的公共端；

＠：数字输出信号的公共端，连接 OC24V 直流

通过表 3-11 可查出 PP72/48 模块 2 输入输出信号的逻辑地址和接口端子号对应

关系。

143 

表 3 -11  PP72/48 模块 2 输入输出信号的逻辑地址和接口端子对应表

端子

Xlll 

X222 

X333 

端子

1 

2 

3 

4 

5 

6 

7 

8 

9 

10 

11 

12 

13 

14 

15 

16 

17 

18 

19 

20 

21 

22 

23 

OV(DICOM) 

DC24V 输出°

112.0 

I12.1 

112.2 

I1 2. 3 

112.4 

112.5 

112.6 

112. 7 

I13. 0 

I13.1 

!13.2 

113.3 

113.4 

!13.5 

I13.6 

113. 7 

114.0 

I14. 1 

I14.2 

I14.3 

114.4 

I15.0 

I 1 5. 1 

115.2 

I15.3 

I15.4 

IlS.5 

I15.6 

I15. 7 

I16.0 

I 1 6. l 

116.2 

!16.3 

I16.4 

116.5 

116.6 

116. 7 

117.0 

117.1 

117.2 

117.3 

117.4 

l9. 0 

I9. 1 

I9. 2 

I9. 3 

I9. 4 

I9.5 

I9.6 

19. 7 

IlO.O 

IlO.l 

110.2 

110.3 

Il0.4 

110.5 

110.6 

110. 7 

I11.0 

111.1 

111.2 

111.3 

111.4 

0 ：可以作为输入信号的公共端；

＠：数字输出信号的公共端，连接 DC24V 直流

24 

25 

26 

27 、 29

28 、 30

31 

32 

33 

34 

35 

36 

37 

38 

39 

40 

41 

42 

43 

44 

45 

46 

Xlll 

Ill.5 

111.6 

Ill. 7 

Q6.0 

Q6.1 

Q6.2 

Q6.3 

Q6.4 

Q6.5 

Q6.6 

Q6.7 

Q7.0 

Q7.1 

Q7.2 

Q7.2 

Q7.4 

Q7.5 

Q7.6 

Q7.7 

X222 

114.5 

114.6 

114. 7 

无定义

无定义

Q8.0 

Q8.1 

Q8.2 

Q8.3 

Q8.4 

Q8.5 

Q8.6 

Q8.7 

Q9.0 

Q9.1 

Q9.2 

Q9.3 

Q9.4 

Q9.5 

Q9.6 

Q9.7 

X333 

117.5 

I7. 6 

117. 7 

QlO.O 

Ql0.1 

Ql0.2 

Ql0.3 

Ql0.4 

Ql0.5 

Ql0.6 

Q10.7 

Qll.O 

Qll.1 

Qll.2 

Qll.3 

Qll.4 

Qll.5 

Qll.6 

Qll.7 

47 、 49

48 、 50

DOCOM© 

oocoM 

3. 2. 3  SINUMERIK 840D 系统功能连接

1.  SINUMERIK 840D 的结构

下面对 SINUMERIK 840D 的几个重要部件 (NCU 、 MMC 、 OP 、 MCP 、 SIMODRIVE

611D) 进行分析。

1)  NCU(Numerical Control  Unit) 数控单元
SINUMERIK 840D 的数控单元被称为 NCU （在 810D 中称为 CCU) ，负责 NC 所有
的功能、机床的逻辑控制与 MMC 的通信。它由一个 COM CPU 板、一个 PLC CPU 板和

一个 DRIVE 板组成。

根据选用硬件如 CPU 芯片等和功能配置的不同， NCU 分为 NCU561.2 、 NCU571.2 、

144 

NCU572.2 、NCU573.2(12 轴）、NCU573.2(31 轴）等若干种。同样， NCU 单元中也集成
SINUMERIK 840D 数控 CPU 和 SIMATIC PLC CPU 芯片，包括相应的数控软件和 PLC
控制软件，并且带有 MPI 或 Profibus 接口、 RS-232 接口，手轮及测量接口、 PCMCIA 卡
插槽等，所不同的是 NCU 单元很薄，所有的驱动模块均排列在其右侧。

其接口端如图 3-28 所示，其中各接口端的意义如下：
(1)  XlOl 。操作面板接口端，该端口通过电缆与 MMC （人机通信接口板）及机床操

作面板连接。

(2)  X102 。现场总线接口 (PROFIBUS- DP) ，该端口主要是满足西门子通信协议的

要求。

。

目 1 I  匕．．
-X112 l l 
o  -x122 

。
~Il 

x _ I 

心『N 

：：亡

华璇锣泗

袋吵'—汽' v 

操作面板接口 (OPI)

现场总线接口 (profibus-dp)

预留接口

SIMATIC 接口 (IM36I)

PGMPI 接口 (MPI)

J/0 接口

错误和状态灯 (HI/H2)

7 段显示 (H3)

NM1 按钮 (S2)

复位按钮 (SI)

NCK 启动开关 (S3)

PLC 启动开关 (S4)

SIMODRIVE61ID 接口

, 

使用 NCU 作数字化扫描时用千连接数字化模块的 J/0 扩展接口（仅限千 NCU573)

设备总线接口

PCMCIAQ(X173) 

@ 

图 3-28 NCU 数控单元接口端示意图

145 

, 

(3)  Xlll 。 PLC S7-300 输入僧础接口端，该端口提供了与 PLC 连接的通道。
(4)  X112 。预留接口。实现与外部 NCU 的通信，如要由数个数控机床构成 DNC 系

统，实现系统的协调控制，则各个数控机床均要通过该端口与主控计算机通信。

(5)  X121 。多路输入倩杻i 接口端，通过该端口数控系统可与多种外设连接，例如与

控制进给运动的手轮、 CNC 输入僧料i 的连接。

(6)  X122 。 PLC 编程器 PG 接口端，通过该端口与西门子 PLC 编程器 PG 连接，以此

传输 PG 中的 PIC 程序到 NC 模块，或从 NC 模块将 PLC 程序复制到 PG 中，另外还可在

线实时监测 PLC 程序的运行状态。

(7)  X130A。驱动总路线接口。
(8)  X130B。数字模块接口，电动机驱动器 611D 的输入僧钮j 扩展端口，通过扁平电

缆将驱动总线与各个驱动模块连接起来，对各个伺服电动机进行控制。

(9)  X172 。数控系统数据控制总线端口，通过扁平电缆与各相关模块的系统数据控

制总线联系起来。

(10)  X173 。数控系统控制程序储存卡插槽。

(11)  S3 。 NCK 启动开关。

(12)  S4 。 PLC 启动开关。

S3 、 S4 以及状态批示灯的具体意义见表 3-12 。

表 3-12 S3 、 S4 以及状态批示灯的具体意义

序号

类型

种类

指示灯／值

具体意义

+5V ：绿色

供电电源正常时灯亮

NF ：红色

斜坡监控

LED 

CF ：红色

COM 口通信监控

NCU 

CB ：黄色

CP ：黄色

NCK 通过 OPI 进行通信

NCK 通过 PCMPI 进行通信

。

1 

2 

S3 

正常模式，系统作用设定的数据启动

用标准机床数据引导

软件升级。从 PCMCIA 卡上加载系统软件

3~7 

保留

PR ：绿色

PLC 运行

LED 

PS ：红色

PF ：红色

PLC 

PLC 停止

PLC 监控

PFO ：黄色

PLC 强制

S4 

。

1 

2 

3 

PLC 运行。允许编辑 PLC 程序，而不用激活密码

PLC 程序只读。激活密码后，才能编辑 PLC 程序

PLC 停止

MR区模块复位

1 

2 

3 

4 

5 

6 

7 

8 

9 

10 

11 

12 

13 

14 

15 

16 

17 

146 

2)  MMC(Man Machine  C.Ommunication) 
最常用的 MMC 有两种： MMCC100.2 和 MMC103 ，其中 MMCl00.2 的 CPU 为 486,
不能带硬盘；而 MMC103 的 CPU 为奔腾，可以带硬盘。一般的，用户为 SINUMERIK
810D 配 MMC100.2 ，而为 SINUMERIK 840D 配 MMC103 。

PCU(PC UNIT) 是专门为配合西门子最新的操作面板 OP10 、 OP10S 、 OPlOC、 OP12 、
OP15 等而开发的 MMC 模块，目前有三种 PCU 模块－-PCU20 、 PCUSO 、 PCU70, PCU20 
对应于 MMC100.2 ，不带硬盘，但可以带软驱； PCUSO 、 PCU70 对应于 MMC103 ，可以带
硬盘，与 MMC 不同的是： PCUSO 的软件是基于 Windows NT 的。 PCU 的软件被称作
HMI 。 HMI 又分为两种：嵌人式 HMI 和高级 HMI 。一般标准供货时， PCU20 装载的是
嵌入式 HMI ，而 PCUSO 和 PCU70 则装载高级 HMI 。

3)  OP(Operation Pannel) 
OP 单元一般包括一个 10.4 英寸 TFT 显示屏和一个 NC 键盘。根据用户不同的要
求，西门子为用户选配不同的 OP 单元，如 OP030 、 OP031~0P032 、 OP032S 等，其中 OP031

最为常用。

4)  MCP(Machine C.Ontrol  Pannel) 
MCP 是专门为数控机床而配置的，它也是 OPI 上的一个节点，根据应用场合不同，其
布局也不同。目前，有车床版 MCP 和铣床版 MCP 两种。对 810D 和 840D,MCP 的 MPI

地址分别为 14 和 6 ，用 MCP 后面的 S3 开关设定。
5)  SIMODRIVE 611D 数字伺服驱动单元
SIMODRIVE 611D 数字伺服驱动单元运动控制的执行部分，由 611D 伺服驱动和
1FT6(1FK6) 电机组成。 SIMODRIVE 611D 包括两部分：电源模块，驱动模块（功率

模块）。

(1) 电源模块：主要为 NC 和驱动装置提供控制和动力电源，产生母线电压，同时监
测电源和模块状态。根据容量不同，凡小千 15kW 均不带馈入装置，记为 UIE 电源模块；
凡大于 lSkW 均需带馈入装置，记为 1/RF 电源模块，通过模块上的订货号或标记可

识别。

其接口端如图 3-29 所示，其中主要接口端的意义如下。
心 Xlll 。"准备好“信号，由电源模块输出至 PLC 的电源模块，表示电源正常。
@X121 。使能信号，由 PLC 输出至电源模块、数控模块，表示外部电路信号正常。
@  Xl41 。电源模块电源工作正常输出信号端口。

@X161 。电源模块设定操作和标准操作选择端口。

@  X171 。线圈通电触点，控制电源模块内部线路预充电接触器（一般按出厂状态

用）。

@X172 。启动禁止信号端（一般按出厂状态使用）。
(J)  X181 。供外部使用的供电电源端口，包括直流电源 600V、三相交流电源

380V 。

(2)  611D 数字驱动：是新一代数字控制总线驱动的交流驱动，它分为双轴模块和单
轴模块两种。相应的进给伺服电机可采用 1FT6 或者 1FK6 系列，编码器信号为 1V （峰—
峰值）正弦波，可实现全闭环控制。主轴伺服电机为 1PH7 系列。

147 

“准备好“信号

使能信号

电源模块

线路预充电控制端

启动禁止信号端

LED 显示

X迈l

供电电源端口

系统数据控制总线

直流电源母线
(600V) 

标牌

三相 380V 电源

UIVIWI PEI 

图 3-29 电源模块接口示意图

单轴伺服电动机驱动模块如图 3-30 所示，双轴伺服电动机驱动模块如图 3-31 所

示。其中主要接口端的意义如下。

(D  X411 、 X412 。电动机内置光电编码器反馈至该端口进行位置和速度反馈的处理。
@  X421 、 X422 。机床拖板直接位置反馈（光栅）端口。
@  X431 。脉冲使能端口，使能信号一般由 PLC 给出。

@X432 。高速输入倩础接口端。
@X34 、 X35 。电压、电流检测孔，一般供模块维修检测使用，用户不得使用。
@PLC 模块。 SINUMERIK 810D 、 840D 系统的 PLC 部分使用的是西门子 SIMAT­
IC S7-300 的软件及模块，在同一条导轨上从左到右依次为电源模块 (Power Supply 入接
口模块 (Interface Module) 及信号模块 (Signal Module) 。 PLC 的 CPU 与 NC 的 CPU 集成
在 NCU 中，如图 3-32 所示。

电源模块 (PS) 是为 PLC 和 NC 提供电源的＋ 24V 和＋ 5V 的。

148 

电动机内部光电编码器端口

直接位置反馈（光栅）端口

使能端口

X431II血l|曲| |X432 

高速输入输出接口端

驱动总线端口 Xl41

（连接上一模块）

系统数据控制总线端口
（连接上一模块）

直流电源母线 (600V)

｀统数据控制总线端口
（连接下一校块）

伺服电动机电源端口（三相）

图 3-30 单轴驱动模块

接口模块 (IM) 是用于级之间互连的。
信号模块 (SM)使用与机床 PLC 输入倩础的模块，有输入型和输出型两种。
2.  SINUMERIK 840D 的连接
1) 总体连接图
SINUMERIK 840D 各部分之间的关系和连接方法如图 3-33 所示 。 对于硬件的连

接从两个方面入手。

(1) 根据各自的接口要求，先将数控与驱动单元、PCU 、 PLC 三部分分别连接正确，这

里应特别注意：

CD 电源模块 X161 中 9 、 112 、48 的连接；驱动总线和设备总线；最右边模块的终端电

阻（数控与驱动单元）的连接。

(Z)PCU 及 MCP 的＋ 24V 电源千万注意极性。
®PLC 模块注意电源线的连接；同时注意 SM 的连接。
(2) 将这硬件的三大部分互相连接，连接时应注意：
CD  MPI 和 OPI 总线接线一定要正确。
@NCU 与 S7 的 IM 模块连线。

149 

第 1 轴光电编码器端口

第 Tl 轴光电编码器端口

Xl41 

驱动总线端口
（连接上一校块）

系统数据控制总线端口
（连接上一模块）

第 0 轴直接位置反馈
（光栅）端口

高速输入输出接口端

驱动总线端口
（连接下一校块）

系统数据控制总线端口
（连接下一模块）

图 3-31 双轴驱动模块

PS 

I  IM  I SM I SM I · · · I  SM 

｝最多4级

图 3-32 PLC 模块结构示意图

2)  NCU 与单 I/0 模块的连接
单 I/0 模块（插头 X3 IN) 连接到 SINUMERIK 840D （插头 Xlll) ，如图 3 - 34 

所示 。

150 

OWER1Y 

I)  X8/X9 仅在 PCUIOl/102 上

操作面板
（背视）

机床控制面板

（背视）

NCU 

MPI 总线电缆

服务预留接口

SIMATIC S7-300 连接电缆

MPI 电缆

或
MPI-PG 电缆

:
：
苍
：
I+ 
帮
：
o
G
J
,
m

，
变

- PG 

矗匡圃喟喟冒U媚l|`

PLC 编程器

HHU 手轮

分配盒

电缆分配盒

SIMATIC  S7-3001/0 设备

去驱动总线

Tnu 

O
U劝

『X20

NCU 端子盒

图 3-33 SINUMERIK 840D 系统连接图

151 

6ES7 368-3 □□口 O-OAAO 屏6F蔽C5的41连1-0接AA电8缆0-0， AA仅用O，长千度单排15结0mm构

Xlll 

INOUT 
X3 

INOUT 
X3 

INOl 
X3 

单
I/0 
模块

单
VO 
模块

单
VO 
模块

6ES7368-3 口口o 0-0AAO 

Ribbon cable 

Ribbon cable 

840D 

X31N 

X30UT 

X404 
321 

X406  I 
321 
X402  I 
320 

单
110 
模块

图 3 - 34  SINUMERIK 840D 上单 I/0 模块的连接示意图

3.3  NC 参数及设定

数控机床的参数是数控系统应用的外部条件，它完成数控系统与机床结构及机床各
种功能的匹配 。 CNC 通过参数可以知道机床的一些特定数据，识别机床上的不同部件，
并能判断如何执行用户编写的指令 。 这些参数包括轴的数量、进给率、运动速度、螺距误
差补偿、加速度、反馈、跟随误差、比例增益、自动换刀功能等。只有正确、合理地设置这些
参数，数控机床才能正常工作。有些数控机床的参数需要调试后才能确定，如螺距误差补
偿参数的确定 。 有些数控机床的工作状态也可以通过参数的修改来调整，如机床的位置

精度调整、主轴的最高转速、坐标轴的快速等。

数控机床的参数可以分为数控系统参数 (CNC 参数）、机床可编程序控制器参数
(PMC 参数）两大类。 CNC 参数用于系统功能的设定、伺服系统的调整和机床主要性能
指标的设定等，它是数控机床最重要的参数 。 PMC 参数分为定时器时间、计数器数值、机
床 PMC 的状态位设定参数等，它由机床生产厂家根据机床的实际控制要求进行设定，也
可以通过操作面板进行设定 。 在数控机床的使用过程中，有时要利用机床的某些参数调
整机床，有些参数要根据机床的运行状态进行必要的修正。机床参数不合适，会引起机床

出现故障或报警 。

机床参数有三种级别，即机床用户参数、机床厂家参数和数控系统参数 。 机床用户可
改写的用户参数，可以在操作过程中设置或改写，这些数据会引起机床性能的变化，如英

152 

制／公制转换、选择 1/0 设备、镜像开／关等。机床生产厂家设定的参数，要提供给机床用
户，但机床用户不能随意更改。而数控系统生产厂家设定的 CNC 保密参数，为最高秘密
级参数，机床厂家和机床用户无法更改。

3.3.1  FANUCOi 系列的参数及设定

1.  FANUCOi 系列的参数形式

FANUCOi 系列的参数，一般包括坐标系、加减速度控制、伺服驱动、主轴控制、固定

循环、自动刀具补偿、基本功能等 40 多个大类的机床参数。表 3-13 所列为机床参数的

数据形式。

表 3-13 机床参数的数据形式

数据形式

位型、位轴型

字节型

字节轴型

字型

字轴型

数据范围

0 或 1

-128-127 

0~255 

-32768-32767 

0-65535 

说明

有些参数中不使用符号

双字型、双字轴型

- 99999999-99999999 

参数的注解：

(1) 位型和位轴型参数，每个数据号由 8 位组成，每一位有不同的意义，如下：

#7 

#6  # 5 ' # 4   #3 

#2 

#1 

#0 

I OOOO  I 

I 

I SEQ I 

I INI  I lso| TVCI 

数据号：数据 (#0~#7 位的位置）。

(2) 轴型参数允许分别设定给每个控制轴，如下：

勹

数据号

指定轴的伺服轴号

数据

(3) 每个数据有一个通用的有效范围，参数不同，其数据范围也不同，各种参数的数

据范围参照参数的详细说明。

(4)“参数的注解“中为空白的位和在画面上能显示的但参数表中没有记载的参数

号，是为了将来扩展而备用的，必须将其设定为 “0” 。

2.  FANUC  Oi 系列参数的显示和设定

1) 参数显示的操作步骤

(1) 按 MDI 面板上的功能键 "SYSTEM”几次或一次以后，再按软键［参数］选择参数

画面，如图 3-35 所示。

(2) 用翻页键或者光标移动键，显示所需要的页面。

(3) 从键盘输入想要显示的参数号，然后按软键 [NO ．检索］，可显示包括指定数据所

153 

参数 (FEEDRATE) 

00001  Nl2345 

1 三巨］己已

1401 

RDR 
。

JZR 
。

。

RFO 
。

。

。

1404  。
。
1410  DRYRUNFEED如
1411  INIT.CUTIING F 
1420  RAPIDFEEDR础

。

。

。

。

X 
Y 
z 

已』三〉光标三

功能键

15000 
15000 
15000 

> 
MEM STRT M1N FIN*** 10:01 :35 
［诊断］
［参数］

[ PMC]  ［系统］ ［（操作）］

I 旦

软键显示
（操作选择）

~~ \ 

巨亡二二二亡芦
~丿\~－
软键

返回菜单键

连续菜单键

图 3-35 参数显示画面

在的参数页面。

2) FANUC Oi-A 系统的参数设置方法

具体设置方法如下：

(1) 设定 MDI 方式或急停状态。

(2) 按数次 “OFFSET SETTING”键或按 “SETTING“ 软键，显示［设定快捷画面］。

(3) 将光标移到 “PARAMETER WRITE” 位置，按 “1” 和［输入］软键，会出现 P/SlOO

号报警，如图 3-36 所示。

SETIING(HANDY) 

00001  NOOOJO 

PARAME1ER WRITE  -
CHECK 
PUNCH CODE 
INPUTUNIT 
1/0CHANNEL 

= 0 
= 0 
=O 
=O 

(0：不可
(O:OFF 
(O:EIA 
(O:MM 
(0-2:CHANNELNO.) 

I ：可）
J:ON) 
I :ISO) 
1:INCH) 

3 ．按［（操作）］软键显示操作选择软键

> 
MDI STOP*** *** ***  I 0:03:02 
[NO．虹］

[ON:l] 

[OFF:0]  ［＋输入］ ［输入］ 卜 软键显示

（操作选择）

图 3-36 参数设定画面

(4) 按 MDI 面板上的功能键 “SYSTEM" 儿次或一次以后，再按软键［参数］选择参数

画面。

(5) 显示所要设置的参数所在的页面，光标放在想设定的参数的位置。

(6) 输入数据，然后按［输入］软键，输入的数据被设定到光标指示的参数中。

(7) 如果参数设定完毕，需将参数设定画面的 “PARAMETER WRITE” 设定为 “O"'

154 

禁止参数的修改。

(8) 复位 CNC ，解除 P/S100 号报警。但如果设定了重要的参数，会出现 P/S000 号

报警，需要关断电源再开机，才能使新参数生效。
3.  FANUC  Oi 系列常用参数的设定与调整
由于参数太多，不能一一列表，本节节选部分参数，并在“参数意义”中对参数进行了

说明，具体见表 3-14 ～表 3-21 。

1) 有关 “SETTING” 的参数

参数号及位 参数代码

参数意义

表 3-14 有关 “SETfING" 的参数

0000.0 

0000.1 

0000.2 

0000.5 

0020 

TVC 

ISO 

INI 

SEQ 

是否进行 TV 检查。 0 ：不进行； 1 ：进行

数据输出时的代码。 O:EIA 代码； 1 心幻代码

输入单位。 0 ：公制输人； 1 ：英制输人

是否进行插人顺序号的自动插入。 0 ：不进行； 1 ：进行

I/0 设备接口。设定值为 0 或 1:RS-232C 串行口 1 ；设定值为 2:RS-

232C 串行口 2

2) 有关轴控制／设定单位的参数

表 3-15 有关轴控制般：定单位的参数

参数号及位 参数代码

参数意义

1001.0 

INM 

直线轴的最小移动单位。 0 ：公制； 1 ：英制

1004.1 

ISC 

1004.7 

IPR 

最小设定单位、最小移动单位。 0:0.00lmm、 O.OOldeg 或 0.0001inch ，简

称 IS-B;l:O.OOOlmm 、 0.000ldeg 或 0. 00001inch ，简称 IS-C

设定单位按 IS-B 或 IS-C 公制输入时，是否把各轴的最小设定单位设

定为最小移动单位的 10 倍。 0 ：不设定为 10 倍； 1 ：设定为 10 倍

1020 

1022 

1023 

设定各控制轴的程序轴名称

设定各控制轴是基本坐标系中的基本三轴 X 、 Y 、 Z 轴中的一轴还是与

这些轴平行的平行轴

设定各控制轴为对应的第儿号伺服轴。通常，控制轴号与伺服轴号的设

定值相同

3) 有关进给速度的参数

表 3-16 有关进给速度的参数

参数号及位

参数意义

1420 

1422 

1423 

各轴快速运行速度

最大切削进给速度（全轴通用）

各轴手动连续进给 (JOG) 时的进给速度

,  1424 

各轴手动快速运行速度

1025 

1028 

设定各轴返回参考点时减速后各轴的进给速度

设定有挡块返回参考点时的快速运行速度，或建立参考点之前返回参考点的快

速运行速度

备注

位型

位型

位型

位型

字节型

备注

位型

位型

位型

字节轴型

字节轴型

字节轴型

备注

双字轴型

双字型

字轴型

双字轴型

字轴型

双字轴型

155 

备注

位型

位型

位型

4) 有关伺服的参数

参数号及位 参数代码

参数意义

表 3-17 有关伺服的参数

1800.1 

CVR 

位置控制准备好信号 PRDY 接通之前，速度准备好信号 VRDY 先接通

时。 0 ：出现伺服报警； 1 ：不出现伺服报警

1800.3 

1800.4 

1815.1 

FFR 

RBK 

前馈控制。 0 ：仅切削进给时有效； 1 ：切削进给和快速进给有效

切削件丸速进给分别进行反向间隙补偿。 0 ：不进行； 1 ：进行

OPTX 

位置检测器。 0 ：不使用分离型脉冲编码器； 1 ：使用分离型脉冲编码器

位轴型

1815.4 

APZX 

1815.5 

A虹

1825 

1851 

使用绝对位置检测器时机械位置与绝对位置检测器的位置。 0 ：不一致；

1 ：一致

位置检测器。 0 ：不使用绝对位置检测器； 1: 使用绝对位置检测器（绝对

脉冲编码器）

各轴的伺服环增益

各轴的反向间隙补偿量

5) 有关螺距误差补偿的参数

表 3-18 有关螺距误差补偿的参数

参数号及位

参数意义

3620 

3621 

3622 

3623 

3624 

设定各轴参考点的螺距误差补偿点号码

各轴负方向最远一端的螺距误差补偿点号码

各轴正方向最远一端的螺距误差补偿点号码

. 

各轴螺距误差补偿倍率

补偿点的间隔

6) 有关主轴控制的参数

表 3-19 有关主轴控制的参数

参数号及位 参数代码

参数意义

3706.0 

3706.1 

PGl 

PG2 

主轴与位置编码器的齿轮比

主轴与位置编码器的齿轮比（与 3706.0 配合使用）

3706.5 

ORM 

主轴准停时电压的极性。 0 ：正； 1 ：负

3706.6 

CWM 

主轴速度输出时电压的极性

3706.7 

TCW 

主轴速度输出时电压的极性（与 3706.6 配合使用）

3708.0 

SAR 

是否检测主轴速度到达信号。 0 ：不检测； 1 ：检测

3730 

3731 

3772 

156 

主轴速度模拟输出的增益调整数据

主轴速度模拟输出偏置电压的补偿值

主轴上限转速

位轴型

位轴型

字轴型

字轴型

备注

字型

字轴型

字轴型

双字、轴型

字型

备注

位型

位型

位型

位型

位型

位型

字型

字型

字型

7) 有关刀具补偿的参数

参数号及位 参数代码

5001.0 

5001.1 

TLC 

TLB 

5001.2 

OFH 

表 3-20 有关刀具补偿的参数

参数意义

选择刀具长度补偿类型（仅 M 型机床有效）

进行刀具长度补偿的轴（仅 M 型机床有效）

设定刀具长度补偿、刀具半径补偿、刀具位置补偿的偏置号（仅 M 型机

床有效）

5002.0 

IDI 

5002.1 

LGN 

5002.2 

LWT 

5002.4 

LGT 

设定刀具位置偏置号。 0 ：用 T 代码的山l 1,~  2 位指定； 1 ：用 T 代码的最后

1 位指定（仅 T 型机床有效）

设定刀具位置偏置的形状偏置号。 0 ：与磨损偏置号相同； 1 ：用刀具选择

号指定儿何形状偏置号（仅 T 型机床有效）

设定刀具磨损补偿。 0 ：用刀具移动进行补偿； 1: 用坐标系位移进行补

偿（参数 N05002.4 为 0 是有效）（仅 T 型机床有效）

刀具儿何补偿。 0 ：用坐标系位移进行补偿； 1 ：用刀具移动进行补偿（仅

T 型机床有效）

备注

位型

位型

位型

位型

位型

位型

位型

5002.5 

LGC 

LGT 为 0 时有效， LGT 为 1 时通常被取消）。 0 ：不取消； 1 ：取消（仅 T 型

字型

指定偏置号为 0 的刀具几何补偿是否被取消（使用刀具几何磨损补偿且

机床有效）

5002.6 

LWM 

时的儿何补偿和磨损补偿）的执行情况。 0 ：在 T 代码的程序段执行； 1:

字型

设定刀具位置补偿（使用刀具几何磨损补偿时的磨损补偿，当 LGT 为 1

5008.1 

CNI 

在轴移动同时进行（仅 T 型机床有效）

是否进行刀具半径补偿 (M 系）或刀尖 R 补偿 (T 系）的干涉检查。 0 ：进

行； 1 ：不进行

8) 有关固定循环的参数

表 3-21 有关固定循环的参数

参数号及位 参数代码

参数意义

5101.0 

FXY 

使用钻削固定循环时钻孔的轴。 0 ：通常为 Z 轴； 1 ：用程序选择的轴

5133 

5135 

5136 

多重循环 G72 、 G73 的退刀量 (T 系）

X 方向的多重循环 G73 中的退刀量 (T 系）

Z 方向的多重循环 G73 中的退刀量 (T 系）

字型

备注

位型

双字型

双字型

双字型

3. 3. 2  SINUMERIK 802D 的参数及设定

机床参数的设定依据主要有两方面：一是系统生产厂家根据机床生产厂家所需要的
CNC 功能，对系统的基本功能进行的设定；二是机床生产厂家按各机床的实际工作情况，
对标准 CNC 进行的设定与调整。

与系统功能有关的机床参数直接决定了系统的配置和功能，设定错误可能会导致系

统功能的丧失；与机床调整有关的机床参数设定错误，可能会影响机床的主要参数与动、

157 

静态性能、定位精度等。因此，机床参数是机床维修的重要依据与参考，维修时必须保证

机床参数的正确设定。

一般来说系统与机床生产厂家在提供系统与机床时，均提供最终的机床参数设定

表。在进行维修工作时，维修人员应随时参考系统“机床参数”的设置情况，对机床进行必

要的调整与维修。特别是在更换 CNC 模块前，一定要事先记录机床的原始设置参数，以

便机床功能的恢复。但是，由于种种原因，机床使用单位在维修时无法提供机床参数设定

表的情况亦经常发生。因此，维修人员必须对全部机床参数有完整、正确、清晰的了解，才

能进行迅速、正确的维修。

在 SINUMERIK 802D 中，机床主要参数可分为：机床显示参数、通用机床参数、通道

数据、轴参数。

1.  SINUMERIK 802D 机床参数的设定与调整方法
在 SINUMERIK 802D 中，可以利用 MDI/CRT 面板进行机床参数的修改，但更改参
数前必须进行相应的口令设定。 802D 系统共分为 “SIEMENS” 、”制造商”和“用户”三档

不同的口令设置，根据登录的用户不同，修改和显示的权限有所差异。具体修改的操作步

骤如下：

(1) 同时按系统操作面板上的 “SHIFT” 与 “SYSTEM” 键，进入系统页面。

(2) 按［设定口令］功能键，进行口令的设定。

(3) 按［机床数据］功能键，进入机床数据页面，该页面共显示“通用数据”、"轴参数”、

“其他数据”等数据（轴参数可以通过＂轴＋”和＂轴－“功能键进行 X 、 Y 、么 4 轴的切换）。

(4) 修改机床数据，并根据应答键进行数据修改的确认和取消。

(5) 修改完毕后退回上一菜单。

(6) 按［数据存储］功能键，并根据应答键进行数据的存储。

(7) 按［调试］功能键。

(8) 根据参数生效方式进行参数的生效操作。
2.  SINUMERIK 802D 常用参数的意义
SINUMERIK 802D 常用系数的意义见表 3-22 ～表 3-25 。

1) 常用的机床显示参数的设定与调整

表 3-22 常用的机床显示参数

含

义

默认值

数据类型 生效方式

前台语言

显示分辨率

显示分辨率（英制）

显示分辨率主轴

刀具参数读保护级

刀具参数写保护级

刀具磨损值写保护级

可设定零点偏置写保护级

设定数据写保护级

1 

3 

4 

1 

3 

3 

3 

3 

3 

字节

字节

字节

字节

字节

字节

字节

字节

上电生效

上电生效

上电生效

上电生效

立即生效

立即生效

立即生效

立即生效

字节

立即生效

参数号

202 

203 

204 

205 

207 

208 

209 

210 

212 

158 

参数号

含

义

默认值 数据类型 生效方式

（续）

213 

214 

215 

218 

219 

221 

222 

223 

247 

280 

281 

283 

284 

285 

286 

287 

288 

289 

290 

291 

292 

305 

306 

307 

308 

309 

310 

311 

312 

313 

314 

330 

331 

377 

零件程序读保护级

零件程序写保护级

零件程序选择保护级

R 参数写保护级

RS-232 通信设定保护级

零件程序目录访问保护级

PLC 应用程序保护级

保护工作区保护级

RS-232 接口波特率：

300,600,1200,2400,4800,9600,19200,38400 

PLC 站地址

NCK 地址

仿真： X 默认值

仿真： Z 默认值

仿真：显示范围缺省值

仿真： X 轴最大显示值

仿真： Z 轴最大显示值

仿真：最大显示范围

仿真：实际值更新率

坐标系位置

回转轴直径显示有效

直径增量进给

基于用户的 G 功能组，用于位置显示

基于用户的 G 功能组，用于位置显示

基于用户的 G 功能组，用于位置显示

基于用户的 G 功能组，用于位置显示

基于用户的 G 功能组，用千位置显示

基于用户的 G 功能组，用于位置显示（外部语言）

基于用户的 G 功能组，用于位置显示（外部语言）

基于用户的 G 功能组，用于位置显示（外部语言）

基于用户的 G 功能组，用于位置显示（外部语言）

基于用户的 G 功能组，用于位置显示（外部语言）

机床的坐标位置

轮廓编程使能

用户循环的写保护级

7 

3 

3 

3 

3 

3 

3 

3 

7 

2 

3 

。

。

100 

。

。

1000 

100 

2 

1 

I 

1 

2 

8 

9 

10 

1 

2 

8 

9 

10 

。

。

。

字节

字节

字节

字节

字节

字节

字节

立即生效

立即生效

立即生效

立即生效

立即生效

立即生效

立即生效

字节

立即生效

字节

立即生效

字节

字节

整数

整数

整数

整数

整数

整数

整数

字节

字节

字节

整数

整数

整数

整数

整数

上电生效

上电生效

立即生效

立即生效

立即生效

立即生效

立即生效

立即生效

立即生效

立即生效

立即生效

立即生效

立即生效

立即生效

立即生效

立即生效

立即生效

整数

立即生效

整数

立即生效

整数

立即生效

整数

立即生效

整数

立即生效

字节

立即生效

字节

立即生效

字节

立即生效

159 

2) 常用通用机床参数的设定与调整

表 3-23 常用通用机床参数表

参数号

含

义

10000  机床坐标名称（车床 Xl,Zl,SP,Al, Bl) 

10200  直线位置的计算精度

10210  转角位置的计算精度

10240  基本系统公制

10713  M 功能代码激活预处理停止

10714  激活复位后主轴有效的 M 代码

10715  调用固定循环（或子程序）的 M 代码

10760 

G53 设定

10812  利用 G68 的刀架

10880  定义适应的 CNC 系统

10881 

IS0.3 方式： G 代码系统

10886  增量系统

11240 

PROFIBUS 配置文件 SDB 1000 号

11310  手轮反向

11320  每刻度手轮脉冲数

11346  手轮脉冲移动实际距离

13200  测量头极性改变

14510  用户数据 (INT)

14512  用户数据 (Hex)

18040 

PCMCIA 卡的版本以及对应的日期

3) 常用通道参数的设定与调整

标准值 数据类型 生效方式

字符串

上电生效

1000  双字节

上电生效

1000  双字节

上电生效

1 

-1 

-1 

- 1 

。

。

。

。

。

2 

布尔

双字

双字

双字

布尔

布尔

双字

双字

布尔

字节

字节

上电生效

上电生效

上电生效

上电生效

上电生效

上电生效

上电生效

上电生效

上电生效

上电生效

上电生效

1,1,1  双字节

上电生效

。

。

。

。

。

字节

布尔

双字

双字

上电生效

上电生效

上电生效

上电生效

字符串

上电生效

参数号

含

义

标准值 数据类型

生效方式

表 3-24 常用通道参数表

20050  定义通道内的几何轴（车床 1.0.2 ，铣床 1.2.3)

20070  通道内有效的机床轴号（车床 1.2.3.0.0 ，铣床 1.2.3.4.5)

20080  通道内有效的机床轴名

20090  主主轴在通道中的位置

20094  用于刚性攻丝的 M 功能 (SIEMENS 模式）

20095  用于刚性攻丝的 M 功能（外部模式）

20156  外部 G 功能组的复位值

20360  刀具参数的定义

20380  处理 G43 和 G44 的刀具长度补偿

20384  多轴同时刀具长度补偿

160 

字节

字节

上电生效

上电生效

字符串

上电生效

1 

70 

29 

OxO 

。

1 

双字

双字

双字

字节

双字

字节

布尔

上电生效 , 

上电生效

上电生效

上电生效

上电生效

上电生效

上电生效

含

义

标准值 数据类型

生效方式

（续）

参数号

20550 

20552 

GOO,GOl 准停的条件

GOO,GOl 准停的条件过渡

20700  未回参考点 NC 启动禁止

20730 

GO 插补方式

21000  圆弧终点监控常数

21010  圆弧终点监控系数

21160  几何轴点动快速速度

21165  几何轴点动速度

22254  用于程序停止的附加 M 功能

22256  用于程序条件停止的附加 M 功能

22550 

由 T 或 M 功能激活新的刀具补偿值

22910  输人比例缩放系数

22914  激活轴比例缩放系数 (G51)

22920  激活固定进给率 (Fl-F9)

27800  通道的工艺方式（车床 1 ，铣床 0)

27860  激活程序运行时间测量

27880  激活工件计数器

27882  通过用户定义的 M 代码计数工件个数

28402  上载缓冲区的大小

29000  预见功能检测的程序段数量

4) 常用轴参数的设定与调整

。

。

1 

1 

字节

按刷新键生效

字节

按刷新键生效

布尔

布尔

复位生效

上电生效

0.01  双字节

上电生效

0.001  双字节

上电生效

10000  双字节

复位生效

1000  双字节

上电生效

一 1

1 

。

。

。

。

Ox07 

OxO 

2 

。

10 

双字

双字

字节

布尔

布尔

布尔

上电生效

上电生效

上电生效

上电生效

上电生效

上电生效

字节

按刷新键生效

字节

双字

字节

双字

双字

复位生效

复位生效

上电生效

上电生效

上电生效

参数号

含义

标准值

数据类型

生效方式

表 3-25 常用轴参数表

30110  给定值：驱动器号俐均还｝

30120  给定值：输出到子模块偌均:

30130  给定值输出类型

30134  输出值无极性

30200  编码器数量

30220  实际值：驱动器号

30230  实际值：输入模块号／测量循环板

30240  编码器类型

30270  绝对值编码器：移动范围扩展

30310  旋转进给轴／主轴为 MODUW 轴

30320  旋转轴按 360'MODULO 轴显示

30350  轴信号用于仿真轴

I 

1 

。

。

1 

1 

1 

。

0.0 

。

。

。

字节

字节

字节

字节

字节

字节

字节

字节

字节

布尔

布尔

布尔

上电生效

上电生效

上电生效

上电生效

上电生效

上电生效

上电生效

上电生效

上电生效

上电生效

上电生效

上电生效

161 

参数号

含义

31000  直接测量系统（光栅尺）

31020  编码器每转脉冲数 (encoder no) 

31030  丝杆螺距

31040  编码器直接安装在机床上（编码器号）

31050  齿轮箱分子

31060  齿轮箱分母

31070  编码器齿轮箱分子

31080  编码器齿轮箱分母

32000  最大轴速度

32010  点动方式快速速度

32020  点动速度

32100  轴运动反向

32110  位置反馈极性

32200  位置环增益

32300  最大加速度

32630  由程序激活前馈控制

32640  编码器／丝杆螺距误差补偿生效

32810  速度控制环等效时间常数

33050  用于 PLC 润滑的移动距离

34000  坐标轴带有参考点开关

34010  负向逼近参考点

标准值

数据类型

生效方式

（续）

。

2048 

10.0 

。

1 

1 

I 

I 

布尔

双字

上电生效

上电生效

双字节

上电生效

布尔

双字

双字

双字

双字

上电生效

上电生效

上电生效

上电生效

上电生效

lOOOO(mm/rnin),27. 77(r/m) 

双字节 按刷新键生效

lOOOO(mm/min),27. 77(r/m) 

双字节

复位生效

2000(mm/min),5.55(r/m) 

双字节

复位生效

1 

1 

1 

双字

双字

上电生效

上电生效

双字节 按刷新键生效

lmm/s气 2.77(r／s2)

双字节 按刷新键生效

1 

。

0.003 

100000000 

I 

。

字节

复位生效

布尔

按刷新键生效

双字节 按刷新键生效

双字节 按刷新键生效

布尔

布尔

复位生效

复位生效

34020  搜索参考点开关的速度

5000.0(mm/min),13.88(r/m)  双字节

复位生效

34030  搜索参考点开关的最大距离

10000.0 

双字节

复位生效

34040  搜索编码器零脉冲的速度

300.0(mrn/min),0.833(r/m) 

双字节

复位生效

34050 

编码器零脉冲在参考点开关的反向（编码

器号）

34060  搜索编码器零脉冲的最大距离

。

20.0 

布尔

复位生效

双字节

复位生效

34070  参考点定位速度

1000.0(mm/min),2. 77(r/m) 

双字节

复位生效

34080  参考点位置（相对于机床坐标）

34090  参考点移动距离偏置值

34092  电子凸轮偏移

34093  电力凸轮与零脉冲之间的距离

34100  参考点设定位置

34110  返回参考点轴次序

34200  参考点模式

35000  定义机床轴为主轴

162 

-2.0 

0.0 

0.0 

0.0 

。

1 

1 

。

双字节

复位生效

双字节

复位生效

双字节

复位生效

双字节

复位生效

双字节

复位生效

双字节

复位生效

字节

字节

上电生效

上电生效

参数号

含义

35010  齿轮换挡生效

35012  齿轮换挡位置

35020 

35030 

主轴基本方式： 0/1 —速度控制； 2一定位

方式； 3—坐标方式

主轴基本方式生效时间： o-上电；

1—程序启动； 2—定位方式； 3一坐标方式

35040  主轴复位后自动恢复

35100  最高主轴速度

35110  主轴各挡最高转速

35120  主轴各挡最低转速

35` 130  勹主轴各挡最高转速限制

'35140  主轴各挡最低转速限制

35150  主轴转速容差

35160  PLC 主轴速度限制

35200  开环模式各挡加速度

35210  位置环模式的加速度

35300  主轴位置控制速度

35310  主轴定位延时时间

35350  主轴定位转动方向

35400  主轴摆动方向

35410  主轴摆动加速度

35430  主轴判断起始方向

35440  主轴正向摆动时间

35450  主轴负向摆动时间

35500  主轴速度达到给定值才能激活进给使能

35510  主轴停止后才能激活进给使能

36000  准停定位窗口（粗）

36010  准停定位窗口（精）

36020  准停精定位延时时间

36030  零速位置容差

360140  零速监控延时时间

36050  卡紧位置容差

标准值

数据类型

生效方式

（续）

。

0.0 

。

OxOO 

。

10000.0 

布尔

上电生效

双字节 按刷新键生效

字节

复位生效

字节

复位生效

布尔

上电生效

双字节

上电生效

500,500,1000,2000,4000,8000  双字节 按刷新键生效

50,50,400,800,1500,3000 

双字节 按刷新键生效

500,500,1000,2000,4000,8000  双字节 按刷新键生效

5,5,10,20,40,80 

双字节 按刷新键生效

0.1 

1000.0 

双字节

复位生效

双字节 按刷新键生效

30.0,30.0,25.0,20.0,15.0,10.0  双字节 按刷新键生效

30.0,30.0,25.0,20.0,15.0,10.0  双字节 按刷新键生效

500.0 

双字节 按刷新键生效

o.o,o.os,0.1,0.2,0.4,0.8 

双字节 按刷新键生效

3 

500.0 

16 

。

1.0 

0.5 

1 

。

0.04 

0.01 

1.0 

0.2 

0.4 

0.5 

字节

复位生效

双字节 按刷新键生效

双字节 按刷新键生效

字节

复位生效

双字节 按刷新键生效

双字节 按刷新键生效

字节

布尔

复位生效

复位生效

双字节 按刷新键生效

双字节 按刷新键生效

双字节 按刷新键生效

双字节 按刷新键生效

双字节 按刷新键生效

双字节 按刷新键生效

双字节 按刷新键生效

双字节

复位生效

双字节

复位生效

163 

36060 

静止速度容差（定义最大轴或主轴的停止

速度）

36100  第一软限位负向

36110  第一软限位正向

5.0(mm/min) 

0.01388(r/min) 

-100000000 

100000000 

参数号

含义

36120  第二软限位负向

36130  第二软限位正向

36300  编码器频率极限

36310  编码器零标记监控

36400  轮廓监控容差带

36500  位置实际值的切换容差

36600  制动特性硬件限位开关

36610  急停制动时间

36620  伺服禁止延时时间

标准值

-100000000 

100000000 

300000 

。

1.0 

0.1 

。

0.05 

0.1 

（续）

数据类型

生效方式

双字节

复位生效

双字节

复位生效

双字节 按刷新键生效

双字

按刷新键生效

双字节 按刷新键生效

双字节 按刷新键生效

字节

上电生效

双字节 按刷新键生效

双字节 按刷新键生效

3.  SINUMERIK 802D CNC 的调整与设定
当 CNC 刚刚连接完毕或者因为某种原因导致 PLC 程序丢失或参数丢失后，就要对

CNC 进行重新调试。一台 802D CNC 的调试主要包括以下步骤。

1)  PLC 用户程序的调试
一般情况下，在 802D 的各个部件连接完毕后，首先对 PLC 的控制逻辑进行调试。至
关重要的是必须在所有有关 PLC 的安全功能准确无误后，才能开始调试驱动器和 802D

CNC 的参数。

(1) 利用准备好的 “802D 调试电缆“将计算机和 802D 的 COMl 连接起来。
(2)  PC 侧：使 802D 进入联机状态并按以下步骤操作：系统-PLC-STEP? 连接-设

定通信参数-选择“联机开启＂。

(3)  PC 侧：启动 PLC 编程工具，进入通信界面，设定通信参数。
(4)  PC 侧：打开己编译完成的 PLC 应用程序。
(5) 利用 PLC 编程工具将 PLC 程序下载到 802D 中，下载完成后重新启动 PLC 应用

程序。

(6) 监控并查找 PLC 地址有无冲突。
(7)  802D 侧：如果 PLC 应用程序是在 SIEMENS 公司标准子程序库上建立的，则以
制造商口令进行相关参数的修改，如：通过 MD14510[16] 选择机床类型， 1 表示车床， 2 表

示铣床。

注意：当调试急停处理子程序时，设定 MD14512[ 16]Bit0 = l （调试方式）进行调试。
2)  CNC 初始化
(1) 显示语言的安装。 802D 系统在出厂时就已预装了英文作为系统的第一语言，同
时针对中国市场系统加装了中文作为第二语言。因此， 802D 在出厂时就有了两种常用语
言：英文和中文。如果用户需要加装其他语言，可以通过文本管理器安装中文（繁）、德语、
法语、西班牙语、俄语、韩语等。

下面以安装中文为例，介绍安装语言的方法：
CD 通过 802D 调试电缆，将计算机和 802D 的 COMl 接口连接起来。
@PC 侧：从 Windows 的“开始”中找到文本管理器 TextManger ，并启动。

164 

@PG 侧：在 TextManger 窗口中选择 “LAN” 图标，进入安装语言界面。

@PC 侧：选择文件夹 “C” （中文），并点击 “Second Language” 键。

@PC 侧：点击 “OK“ 确认，选择 Configure Transfer 设定通信参数（波特率等）。

@802D 侧：输入制造商口令（通常为 evening) ，在通信界面选择“二进制”方式以及与

计算机上相同的波特率，然后选择“读入启动”。

(J)  PC 侧：选择 “Start Transfer SP*. arc" ，中文安装即开始。

®802D 侧：屏幕显示“读启动数据？”，按菜单键“确认”后，传输继续进行。

(2) 初始化步骤及方法。为了简化 802D 的调试， SIEMENS 公司专门提供了车床和

铣床的初始化文件，初始化步骤和方法如下：

CD 利用准备好的 “802D 调试电缆“将计算机和 802D 的 COMl 连接起来。

@PC 侧：启动 “WINPCIN“通信工具软件。

@PC 侧：将 WINPCIN 的通信方式设置为“二进制”。.

@PC 侧：选择发送数据， PC 机出现选择发送文件窗口。

@PC 侧：找到文件夹 CONFIG ，选择所需的初始化文件。
@  802D 侧：输入制造商口令（通常为 evening) ，然后进入通信界面，选择“二进制”方

式以及与 PC 机对应的传输参数，然后选择“读入启动”。

(J)  PC 侧：选择 “OPEN" ，安装即开始。

®802D 侧：屏幕上提示“读启动数据？”，按软菜单“确认”后，传输继续进行，在传输

过程中，会有若干自动启动，时间大约 4min 。

4. 数据备份

1)  802D 系统存储器

在 SINUMERIK 802D 系统内，有静态存储器 SRAM 与高速闪存 FLASH ROM 两种

存储器。静态存储器区存放工作数据（可修改），高速闪存区存放固定数据，通常作为数据

备份区、出厂数据区、 PLC 程序和文本区等，以及存放系统程序，如图 3 — 37 所示。

三＇，今

图 3 — 37 SIN口舵RIK 802D 系统的存储器

工作数据区内的数据内容有：机床数据、刀具数据、零点偏移、设定数据、螺距补偿、 R

参数、零件程序、固定循环。

备份数据区内的数据内容是系统在数据存储操作后工作数据区的全部内容复制到备

份数据区。

165 

出厂数据区内容是系统在出厂时的标准数据（机床数据的默认值）。
PLC 程序和文本保存的是系统内置 S7-200 PLC 程序及 PLC 的用户报警文本。

上述系统数据的构成见表 3-26 。

表 3-26 系统数据的构成

数据类型

说明

文件类型

零件程序和子程序

主程序目录内的所有零件程序文件

标准循环

固定循环目录内的所有固定循环文件

其他数据

试车数据

PLC 应用

显示机床数据

PLC 选择报警文本

机床数据

设定数据

刀具数据

R 参数

零点偏移

丝杠误差补偿

试车所需的数据、文件

PLC 应用程序（含报警文本）

所有的显示机床数据

所有 PLC 用户报警文本

文本文件

文本文件

文本文件

文本文件

文本文件

文本文件

文本文件

文本文件

二进制文件

二进制文件

二进制文件

二进制文件

2)  SINUMERIK 802D 系统的启动方式
启动方式分为方式 0 （正常上电启动）、方式 1 （默认值上电启动）、方式 3 （按存储数据

上电启动）三种，如图 3-38 所示。

电容 C

方式 0 启动

方式 l 启动

SRAM 

数据存储

方式 3 启动 7  备份数据区

PLC 程序下载

PLC 程序上载

PLC 程序区

三

图 3 - 38  SINUMERIK 802D 系统的三种启动方式

(1) 方式 0 ：正常上电启动，以静态存储器区的数据启动。正常上电启动时，系统检测
静态存储器，当静态存储器掉电，如果做过内部数据备份，系统自动将备份数据装入工作
数据区后启动；如果没有做过内部数据备份，系统会将出厂数据区的数据写入工作数据区
后启动。

(2) 方式 1 ：默认值上电启动，以 SIEMENS 出厂数据启动，制造商机床数据被覆盖。
启动时，出厂数据写入静态存储器的工作数据区后启动，启动完成后显示 04060 已经装载

166 

标准机床数据报警，复位后可清除报警。

(3) 方式 3 ：按存储数据上电启动，以高速闪存 FLASH ROM 内的备份数据启动。启
动时，备份数据写入静态存储器的工作数据区后启动，启动完后显示 04062 已经装载备份
数据报警，复位后可清除报警。

3) 数据备份的分类
系统工作时是按静态存储器 SRAM 区的数据进行工作的，通常修改的机床数据和零
件加工程序等都在 SRAM 区， SRAM 区的数据若不进行备份是不安全的， SRAM 区中的
数据有可能会丢失。在系统调试完毕后进行数据备份是十分重要的。 802D 提供了多种
数据备份的方法，可在系统内部或 PC 卡备份，也可以在计算机的硬盘上备份。分为机内

存储和机外存储两种。

(1) 机内存储：即将静态存储器 SRAM 区已修改过的有用数据存放到高速闪存
FLASH 区。通常系统断电后， SRAM 区的数据由高能电容 C 上的电压进行保持，可在断
电情况下保持数据不少千 50 h （一般情况下可在 7 天左右）。对于长期不通电的机床，
SRAM 区的数据将丢失。当重新上电时，系统会根据电容上电压的情况，在启动过程中
自动调用备份数据区上一次存储的机床数据（方式 3 启动），若没有做过数据存储，则在启
动过程中自动调用出厂数据。机内存储即数据存储功能是一种不需任何工具的方便快速
的数据保护方法。内部备份的数据不包括 PLC 应用程序和用户报警文本。

(2) 机外存储：即将静态存储器 SRAM 区数据通过 RS-232 串行口传输至 PC 卡或

计算机保存。分系列备份和分区备份两种。

系列备份是将系统的所有数据都按照一定序列全部传输备份并含有一些操作指令
（如初始化系统、重新启动系统等），其中数据包括：机床数据、设定数据、 R 参数、刀具参
数零点偏移、螺距误差补偿值、用户报警文本、 PLC 用户程序、零件加工程序。系列备份
的优点是备份方便，只需传输保存一个文件就可以。但其中包含一些特殊指令，不同版本
的系统间一般不能通用。

分区备份是将系统的各种数据分类进行传输备份。其中可分四大类，每一类都可分
别传输备份，具体为： 1 类（零件程序和子程序……汃 2 类（标准循环……）、 3 类（用户循
环……汃4 类（数据……）、 5 类 (PLC 一应用）。其中带……符号的类别中又可以选择某
一程序或循环或数据。 1 类程序和 2 、 3 类循环根据用户使用不同其中包含的程序和循环
而不同，这些程序和循环可单独分程序或循环传输备份。 4 类数据……内包含 6 个子类：
机器数据、设置数据、刀具数据、 R 参数、零点偏移、丝杠误差补偿，其中这 6 个子类又可单

独分类传输备份。

分区备份的优点是备份的文件不分版本，可以通用，方便制造商使用。但其备份文件

很多，如备份不全就不能完全恢复系统。

在 802D 系统中的试车数据为系列备份，将试车数据传输备份后即可完成系列备份
工作。并且在 802D 系统中，试车数据应用传输时必须要选择二进制格式。其余程序、循
环、数据均需选择文本格式传输。

4) 数据备份的方法与步骤
(1) 数据的内部备份（机内存储）。数据存储具体操作步骤如下：
心按 [Alt+N] 键进入诊断操作区域，如图 3-39 所示，这时将在右垂直菜单条上出

167 

现数据存储菜单功能。

＠按［数据存储］功能菜单键 。 出现对话框，要求用户确认是否要保存数据，如图 3-

40 所示 。

勹

7 - 穹～卞·

—

;
”“”“ 尸
尸
型
书
l
才
l
比
I
祗
f

i

油
池
沾

设定
O 令 ｀

修改
O 令

蠼桧
口令

口凶叩

l..,,,., 吓

旦

“'扎，＊心

是一＂拧谕W

枷比--T 伏芯中

欢言记岱灶心

下 一“芒．中吐．

^  1 

. ，.

、

． 汛庄欢扭丸＄，飞·
．气1 认仁祜代
•  R 农勾
．丛 G 吐心、，女虳'
．寸谝
．农，子叶屯气，介江
．（叩.,' !:坎汛，＾＇比屯沪

l二：

,8 仁廿 I 虹 I_JJ点 1

广一旦
1 

图 3-39 诊断操作区域

图 3-40 确认是否保存数据对话框

＠按［确认］键，进入数据存储操作，屏幕出现对话框，要求用户别操作！别关机！按

［中断］键，返回原画面，退出数据存储操作，如图 3-41 所示。

＠数据存储结束，返回原操作画面，在屏幕底部出现提示数据存储结束，如图 3-42

所示 。

注意：数据存储需要十儿秒的时间，此间不要作任何操作，不能断电！

虹酐1 — 

？吐付1 芒亡
/ 

/" 1 

：只

- 

, 

,' 

“

、＇ ，

I t，寸＇志
九｀吁

八，·i ，，产
, J ` 

·7 歹捐可看巧克
漏试，口 1 笘； 1 虹

耳
旦胃？

0心如

J..吓叫

f

. 
」”
立＿l＿」—-

欢侣
存储

图 3-41 数据存储操作对话框

图 3-42 数据存储界面

(2) 数据的外部备份。 802D 中数据可以通过 RS-232 串行接口备份到个人计算机

或 PC 卡上 。

CD 数据备份到计算机的操作步骤及方法如下：
a. 通过 RS-232 电缆将计算机和 802D 的 COMl 接口连接起来。
b.  PC 侧：从 WINDOWS 的“开始”中找到通信工具软件 WINPCIN ，并启动 。
c.  PC 侧： WINPCIN 中选择文件类型，然后按接收数据键“Receive Data” 。
d.  802D 侧：选择所需传输的数据，然后按菜单键“读出＂，启动数据输出。

168 

注意：通信双方的通信参数（如波特率）应匹配；备份或恢复“试车数据“时，波特率应

小千等于 19200 ；通信的双方，接收方首先进入接收数据状态。

＠数据备份到 PC 卡的操作步骤及方法如下：
a.  PC 卡插入 802D 的 PC 卡插槽中。 802D 使用的 PC 卡为 8MB,5V。
b.  802D 上电。

c.  802D 进入 “SYSTEM” 菜单，选择“数据读入／出”菜单键。

cl. 选择需要传输的数据。

e. 按菜单键“读出“，可将数据备份到 PC 卡上。

备份完毕后，调试工作也已基本完成，剩下的工作仅是：每个坐标轴的反向间隙补偿、

坐标软限位的设定、驱动器的优化、丝杠螺距误差补偿等过程。

3.4  系统故障诊断与维修

数控机床是机、电、液、气一体化的设备，技术先进、价格昂贵。为保证维修的顺利进

行，现代数控机床具备很强的自诊断功能。一般情况下，当数控机床发生故障时，在系统

CRT 上均能显示报警号与提示信息，根据系统所显示的报警号与提示、控制板指示灯状

态信息、 1/0 信号状态或者借助系统自诊断功能可以大致了解故障发生的原因与故障

部位。

根据系统报警显示进行故障的维修处理，是数控机床维修过程中使用最广、最基本的

维修技术，也是维修人员所必须掌握的最基本的方法之一。

3. 4.1  FANUC Oi - A 系统的 CNC 故障诊断与维修

1.  FANUC  Oi-A 系统的 CNC 故障诊断

1) 通电后屏幕不显示故障

出现通电后屏幕不显示的故障，可从两方面分析原因：

(1) 显示部件系统有问题；
(2)  CNC 系统处在不能工作的状态。

检查分析的方法，是查看在 CPU 板上的 STATUS LED 状态显示，见表 3-1 。如果

是表 3 — 1 中的序号 10 所示亮灯状态，则说明 CNC 系统本体在正常工作，问题出现在显

示部件系统。如果不是上述亮灯状态，则是显示部件以外的硬件出现了问题。根据 LED

显示出的原因，处置方法如下。

(1) 显示部件系统有问题。 CPU 板上的 STATUS LED 亮灯状态如表 3-1 中的序

号 10 所示亮灯状态，即系统工作正常，初步判断是显示部件不良。从以下方面检查，确认

故障原因。

CD 检查电源，对显示器是否供电。如果显示系统供电不良，可以考虑更换电源单元。

＠检查视频信号电缆是否连接，有无断线、接触不良。如果电缆接线不良，进行正确

接线。

＠检查 1/0 板上 CRT 控制回路，如果 CRT 控制回路不良，应该更换 1/0 板。

169 

＠检查显示器，如果显示器不良，则更换显示器。
(2)  CNC 系统有问题。如果不是表 3-1 中的序号 10 所示亮灯状态，则是 CNC 系统

出现了问题，根据表 3-1 中 LED 亮灯情况，进一步确认故障内容及不良的线路板，进行

相应的处置，如更换不良的印制线路板等。

2) 机床的手动、自动功能均不能执行

数控机床发生手动、自动均不能执行的故障时，应进行下述检查。

首先确认屏幕上是否进行位置显示。如果在界面上有位置显示，那么故障一般在

PMC 的输出端。可能是连接电缆伺服系统等部件有故障；其次用 CNC 的状态显示来确
认。分析系统是处在允许手动操作或是自动运行的状态，还是处在不允许机床运动的状
态，再次用 CNC 诊断功能确认系统内部状态，即检查 PMC 的 I/0 状态。

(1) 当屏幕界面的位置显示及实际刀具全都不能运动时，应从状态显示和系统自诊

断两个方面检查。

CD 从屏幕上的 CNC 状态显示中，查找进给不动作原因。即是否为 “EMG” 、,， RE­

SET" ，显然在这两种状态下，进给是不能动的。

＠系统处于紧急停止状态（紧急停止信号为 ON) 。此时界面显示为 “EMG” 。因为

当界面显示 EMG 时，系统中已输入了急停信号，所以可以用 PMC 的诊断功能 (PM­

CDGN) 作进一步的确认，调出 PMCDGN 界面，查参数 X1008 和 G0008:

参数

#7 

#6 

#5 

#4 

#3 

#2 

#1 

#0 

| ：二 I

IRRW  II 二 I

ERS 

"ESP 值为 “O” ，表明紧急停止信号被输入。

补 IT

(2) 复位状态（复位为 ON) 。复位时系统已进行初始化，系统中已经没有进给指令，

所以进给不能动。此时界面显示为 ',RESET” 。因为外部复位信号、复位和倒带信号中任

意一个复位都可起复位作用，可利用 PMC 侧的诊断功能 (PMCDGN) ，确认复位原因。调

出 PMCDGN 界面，查参数 G0008:

CD 如果系统正在执行 PMC 输入的信号：

若 ERS 为 “1” ，说明外部复位信号被输入。

若 RRW 为 “1” ，说明复位和倒带信号被输入。

＠如果 MDI 键盘的 RESET 键误动作：

当前一项中的信号为 OFF(O) 时，如果 RESET 键损坏，有可能是键盘误动作引起复

位，所以请用万用表确认 RESET 的接点。有异常时，应更换键盘板。

(3) 确认方式选择的状态显示。在显示界面的下部，显示操作面板所处的操作方式、

状态。机床的手动、自动操作需要系统处于如下所列举的儿种方式，若显示的不是下述所

列的方式，则方式选择信号输入不正确。用 PMC 侧的诊断功能 (PMCDGN) ，可以进一步

确认方式状态选择信号。手动和自动时应该显示的操作方式如下。

JOG ：手动连续进给 (JOG) 方式。

H劝：手轮 (MPG) 方式。

170 

MDI ：手动数据输入 (MDI) 方式。

MEM ：自动运行（存储器）方式。

EDIT:EDIT（存储器编辑）方式。

用 PMC 侧的诊断功能（在 PMCDGN 即诊断界面）确认方式选择信号。可以从参数
G0043 中的信号位 G004~.2(M凶）、 G0043. 1 (MD2) 和 G0043.0(MD1) 得到确认，详见表

3-27 。

表 3 — 27 参数 G0043 所确定的操作方式

操作方式

叩

MD'2 

MD1 

手动连续进给 (JOG) 方式

手轮 (M比）方式

手动数据输入 (.MDI) 方式

自动运行（存储器）方式

EDIT（存储器编辑）方式

1 

1 

。

。

。

。

。

。

。

I 

1 

。

。

1 

I 

(4) 启动系统自诊断功能。用 CNC 的 000-015 号诊断功能来判断、确认故障原因。

在自诊断界面上，显示表 3-28 中的各项信息，应该对于表 3-28 信息中的右端显示

为 “1" 的项目，进行检查。如表 3-28 中 005 号信息显示为 "1" ，则需要对 005 号诊断内容

进行检查。

表 3-28 诊断号 000-015 诊断功能

备注

诊断号

信

息

显示

000 

001 

002 

003 

004 

005 

006 

010 

011 

012 

013 

014 

015 

WAITING FOR FIN SIGNAL 

MOTION 

DWELL 

IN - POSITION CHECK 

FEEDRATE OVERRIDE 0% 

。

。

。

。

。

INTER虹K/START LOCK 

1 （例）

SPINDLE SPEED ARRIVAL CHECK 

PUNCH爪G

READING 

WAITING FDR (UN)  CLAMP 

JOG FEEDRATE OVERRIDE 0% 

WAITING FOR RES缸， ESP,RRWOFF

EXTERNAL PROGRAM NUMRFR SEARCH 

。

。

。

。

。

。

。

a 

b 

C 

d 

表 3-28 中 a~d 项与手动、目动运行有关，详细情况介绍如下。

a 项表示系统正在进行到位检查（确认定位）。此时界面显示轴移动（定位）还没结

束，所以确认“0300” 和 “1826”参数号中的内存数值，在下述条件下， a 项显示为 “1” 。

诊断号 0300 中内存储的数（内置位置偏差量）大于参数 No.1826 中内存储的数（内

171 

置到位宽度）。

CD 按参数表确认参数的设定值。

参数 1825

每轴伺服回路增益（标准值为 300)

＠伺服系统可能异常，对照伺服报警 400,410,411 各项内容进行检查。

b 项表示输入了互锁（禁止轴移动），启动了锁住信号。互锁功能有几种，机床厂作用

哪种互锁可以用参数设定。首先要确定参数 3003 的设定。

参数

3003 

#7 

#6 

#5 

#4 

#3 

DIT 

#2 

ITX 

#1 

#0 

ITL 

0 号 (ITL) 为 “0” 时互锁信号 (•IT) 有效。

2 号 (ITX) 为 “0” 时互锁信号 (.ITn) 有效。

3 号 (DIT) 为 “0” 时互锁信号（土 MITn) 有效。

用上述参数选择的互锁信号，用 PMC 侧的诊断功能来确认下面对应的信号

O 互锁信号 (*IT) 被输入。

参数 G008.0 位的＊ IT 的值为 “O” ，说明互锁信号被输入。

＠各轴互锁信号(* ITn) 被输入。

参数

G0130 

#7 

#6 

#5 

#4 

#3 

*IT4 

#2 
• IT3 

#1 
• IT2 

#0 

* ITl 

信号＊ ITn(n 表示轴号）为 0 ，说明互锁信号被输入。

＠各轴方向互锁信号输入（土 MITn) 。

对 M 系统（铣床、加工中心）而言：

参数

G0132 

G0134 

#7 

#6 

#5 

#4 

#3 

#2 

#1 

+MIT4 

+MITI 

+MIT2 

-MIT4 

-MIT3 

-MIT2 

#0 

+MITl 

-MITl 

对 T 系统（车床）而言：

参数

X1004 

#7 

#6 

#5 
-MIT4 

#4 
-MITI 

#3 
-MIT2 

#2 
-MITl 

#1 

#0 

士 MITn 为 “1” 时，与轴方向对应的互锁信号被输入。

＊在 T 系统中，只有在手动运行时，土 MITn 有效。

c 项表示手动进给速度倍率为零。用 PMC 的诊断功能 (PMCT兀N) 确认信号。

参数

GOOlO 

GOOll 

#7 

* JV7 

#6 

勹V6

#5 

* JV5 

#4 

.JV4 

#3 

*JV3 

#2 

.JV2 

* JV15 

• JV14 

*JV13 

* JV12 

.JVl1 

*JVlO 

#1 

勹Vl

* JV9 

#0 

.WO 

.JV8 

当倍率为 0 ％时，上述地址的全部位均为 (1111 … 1111) 或 (0000 … 000) 。

172 

d 项表示 CNC 为复位状态。在此状态时，界面也显示前面＠项条款中的状态显示

"RESET” ，所以请参照前一条＠项所述操作。

(5) 屏幕显示了机床坐标值的变化但移动部件不动作。如果机床锁住信号 (MLK)

有效，机床移动部件不会动。可由参数 G0044 和 G0108 确认。

参数

G0044 

G0108 

#7 

#6 

#5 

#4 

#3 

#2 

#1 

玑K

#0 

MLK.4 

I 皿K3i l\1LK2i 

l\1LK1 

上述参数中， MLK 表示机床全轴锁住， MLKn 表示机床各相应轴锁住。各信号为

“1” 是，机床锁住信号有效。

3) 机床不能进行手动连续进给 (JOG)

机床不能运行手动连续进给 (JOG) 的操作时，从下述三点查找故障：从屏幕界面的位

置显示中确认机床是否能动作；从 CNC 状态显示中确认；用 CNC 诊断功能确认内部状

态。

(1) 确认界面上方式选择的状态显示。确认系统当前是否选择了 JOG 方式，若在状

态显示上显示 “JOG”方式，则为正常。若没有显示，则方式选择信号不对，用 PMC 侧诊断

功能 (PMCDGN) ，可查诊断号 G0043 ，进一步确认方式选择信号。

当选择 JOG 方式时，诊断 G0043 中： 0 号位的 MDl 信号和 2 号位的 M凶信号应为

“1" ，而 1 号位的 MD2 信号应为 “O” 。

(2) 没有输入选择进给轴方向信号。用 PMC 侧的诊断功能 (PMCDGN) ，查参数

GOlOO 和 G0102 ，确认选择进给轴方向信号是否输入。

#7 

#6 

#5 

#4 

参数

GOlOO 

G0102 

#3 

+ 14 

-J4 

#2 

+ 13 

- J3 

#1 

+ J2 

-J2 

#0 

+JI 

- J1 

这两个参数中，信号“土 Jn”是 “1” 时，进给轴方向选择被输入。

例：系统正常时，按操作面板上的[ +X] 键，信号＋ J1 显示 “1" 。此信号在检测出信号

的上升沿后为有效。所以在 JOG 方式选择以前，方向选择信号被输入时，不进行轴移动，

为使轴移动，可将此信号断开后再接通。

(3) 利用 CNC 自诊断功能 000-015 号来确认。可参照本节前述“手动、自动功能均

不能执行“中的第 2) 项所述方法处理。

(4) 手动进给速度（参数）不正确。可以查参数号 1423 ，采用 JOG 方式时，该参数内

置每转进给的进给速度。

(5) 选择手动每转进给（限于 T 系中使用）。在主轴运转时，进给轴与主轴同步运转

的功能中，是否使用本功能，由选择下面的参数来决定：

参数

1402 

#7 

#6 

#5 

#4 

JRV 

#3 

#2 

#1 

#0 

173 

信号 JRV 为 “0” 时，不进行手动每转进给； JRV 为 “1” 时，进行手动每转进给。
在 JRV 设定“1” 时，要按主轴同步旋转计算坐标轴的进给速度，所以应首先使主轴运
转，然后才能使坐标轴进给运动。当主轴旋转了，而坐标轴仍不移动时，应检查安装在主
轴侧的检测器（位置编码器）及位置编码器和 CNC 间的电缆是否断线、短路等。

4) 机床不能进行手轮运行
当机床发生不能进行手轮运行故障时，首先要确认在不能进行手轮操作的同时，是否
能进行 JOG 运行。如果 JOG 等手动运行也不能进行时，采取同前面叙述的“不能手动及
自动运行”或“不能 JOG 运行”相同的措施，排除故障。如果只是不能手轮运行时，可以通

过确认 CNC 状态显示，进一步查找原因。

(1) 判断系统是否处于手轮状态。在 CNC 界面上， CNC 状态显示在屏幕界面的下
方，当选择了手轮方式时，若显示 “HND” ，则方式选择正常。若不显示 “HND” ，则方式选
择信号输入不正确。利用 PMC 诊断功能 (PMCDGN) 。确认方式选择信号。手轮方式时

诊断号 0043 内数据应为： M区为 “l";MD2 为 “O";MDl 为 “O” 。

(2) 判断是否输入了手轮进给轴选择信号。利用 PMC 的诊断功能 (PMCDGN) 确认

G0018 和 G0019 信号。

如果选择了机床操作面板的手轮进给选择开关， G0018 和 G0019 中所置的信号见表

3-29 ，则为正常。

参数

#7 

#6 

#5 

#4 

#3 

#2 

#1 

G0018 

HS2D 

HS2C 

HS2B 

HS2A 

HSlD 

HSlC 

HSlB 

G0019 

MP2 

MPl 

Hs.3D 

HS3C 

HS3B 

#0 

HSlA 

HS3A 

表 3-29 G0018 和 G0019 信号状态

选择轴

HSnD 

HSnC 

HSnB 

HSnA 

无选择

第 1 轴

第 2 轴

第 3 轴

第 4 轴

。

。

。

。

。

。

。

。

。

1 

。

。

1 

1 

。

。

1 

。

1 

。

注： CD n 为手摇脉冲发生器 (MPG) 的号，最多可有 3 台手摇脉冲发生器的选择信号。

＠用 A~D4 位代码进行轴选择。

＠手轮进给倍率选择不正确。
(3) 手轮进给倍率选择不正确，也可能使机床不能动。用 PMC 的 PMCDGN 界面来
确认是否选择正确倍率信号。根据参数清单确认的相关参数，即下述参数O~ ＠，就可以

获得相关信息。

O 参数 G0019 内置进给倍率，其 M眨、 MPl 信号值的用途见表 3-30 。

174 

倍率

Xl 

XlO 

表 3-30
竺
o
-
0

G0019k 中 M眨、 MPl 信号用途

三 叩

一1
-
1

MPl 

。

1 

＠参数 7113 ：内置手动手轮进给倍率，即表 3-30 中的 m 值， m 为 1~127 。
＠参数 7114 ：内置手动手轮进给倍率，即表 3-30 中的 n 值， n 为 1~1000 。

I 二 I #71  #61  #51  #41  #31 

#2  1#1  1 二 I

HNGx:O ：手摇脉冲发生器的旋转方向和机械移动方向相同（顺时针旋转为移动正方

向）。

1 ：手摇脉冲发生器的旋转方向和机械移动方向相反（顺时针旋转为移动负方向）。
＠参数 7110 ：内置手摇脉冲发生器的使用台数。台数为 1~3 。
(4) 手摇脉冲发生器的确认。
0 故障是连接电缆不良（断线等）。调查连接电缆是否有异常断线、短路等。
＠手摇脉冲发生器不良。旋转手摇脉冲发生器时，有如图 3-43 所示信号输出。用
示波器测量手摇脉冲发生器背面的螺钉端子，能够检测出该信号，如果没有输出信号，则
要测量＋ 5V 电压。还要确认 ON 与 OFF 信号比例 HA/HB 的相位差。检测方法如图
3-43 所示。

正向旋转时

占

负向旋转时

HA _p巳二－三- +5V 

HB三尸：：

I 

I : I 

1/4 

1/4 （相位差）

HA: 手摇脉冲发生器 A 相信号
HB: 手摇脉冲发生器 B 相信号

图 3-43 检测手摇脉冲发生器

2.  FANUC Oi-A 系统的报警总览表
FSOi 可以在 CRT 上显示近千条报警信息，指示系统故障的原因。 FSOi 系统显示的
报警，根据引起故障的不同原因，大致可以分为表 3-31 所列的八大类，具体报警号对应
的详细报警内容见表 3-32 。

175 

序号

故障类别

表 3-31 报警分类表

1 

2 

3 

4 

6 

5 

6 

7 

8 

程序编制错误或操作不正确引起的报警

绝对编码器报警

绝对编码器报警

伺服故障引起的警报

有关超程的报警

控制系统部件或电机过热引起的警报

刚性攻丝报警

串行主轴报警

系统警报

PMC 报警

报警号

ALM000-253 

ALM5010-52578 

ALM  300-309 

ALM  350-351 

ALM 400-423 

ALM 500-507 

ALM700-704 

ALM740-742 

ALM749-764 

ALM 900-974 

1) 有关程序，操作的报警 (PIS 报警）

表 3-32 具体报警号对应的详细报警内容

号码

信息

内

容

000 

PLEASE TURN OFF POWER 

输入了要求切断电源的参数，应切断电源

001  TII PARITY ALARM 

TH 报警（输入了带有奇偶性错误的字符，应修改程序或纸带）

002  TV PARITY ALARM 

TV 报警（一个程序段内的字符数为奇数），只有在设定画面上的

TV 校验为 “1” 时，才产生报警

003 

TOO  MANY DIGITS 

输入了超过允许值的数据，按操作说明书的最大指令值，修改数据

004  ADDRESS  NOT FOUND 

程序段开头无地址，只输入了数值或符号，修改程序

005 

NO  DATIA AFTER ADDRESS 

其后没有紧随相应的数据，而输入了地址， EOB 代码，需修改程序

006 

ILLEGAL USE OF NEGATIVE SIGN 

符号”-"（负）输入错误（在不能使用“-”符号的地址后输入了该

符号，或输入了两个以上的“-"符号）。需修改程序

007 

ILLEGAL USE OF DECIMAL POINT 

小数点”.“输入错误（在不能使用“·"的地址后输入了小数点，或

输入了两个或两个以上的＂．＂）。需修改程序

, 

009 

ILLEGAL ADDRESS  INPUT 

在有意义的信息区输人了不可用的地址。修改程序

010 

IMPROPER G- CODE 

指定了一个不能用的 G 代码或针对某个没有提供的功能指定了f

某个 G 代码。需修改程序

011 

NO  FEEDRATE COMMANDED 

没有指定切削进给速度，或进给速度指令不当。需修改程序

OT OOMMAND G95(M series) 

没有螺纹切削爪1 步进给功能时指令了同步进给。修改程序

014 

ILLEGAL LEAD COMMANDED 

可变导程螺纹切削时，地址 K 指令的导程增、减量超过了最大指

(T series) 

令值，或导程值为负值。修改程序

TOO MANY AXES COMMANDED  (M 

series) 

015 

TOO MANY  AXES  COMMANDED  (T 

series) 

176 

指定的移动坐标轴数超过了联动轴数。修改程序

移动轴超过了联动轴数，或者在扭矩极限到达信号的跳步功能指

令 (G31) 中，和同一个程序段中无轴移动指令，或者指令了 2 个轴

以上的轴移动。请将同一程序段的轴移动指令设为 1 个轴

（续）

号码

信息

内

容

020  OVER TOLERANCE OF RADIUS 

在圆弧插补 (G02 或 G03) 中，圆弧始点半径值与圆弧终点半径值

的差超过了 3410 号参数的设定值。需修改程序

021 

ILLEGAL PLANE AXES  CDMMAND- 在圆弧插补中，指令了不在指定平面 (G17 、 G18 、 G19) 的轴。修改

ED 

程序

022  NO CIRCLE RADIUS 

',' 

在圆弧插补指令中，没指定圆弧半径 R 或圆弧的起始点到圆心

之间的距离的坐标值 I,J 或 K

023 

025 

027 

ILLEGAL RADIUS CDMMAND  (Tse-

ries) 

CANNOT COMMAND 印 IN G02/G03 

(M series) 

NO AXES COMMANDED IN G43/G44 

(M series) 

指定圆弧半径 R 时， R 为负值。修改程序

在圆弧插补中，用 H 一位数进给指令了页）（快速进给）。修改程序

在刀具长度补偿 C 中，在 G43/G44 的程序段，没有指定轴。在刀

具长度补偿 C 中，在没有取消补偿状态下，义对其他轴进行补偿。

修改程序

028 

ILLEGAL PLANE SELECT 

在平面选择指令中，在同一方向指定了两个或两个以上的坐标

轴。需修改程序

029 

ILLEGAL OFFSET VALUE  (M 淀ries) 用 H 代码选择的偏置量的值过大。修改程序

ILLEGAL OFFSET VALUE  (T series)  用 T 代码选择的偏置量的值过大。修改程序

ILLEGAL OFFSET  NUMMBER(M se- 用 D/H 代码指令的刀具半径补偿，刀具长度补偿的偏置号过大。

ries) 

030 

修改程序

ILLEGAL OFFSET  NUMMBER(T se-

ries) 

T 功能的刀具位置偏移量的偏置号过大。修改程序

031 

ILLEGAL POOMMAND N GIO 

032 

ILLEGAL OFFSET VALUE INGIO 

在程序输入偏置量 (GlO) 中，指定偏置量的 P 值太大，或者没有

指定 P 值。修改程序

偏置量程序输入 (GlO) 或用系统变量写偏置量时，指定的偏置量

过大。需修改程序

033 

034 

035 

036 

037 

NO SOLUTION ATCRC(Mseries) 

刀具半径补偿 C 的交点计算中，没有求到交点。修改程序

NO SOLUTION AT CRC(T series) 

刀具 R 补偿的交点计算中，没有求到交点。修改程序

NO CIRC  ALLOWED  IN  ST  UP /EXT  刀具半径补偿 C 中，在 G02/G03 方式进行起刀或取消刀补。修

BLK(M senes) 

改程序

NO  CIRC  ALLOWED  IN  STUP /EXT  刀尖 R 补偿中，在 G02/G03 方式进行起刀或取消刀补。修改程

BLK(T series) 

序

CAN  NOT  COMMANDED  G31 (T se-

ries) 

CAN  NOT COMMANDED  G31 (M se-

ries) 

刀尖 R 补偿方式中，指令了 G31 跳步切削。修改程序

刀具半径补偿方式中，指令了 G31 跳步切削。修改程序

CAN  NOT  CHANGE  PLANE  IN  CRC  刀具半径补偿 C 中，切换了补偿平面 (Gl7 /G18/G19) 。修改程

(M series) 

序

CAN  NITT  CHANGE  PLANE  IN  NRC 

(T series) 

刀尖 R 补偿中，切换了补偿平面 (Gl 7 /Gl8/G19) 。修改程序

177 

（续）

号码

信息

内

容

INTERFERENCE 

IN  CIRCULAR  在刀具半径补偿 C 中，圆弧的始点或终点与圆心一致，可能产生

BLOCK(M series) 

过切。修正程序

INTERFERENCE 

IN  CIRCULAR  在刀尖 R 补偿中，圆弧的始点或终点与圆心一致，可能产生过

BLOCK(T series) 

切。修改程序

INfERFERENCE IN G叩／G94BLOCK 某一固定循环 G90/G94 中用刀尖 R 补偿时有可能产生过切。修

(T series) 

改程序

INTERFERENCE  IN CRC(M series) 

助功能，暂停指令等不移动的程序段连续指令了 2 个以上。修改

刀具半径补偿 C 中，可能产生过切。在刀具半径补偿方式中，辅

程序

INTERFERENCE IN NRC(T series) 

刀尖 R 补偿中，可能产生过切。在刀尖 R 补偿方式中，连续指令

了 2 个以上辅助功能、暂停等不移动的程序段。修改程序

G4S/G4S  Nar ALLOWED  IN CRC(M  在刀具半径补偿方式中，指令了刀具位置补偿 (G45-G48) 。修

series) 

改程序

G27 - G30  Nar ALLOWED  IN F1XED 

CYC(M series) 

ILLEGAL REFERENCE 

RETURNOMMAND 

CHFICNRN切｀ AL切WEDINTHRD

BLK  (M series) 

在同定循环方式中，指令了 G27-G30 。修改程序

在返回第 2 、 3 、 4 参考点指令中，指令了非 P2 、 P3 、 P4 指令。修改

程序

在螺纹切削程序段，指令了任意角度的倒角、拐角 R 。修改程序

MISSING  MOVE  AFIER  CHF /CNR  任意角度的倒角、拐角 R 程序段的下个程序段的移动或移动量

(M series) 

不合适。修改程序

CODE  IS NOf GOl  AFTER CHF/CNR  在指令了任意角度倒角、拐角 R 的程序段的下一个程序段，不是

(M series) 

GOl 、 G02 、 G03 的程序段。修改程序

TOO  MANY  ADDR蕊 0M

(M series) 

在没有任意角度倒角、拐角 R 功能的系统中，指令了逗号”,”或

者在任意角度倒角拐角 R 指令中，逗点”,”之后，不是 R 、 C 指令。

修改程序

TOOM应 ADDRES S COMMANDS 

(T series) 

在倒角、拐角 R 指令中，指令了 2 个以上 I 、 K,R。或者在直接输

入图纸尺寸中逗点”,”之后，不是 C 或 R ；或者用非指令逗点”,“
的方法 (PRM3405=/=14 = 1) 指令了逗点”,＂。修改程序

MIS  SING  MOVE  VALUE  IN  CHF I  在任意角度倒角、拐角 R 的程序段中指定的移动量比倒角、拐角

CNR  (M series) 

R 的量还小。修改程序

NO  END  POINT &ANGLE  IN  CHF I  直接输入图纸尺寸时，只有角度指定 (A…)的程序段的下个程序
CNR(T series) 

段，终点和角度都没有指定。修改程序

NO  SJLUTION OF BLOCK END(T se-

ries) 

直接输入图纸尺寸时，不能正确计算出程序段终点。修改程序

END POINT NOf 印UND(M series)  任意角度倒角、拐角 R 中，指令了选择平面以外的轴。修改程序

ENDPOINTN切下OUNT(T series) 

直接输人图纸尺寸中，找不到程序段的终点。修改程序

038 

040 

041 

042 

044 

046 

050 

051 

052 

053 

055 

056 

057 

058 

178 

号码

信息

内

容

059 

PROGRAM NUMBER Naf FOUND  编辑中的程序号。确认程序号和外部信号。或者中止后台编辑

在外部程序号检索中，没有发现指定的程序号，或者检索了后台

操作

060  EQUENCE NUMBER NO FOUND 

指定的顺序号在顺序号搜索中未找到，确认顺序号

（续）

061 

062 

063 

064 

065 

066 

067 

069 

ADDR每 P/Q NOT  FDUND  IN  G70  在 G70 、 G71 、 G72 、 G73 指令的程序段中，没指令地址 P 或 Q。修

- G73(T series) 

改程序

OG71 、 G72 中，切削深度为 0 或负。

＠在 G73 中，重复次数为 0 或负。

＠在 G74,G75 中心讼K 为负。

ILLEGAL CDMMAND IN G7  1.G76(T  ＠在 G74,G75 中心丛为 0 ，但 U 、W 不为 0 。

series) 

＠在 G74,G75 中，决定了退刀方向，但凶指定了负值。

＠在 G76 中，螺纹高度及第 1 次切削深度指定了 0 或负值。

＠在 G76 中，最小切削深度比螺纹高度值还大。

＠在 G76 中，指定了不可使用的刀尖角度。修改程序

在 G70 、G71 、 G72 、 G73 中，没有找到 P 指定的顺序号。修改程序

在复合形固定循环 (G71 、 G72) 中，指定了非单调的加工形状

SEQUENCE  NUMBER  NOf  FOUND 

(T series) 

SHAPE 

PROGRAM 

NOT 

MONaroNOUSL Y(T series) 

ILLEGAL  CDMMAND  IN  G71  - G73 

(T series) 

O 在 G71 、G72 、 G73 中，用 P 指定顺序号的程序段中，没有指令

GOO 或 GOl 。＠在 G71 、 G72 中，在 P 指定的程序段中指令了

z(W)(G71) ，或者指令了 X(U)(G72) 。修改程序

IMPROPER G CODE  IN G71- G73(T  在 G71 、 G72 、 G73 用 P 指定的程序段间，指令了不允许的 G 代码。

series) 

修正程序

CAN  Nar ERROR  IN  MDI  MODE (T 

series) 

在 MDI 方式，指令了含有 P 、 Q 的 G70 、 G71 、 G72 、 G73 。修改程序

FORMAT ERROR  IN  G70. G73 (T se-

G70 、G71 、 G72 、 G73 的 P 、 Q 指令的程序段的最后移动指令以倒

ries) 

角或拐角 R 结束。修改程序

070  NO  PROGRAM SPACE  IN MEMOTW 

存储器的存储容量不够。删除各种不必要的程序并再执行一次

程登录

071  DATA NOT FOUND 

没有发现检索的地址数据。或者在程序号检索中，没有找到指定

的程序号。再次确认要检索的数据

\ 

072  TOO MANY PROGRAMS 

登录的程序数超过 200 个。删除不要的程序，再次登录

073 

PROGRAM  NUMBER  ALREADY  IN  要登录的程序号与已登录的程序号相同。变更雇日；号或删除旧
USE 
的程序号后再次登录

! 
| 

I 

074 

ILLEGAL PRffiRAM NUMBER 

程序号为 1-9999 以外的数字

075 

PROTECT 

登录了被保护的程序号

076  ADDRE泌 PNar DEFINED 

在包括 M98 、 G65 或 G66 指令的程序中，没有指定地址 P （程序

号）。对程序进行修正

179 

号码

077 

信息

SUB PROGRAM NESTING ERROR 

078  NUMBER NOTFOUND 

079 

PROGRAM VERIFY ERROR 

G37  ARRIVAL  SIGNAL  NOT  AS-
SERTED(M series) 

内

容

（续）

调用 5 重子程序。修改程序
M98 、 M99 、 G65 或 G66 的程序段中的地址 P 指定的程序号或顺
序号未找到。或者 GOro 语旬指定的顺序号未找到。或调用了
正在被后台编辑的程序。修改程序或中止后台编辑操作

在存储器与程序校对中，存储器中的某个程序与从外部 l/0 设备
中读入的不一致。检查存储器中的程序以及外部设备中的程序

在刀具长度自动测量功能 (G37) 中，在参数 6254 设定的区域内，
测量位置到达信号（ XAE, YAE,ZAE) 没有变为 ON 。设定或操作

错误

080 

081 

082 

083 

ARRIVAL  SIGNAL  NOT  A怒ERTED 自动刀具补偿功能中 (G36,G37) ，在参数 6254,6255 设定的区域内
(T series) 

测量位置到达信号（ XAE,ZAE) 没有变为 ON。设定或操作错误

O旰汕T NUMBER  NOT  FOUND N  在刀长自动测最功能中，没指令 H 代码，而指令了刀长自动测量
G37(M series) 

(G37) 。修改程序

OFFSET  NUMBER  NITT  FOUND  IN  在自动刀具补偿功能中，没有指令 T 代码，却指令了 G36 、 G37 自
动刀具补偿。修改程序
G37(T series) 

H.OODE  NOT ALLOWED  IN  G37(M  刀长自动测量功能中，在同一程序段指令了 H 代码和刀长自动测
series) 

量 (G37) 修改程序

T.OODE  N切、 AL印WED IN  G37(T 

series) 

程序段指令了 T 代码和自动刀具补偿 (G36,G37) 。修改程序

ILLEGAL  AXIS  CDMMAND  IN  G37  刀长自动测量功能 (G37) 中，轴指定错，或者移动指令是增量指
(M series) 

令。修改程序

ILLEG AL  AXIS  OOMMAND  IN  G37  自动刀具补偿功能 (G36,G37) 中，轴指定错，或者移动指令是增
(T series) 

量指令。修改程序

用阅读机笘吼机接口进行数据读入时，出现溢出错误，奇偶错误
或成帧错误。可能是输入的数据的位数不吻合，或波特率的设

定、设备的规格号不对
用阅读机 l'fif- 孔机接口进行数据输入缮江j 时， I/0 设备的动作准
备信号、 (DR) 断开。有可能是 1/0 设备电源没有接通，电缆断线

或印制电路板出故障
用阅读机笘吼机接 121 进行数据读入时，虽然指定了读入停止，
但超过了 10 个字符后输入仍未停止。 I/0 设备或印制电路板出

故障
因为起始点离参考点太近，或速度过低，而不能正常进行参考点
返回。把起始点移到离参考点足够远的距离后，再进行参考点返
回操作。或提高返回参考点的速度，再进行参考点返同

自动运行暂停时，不能进行手动返回参考点

085 

(X)MMUNICATION ERROR 

086  DR SIGNAL OFF 

087  BUFFER OVERFLOW 

REFERENCERETU  RN 
PLETE 

IN 

ffiM-

REFERENCE  RETURN 
PLETE 

IN  CDM-

090 

091 

092 

180 

AXES  NOT  ON  THE  REFERENCE  在返回参考点检测 (G27) 中，被指定的轴没有返回到参考点。需
POINT 

确定程序内容

（续）

号码

094 

095 

096 

097 

098 

099 

信息

内

容

PTYPE  NOT  AL印WED ((X)()RD  程序再启动中，不能指令 P 型（自动运行中断后。又进行了坐标

CHG) 

系设定），按照操作说明书，重新正确地操作

PTYPE  NOT  ALWWED (EXT  OFS  程序再启动中，不能指令 P 型（自动运行中断后，变更了外部工件

CHG) 

偏置董），按照操作说明，重新正确地操作

PTYPE  NOT  AL印WED(WRK OFS  程序再启动中，不能指令 P 型（自动运行中断后，变更了工件偏置

CHG) 

量），按照操作说明书，重新正确操作

PTYPE NOT  ALLOWED (AU仅） EX- 程序再启动中不能指令 P 型（接通电源后，紧急停止后，或 PIS 报

EC) 

警 094-097 的复位后，一次也没进行自动运行），请进行自动运行

G28  FOUND  IN  SEQUENCE  RE- 电源接通后，紧急停止后或一次都没有返回参考点，指令程序再

TURN 

启动，检索中发现了 G28 。进行返回参考点

MDI  EXEC  NOT  ALLOWED  AFT  在程序再启动中，检索结束后进行轴移动之前，用 MDI 进行了移

SEARCH 

动指令。应先进行轴移动，不能介入 MDI 运行

100 

PARAMETER WRlTE ENABLE 

参数设定画而， PWE( 参数可写入）被定为 “1" 。请设为 “0” ，再使

系统复位

」;＝ Ii 程序编辑改写存储器时，电源变为 OFF 了。当此报警发

101 

PLEASE CLEAR MEMORY 

生时，同时按下 [PROG] 和 [RESET] 键，只删除编辑中的程序，报

109 

FORMAT ERROR IN GOS(M series) 

GO8 后而的 P 值不是 0 、 1 ，或没有指令

警也被删除。请再次登录编辑中的程序

110  DATA OVERFLOW 

固定小数点显示的数据的绝对值超过了允许范围。修正程序

111  CALCULATED DATA OVERFLOW 

宏程序功能的宏程序命令的运算结果超出允许范围 (-1047~

10-29.o'10-29 - 1047) 。需修改程序

112  DIVIDED BY  ZERO 

除数为 “0” （包括 tan90') 。需修改程序

113 

IMPROPER COMMAND 

指定了宏程序不能使用的功能。修正程序

114 

FORMAT ERROR IN MACRO 

＜公式＞以外的格式中有误。修正程序

115 

ILLEGAL VARIABLE  NVMBER 

用户宏程序中指定了没有定义的值作为变量号。修正程序

116  WRITE PROTECTED VARIABLE 

赋值语句的左侧为禁止输入的变量。修正程序

118 

PARENTHESIS NE汀ING ERROR 

括号的嵌套数超过了上限值 (5 重）。修正程序

119 

ILLEG AL ARGUMENT 

SQRT 的自变量为负值。或 BCD 的自变量为负值， BIN 自变量的

各位为 0~9 以外的值，修正程序

122 

FOUR FOLD  MACRO  MODALCALL  宏程序模态调出，指定为 4 重。修正程序

123 

CAN  NOT  USE  MACRO  COMMAND 

INDNC 

在 DNC 运转中，使用宏程序控制指令。修正程序

124  MIS SING END STATEMENT 

00.END 没有 1:1 对应。修正程序

125  FOR邓TERROR IN MACRO 

＜公式＞的格式中有误。修正程序

126 

ILLEGAL LOO PN OMBER 

DOn 中，未满足 l¾n¾3 。修正程序

127 

NC  MACRO  STATEMENT  IN  SA邓

BLOCK 

NC 指令与宏程序指令混用。修正程序

181 

（续）

号码

128 

信息

内

容

ILLEGAL MACRO SEQUENCE NUM- 在转移命令中，转移点的顺序号不是 0-9999 。或者没有找到转
移点的顺序号。修正程序
BER 

129 

ILLEGAL ARGUMENT ADDRESS 

指令了＜自变量＞中不允许的地址。修正程序

130 

ILLEGAL AXIS OPERATION 

PMC 对 CNC 控制轴给出了轴控制指令，反之， CNC 对 PMC 控制

的轴给出了轴控制指令。修改程序

131 

TOO  M沁-N EXTERNAL  ALARM  外部报警信息中，发生了 5 个以上的报警。从 PMC 梯形图中找

MESSAGES 

原因

132  ALARMNU郧ERNOTFDUND

外部报警信息全清时，没有对应的报警号。检查 PMC 梯形图

133 

135 

ILLEGAL  DATA  IN  EXT  ALARM  外部报警信息或外部操作信息中，小分区数据有错误。检查

MSG 

PMC 梯形图

ILLEGAL ANGLE  CDMMAND  (M se- 分度工作台定位角度指令了非最小角度的整数倍的值。修改程

ries) 

序

SPINDLE  ORIEN  ATION  PLEASE (T 

series) 

主轴一次也没有定向，就进行了主轴分度。进行主轴定向

Ill.EGAL AXIS CDMMAND  (M series)  在分度工作台分度功能中，与 B 轴同时指令了其他轴。修改程序

136  C人－＆ CODE&MOVE CMD 

IN  与主轴分度地址 C 、 H 同一程序段指令了其他轴的移动指令。修

SAME BLK(T series) 

改程序

M  - CODE&MOVE  CMD  IN  SAME  在有关主轴分度的 M 代码的程序段指令了其他轴移动指令。修

BLK 

改程序

CAN  NOT CHANGE  PMC  CDN1ROL 

AXIS 

CAN  NOT OOMMAND GS! CRC(M se-

ries) 

142 

ILLEGAL SCALE RA1E(M series) 

SCALED  MOTION  DATA  OVER-

FLOW(M series) 

ILLEGAL PLANE  SELECTED  (M se-

ries) 

PMC 轴控制中，指令了轴选择。修改程序

刀具补偿方式中，指令了 GSl （比例缩放有效）。修改程序

指令的比例缩放倍率值在 1-999999 之外。请修正比例缩放倍

率值 (G51 Pp…；或参数 5411,5421)

比例缩放的结果、移动量、坐标值、圆弧半径等超过了最大指令

值。请参照操作说明书附录［指令范围一览表］修改程序或比例

缩放倍率

坐标旋转平面与圆弧或刀具补偿 C 平面必须一致。修改程序

ILLEGAL(X)NDITION S  IN  POLAR  极坐标插补开始或取消的条件不正确， O 在非 G40 方式指令了
O)OR酗ATE IN  TERPOLATION (T  G12.l/G13.1 。＠平面选择错（参数 5460,5461 设定错）。修改

series) 

程序或参数

146 

IMPROPER G CODE(T series) 

在极坐标插补方式，使用了不能指令的 G 代码。按操作说明书的

极坐标插补一节，修改程序

148 

ILLEGAL SETTING DATA(M series) 

自动拐角倍率的减速比超过判定了角度允许设定值的范围。修

改参数 1710-1714 的设定值

182 

137 

139 

141 

143 

144 

145 

（续）

号码

信息

内

容

149 

FORMAT ERROR IN GIOL3 

在扩展刀具寿命管理的寿命记数器的设定中，指令了 Ql 心2 、 Pl 、

P2 以外形式

150 

151 

152 

ILLEGAL TOOL  GROUPNUMGER 

刀具组号超出允许的最大值。修改程序

TIX)LGROUPNUMBERNOTFOUND 

在加 T 程序中，没有设定指定刀具的组号。修改程序或参数设定值

NO  SPACE FOR TOOL  ENTRY 

1 组内的刀具数超过了可以登录的最大值。修改刀具数的设定值

153  T.OODE NOT FDUND 

在刀具寿命数据登录时，在应指定 T 代码的程序段没有指定 T 代

码。修改程序

154 

NOf USING  TOOL  IN  LIFE  GROUP 

(M series) 

在没有指令刀具组时，却指令了 H99 或 D99 。修改程序

ILLEGAL T  - GODE  IN  M06  (M  se- 在加工程序中， M06 程序段的 T 代码与现在使用的组不对应。修

ries) 

155 

改程序

ILLEGAL  T  - GODE  IN  M06  (T se- 加工程序中指令了 TAA88 ，而组号AA 与使用中刀具所属组号不

ries) 

一致，修改程序

156 

P/LCOMMAND NOT FOUND 

在设定刀具组的程序的开头时，没有指令 P/L。修改程序

157 

TOO  MANY TOOL  GROUPS 

设定的刀具组数超过 J ，允许的最大值（参照参数 6800#0 和＃ 1)

修改程序

158 

ILLEGAL TOOL LIFE DATA 

设定的寿命值太大。修改设定值

159 

175 

176 

TOOL  DATA  SETTING 

INOOM-

PLETE 

在执行设定程序时，电源断了。请再次设定

ILLEGAL  G  1  07  OOMMAND (T  se- 圆柱插补开始或解除的条件不正确。在圆柱插补方式，请如下指

ries) 

令 [G07.1 回转轴名称 圆柱半径 j]

IMPROPER  G. CODE  IN  Gl07 (T  se- 插补方式中不可用 O 定位 (G28,G81-G89 等，含作出的快速进

ries) 

给循环）；＠坐标设定 (G50,G52) ；＠坐标系的选择 (G53,G54-

圆柱插补方式中，指令了不能指令的 G 代码。下述 G 代码圆柱

190 

ILLEGAL AXIS SELECT(M series) 

194 

SPINDLE  COMMAND  IN  SYNCHRO 

-MODE 

G59)修改程序

恒定线速度切削控制中，轴指定错（参照参数 3770 的设定），指定

的 P 轴超出指定范围。修改程序

串行主轴同步控制方式中，指令了轮廓控制方式或者主轴定位

(Cs 轴控制）和刚性攻丝方式的指令。修改程序以便事先介除同

步控制方式

串行主轴控制中，切换为轮廓控制方式或 Cs 轴控制和刚性攻丝

方式，和主轴控制方式（主轴转速控制）时，不能正常完成（对千

195  MODE CHAN GE ERROR 

NC 来的切换指令，有关主轴控制单元切换的响应发生了异常。

本报警不是操作错。此种状态若继续运行是危险的，故作为 PIS

报警）

197 

C.AXIS(X)MMANDED  IN  SPINDLE  ON 信号 (DGN = G027. 71 为 OFF 时，程序指令了沿 Cs 轴的移
MODE 

动。从 PMC 梯形图查找 CON 信号不接通的原因

183 

（续）

号码

信息

内

容

199  MACROWORDU邓EFINED

使用了未定义的宏语句。修改用用用户宏程序

200 

ILLEGALS OODE OOMMAND 

刚性攻丝中的 S 值超出允许范围，或没指令。修改程序

201 

FEEDRATE  N俏、 FOUND IN  RIGID 

TAP 

刚性攻丝中，没有指令 F。修改程序

202 

POSITION LSI  OV颐LOW

刚性攻丝中主轴分配值过大（系统错）

203  PR妇. M MISS AT  RIGID TAPPING  刚性攻丝中 M 代码 (M29) 或 S 指令位置不对。修改程序

204 

ILLEGAL AXIS OPERATION 

205 

RIGID MODE DI SIGNAL OFF 

刚性攻丝中在刚性攻丝 M 代码 (M29) 和 M 系的 G84 或 G74(T

系的 G84 或 G88) 的程序段问，指令了轴移动。修改程序

在刚性攻丝中，指令了 M 代码 (M29) ，但当执行 M 系的 G84 或

G74(T 系的 G84 或 G88) 的程序段时，刚性方式的 DI 信号 (DGN

G061.0) 没有成为 ON 状态，从 PMC 梯形图查 DI 信号不为 ON

的原因

206 

CAN  NOT  CHANGE  PLANE (RIGID 

TAP)(M series) 

210  CAN NOT COMAND M198/M199 

刚性攻丝方式中，指令了平面切换。修改程序

在程序运行中，执行了 M198 、 M199 。或者在 DNC 运行中执行了

M198 。修改程序

211  G3  I(HIGH)NITT ALLOW订） IN G99  选择了高速跳步时，在每转指令中，指令了 G31 。修改程序

212 

213 

214 

217 

218 

219 

220 

221 

ILLEGAL PLANE SELECT(M series)  在含有附加轴的平面中，指令了任意角度倒角、拐角 R 。修改程序

ILLEGAL PLANE SELECT(T series)  在 z-x 平面以外指令了图纸尺寸直接输人。修改程序

ILLEGAL  OOMMAND  IN  SYNCHRO 

-MODE 

在同步（简易同步控制）运行中，发生以下异常。

O 对于从动轴。在程序中指令了移动。

＠对于从动轴指令了 JOG 进给勹三轮进给／增量进给。

＠电源接通后不进行手动返回参考点就指令自动返回参考点。

＠主动轴和从动轴的位置偏差量超过参数 (N::,.8313) 中的设定值

ILLEGAL COMMAND  IN SYNCHR -

MODE 

在同步控制中，执行了坐标系设定或位移型刀具补偿。修改程序

DUPLICATE G51.2(00MMANDS) (T  G51.2/G251 （多边形）方式中，再一次指令了 G51.2/G251 ，修改

series) 

程序

NITT  FDUND  P/Q  COMMANDIN  在 G51.2/G251 的程序段中，设有指令 PIQ ，或指令值在允许范围

G251 (T series) 

之外，修改程序

COMMAND  G250/G25  1  INDEPEN-

DENTL Y(T series) 

G51. 2/G251, GSO. 2/G250 与其他指令同在一程序段。修改程序

ILLEGAL OOMMAND  IN SYNCHR - 同步运行中 NC 程序或 PMC 轴控制接口给同步轴指定了移动指

MODE(T series) 

令。修改程序或检查 PMC 梯形图

ILLEGAL CDMMAND  IN SYNCHR -

MODE(T series) 

同时进行多边形加工同步运行和 Cs 轴控制。修改程序

224  RETURN 仅） REFERENCE POINT 

自动运行开始以前，没有返回参考点。（只在参数 1005 # 0 为 0

时）请进行返回参考点的操作

184 

号码

信息

内

容

（续）

231 

ILLEGAL FORMAT IN GlO  OR LSO 

233  DEVICE BUSY 

239  BP/SALARM 

240  BP/SALARM 

在用程序输入参数时，指令格式有以下错误：

O没有输入地址 N 或 R; ＠输入了不存在的参数号；＠轴号过大；

＠有轴型参数但没有指令轴号；＠没有轴型参数，但有指令了轴

号；＠修改程序

当要使用某一与 RS-232C 接口连接设备时，其他的用户却正在

使用它

用控制外部 I/0 单元功能，正进行穿孔时，进行了后台编辑操作

MDI 操作时，进行了后台编辑

在扭矩极限到达信号的跳步功能中，扭矩极限到达信号来以来

244 

PIS ALARM(T series) 

前，在一次分配中，尚存的误差脉冲积存到了 (32767) 。请重新改

变变轴的进给速度和扭矩极限值等

245 

T  - ffiDE  NOT  ALOWEE  IN  THIS  在 T 代码的程序段中，指令了不允许指令的 G 代码 (GSO,GlO,

BLOCK(T series) 

G04) 

253 

GOS  IS  NOT AVAILABLE  (M series) 

在予读控制方式中 (G08PI) ，指令了高速远程控制的二进制输入

运行 GO5

5010  END OF RECORD 

指定了程序结束 EOR”%”,I/0 设备指定错，或修改程序

5014  1RACE 戊趴灯 rou心 M series) 

因没有轨迹数据，不能运行

5018 

POLYGON  AXIS  SPPED  ERROR  (T  G51.2 方式中，主轴或多边形同步轴的速度超过了限制值或大

series) 

小，不能维持指令值的转速比

5020  PARAMETER OF  RE寸ART ERROR  程序再启动的参数设定错误

5059  RADIUS IS OUT OF R心GE(T series)  圆弧插补中，用 I 、J 、 K 指令圆弧中心时，半径值超过了 9 位数

5073  NO  DECIMAL POINT 

在带小数点的指令中，应该指令小数点的地址上没有输入小数点

5074  ADDRESS  DUPLICATION ERROR 

在同一个程序段内，同一个地址存在 2 个以上，或同一组的 G 代

码指令了 2 个以上 I 、 K,R。有关程序唱团书报警 (PIS 报警）

5110 

5111 

5112 

5113 

5114 

5156 

IMPROPER  G.CODE  (G05.1  GI  在预读控制（预读多个程序段）方式中，指令了不能指令的 G 代

MODE)(M series) 

码。预读控制（预读多个程序段）方式中，对分度工作台给了指令

IMPROPER  MODAL  G 

- CDDE  预读控制（预读多个程序段）方式中，指令了不能使用的模态 G 代

(GOS.1  Gl)(M series) 

码

GOS  CAN  NOT  BE  OOMM:  ANDED 

(G05.1  Gl)(M series) 

预读控制（预读多个程序段）方式中，指令了预读控制的指令

CAN  NITT  ERROR  IN  MDI  MODE  在 MDI 方式指令了预读控制（预读多个程序段）方式的指令

(GOS.1  Gl)(M series) 

(GOS.1) 

NITT SID PPOSITION (G05.1  QI) (M 

senes) 

手动介入后再启动时，坐标不能返回到停止时的位置

ILLEGAL  AXIS  OPERATION  (M  se-

ries) 

在预读控制方式中（预读多个程序段），控制轴选择信号 (PMC 轴

控制）变化了。在预读控制方式中（预读多个程序段），简易同步

轴选择信号变化了

185 

（续）

号码

信息

内

容

5157  PARAMETER ZERO(M series) 

5195 

DIRECTION  CAN  NOT  BE  JUDGED 
(T series) 

最大切削进给速度的参数 (No.1422 或 1432) 设定值为 0 。插补

前加减速的参数 (No.1774 或 No.1771) 设定值为 0 。请设定参数

直接输入刀具补偿测定值 B 功能中，接触式传感器接点 1 输入的

脉冲方向不固定。此时为下述的任一种状态。偏置写入方式时，

停止了。 O伺服关断中。＠方向变化。＠2 轴同时移动中

5257 

G41 心2 NOf  AL切WED IN  MDI  在 MDI 方式中，指令了 G41/G42 （刀具半径补偿 C:M 系，刀尖 R

MODE 

补偿： T 系）由参数 No.5008#4 来设定）

2) 后台编辑报警 (BP/S 报警）（表 3-33)

号码

信息

?.?.? . 

BPISa1ann 

140 

BP/S alarm 

表 3-33 后台编辑报警

内

容

在通常的程序编辑中，发生了与 PIS 报警相同号码的 BP/S 报警 (P/S070,071,072,

073,074,085-087 等）修改程序

某一程序已被前台选择，却在后台对它进行选择或删除操作。

请正确运用后台编辑

注意：后台编辑发生的报警显示在其画面的左下方键输入行上，而不是通常的报警画面上，可由任－ MDI 键操作

进行介除

3) 绝对脉冲编码器 (APC) 的报警（表 3-34)

表 3-34 绝对脉冲编码器的报警

信息
号码
300  Nth - axis origin return 

在 11 轴 (1 轴～ 4 轴），进行手动返回参考点

内

容

301 

'APC alann:nth- axis communication 

302  A氏 alann: nth- axis  over time 

303 

A沁 alarm: nth- axis  frami屯

304  A沁 alann:nth- axis parity 

n 轴 (1 轴～ 4 轴） APC 通信错。（数据传送异常）。 APC、电缆或伺

服接口模块不良

n 轴 (1 轴～ 4 轴）超时错（数据传送异常） O APC、电缆或伺服接口

模块不良

n 轴 (1 轴～ 4 轴） APC 成帧错（数据传送异常）。 APC 、电缆或伺服

接口模块不良

n 轴 (1 轴～ 4 轴） APC 奇偶错（数据传送异常）。 APC 、电缆或伺服

接口模块不良

305  呕 alarm: nth - axis pulse error 

n 轴 (1 轴～ 4 轴） APC 脉冲错报警 (APC 报警）。 APC 或电缆不良

306 

A沁 alarm: nth - axis attery volatge 0 

307  A沁 alarm: nth - axis  battery low  1 

n 轴 (1 轴～ 4 轴） APC 用电池电压已降低到不能保持数据的程度

(APC 报警）。电池或电缆不良

n 轴 (1 轴～ 4 轴） APC 用电池电压降低到要更换电池的程度 (APC

报警）。请更换电池

308  A沁 alann:nth-axis battery low 2 

n 轴 (1 轴～ 4 轴） APC 用电池电压已降低到必须更换电池的程度

（含电源 OFF 时）（ APC 报警）。更换电池

309 

A氏 ALARM:n AX.IS  ZRN  IMPOS- 电机没转 1 转以上就返回参考点。

SIBL 

使电机转 1 转以上，关电源，再接通后，驱回参考点

186 

4) 串行脉冲编码器 (SPC) 的报警（表 3-35)

表 3-35 串行脉冲编码器的报警

信息

内

容

SPC  ALARM:  n  AXIS  PULSE 
OODER 

SPC ALARM: n AXIS  COMMUN  I-
CATION 

n 轴 (1 轴～ 4 轴）串行脉冲编码器故障。详细内容参看诊断号

No.202 和 No.204

n 轴 (1 轴～ 4 轴）串行脉冲编码器通信错误（数据传送错误）。

详细内容参看诊断号 No.203

号码

350 

351 

5) 伺服报警的详细内容

有关放大器报警 (N.414) 的详细内容在诊断显示的 N.200.N.201,N.204 上显示。

#0 

OFA 

印
一
酗

诊断号

I 

0202 

#7 

#6 
1 。VL I  LV 

#5 

#4 

I  OVC 

I  HCA 

#3 

#2 
1 印A I  DCA 

OVL ：发生过载报警（详细内容显示在诊断显示 No.201 上）。

LV ：伺服放大器电压不足的报警。确认伺服放大器的 LED 。

OVC ：在数字伺服内部，检查出过电流报警。

HCA ：检测出伺服放大器电流异常报警。确认伺服放大器的 LED 。

HVA ：检测出伺服放大器过电压报警。确认伺服放大器的 LED 。

DCA ：伺服放大器再生放电电路报警。确认伺服放大器的 LED。

FBA ：发生了断线报警（详细内容显示在诊断显示的 No.201 上）。

OFA ：数字伺服内部发生了溢出报警。

诊断号

|  0202 

#7 

#6 

#5 

I  ALD 

| 

#3 

#4 

I  EXP 

2 # 

1 # 

', 

, 

#0 

当诊断照示号 No.200 的 OVL 为 l 时：

ALD:l ：电机过热。

0 ：伺服放大器过热。

诊断显示 No.200 的 FBA 为 1 时的报警内容见表 3-36 。

表 3-36 诊断显示 No.200 的 FBA 为 1 时的报警内容

ALD 

EXP 

报警内容

1 

1 

。

。

1 

。

内装编码器断线（硬件）

分离式内装编码器断线（硬件）

脉冲编码器断线（软件）

诊断号

0202 

#7 

#6 

OFS 

#5 

#4 

MCC 

I  LDA 

#3 

PMS 

#2 

#1 

#0 

187 

OFS ：数字伺服电流值的 AID 转换异常。

MCC ：伺服电磁接触器的接点熔断。

LDA:LED 表明串行编码器异常。

PMS ：由千反馈电缆异常导致反馈脉冲错误。

有关串行脉冲编码器报警的详细内容，显示在诊断号 N.202.N.203 上。

诊断号

口

#7 

#6 

#5 

#4 

#3 

#2 

I  CSA  I  BLAI  PHAI  RCA 

IBZA 

#1 

CKA 

#0 

SPH 

CSA ：串行编码器异常。更换脉冲编码器。

BLA ：电池电压不足。更换电池。此位与 No.350 报警无关。

PHA：串行编码器或反馈电缆异常。更换电缆或编码器。

RCA ：串行编码器异常。更换编码器。

BZA ：初次给脉冲编码器供电。检查电池的连接，断开电源，然后再次接通电源，返回

参考点。此报警与 No.350 无关。

CKA ：串行编码器异常。更换编码器。

SPH ：串行编码器或反馈电缆异常。更换串行编码器或电缆。

诊断号

I  0203 

# 7 

#6 

#5 

#4 

#3 

#2 

#1 

#0 

I  DTE  I  CRC 

I 郘 I PRM| 

DTE ：串行编码器通信异常。其原因是编码器、反馈电缆或反馈接收电路异常。

CRC ：串行编码器通信异常。其原因是编码器、反馈电缆或反馈接收电路异常。

STB ：串行编码器通信异常。其原因是编码器、反馈电缆或反馈接收电路异常。

上述三个报警位的处理可通过更换编码器、反馈电缆或伺服控制模块之一排除。

PRM ：因参数无效而报警。此时也显示伺服参数错误报警 (No.417) 。

伺服报警的内容见表 3-37 。

表 3-37 伺服报警的内容

信息

内

容

SERVO ALARM:n -TH AXIS  OVER-

n 轴 (1 轴～ 4 轴）出现过载信号。详细内容请参照诊断号 200 、

LOAD 

201 

号码

400 

401 

SERVO AL如： n-lHAXISV即YOFF

n 轴 (1 轴～ 4 轴）的伺服放大器的准备好信号 DRDY 为 OFF

404 

405 

SERVO  ALARM: n - TH AXIS  VRDY 

ON 

轴卡的准备好信号 (MCON) 为 OFF，而伺服放大器的准备好信号

(DROY) 为 ON。或者电源接通时 MCON 为 OFF ，但 DRDY 仍是

ON。请确认伺服接口模块和伺服放大器的连接

SERVO  ALARM:  (ZERO  POINT  RE- 位置控制系统异常。由于返回参考点时 NC 内部，或伺服系统异
TURNFAVLT) 

常，可能不能正确返回参考点。重新用手动返回参考点

407 

SERVO  ALARM:EXCE茨 ERROR

的差超过了参数 (No.8314) 上设定的值。＠同步时的最大补偿量

在简易同步控制运行中，出现以下异常过）同步轴的位置偏差量

超过了参数 (No.8325) 上设定的值

188 

号码

信息

内

容

409 

'IDRQUEALM: EXCESS ERROR 

伺服电机出现了异常负载，或 Cs 方式中主轴电机出现了异常负载

（续）

SERVO ALARM: n  - TI-I  AXIS - EX-

CESSERROR 

发生了以下异常： CDn 轴停止中的位置偏差量的值超过了参数

(No.1829) 上设定的值。＠简易同步控制中，同步时的最大补偿

量超过了参数 (No.8325) 上设定的值。此报警只发生在从动轴

SERVO ALARM: n  - TH  AXIS - EX-

n 轴 (1 轴～ 4 轴）移动中的位置偏差量大于设定值。需要设定参

CE恣 ERROR

数 (No.1828) 上各轴的限制值

SERVO  ALARM: n  - TH 赵IS- LSI 

n 轴 (1 轴～ 4 轴）的误差寄存器的内容超出士 231 的范围。这种错

OVERFLOW 

误通常是由各种设定错误造成的

SERVO  ALARM:  n  - TH  AXI沪DE-

n 轴 (1 轴～ 4 轴）的数字伺服系统异常。详细内容参照诊断号

TECTION RELATED ERROR 

200 、 201 、 204

SERVO  ALARM:  n  - TH  AXIS  EX- 在 n 轴 (1 轴～ 4 轴）指令了大于 511875 检测单位／s 的速度。此

CESSSHIFT 

错误是因 CMR 的设定错误造成的

SERVO  ALARM: n  - TH AXIS - DIS-

n 轴 (1 轴～ 4 轴）的脉冲编码器的位置检测系统异常（断线报

CONNECTION 

警）。详细内容请参照诊断号 200 、 201

当 n 轴 (1 轴～ 4 轴）满足以下任一条件时，出现本报警（数字伺服

报警）： O 电机型号参数 (No.2020) 的设定值在指定范围之外。＠

电机旋转方向参数 (No.2022) 上没有设定正确的值 (111 或－

111) 。＠在电机每转的速度反馈脉冲数参数 (No.2023) 上设定了

SERVO  ALARM:  n  - TH  AXIS-PA-

0 以下的错误数据。＠在电机每转的位置反馈脉冲数参数

RA如ERINCDRRECT

(No.2024) 上设定了 0 以下的错误数据。＠参数 (No.2084,

410 

411 

413 

414 

415 

416 

417 

2085) 上，没有设定柔性进给齿轮比。＠参数 (No.1023 （伺服轴号

数））上设定了 1 轴～ 4 轴的范围外的值（只有 3 轴，而设定 4 轴）

或者设定了不连续的值。＠ PMC 轴控制的扭矩控制中，参数设

定错误（扭矩常数的参数为 0)

420 

SYNC TORQUE:EXCESS ERROR 

简易同步控制中，主动轴与从动轴扭矩指令差超过了参数设定值

(No.203  1) 。此报警只发生在主动轴上

421 

EXCESS ER(D) :EXCESS ERROR 

使用双位簧反馈功能时，半闭环的误差与全闭环的误差之差值过

大。请确认双控制变换系数（参数 No. 2078, 2079) 的设定值

422  EXCESS ER(D) :SPEED ERROR 

在 PMC 轴的扭矩控制中，速度超出了允许的速度

423  EXCESS ER(D) :EXCESS ERROR 

在 PMC 轴控制的扭矩控制中，超过了由参数设定的允许移动累

计值

6) 有关超程的报警

有关超程的报警见表 3-38 。发生本报警时，用手动方式使机床向发生报警的相反

方向移动，清除报警。

189 

号码

信息

500  OVER TRAVEL: +n 

501  OVER TRAVEL: -n 

表 3-38 有关超程的报警

内

容

超过了 n 轴的正向存储行程检查 I 的范围（参数 1320 或 1326)

超过了 n 轴的负向存储行程检查 I 的范围（参数 1321 或 1327)

502  OVER TRAVEL: +n 

超过了 n 轴的正向存储行程检查 II 的范围（参数 1322)

503  OVER TRAVEL: -n 

超过了 n 轴的负向存储行程检查 II 的范围（参数 1323)

504  OVER TRAVEL:+ n  (T series) 

超过了 n 轴的正向存储行程检查 II I 的范围（参数 1324)

505  OVER TRAVEL: -n(T series) 

超过了 n 轴的负向存储行程检查 II I 的范围（参数 1325)

506  OVER TRAVEL: +n 

超过了 n 轴正向的硬件 or

507  OVER 1RAVEL: - n 

超过了 n 轴负向的硬件 OT

注：参数 1326 、 1327 在行程限位切换信号 EXLMON 时有效

7) 过热报警（表 3-39)

表 3-39 过热报警

号码

信息

内

容

700  OVERHEAT:OONTROL UNIT  这是控制部分的过热。请检查风扇的动作并对空气过滤网进行清扫

701  OVERHEAT:FAN MaIDR 

控制部上部的风扇过热。请检查风扇电机动作，如有问题请更换风扇

704  OVERHEAT: SPINDLE 

O如果是重切削，请减轻切削条件。＠检查刀具是否很钝了。＠主轴放

检测主轴波动时，出现主轴过热。

大器不良

8) 刚性攻丝报警（表 3-40)

表 3-40 刚性攻丝报警

号码

信息

内

容

740  RIGID TAPALARM:EXCESS ERROR  刚性攻丝时，主轴停止中的位置偏差量超过了设定值

741  RIGID TAPALARM:EXCE茨 ERROR 刚性攻丝时，主轴运行中的位置偏差量超过了设定值

742  RIGID TAP ALARM: LSI OVERFLOW  刚性攻丝时，主轴的 LSI 溢出

9) 关于串行主轴报警（表 3-41)

号码

信息

内

容

表 3-41 关于串行主轴报警

749  S- SPINDLE LSI ERROR 

190 

接通电源后在系统启动中，发生串行通信错误时的报警。其原因

可考虑以下几点： O 光缆接触不良，或者脱落、断线。＠主 CPU

板不良。＠主轴放大器、印制板不良。接通 CNC 电源后发生本
1 报警时或将 CNC 复位，本报警仍不能解除时，将电源（含主轴电

源）切断，然后再启动

号码

信息

内

容

（续）

装有串行主轴的系统当接通电源时，主轴放大器没有成为正常启

动状态时发生此报警。其原因大致有以下几点：

0 光缆接触不良或主轴放大器的电源 OFF。

＠主轴放大器的显示器显示 SU-01 或 AL-24 以外的报警状

750 

SPINDLE  SERIAL  LINK 买ART 态， NC 电源 ON 时，这种报警主要是串行主轴动作中，电源关断

FAULT 

时引起的。此时可将主轴放大器的电源关断然后再次启动。

＠其他（硬件配置错误等）。

本报警在系统启动（含主轴控制单元）后不发生。

＠第 2 主轴（参数号 3701#4 ， SSZ=l 时）为上述O~ ＠状态时，

详细内容请参照诊断号 409

在安装串行主轴的系统中，主轴的报警在 CNC 画面上可以盟示。

报警的内容在主轴放大器上显示 AL-XX(XX 为数字）。其内

751 

FIRST  SPINDLE  ALARM  DETEC- 容请参照［数字 AC 主轴］一节或者 FANUC(X)NlROLMOWRa
TION(AL- xx) 

series 主轴伺服单元维修说明书。作为本报警发生的原因 CNC

FIRST  SPINDLE  MODE  CHANGE 

FAUU 

SPINDLE - 1  ABNORMAL  TORQUE 

ALM 

把检查出的主轴报警号显示出来。发生本报警的原因，检查主轴

侧的报警显示

串行主轴控制中，对轮廓控制方式、主轴定位、刚性攻丝方式的切

换及对主轴控制方式的切换没有正常完成。对于来自 CNC 的切

换指令，主轴放大器响应不正常时发生此报警

在第 1 主轴电机中检测出异常负载

SECOND  SPINDLE  ALARM  DETEC-
TION(AL- x  x) 

内容同报警 751

SECOND  SPINDLE  MODECHANGE 

FAULT 

内容同报警 752

SPIN  DLE  - 2  ABNORMAL TORQUE 

ALM 

内容同报警 754 （第 2 主轴用）

752 

754 

761 

762 

764 

主轴报警 750 号的详细内容

诊断号

口

# 7 

#6 

#5 

#4 

#3 

SPE 

#2 

S2E 

#1 

SlE 

#0 

SHE 

# 3(SPE)  0 ：串行主轴控制中，串行主轴参数满足了主轴放大器的起动条件。
1 ：串行主轴控制中，串行主轴参数不满足主轴放大器的起动条件。

#2(S2E)  0 ：串行主轴控制启动中，第 2 主轴正常。

1 ：串行主轴控制启动中，检测出第 2 主轴异常。

# l(SlE)  0 ：串行主轴控制启动中，第 1 主轴正常。

1 ：串行主轴控制启动中，检测出第 1 主轴异常。

191 

#O(SHE)  O:CNC 的串行通信模块正常。

1:CNC 的串行通信模块异常。

10) 系统报警（表 3 — 42)

号码

信息

内

容

表 3-42 系统报警

900  ROM PARITY 

910  DR汹 PARITY(LOW)

911  DRAM PARITY(HIGH) 

912 

SRAM PARITY(WW) 

F-ROM 模块中存储的 CNC、宏程序数字伺服等的 ROM 文件（控制软

件）的奇偶错误。 F-ROM 模块不良

DR汹奇偶错误，主板不良

SRAM 奇偶错误。清除存储器。若再发生时，要更换 FROM

&SR凶模块或者存储器＆主轴模块。在这些操作之后，应再重新设

913 

SRAM PARITY(HIGH) 

定参数等全部数据

920 

SERVO ALARM(l 戊AXIS)

这是伺服报警（第 1 戊轴）。出现了监控报警或伺服模块内 RAM 奇偶错

误。更换主板上的伺服控制模块

921 

SERVO ALARM(3/4AXIS) 

924 

SERVO  MODULE  SETTING 

ERROR 

这是伺服报警（第 3/4 轴）。发生了监控报警或伺服模块内 RAM 奇偶错

误。更换主板上的伺服控制模块

没有安装数字伺服模块。检查主板上的伺服控制模块的安装状态

930  CPU INTERRUPT 

CPU 报警非正常中断。主板不良

940 

PCB  ERROR 

PCB 的 ID 错误。主板或存储器模块不良

950 

PM SYSTEM ALARM 

PMC 发生了异常。主板上的 PMC 控制模块、 RAM 模块不良

960  DC24V POWER OFF 

DC24V 输入电源异常

971  NM! OCX::RRED  IN SLC 

连接 I/0 单元的接口发生了报警。检查主板上 PMC 控制模块和 I/0 单

元的连接。另外要检查 1/0 单元的电源是否接通、接口模块是否不良

973  NON MASK  INTERRUPT 

发生了原因不明的 NMI 。可能是电源板、主板不良，或者干扰造成的错

误动作

974  BUS ERROR 

数据总线错。主板不良

11) 报警信息 (PMC) （表 3-43)

表 3-43 报警信息

信息

内

容

ALARMNOTH叭G

正常状态

EROl  PROGRAM DATA ERROR 

调试用 RAM 的顺序程序不良。（处理）清除调试用 RAM ，再次输入

梯形图

ER02 PROGRAM SIZE OVER 

顺序程序的容量，超过了梯形图最大容量。（处理） RAM 的容量选

择小了。与本社联系

ER03  PROGR应 SIZE ERROR(OPTION) 

顺序程序的容量超过了选择指定的容量。（处理）减少顺序程序的

容量

192 

（续）

信息

内

容

ER04 PMC TYPE UNMATCH 

顺序程序机种的设定与实际不一致。（处理）用脱机编程器转换机种

EROS  PMC MODULE TYPE ERROR 

PMC 控制模块种类不符。（处理）更换正确的 PMC 控制模块

ER07  NO OPTION(LADDER STEP) 

没有选择梯形图步数

ERlO  OPTION AR趴 NITTHING（系列名） 没有传送 PMC 的管理软件。（处理）所安装的软件与订单不符合

ERl 1 OPTION A酗 NITTHING（系列名） （处理）所安装的软件与合同不符合。与本公司联系

ER12 OPTION AR趴 ERROR （系列名）

PMC 管理软件的 BASIC 和 OPTION 的系列不一致。（处理）与本

公司联系

ER13  OPTION AREA ERROR （系列名）

（处理）请与本公司联系

ER14  OPTION  AREA  VERSIION  RROR  PMC 管理软件 BASIC 和 OPTION 的版本不符合。（处理）与本公

（系列名）

司联系

ER15  OPTION  AREA VERSIION  ERROR 

（系列名）

（处理）请与本公司联系

ER16  RAM  CHECK  ERROR (PROGRAM 

RAM) 

调试用 PAM 不能正常读匡几（处理）更换调试用 RAM

ERl 7 PROGRAM PARITY 

调试用 RAM 发生了奇偶错误。（处理）再进行一次 PMC 编辑操作，

仍发生错误时，更换调试用 RAM

ER18 PROGRAM DATA ERROR BY  I/0 

用脱机编程器等传送顺序程序时，发生了电源关断等中断。（处理）

清除顺序程序，再次传送顺序程序

ER19  LADDER DATA ERROR 

CNC 画面切换。（处理）进行一次 PMC 编辑操作，或者再次输人梯

在梯形图编辑中，发生了电源关断等中断，或者用操作键引起的

形图

ER20  SY螂L/COMMENT DATA  ER-

ROR 

编辑符号注释时，发生了电源关断等中断。或者在编辑中用操作键

切换了 CNC 画面。（处理）用 PMC 进行一次符号，注释的编辑，或

者再次输入符号，注释

ER21  MESSAGE DATA ERROR 

了 CNC 画面。（处理）用 PMC 进行一次信息编辑。或者再次输入

在信息编辑中，发生了电源关断等中断。或在编辑中用操作键切换

ER22  PROGRAM NITTHING 

无顺序程序

信息

ER23  PLEASE TURN OFF POWER 

变更了梯形图最大容最的设定。（处理）为使变更有效，重新接通电源

EI25  SOF八'lARE VERSION  ERROR(PM-

CAOPT) 

ER26 SOFTWARE VERSION ERROR(PM-

CAOPT) 

PMC 管理软件内版本不一致。（处理）与本公司联系

不能进行 PMC 管理软件的初始化。（处理）与本公司联系

193 

（续）

信息

内

容

ER32  NO  I/0 DEVICE 

没有连接单元、 Power Mate 等 1/0 设备。（处理）使用 1/0 Link 等

I/0 设备时：确认 I/0 设备的电源是否 ON ，确认电缆的连接

ER33 SLC ERROR 

用于 I/0 Link 的 LSI 不良。（处理）请更换母板（主板）

ER34  SLC ERROR(xx) 

XX 组的从属装置中，与 I/0 设备的通信发生了异常。（处理）检查

与 XX 组设备相连电缆的连接。在 CNC 、 PMC 之前，接通 I/0 设备

的电源。更换装在 XX 组的 PMC 控制模块上的模块

XX 组内的输入数据数溢出 (33 字节以上），溢出的数据无效。（处
ER35  TOO  MUCH  OUTPUT  DATA  IN  理）每组的数据请参照下面的说明书。 “FANUC I/0 Unit.MODEL 
A 连接维修说明书 ”(B.61813) 、 “FANUC 1/0 Unit.MODEL B 连接
GROUP(XX) 

维修说明书 ”(B.62163)

ER36  TOO  MUCH 

INPITT  DATA 

IN  （处理）每组的数据请参照下面说明书。 “FANUC I/0 单元． MODEL

GROUP(xx) 

A 连接维修说明书 ”(B.61813) 、 “FANUCI/0 单元． MODELB 连接维

XX 组内的输入数据溢出 (33 字节以上）。溢出的数据无效。

修说明书 ”(B.62163)

ER38  MAX  SETTING  OUTPUT  DATA 
OVER(xx) 

I/0 区域不足（输出侧 XX 组以后的地址分配无效）。（处理）求出各

组的输出数据数，使其合计在 128B 以下来进行区域分配变更

ER39  MAX  SETTING 
OVER(xx) 

INPUT  DATA 

1/0 区域不足（输入侧 XX 组以后的地址分配无效）。（处理）求出

各组的输入数据数，使其合计在 128B 以下，以变更区域分配

WN02  OPERATE ADDRESSERROR 

Series 0 操作盘的地址设定数据不正确。（处理）修改地址设定数据

WN03  ABORT NC- WINOOW /EXIN 

在 CNC-PMC 间的通信中，梯形图停止了。可能功能指令 WIN-

DR, WINDW, EXIN, DISPB,AXCTL 等不能正常动作。（处理）在确

认梯形图无问题之后，再次启动梯形图（按 RUN 键），重新接通电

源，解除这个报警

WN05  PMC TYPE NO  CONVERSION 

（处理）请正确编制梯形图符号

WN07  LADDER  SPERROR（汀ACK)

使用功能指令 CALL ，梯形图的堆栈存储器溢出了。（处理）减少子

程序的嵌套数，使之在 8 以内

3. 4. 2  SINUMERIK 802D 系统的 CNC 故障诊断与维修

1. SINUMERIK 802D 系统的报警处理
在软件上， 802D 除保留了 SIEMENS 传统的诊断功能外，还增加了 PLC 程序＂梯形
图／显示“功能，使用者可以通过 PLG 在线诊断功能清楚地查找出引起故障的原因，方便

了维修。

通过系统的自诊断功能， 802D 可以在 CRT 上显示数千条报警信息，指示系统故障的
原因。根据引起故障的不同原因，系统显示的报警大致可以分为表 3-44 所列的两大类，
具体报警号对应的详细报警内容可以参见 802D 常见报警总览表。

194 

表 3 - 44  SINUMERIK 802D 报警分类一览表

序号

故障类别

1 

NCK 报警

2 

PLC 报警／信息

一般报警

通道报警

坐标轴／主轴报警

功能报警

循环报警 (SIEMENS)

循环报警（用户）

一般报警

用户报警

报警号

0-9999 

10000-19999 

20000-29999 

30000-99999 

60000-64999 

65000-69999 

400000-499999 

备注

参见后述

参见后述

参见后述

未使用

参见后述

未使用

参见后述

700000-799999 

由机床生产厂家设定

关于 PLC 的报警及处理方法详见第 2 章。下面只介绍 NCK 报警的处理。

大部分一般报警是由千机床调试过程中或操作人员的错误操作导致操作系统故障，

出现此类报警后，通常可以通过重新启动操作系统或恢复出厂设置来解除报警。如果还

不能消除报警，则需进行进一步的维修，如更换硬件、重置操作系统。在 802D 上，最为常

见的一般报警有以下几种。

1) 一般报警的处理

(1)  ALM3000 急停报警。急停报警是数控机床使用过程中最常见的一般报警。在

系统准备未就绪、机床碰到急停挡块或者按下了急停开关等情况下，均有可能产生急停报

警，出现此报警后通常可进行如下检查和维修。

叩检查机床上所有急停开关，是否急停开关没有打开。

＠检查机床的行程开关是否被压下，没有复位。

＠检查输入电压、 24V 电压是否正常，可能因为电压过低造成继电器不能动作，使能

信号无法给出。

＠检查伺服驱动、主轴驱动、液压电机等主要工作电动机及主回路，是否因过载保护

而产生急停报警。

＠检查急停信号是否已生效。
(2)  ALM6600/6610/6620 /6630/6640 /6650 /6660 /667116698 有关 NC 卡的报警。
ALM6600/6610 /6620 /6630/6640 /6650 /6660/6671 /6698 报警是有关 NC 卡的故障警。

SIEM邓S802D CNC 专门配备了 NC 卡插槽，用户可以通过 PCMCIA 存储卡进行机床的
批量调试和用户加工程序的批量传输。在机床生产厂家和最终用户生产现场， NC 卡得

到了广泛的应用。产生以上报警的原因大多数是 NC 卡硬件损坏或使用不当，认真阅读

NC 卡使用说明并参考 802D 相关技术手册即可解除报警。

2) 通道报警的处理

802D 通道报警通常是在编程人员、操作人员不熟悉系统与机床，或者是在试制新产

品、试验新工艺、开发新功能时，由千程序编制错误、操作不当引起的报警。此类报警的处

理通常比较简单，只需要根据报警提示，通过修改加工程序或进行正确的操作即可排除故

障，无须进行进一步的维修。在 802D 上，最为常见的通道报警有以下几种。

195 

(1)  ALM10753 报警。在非直线插补程序段中（如 G02/G03) ，同时编程了刀具半径

补偿 G41/G42 指令，即出现了如下格式的指令：

"G02G42XlOOY200FlOO;” 或 “G03G41XlOOY200F100;"
只有在 GOO （快速移动）或者 GOl （线性进给）的程序段中才可以使用 G41/G42 指令

进行刀具半径补偿。

(2)  ALM10754 报警。在非直线插补程序段中， G02/G03 与 G40 指令同时使用，即出

现了如下格式的指令：

"G03G40XlOOY200F100;” 或 “G02G40XlOOY200FlOO;"

取消刀具半径补偿也只可以在直线移动程序段中进行。
(3)  ALM14095 报警。此报警的含义是：机床无法完成编程半径为 0 的圆加工。例

如：

N50  G02  X50.0 Y50.0  CR=O FlOO; 
圆弧半径 CR 有正负之分，当圆弧小千或等于半圆时， CR 为正；当圆弧大于半圆时，

CR 为负。编程时应选择适当的 CR 值。

3) 进给轴／主轴报警的处理
(1) 回参考点方式及报警处理。 802DCNC 提供了坐标轴回参考点的功能，当初次启
动系统或在执行了系统＂急停”或重新启动，操作后，必须通过执行回参考点操作，使系统
的位置计数与脉冲编码器的零位脉冲（每转信号）同步。 802D 系统的很多功能都建立在
参考点的基础之上，例如：只有当机床回参考点后，程序段才能在自动方式或 MDA 方式
下运行，反向间隙补偿和丝杠螺距误差补偿也只是在回参考点后才生效。不能正确地返

回参考点，机床就无法正常工作。

802D 系统为用户提供了两种返回参考点的方式，即接近开关信号匀打永冲在参考点

开关信号之外和接近开关信号／零脉冲在参考点开关信号之上。

用户可以根据实际情况，通过修改参数来选择不同的回参考点方式。当采用接近开
关信号／零脉冲在参考点开关信号之外时，设定 MD34050=0 ；当采用接近开关信号饵凄：

冲在参考点开关信号之上时，设定 MD34050=1 。

保证机床回参考点动作正常执行的主要条件有：
CD  CNC 的操作方式必须选择在“回参考点”方式；
@“参考点减速“信号必须符合要求；

＠位置检测装置的“零脉冲“必须正确接入；

＠机床相关参数必须设置正确。
在 802D 中，与回参考点有关的信号可以通过系统的诊断参数进行检查，诊断参数与
参考点减速信号的对应关系为： V38001000. 7 对应于 X 轴， V38011000. 7 对应千 Y 轴，
V38021000. 7 对应于 Z 轴， V38031000. 7 对应于第 4 轴。

其中 V30000001. 2 为 PLC 到 PCU 的方式选择信号，可以通过检查该信号确认该方
式是否有效。 V380Xl000. 7(X 分别为 0 、 1 、 2 、 3) 为 PLC 送至坐标轴或主轴的通用信号，
当在回参考点过程中减速挡铁到达减速开关位置时，该信号为 “1” 。

此外，当参考点的速度设置不当或其他参数设置不当时，也会引起回参考点失败。因

此，参数的正确设置对可靠地完成回参考点动作至关重要，参数的设置可参考表 3-45 。

196 

表 3-45 802D 回参考点部分参数表

序号

参数号

单位

举例值

参数说明

1 

MD34000 

MD34010 

。

1 

。

1 

不使用减速开关

使用减速开关

正方向寻找减速开关

负方向寻找减速开关

2 

3 

4 

5 

6 

7 

8 

9 

10 

11 

12 

Nm34020 

mm/min 

2000 

设定寻找减速开关速度

MD34030 

mm 

10000 

寻找减速挡块的最大距离

MD34040 

mm/min 

300 

设定寻找接近开关信号或零脉冲速度

MD34050 

l\1034060 

mm/min 

MD34070 

mm/min 

MD34080 

MD34090 

MD34100 

MD34200 

mm 

mm 

mm 

。

1 

200 

200 

-2 

接近开关信号匀书脉冲在减速开关之前的回参考点方式

接近开关信号 4打永冲在减速开关之前的回参考点方式

寻找接近开关的最大距离

参考点定位速度

接近开关4脉冲信号后的位移（带方向）

。

参考点偏移量

29.4 

参考点位置值

。

绝对值编码器位置设定

(2)  ALM25050 轮廓监控报警。坐标轴在运行过程中计算坐标轴每个插补点的位置

值，该值与机床实际值的差值应在轮廓监控公差带 (MD36400) 的设定范围内，否则，就会

出现 ALM25050 报警。出现该报警通常是伺服系统故障或机床机械传动系统故障。因

此，可以将电机与机械部分脱开，区分故障原因。

重新启动程序，如果没有报警即表示电机工作正常，说明故障原因可能在机床机械传

动系统。此时应检查丝杠、轴承安装连接是否安全可靠，运行是否平滑冲击，飞轮质量是

否合适，是否存在较大的冲击，检查切削力、机械负载是否过大。

如果重启后依然出现该报警，那就说明该报警可能是由于伺服故障引起的，可从以下

几个方面检查、调整：

0 改善转速调节的优化曲线，例如：减小速度环比例增益 (MD32200);

＠检查轴最大加速度 (MD32300) ，如果轴加速度设定不正确，驱动器、电机无法提供

合适的加减速电流；

＠检查输入电压是否在允许范围内，检查伺服变压器的连接是否正确、可靠。
(3)  ALM25030 实际速度报警。系统周期性地对坐标轴的实际速度进行检测，如果
没有故障，实际速度不会大千最大轴监控速度 (MD36200) 。比较合适的最大轴监控速度

的设定值比可能出现的最大运行速度大 5% ～ 10% 。引起报警的主要原因、检查方法以

及维修措施见表 3-46 。

197 

表 3-46 速度指令值到达输出极限报警的处理

项目

故障原因与分析

检查步骤

措施

1 

2 

3 

电线电缆断线、连接不良

缆的连接

检查总线电缆、速度给定值电

更换不良连接电线、电缆或重新连接

参数设定不当

检查最大轴监控速度 (MD36200) 重新调整参数设定值。该值比可能出

的设定值

现的最大运行速度大 5% ～ 10%

更换不良连接电线、电缆；重新 检查实际值和位置调节方向是 更改参数 MD32110 ，使坐标轴受控运

连接。坐标轴不受控制运行

否正确

行

2.  SINUMERIK 802D 系统的报警总览表

除以上报警外， 802D 尚有大量的其他报警，这些报警通常根据报警信息的提示即可

解决。

1) 一般报警（表 3-47)

表 3-47 一般报警

报警号

含

义

报警号

含

义

2000 

PLC 正常运行监控

2001 

PLC 未启动

4230  不可以由外部进行数据修改

4310  机床数据必须以上升序列进行排列

2140  初始化开关位于总复位状态，下次上电时清零

4400 

修改机床数据引起缓冲存储器重组（数据丢

失）

3000  急停

4002  通道内的几何轴未定义

4004  通道内的几何轴多次定义

4010  机床数据中使用了无效识别符

4502  计时错误

5000  通信任务未执行

6010  数据库管理在系统导入时发现错误

4011 

在通道专用表中给几何轴和通道轴命名时给 6020  机床数据修改，存储器数据区进行重新划分

出了无效识别符

6030  已修改了用户存储器的极限

4040  某通道轴识别符与机床数据不符

6500  零件程序装载太多，到达 NC 存储区极限

4060  已经装载标准机床数据

4062  已经装载备份数据

4065  电池支持存储器通过备份恢复

4070  修改了常规化机床数据

6510 

NC 存储器中零件程序太多

6530  目录中文件太多

6540 

6550 

NC 存储器中目录太多

NC 中一条目录下的子目录太多

4075  缺少更改机床数据的权限

6560  在 NC 的一个文件中输入了非法的数据格式

4076  当前设定的存取权限不能修改机床数据

6570 

NC 存储器已满

由于字节太多，无法给规定的存储器配置的机 6600 

NC 卡存储器已满

4077 

床数据输入一个新数值

4090  系统导入时出错太多

4150  子程序调用 M 功能调用无效

4160- 主轴转换 M 功能调用无效

6620 

6630 

NC 卡的格式错误

NC 卡硬件故障

6640  未插入 NC 卡

6650 

NC 卡上的写保护生效

4200  不能将一个已定义的儿何轴定义为旋转轴

6671  正在向 NC 卡写数据

4216  被用作主轴的机床轴必须被定义为旋转轴

4215 

主轴功能需要一个取模轴（位置以度为单位）

8040 

因为没有配置与之相对应的选件，需复位该机

床数据

4225  取模功能需要一个旋转轴

8041  在相关机床数据中选择的轴的数量已被用完

198 

2) 通道报警（表 3-48)

表 3-48 通道报警

报警号

含

义

10203  没有回参考点就启动 NC

10601 

螺纹加工时，程序段结束时速度为零（用 G33

多个程序段连续运行才可能出现）

10620  到达软件限位开关

10621  坐标轴已经位于软件限位开关处

10631  在 JOG 方式下，坐标轴到达了工作区域极限

报警号

10930 

10931 

10932 

零件加工程序的预处理时，发现编程的路径使 12000 

坐标轴超出了工作区域极限

必须选择一个刀具 T ，系统才可以监控其半径 12010 

含

义

在毛还切削循环 (LCYC95) 中，使用非法的插

补方式（例如：螺纹加工、 G5 等）

在使用毛蚽切削循环 (LCYC95) 时，编程的轮

廓路径错误

毛还切削循环 (LCYC95) 在毛还切削预处理阶

段不能被中断。要求重新启动轮廓预处理

程序段中一些地址被多次编程。大多数地址

只允许编程一次

程序段中一些地址被编程的次数太多，超过其

允许出现的次数

补偿值

在刀具半径补偿生效时，局部程序从缓冲区溢

出

12020  程序段中，变址用在了不被允许的地址类型中

12050  NC 地址的名称在系统中没有被定义

10730 

10750 

10752 

10753  仅能在一个线性程序段中激活刀具半径补偿

12060 

同一功能组中的 G 指令在同一程序段中被多

次使用

10754  仅能在一个线性程序段中撤销刀具半径补偿

10756 

在撤销铣刀半径补偿时编程的终点位于补偿

圆周之内

12080  文本显示位置程序段的句法错误

12090  文本中调用了不允许的参数

10758  程序段中带变量补偿值的曲率半径太小

12110  程序段中编程的地址与有效的 G 指令相矛盾

10762 

10763 

刀具半径补偿有效时，两个位移程序段之间的 12120 
空程序段太多

程序段中 G 指令 (G4 、 G25 、 G26) 必须单独的

位于程序段中，不允许编程通用地址

刀具半径补偿生效时，程序段在补偿平面上的

轨迹分量为零

在扩展的系统中可能出现当时结构版本中没

12140  有的功能，导致程序段中编程的某些功能不能

10764  刀具半径补偿有效时，路径不连续

10776  刀具半径补偿只适用于几何轴

10790 

10791 

在编辑两条带角度参数的直线时，改变了两个

子程序段的有效平面

在编辑一个含有两条直线和一个角度定义的 12300 
轮廓时，未发现中介点

10792 

在编辑两条带角度的直线时，只允许样条或直 12380 
线插补，不允许圆弧或多项插补

实现

12150  数据类型与所要求的运算不兼容

12160  某变量的设定值超出其规定的数值范围

12290  程序段中计算变量没有被定义

在子程序定义中，规定了一个正式的 REF 参

数（引用调用参数），没有分配当前参数

存储器的容量已用完，不能再存储多余的数据

或定义程序段中的数据

10795  角度编程时终点参数冲突

10820  用于进给的旋转轴／主轴无定义

10860  程序段中未编程进给率

10862  程序中将主轴作为轨迹轴

10870  没有定义端面轴

倒角或倒圆不生效。可能是连续 3 个以上程

12400  数组初始化时，定义了一个不存在的数组

12420  程序段标识符太长

12450  程序段标号重复定义

12460 

变量定义、循环程序或周期参数超过了本身最

大的数量

12470  在程序段中编程了一个未定义的 G 功能

10882  序段中不含轴运动指令、平面中没有直线或圆 12490  没有设定所要求的存取权

弧轮廓等

12500  所使用的关键字不可以在该程序段中使用

10900  没有编程用于恒定切削速度的 S 值

12540  程序段太长或太复杂

199 

报警号

含

义

报警号

含

义

（续）

12550  编程的标识符在系统中未定义

12560  所编程的数值在允许范围以外

12590  程序段编号大于 MD 中给出的程序段的数量

12600  在执行 M 文件或 TEA 文件时，发现错误

14170 

14160  在进行刀具长度补偿时，没有定义儿何轴

14165 

如果一个刀具补偿在 ISO - 2 (G43/G44) 中激

活，必须定义一个刀具号 (H)

如果一个刀具补偿在 ISO - 2 (G43 /G44) 中激

活，必须同时激活线性插补

12661 

12700 

12701 

12710 

在工艺周期中，不允许悯用一个子程序或其他

工艺周期

14180  刀具号未定义

用外部语言模式编程轮廓定义程序段的同时，

14190  同时将 G49 和不同于 HO 的 H 字编入程序

模态循环有效

14195  同时将 G49 和不同于 DO 的 D 字编入程序

在轮廓定义程序段中，没有生效的 GOI 插补功 14197  同时将 D 字和 H 字编入程序

能

使用极坐标定义带 GOO 、 GOI 、 G02 或 G03 的

在外部语言模式中使用的语言元素不允许或 14200  程序段结束点时，给关键字 RP= …定义的极

不识别

半径是负数

12722  在程序段中，同时使用了宏调用和循环词用

14000  文件结束符错误

14001  程序段结束符错误

14011  所调用的程序段不存在

14012  某程序段超出最大子程序嵌套级

当使用极坐标定义带 GOO 、 GOl 、 G02 或 G03

的程序段结束点时，给关键字 Ap= …下编程

的极角数值范围巳超过范围为－ 360°~ + 

14210 

360° 、 0.001° 的分辨率

在极坐标中用 GlO 、 Gil 或 Gl2 重新确定的极，

14250  关键字 Rp= …下所确定的极半径是负值，只

14013 

某程序段在调用子程序时，编程的调用次数 P

为零或是负数

14280 

有正的绝对值才是允许的

所显示的程序段的结束点已在极坐标系和笛

卡儿坐标系中编程

14014  所选程序不存在或没有存取权

14015  用户没有文件的存取权

14600  NCK 的 RAM 中的存储器位置不够

14016  在使用 M 或 T 功能调用予程序时出错

14601 

MMC 与 PLC 通信没有结束，外部数据不能被

清除

14020 

调用功能或参数时，定义的参数值或编程的实 14700  在内部控制指令中已发生超时
际参数数量不正确
在圆弧插补时，圆弧起始点半径和终点圆弧半 14710 

系统在启动、复位后产生初始化程序，在此过

程中可能会因为机床数据设定有误而出错

14040  径的差值大于机床数据的规定值，或者两圆弧

中心点之间的距离大于机床数据的规定值

14045  正切圆编程时出错

14048  进行圆弧编程时，定义了负的转数

14051  零件程序中算术运算出错

14750  程序段中编程了太多的辅助功能

14760  在同一个功能组内仅有一个辅助功能生效

14770  编程过程中辅助功能的使用不正确

14780  程序段中编程了一个没有使用的选件功能

嵌套程序跳转时，指定了大千 1 的跳转级（在
14060  程序包 l 中，此跳转级的设定值被认为是旬法 14811 

错误，即只允许设定 1 级跳转程序级开／关）

14800  程序段中编程了一个小于等于零的路径速度

使用了加速度输入范围以外的值，允许的值范

围为 1 % ~200% 

14080  未找到跳转目标

14815  程序段中编写了负的螺距变化值

14091 

在当前程序文本中，不允许对一个功能进行编 14820  编程了一个用于“恒定切削速度 G96” 功能

程或启动

14840  编程的恒定切削速度超出了允许的范围

14092  程序段中编程的坐标轴类观不正确

14900  同时编程了圆心和终点

14095  半径编程时，定义的半径太小

14130  给出了太多的初始化值

200 

14910 

通过张角编程圆弧时，编程了一个负的张角，

或者编程了一个大千等于 360° 的张角

报警号

14920 

15030 

15100 

15110 

含

义

报警号

含

义

通过中点编程一个圆弧时，圆弧的中点设定不 16500  编程了负的倒角或倒圆

正确

16510  端面轴未定义

（续）

英制和公制指令说明从控制系统中读入数据 16700  在螺纹加工时编程了不正确的进给率
块中的单位系统，为防止特定单位系统中的数
据解释不正确，只有以上指令与有效单位系统 16715 

在需要主轴停止的程序段中，主轴未处于静止

状态

相匹配的时候，数据块才能被接收

通道中用于特定程序段的记录文件中已没有 16720 

在有 G33 （恒定螺距螺纹加工指令）的程序段

中没有编程螺距

更多的容量

通道中用于特殊程序段的记录文件中已没有

更多的容量

15160  预处理配置错误

15170  不能解码

15175  不能建立接口

15180  不能执行该文件

15185  文件错误

15190  存储器没有足够的容量用于子程序调用

15300  在执行程序搜索功能时，参数输入了负值

15320  不允许段搜索指令

15330  段号错误，作为程序段段号只能为整型值

15340  使用了非法的标识符

15350  没有找到待查询的目标

15370  在程序段搜索时设置了一个错误的目标

15400  所选的初始化文件不存在

15410  初始化文件中存在非法的 M 功能

16730 

螺纹切削参数不正确

16740  螺纹加工时没有编程坐标轴

16760  没有编程 S 值

16762 

主轴与坐标轴存在插补关系，不可以执行主轴

的螺纹或钻孔功能

16763 

S 指令使用了零或负值

16770  程序段中编程的坐标轴没有测量系统

16800  关键字 oc （直接坐标）只用于旋转轴

16810  关键字 ACP（绝对坐标正）只用千取模轴

16820  关键字 ACN （绝对坐标负）只用于取模轴

16830  坐标轴或主轴编程了错误的位置

16903  在当前状态下不能执行该指令

16904 

在当前状态下不能启动或继续执行（例如：启

动程序、回参考点、程序段搜索等）

16905  命令不能被启动或执行

16906  该指令由于报警而终止

16907  只有在停止状态下才能执行该指令

15420  在执行初始化程序块时发现一个非法指令

15460 

程序段中编程的地址与 G 指令不兼容

16908 

仅能在复位状态或程序段结束状态下执行该

指令

15700  非法循环报警编号

16909  该功能必须在另一种运行方式下被激活

15800  轮廓加工的开始条件不正确

16911  不允许运行方式转换

` 

15810  程序段中有错误的数组尺寸

16912  命令仅能在复位状态下执行

15900  在零件程序中，选择了不存在的探头

16913 

不能转换到所要求的运行方式。只有在复位

状态下才可以进行方式转换

在零件程序中，选择了 MEAS （通过删除距离

15950 

测量）或是编程的进给速度为零

16914 

运行方式转换错误，命令不允许

16020  程序段将定位，但是没有任何重新定位信息

16915  当前程序段中不能进行运行方式的转换

停顿时间或主轴功能导致通道不能识别主轴 16916  当前状态下不可以进行程序段的处理

16100 

编号报警

16410 

程序段中几何轴与机床坐标轴不对应

16919 

由千出现报警或者通道处于出错状态而使命

令无法执行

16420  不允许多次编程同一个坐标轴

16920  同一命令仍在执行中

16440  程序段中的旋转几何轴不存在

16922  超出最大的嵌套深度

201 

（续）

报警号

16923 

含

义

报警号

含

义．一

装载机床数据、搜索程序段时，不能中断而进 17080  数值低于下限

行其他操作

17090  数值高于上限

16924  程序测试改变了刀具数据

17095  试图在机床数据中写入个无效的值

16925 

命令没有被执行，此时正好进行 个过程转换

（运行方式的转换、覆盖式存储状态转换）

17160 

16928  不能重组的程序段中的程序被中断

16930 

前面的与当前的程序段必须用可执行程序段 17180 

分开

在没有选择刀具的情况下，试图对当前的刀具

补偿数据进行存取

程序段中对一个没有初始化、不存在的刀沿号

(D 号）进行存取

16931  超出最大的嵌套深度

17001  存储器没有空间用于刀具或刀具库数据

17020  对一个无效的变量进行读、写

17030  程序段第 2 数组索引超出范围

17181  编程的 D 号不能被 NC 识别

17188  通道刀具表中规定的 D 号不是唯一的

17190 

程序段中对一个没有初始化、不存在的刀具号

(T 号）进行存取

17040 

读或写访问已为轴变量编程，其中轴名不能清

楚反映在轴上

17191  编程了 NC 不能识别的刀具识别符

17210  变量不能从零件程序中直接读或写

17070  无法对一个写保护的变量、机床数据进行修改 17220  程序段中定义的刀具不存在

3) 坐标轴／主轴报警（表 3-49)

表 3-49 坐标轴／主轴报警

报警号

含

义

报警号

含

义

20000  没有到达减速挡块

20001  没有减速挡块信号

20002  零脉冲没找到

20004  缺少参考标记

20005  回参考点运行被终止

20006  没有达到寻找接近开关信号速度

20050  手轮运行生效

20051  不可能进行手轮运行

21610  超出了当前有效编码器的最大允许频率

21614  到达硬件限位开关

21700 

21702 

21703 

轴探头已偏转，为了以后的测量操作，必须先

将探头信号复位

测量程序段已结束，但是激活的传感器还未响

应

所选探头不偏转，所以不能记录从偏转状态到

非偏转状态的测量值

在 JOG 方式下，不允许利用机床控制面板上 22000  不能进行齿轮换挡

20052 

的方向键进给

20057  主轴旋转进给率小于等于零

22010 

PLC 显示的实际齿轮级与 NC 要求的齿轮级

不符

进给轴／主轴将按旋转进给率进给。在

SD43300  ASSOGM—FEED-REV-SOURCE 

22050 

在接通位置调节方式时主轴速度大于测量系

统的速度极限值

中定义的轴参考／主轴参考指向它们本身，而

不能执行重复的运动

轴目前不处于“儿何轴＂状态，因此不能在手动

22051  主轴找不到参考点信号

22053  主轴不支持参考点设置模式

方式下作为几何轴进给

22055 

显示的轴己作为机床进给轴，因此不能作为几

虽然巳设有参考，但是当前位置未参照编码器

位置

何轴操作

22062  坐标轴回参考点运行时未达到零脉冲搜索速度

20058 

20060 

20062 

202 

（续）

报警号

含

义

报警号

含

义

22064  坐标轴回参考点运行时零脉冲搜索速度太大

25110  所选编码器不存在

22100  主轴实际转速大于主轴最大转速

25201  驱动器故障

22101  超出编码器的极限频率

25202  驱动组出错，等待驱动自我清除

22200  攻丝过程中坐标轴停止

26000  夹紧监控报警

22250  螺纹加工过程中坐标轴停止

26003  有关丝杠螺距的参数设置不正确

22260  螺纹可能被损坏

22270  螺纹加工过程中主轴转速过高

22280  编程加速轨迹太短

25000  编码器故障

25010  位置调节回路中所使用的编码楛发出污染信号

25020  编码器零脉冲监控

25030  实际速率报警

25040  静止状态监控

25050  坐标轴轮廓监控

26004 

26005 

26006 

轴专用参数 MD31010 中设置的编码器刻度距

离为零

机床数据 32250 中设置的模拟速度设置点的

输出测定为零

有关坐标轴配置的编码器类型、输出类型的参

数设置不正确

26014  机床数据含有无效的数值

26015  机床数据含有不允许的数值

26020  编码器初始化或存储时出现故障

25060  超出坐标轴给定的极限转速

26022  测量时无编码器硬件报警

25070  坐标轴漂移太大

25080  坐标轴位置监控报警

26030 

在编码器和加工之间识别出齿轮级转换系数，

绝对编码器的绝对位置无效

4) 循环报警（表 3-50)

表 3-50 循环报警

报警号

含

义

报警号

含

义

61000  没有激活刀具补偿

61001  螺距定义错误

61002  加工方式定义错误

61110  定义的底部精加工容差大于最大深度进给

61111  编程的进给宽度大于有效刀具直径

61112  当前有效的刀具半径为负

61003  循环程序中未编人进给率

61113  参数 CRAD 定义的角度半径太大

61009  有效刀具号＝ 0

61010  精加工公差太大

61101  参考平面定义错误

61102  没有编写主轴方向

61103  钻孔个数为零

61104  槽的轮廓冲突

61105  铣刀半径太大

61114 

程序段中的刀具半径补偿 G41/G42 的加工方

向错误

61115  轮廓的逼近和回缩方式编程错误

61116  逼近和回缩方式定义为零

61117  当前有效的刀具半径为负或零

61118  钻削面的长度或宽度值定义错误

61124  程序段中未编入进给宽度

61106  钻孔个数或钻孔间距太大

61107  第一次钻孔深度定义错误

61108  长度和深度的设定值定义错误

61601  成品直径太小

61602  刀具宽度错误定义

61603  切槽形状定义错误

61109  钻孔方向的设定值定义错误

61604  刀具与编程的轮廓冲突

203 

（续）

报警号

含

义

报警号

含

义

61605  轮廓定义错误

61606  轮廓预处理错误

61805  中间位置既按绝对值编程，又按增量值编程

61806  轴赋值的顺序出错

61607  编程的起点设定错误

61807  主轴方向与循环中编程的主轴方向相反

61608  编程了错误的刀尖位置

61808  最后一次钻孔深度或单个钻孔深度丢失

61609  形状定义错误

61610  没有编程进刀深度

61611  无法计算轮廓的中间点位置

61809  钻孔位置出错

61810  ISOG 代码出错

在调用程序段中编程了一个非法的 ISO 坐标

61811 

61801 

在程序调用 CYCLE…＜值＞中编程了一个非

轴名称

法的数控值

61813  在循环设定中，输入了一个非法数值

61802  编程的坐标轴赋值给了主轴

61815  在循环调用之前， G40 还未生效

61803  编程的坐标轴在系统中不存在

62100  钻孔循环未生效

61804  编程的中间位置或当前位置在参考点之后

5)  PLC 报警

(1) 一般报警（表 3 — 51) 。

表 3 — 51 一般报警

报警号

含

义

报警号

含

义

400000  PLC 停止

400002  系统故障

400009  在 PLC 程序块中运行时间溢出

400010 

程序块中算术错误：心除数为零；＠浮点计算

400004  用户程序中包含一个系统不支持的操作

错误

400005  调试开关处于 PLC 停止

400011  程序块中子程序级超出允许数

400006  缓冲的 PLC 数据丢失

400013  控制系统中的 PLC 用户程序出错或丢失

400007 

在 PLC 用户程序中检查到某程序块的变量地 400014  PROFIBUS- DP 导入顺序中断

址、数据类型等错误

400015  PROFIBUS- DPI/0 出错

400008  编程工具版本不兼容

(2) 用户报警（表 3-52) 。

表 3-52 用户报警

接口地址

报警信息

子程序

Vl 6000002. 0 

驱动器未就绪

V16000002.1 

Vl 6000002. 2 

Vl 6000002. 3 

Vl 6000002. 4 

Vl 6000002. 5 

Vl 6000002. 6 

电源馈入模拟 I2 It 报警

冷却泵电机过载

冷却液液位太低

润滑电机过载

润滑液液位太低

刀架电机过载

33 

44 

44 

45 

45 

47 

报警号

700016 

700017 

700018 

700019 

700020 

700021 

700022 

204 

报警号

700023 

700024 

700025 

700026 

700031 

接口地址

报警信息

V16000002. 7 

编程刀具号大于刀架最大刀位号

Vl 6000003. 0 

在监控时间内，没有找到目标刀具

V16000003.I 

刀架尤刀位检测信号

Vl6000003.2 

驱动器优化时电机抱闸巳释放

V16000003. 7 

手动方式测量功能生效

（续）

子程序

47 

46 

40 

43 

6)  PROFIBUS 报警（表 3 — 53)

表 3 — 53 PROFIBUS 报警

报警号

含

义

380001 

PROFIBUS- DP 启动出错：（ l)SDBIOOO 包含错误数据；（ 2)CNC 部件硬件缺陷

380003 

PROFIBUS- DP 故障：（ 1 ）在 PROFIBUS- DP 上出现数据传输中断；（ 2)SDBIOOO 出错；（ 3 ）系统程序出错

380020  用于 PROFIBUS- DP 配置的 SDBIOOO 出错

380021  没有用户指定的 SDBIOOO ，在启动过程中载入了默认的 SDBIOOO

380040  根据所使用的 NC 配置规格在 SDBIOOO 中没有生成 PROFIBUS- DP 

380050  多次定义了地址段的基本地址

380051  逻辑地址段中数据输入被多次赋值

380060 

SDBIOOO 中包含了一个未通过 MDNC 中赋值的客户端，但这个客户端与 PROFIBUS - DP 相连，由此

产生报警

380070  现有的基础地址无输入槽

380071  现有的基础地址尤输出槽

380072  为一数字或模拟输入定义了非法的逻辑基础地址

380500  驱动器故障，参见驱动文献

3.  SINUMERIK 802D 系统的 CNC 故障的综合分析与处理

l) 手动操作不能进行

当 802D 系统在手动方式下不能正常工作，即手动方式下按下机床控制面板上的＋

X 、 +Y 等键，机床不能产生正常动作时，可以按表 3 — 54 所列进行故障的综合分析和

处理。

表 3 — 54 手动操作不能进行的故障综合分析与处理表

项目

故障原因

检查步骤

1  确认故障原因

观察显示屏上是否有急停报警

2  外部急停生效

确认外部急停信号是否生效

3  确认故障原因

叩位置显示变化，机床实际不运动；

检查系统位置显示与机床的实际运动情况：

＠位置显示无变化，机床实际也不运动

措施

如有，参见第 2 项

如无，参见第 3 项

排除外部故障

如产生情况 CD ，参见第 4 项

如产生情况＠，参见第 7 项

205 

项目

故障原因

检查步骤

4 

检查机床实际移动量 观察 CNC 实际坐标是否有变化

5  机床移动键禁止生效

确认诊断参数 V38000004. 4 是否为 “l"(X 轴）

确认诊断参数 V38010004.4 是否为 “l"(Y 轴）

确认诊断参数 V38020004.4 是否为 “l"(Z 轴）

确认诊断参数 V38030004.4 是否为 “1"(4 轴）

确认系统参数 MD32200[0] (X 轴）

（续）

措施

如无，参见第 5 项

如有，参见第 6 项

复位机床移动键禁止信号

6 

位置环增益设定是否 确认系统参数 MD32200[1](Y 轴）

太小

确认系统参数 MD32200[2](Z 轴）

确认系统参数 MD32200[3](4 轴）

设定合适的增益值

7  外部复位信号生效

确认系统诊断参数 V30000000.7 是否为 “1"

取消外部复位信号

8  倍率信号错误

确认操作面板倍率选择不为 “0" ，确认信号连接正确 改变倍率，确认信号的连接

9  方式选择错误

确认系统操作方式为手动连续进给

确认系统诊断参数 V30000000.2 是否为 “1"

选择正确的操作方式

确认轴运动方向信号生效

确认诊断参数 V38000004. 7 /V38000004. 6 是否为

"l"(X 轴）

确认诊断参数 V38010004. 7 /V38010004. 6 是否为

10  轴方向信号未输入

"l"(Y 轴）

确认轴运动方向信号的连接

确认诊断参数 V38020004. 7八'38020004. 6 是否为

"l"(Z 轴）

确认诊断参数 V38030004. 7 N38030004. 6 是否为

"1"(4 轴）

检查机床与进给速度有关的参数，确认进给速度设

定值不为 “O"

修改相关参数

解决相应硬件故障

11  进给速度设定错误

12  硬件故障

2) 同步进给或每转进给不能进行

当 802D 系统在手动方式下工作正常，但在同步进给或每转进给时不能正常工作时，

可以按表 3-55 所列进行故障的综合分析和处理。

表 3-55 同步进给或每转进给不能进行综合分析与处理表

项目

故障原因

检查步骤

措施

1  主轴位置编码器连接不良 检查主轴位置编码器的连接

主轴无实际转速或编码器 检查显示器上显示的主轴转速与主轴实际 检查主轴传动系统的安装与连

2 

与主轴的连接不良

转速是否一致

接

3  主轴编码器不良

利用示波器检查编码器的输出脉冲

更换主轴编码器

3) 自动工作不能进行

当 802D 系统在手动方式下工作正常，但在进行自动工作时不能正常工作时，可以按

206 

表 3-56 所列进行故障的综合分析和处理。

表 3-56 自动操作不能进行的故障综合分析与处理表

项目

故障原因

检查步骤

措施

1  故障的分析

机床各儿何轴是否都已完成回参考点动作

确认机床已完成参考点返回

2  操作方式选择错误

确认机床显示器显示当前操作方式为

“MDA”或 “AUTO”方式

选择正确的操作方式

3  循环启动信号没有输入

确认按下循环启动后，系统诊断参数

VlOOOOOOl. 7 是否为 “1" ，放开后为 “O"

检查循环启动信号电缆

4  进给保持被输入

确认诊断参数 V32000006. 0 是否为 “1"

检查进给保持信号电缆

5  外部复位信号生效

确认诊断参数 V30000000. 7 是否为 “1"

取消外部复位信号

<D 进给倍率为 0%;

＠到位检查中；

6  ＠暂停指令执行中；

通过检查相关诊断信息确认故障原因

解除相应报警

@M 、 S 、T 功能执行中；

＠等待主轴到达信号

小结

数控系统是数控机床的控制中心，是各种机械运动的控制指令源，实现了对加工程序

的分析、译码、运动分解、速度控制及各种辅助动作的处理。其性能决定了机床的主要技

术指标。本章介绍了 FANUC 和 SINUMERIK 数控系统的组成、特点，并分别介绍了

FANUCOi 系统、 SINUMERIK 802D 和 840D 等典型的系统构成及连接。介绍了常用

FANUCOi 系统和 SINUMERIK 802D 系统中 NC 参数的意义、参数设定与调整以及数据

备份操作的方法。在本章的最后以 FANUC Oi-A 为例介绍了 FANUC 系统故障的诊断

与维修方法，给出了常见该系统故障的现象和解决方案；同时还以 SINUMERIK 802D 为

例介绍了 5IEMENS 系统故障的诊断与维修方法，给出了该系统有报警故障的现象和解

决方案，综合分析了几种常见故障的原因分析及处理，并列出了 FANUCOi-A 和 SINU­

MERIK 802D 的系统报警总览表，以备读者参考。

习题

一、填空题

1.  FANUC  Oi 数控系统由

、

、

等组成，其中

是最核心的部分。

2.  FANUCOi 控制单元由

和

两部分构成。

3.  FANUC  Oi 控制单元的主板模块主要包括

、

、

、、、及等。

、

、

、

、

207 

4.  FANUC  Oi 控制单元的 ID 模块主要包括
和等。

、、

5. FANUC  Oi 控制单元的 “JD5A” 和 “JD5B" 接口为

，可以将

、

等数据从

输入到

、

、

、

，主要用于

中或从系

统中输出

6. 在与 FANUCOi 控制单元的连接中，手摇脉冲发生器接到

、显示器接到

，而键盘接到

。

7.  SINUMERIK 802D 数控系统由
8.  SINUMERIK 802D 数控系统的硬件由

9.  SINUMERIK  802D 数控系统的软件由

组成。

和

、

、

构成。

、

、

组成。

10. 机床参数的数据形式有

、

、、

。

二、问答题
1.  FANUCOi 系列数控系统主要特点是什么？
2.  FANUCOi 系列数控装置（控制单元）由哪些部分组成？
3.  BEUING FANUC Oi — A 数控装置上的指示灯有什么作用？各状态表示的意义是

什么？

4.  FANUC Oi 数控系统的控制单元主板与伺服轴如何连接？
5.  RS — 232 串行接口的作用是什么？
6. 主轴模块的 CX2A 接口与哪个接口相连，起什么作用？
7.  FANUCOi 系统的 24VDC 与伺服的 200V AC 两种电源的接通顺序有什么要求？

8. 简述 FANUC 16i/l8il21i — A 型数控系统控制单元各接口的具体用途。

9. 简述 SINUMERIK 802D 数控系统的组成。

10. 简述 SINUMERIK 840D 数控系统的主要特点。

11. 分析 PROFIBUS 总线连接的要求。

12. 简述 SINUMERIK 840D 总体连接时的要求。

13. 什么是数控系统的参数？它有什么作用？
14.  FANUCOi 数控系统的参数如何显示和设置？

15. 为什么要进行螺距误差补偿？与螺距误差补偿有关的参数有哪些？
16.  SINUMERIK 802D 数控系统的参数如何显示和设置？

17. 简述 SINUMERIK 802D 的 CNC 调试顺序。

18. 为什么要进行数据备份？

19. 简述 SINUMERIK 802D 的数据备份过程。

三、画图题

1. 画出 FANUCOi 数控系统的综合连接图。
2. 画出 FANUC 16i,18i l2li -A 型数控系统的总接线图。
3. 画出 SINUMERIK 802D 数控系统的总接线图。

4. 画出 SINUMERIK 840D 的 NCU 数控单元接口端示意图。

208 

5. 画出 SINUMERIK 840D 数控系统的总接线图。

四、分析题
1.  FANUC Oi — A 系统通电后，屏幕不显示，试分析故障原因。

2. 装备有 FANUCOi-A 系统的数控机床发生手动、自动均不能执行的故障时，可使

用哪些方法来查找故障原因？

3. 你在操作装备有 FANUCOi-A 系统的数控机床时，遇到过哪些报警？如何解除

报警？

4. 分析 ALM3000 急停报警的原因有哪些？

5. 分析 SINUMERIK 802D 数控系统手动方式下不能工作时，如何处理？

209 

第 4 章 数控机床主轴维修技术

数控机床的主轴部件是数控机床的重要组成部分，包括主轴的支承和安装在主轴上
的传动零件等。它的回转精度影响工件的加工精度，它的功率大小与回转速度影响加工
效率，它的自动变速、准停和换刀影响机床的自动化程度。因此，要求主轴部件具有良好
的回转精度、结构刚度、抗振性、热稳定性及部件的耐磨性和精度的保待性。对于自动换
刀的数控机床，为了实现刀具的自动装卸和夹持，还必须有刀具的自动夹紧装置、主轴准

停装置和切屑清除装置等结构。

4.1  数控机床主轴传动系统及部件

数控机床主传动系统是指驱动主轴运动的传动系统。主轴是数控机床上带动刀具或
工件旋转，从而产生切削运动的运动轴，它往往是数控机床上功率消耗最大的运动轴。数
控机床一般通过变速，使主轴获得不同的转速。同时传递一定的功率和足够的转矩，满
足切削的需要，以适应不同的加工要求。在高档数控机床中，还具有 C 轴功能及定向

功能。

4.1.1  数控机床对主传动系统的要求

作为高度自动化的设备，数控机床对主传动系统的基本要求如下：

(1) 为了能达到最佳的切削效果，数控机床一般都应在最佳的切削条件下工作，因

此，主轴一般都要求能实现无级变速，可实现恒定线切削速度加工。

(2) 要求机床主轴系统必须具有足够的高转速和大功率，以适应高速、高效的加工需求。
(3) 为了降低噪声，减少振动和发热，主传动系统应尽量简化结构，缩短传动链。
(4) 在加工中心上，还必须具有安装刀具和刀具交换所需的自动夹紧装置，以及主轴

定向准停装置，以保证刀具和主轴、刀库、机械手等部件动作的正确配合。

(5) 为了扩展机床的功能，实现对 C 轴位置（主轴回转角度）的控制，主轴还需要安

装位置检测装置，以便实现对主轴位置的控制。

4.1.2  数控机床主传动系统的配置方式

作为高效的通用型的加工设备，数控机床的主轴转速应能进行较大范围的调整，以适
应各种加工要求。数控机床主轴转速的调整方法主要有：有级变速（机械变速）、无级变
速、分段无级变速、内置电动机主轴变速（电主轴）等形式。

1 ．有级变速（机械变速）
有级变速指有挡位的转速调整，只能实现几个固定的转速。在这种调速方式中，电动

210 

I
I
l

刑

N

庄
五
了
一
至
＿
宁
土
琴
—
-

机不具备变速功能，而是改变传动装置的

啃合关系，改变传动比实现主轴变速 。 如
图 4-1 中，改变传动轴 DI 上齿轮组的轴

向位置，即可改变齿轮箱的传动比，从而

改变主轴转速。有级变速目前仅用千经

济型数控机床。

2. 无级变速

令

无级变速指无固定挡位的转速调整，

能实现任意指定的转速。在这种调速方

式中，主要通过调整电动机的转速实现主
轴变速，而传动装置的传动比一般保持不
变 。 图 4-2 是交、直流主轴电动机经同

步齿形带传动主轴的传动系统。同时采

图 4-1 机床有级调速系统

用固定在主轴后端的液压缸 5 带动驱动爪 1 和驱动卡爪 2 夹紧或松开工件，并以行程开
关 6 和 7 发出相应的信号。数控机床采用无级变速，不仅能选择到合理的切削速度，而且
还能在运动中自动变速 。 无级变速有机械、液压、电气等形式，数控机床一般采用直流或
交流伺服电动机作为驱动的电气无级变速形式 。 其优点是变速范围宽，能满足目前大多
数数控机床的要求，易于实现丰富的控制功能，而且结构简单，安装调试方便。

5 

3 

2 

图 4-2 无级变速的传动系统

1一驱动爪； 2一卡爪； 3—卡盘； 4—活塞杆； 5—液压缸； 6 、 7一行程开关 。

3. 分段无级变速

在实际生产中，数控机床不需要在整个变速范围内保持恒定功率，一般要求中、高速
段为恒功率传动，在低速段为恒转矩传动 。 分段无级变速结合了电动机无级变速和传动
装置有极变速两种方式，以适应实际加工的需要 。 在这种调速方式中，主轴的变速由电动
机转速的无级变速与传动机构的有级变速相配合来实现。而传动装置通常采用液压拨叉
和电磁离合器等机构，通过拨叉的不同位置或离合器的吸合或分离的不同组合来改变传
动路线，改变传动关系，实现主轴变速档位的调整。图 4-3 示意了咽合式电磁离合器的
结构。当线圈 1 通电后，带有端面齿的衔铁 2 被吸引，与磁枙 8 的端面齿相啃合。衔铁 2
通过花键与定位环 5 相连接，再通过螺钉 7 传递给齿轮 。 隔离环 6 防止磁力线从传动轴
构成回路而削弱电磁吸力。为了保证传动精度，衔铁 2 和定位环 5 采用渐开线花键连接，

211 

23 

45 

6 

7 

保证了衔铁与传动轴的同轴度，使端面间齿轮
可靠啃合。采用螺钉 3 和压力弹簧 4 的结构能
使离合器的安装方式不受限制，不管衔铁是水 8
平、垂直，还是向上、向下安装，当线圈 1 断电时

都能保证合理的齿端面间隙 。

4. 内置电动机主轴变速（电主轴）

电主轴是最近几年在数控机床领域出现的

将机床主轴与主轴电动机融为一体的新技术，
这种变速方式大大简化了主轴箱体与主轴本身

的结构，有效地提高了主轴的转速 。 电主轴由 3
个基本部分组成，即空心轴转子、带绕组的定
子、速度检测元件，其结构示意图如图 4-4 所
示。空心轴转子既是电动机的转子，也是主轴
转子，中空的结构便于夹装刀具或工件；带绕组
的定子和其他电动机相似。电主轴的出现大大
简化了主运动系统，实现了“零传动”，并可改善

9 

图 4-3 啃合式电磁离合器的结构
1 一线圈； 2一衔铁； 3 、7一螺钉；
4一弹簧； 5—定位环； 6一隔离环；

8—磁扼； 9—旋转环 。

机床的动平衡，在超高速切削机床上得到了广泛应用。

密封圈· ·- ．． 一一......

子

压器定子

图 4-4 电主轴结构示意图

4.1.3  主轴轴承的主要配置形式

机床主轴带动刀具或夹具在轴承的支承作用下作回转切削运动时，切削过程中所出
现的切削转矩和切削抗力均通过主轴传递给支承轴承 。 同时，主轴的刚度主要取决于支
承轴承的变形量，而主轴的旋转精度也主要取决于支承轴承的旋转精度。因此，主轴轴承
的选用和配置方式成为影响主轴刚度和精度的决定性因素。目前，数控机床主轴常见的
支承配置形式主要有三种，如图 4-5 所示。

在图 4 — 5(a) 的配置中，前支承采用双列圆柱滚子轴承和 60° 角接触双列向心推力球
轴承组合，后支承采用成对安装的角接触球轴承。这种配置形式使主轴的综合刚度大幅
度提高，可以满足强力切削的要求，因此普遍应用于各类数控机床主轴中 。

在图 4-5(b) 的配置中，，前轴承采用高精度的双列角接触球轴承，后轴承采用单列
（或双列）角接触球轴承。这种配置具有良好的高速性能，旋转精度较高，但承载能力小，

212 

_ffi尸曰门—们，令 卢＿＿昌令

(a) 

(b) 

(c) 

图 4 - 5 主轴的常见支承配置形式

适用于高速 、 轻载和精密的数控机床主轴 。

在图 4-5(c) 的配置中，前后轴承采用双列和单列圆锥轴承。这种轴承径向和轴向
刚度高，能承受重载荷，尤其能承受较强的动载荷，安装与调整性能好 。 但这种配置限制
了 主轴的最高转速和精度，适用于中 等精度，低速、重载的数控机床主轴 。

4.1.4  数控机床主轴内刀具的自动央紧和切屑的清除装置

在加工中心上，为 了 实现刀具在主轴上的自动装卸，除了要保证刀具在主轴上正确定
位之外，还必须设计自动松开、夹紧装 置。 较为典型的主轴部件如图 4-6 所示 。 刀杆采

8 

7 

6 

5 

4 

32 

F 

41 

2 

2 

图 4 - 6 JCS-018 加工中心的主轴部件结构图
1 一刀 柄； 2—拉钉； 3—主 轴； 4一拉 杆； 5一碟形 弹簧； 6-液压缸活塞； 7—液压缸；
8 、 10- 限位行 程开关 ； 9一压缩 空气管接头； 11一螺旋弹簧 ； 12一钢球； 13一端面键 。

213 

用标准的 7:24 大锥度锥柄，刀杆锥柄和主轴锥孔的面配合完成刀具的夹紧和定位，并以
主轴端面键的配合完成扭矩的传递。换刀时首先将压力油通入主轴尾部的液压缸 7 上
腔，液压缸活塞 6 推动拉杆 4 向下移动。将刀柄松开，同时使碟形弹簧 5 压紧。拉杆 4 的
下移使右端的钢球 12 位于套筒的喇叭口处，消除了刀杆上的拉力。当拉杆继续下移时，

喷气嘴的端部把刀具顶松，限位行程开关 10 发出刀具松开的信号，使机械手可方便地取

出刀杆。机械手将刀具装入后，电磁换向阀动作使压力油通入液压缸下腔，液压缸活塞 6

向上退回原位，碟形弹簧 5 复原，使得拉杆 4 始终保持约 lOkN 的拉力，并通过拉杆右端

的钢球 12 将刀杆的尾部轴颈拉紧，当活塞处于上限位置时，相应限位行程开关 8 刀具夹

紧的信号，换刀完成。螺旋弹簧 11 使活塞 6 在换刀完成后始终处在最上位置，以免与拉

杆摩擦。

在换刀过程中，如果主轴锥孔中落入切屑、灰尘或其他污物，在拉紧刀杆时，主轴锥孔

表面和刀杆的锥柄被划伤，甚至会使刀杆发生偏斜，破坏刀杆的正确定位，影响零件的加

工精度。因此，清除主轴孔内的灰尘和切屑也是换刀过程中的一个重要问题，常采用的方

法是使用压缩空气吹屑。在图 4-6 中，当主轴部件处千松刀状态时，主轴顶端的液压缸

与拉杆是紧密接触的，此时，压缩空气通过液压缸活塞 6 和拉杆 4 中间的通孔，由压缩空

气管接头 9 喷出，以吹掉主轴锥孔上的灰尘、切屑等污物，保证主轴孔的清洁。

4.1.5  主轴定向装置

在以镜削、铣削为主的加工中心上，为了实现自动换刀，使机械手准确地将刀具装入
主轴孔中，刀柄的键槽必须与主轴的键位在周向对准；在镜削加工退刀时，以免划伤工件，

要求刀具向刀尖反方向径向移动一段距离后才能退出，需要主轴具有周向定位功能；另

外，在一些工艺条件下，也要求主轴实现准停，所以主轴必须设有准停装置。

目前，主轴准停装置主要分为机械式和电气式两种。

机械式准停主轴指采用槽轮定位盘等机械装置定向。图 4-7 为 V 形槽轮定位盘装

置准停原理图，在主轴上固定一个 V 形槽轮定位盘 3 ，使 V 形槽与主轴上的端面键保持

所需要的相对位置关系。当主轴需要停车换刀时，发出降速信号，主轴转换到最低速运

转，延时继电器开始动作，并延时 4s-6s 后，无触点开关 1 接通电源，当主轴转到图示位

置即 V 形槽轮定位盘 3 上的感应块 2 与无触点开关 1 相接触后发出信号，使主轴电动机

停转。另一延时继电器延时 0.2s-0.4s 后，压力油进入定位液压缸 4 右腔，使定向活塞

向左移动，当定向活塞上的定向滚轮 5 顶入定位盘的 V 形槽内时，行程开关 LS2 发出信

号，主轴准停完成。

电气式主轴准停装置，只要数控系统发出指令信号，主轴就可以准确的定向。图 4-

8 为 JCS-018 加工中心主轴电气准停装置原理图，在带动主轴旋转的多模带轮 1 的端面

上装有一个厚垫片 4 ，垫片 4 上装有一个永久磁铁 3 ，在主轴对应的准停位置，装有磁传感

器 2 。当机床需要换刀时，数控装置发出主轴停转指令，主轴电动机立即降速，以最低转

速运行。当永久磁铁 3 对准磁传感器 2 时，磁传感器 2 发出准停信号，该信号经放大后，
由定向电路控制主轴电动机停在规定的周向位置，同时限位开关发出信号，表示准停过程

完成。

214 

3 

4 

2 

3 

4 

10aa 

D
D
口

图 4-7 机械装置准停原理图

图 4-8 电气装置准停原理图

l一无触点开关； 2—感应块； 3—V 形槽轮定位盘；

1—多模带轮； 2一磁传感器；

4一定位液压缸； 5—定向滚轮； 6—定向活塞。

3—永久磁铁； 4—垫片； 5一主轴。

4.1.6  主轴组件的润滑与密封

为了尽可能减少主轴部件温升热变形对机床工作精度的影响，通常利用润滑油的循

环系统把主轴部件的热量带走，使主轴部件与箱体保持恒定的温度。某些数控机床的主

轴轴承采用高级油脂，用封入方式进行润滑，每加一次油脂可以使用 7 年～ 10 年，简化了

结构，降低了成本，同时维护保养简单。为了防止润滑油和油脂混合，通常采用迷宫密封

方式。

4.1.7  电主轴

传统机床主轴是由电机通过中间变速和传动装置（如皮带、齿轮、联轴节等）驱动主轴

旋转而工作，这样的主轴形式称为分离式和直联式主轴（通称机械主轴）。而电主轴是采

用变频电机与机床主轴合二为一的结构形式，即变频电机的空心转子与机床主轴零件直

接过盈套装在一起成为一体，带冷却套的定子装配在主轴单元的壳体内直接与机床连接，

成为一种集成式电机主轴：电机的转子就是机床的主轴，机床主轴单元的壳体就是电机

座。与传统机床主轴相比，电主轴具有以下优点：省去中间变速和传动装置，结构紧凑、效

率高噪声低、振动小和精度高；利用交流变频技术，可实现无级变速，以适应机床工作时

负载变化的需要；利用闭环矢量控制、伺服控制技术，不仅满足机床低速粗切削时大转矩、

高速精加工时大功率的需求，还可实现准停功能；电主轴更易于实现高速化，其动态精度

和稳定性更好，可适应高速切削和精密加工；电主轴运行平稳，没有外来冲击，主轴轴承所

承受的动负荷较小，延长了其精度寿命；电主轴由制造商进行系列化、规模化和专业化生

产，提高了设计的可靠性。

电主轴的基本参数和主要规格包括套筒直径、最高转速、输出功率、计算转速、计算转

速转矩和刀具接口等。

当前，电主轴的电动机均采用交流异步感应电动机，有普通变频器驱动和控制、矢量

控制驱动器的驱动和控制等两种驱动和控制方式。普通变频器为标量驱动和控制，其驱

215 

动控制特性为恒转矩驱动，输出功率和转速成正比。这类驱动器在低速时输出功率不够

稳定，不能满足低速大转矩的要求，也不具备主轴定向停止和 C 轴功能，但价格便宜。一

般应用于主要在高速段工作的电主轴。近来出现了采用电压／频率＃常数控制策略的新

型变频器，改善了驱动品质。而矢量控制驱动器的驱动和控制的特性为：在低速端为恒转

矩驱动，在中、高速端为恒功率驱动。这种驱动器又有开环和闭环两种，后者在主轴上装

有位置传感器，可以实现位置和速度的反馈，不仅具有更好的动态性能，还可以实现主轴

定向停止千某一设定位置和 C 轴功能；而前者动态性能稍差，也不具备定向停止和 C 轴

功能，但价格较为便宜。

当然，电主轴也有其自身的缺点，主要是电机的散热需要一套冷却装置。目前，世界

上有许多著名的电主轴功能部件专业制造商，它们生产的电主轴功能部件已经系列化，如

瑞士的 FISCHER 、 Step-Tee 和 IBAG ，德国的 GMN 和 CYTEC ，意大利的 CAMFIOR 和

OMLAT 等。

4.2  模拟量控制的主轴驱动装置及维修技术

模拟量控制指的是主轴的速度信号为模拟量形式，即在一定范围内连续变化。模拟

量控制的主轴系统通常由异步电动机、变频器和编码器（可不选）组成。主轴驱动装置，有

普通变频器和闭环主轴驱动装置等，普通变频器的生产厂家很多，目前主要有德国西门子

公司、日本三肯、安川等。闭环主轴驱动装置一般由各数控公司自行研制并生产，如西门

子公司的 611 系列、日本 FANUC 公司的 a 系列等。

4.2.1  变频调速技术概述

1. 变频调速的基本原理

异步电动机的转速为

n  = n从 1 - s)  =宁（ 1 - s) 

式中 s—一异步电动机的转差率， s=(n 。 -n)ln 。;

n 。—一异步电动机的同步转速，即旋转磁场的转速 n 。 =60Jlp;

f1一异步电动机的供电频率。

由上式可知，若改变异步电动机的定子绕组的供电频率，可以改变其同步转速，从而

实现电机的调速。这种调速方式称为变频调速。

2. 变频调速的方式

三相异步电动机定子每相绕组的电动势有效值为

E1 ＝迈1tf1N1kw1 cp 

式中 E1 —一定子各相感应电动势有效值 (V);

f1一一定子频率 (Hz);

216 

N1 —定子相绕组有效匝数；

kw1 —定子绕组因数 (<1);

中—每极磁通 (Wb) 。

异步电动机定子电动势方程式为

呫＝ I1Z1+E1

式中 U1 一定子供电电压 (V);

I1 ——定子电流 (A);

Z1一一定子阻抗 (0) 。

如果略去定子阻抗电压降，则感应电动势近似等于定子外加电压，即

同时转矩为

U1~ 趴＝丘邧 N1kw1 cI> 

T=C吵I2coscp2

式中 I2一转子电流；

coscp2一转子电路功率因数；

CT一—转矩常数。

从上式可以看出，若端电压队不变，则随着八的升高，气隙磁通 0 将减少，又从转

矩公式可以看出，中的减小势必导致电动机允许输出转矩 T 下降，严重时会使电动机堵

转。若维持端电压从不变，而减小八，则中增加，将造成磁路过饱和，励磁电流增加，导

致铁损急剧增加。铁芯过热，这也是不允许的。因此，在调频的同时需改变定子电压 u,

以维持气隙磁通中不变。根据 U 和 J 的不同比例关系，将有不同的变频调速方式。

1) 基频以下恒磁通变频调速

指从基频（电动机额定频率）向下调速的情况。为了保持电动机的负载能力，应保持

气隙主磁通不变。这就要求降低供电频率的同时降低感应电动势，保持 E1 ／八＝常数，即

保持电动势与频率之比为常数进行控制，这种控制又称为恒磁通变频调速。由转矩公式

可以看出，在这种调速方式下，电机的输出转矩不变，因此这种调速属于恒转矩调速

方式。

2) 基频以上的弱磁变频调速

指由基频开始向上调速的情况。频率由额定值向上增大时，电压由于受额定电压的

限制不能再升高，只能保持不变，这样必然会使主磁通随着上升而减小，相当于直流电动

机弱磁调速的情况，即近似的恒功率调速方式。

4.2.2  通用变频器的组成与端子功能

L 变频器的基本构成

变频器主要由主回路和控制回路组成，变频器可按照主电路结构分为交—交和交—

直—交等两种形式。交—交变频器可将固定频率交流电源直接变换成频率、电压均可连

续调节的交流电源，没有中间环节，故又称直接式变频器。交—交变频器电源转换效率

高，但其连续可调的频率范围较窄，一般 O<J＜固定频率 12 ，主要用于容量较大的低速拖

217 

动系统。而交—直—交变频器则是先把工频交流通过整流器变成直流，然后再把直流变

换成频率、电压均可控制的交流，又称间接式变频器。目前常用的通用变频器即属于交—

直—交变频器。通用变频器的内部结构如图 4-9 所示。

MC 

。
三相电源－
。

。

外部顺序
控制信号

顺序控
制指令
输入电路

］忒／

+15V 

频率指
令＄各入

u 
v 

w 

E 

GAL 

姿
护
壬
撫
中
诬
军
纪
壬
薹

D
A
I换转
器

频率计

图 4-9 通用变频器的内部结构框图

1) 变频器的主电路

变频器的主电路主要由整流电路、直流中间电路和逆变电路组成。

整流电路主要对电网的交流电源进行整流后给逆变电路和控制电路提供所需的直流

电源。根据整流元件的不同，整流电路可有二极管整流电路和晶闸管整流电路。二极管

整流电路主要用于 PWM 变频器，其输出直流电压取决千电源电压的幅值。晶闸管整流

电路输出的直流电压是可控的。

整流电路输出的直流电压经中间电路进行平滑处理后送至逆变电路。电压型变频器

中用千直流中间电路的直流电容为大容量铝电解电容。在电源接通时电容中将流过较大

的充电电流（浪涌电流），有烧坏二极管及影响处于同一电源系统的其他装置正常工作的

可能，因而变频器提供了直流电抗器选件，以抑制浪涌电流。

逆变电路在控制电路的作用下将直流中间电路输出的直流电压转换为具有所需频率

的交流电压。逆变器的输出即为变频器的输出，用来实现对异步电动机的调速控制。

218 

变频器对异步电动机进行调速控制时，为了使电动机减速，可以采取降低变频器输出

频率的方法降低电动机的同步转速，从而达到使电动机减速的目的。而在电动机的减速
过程中，由千同步转速低千电动机的实际转速，异步电动机便成为异步发电机，负载机械

和电动机所具有的机械能量被馈还给电动机，并在电动机中产生制动力矩。

变频器的电气制动一般分为能耗制动、电源回馈制动、直流制动三种。直流制动通常

用于几赫兹的低频区域，即电动机即将停止之前，且制动力不能太大，时间也不能太长。

电源回馈制动则将能量通过回馈电路反馈到供电电网上。当然，从节能的角度来看，电源

回馈制动是最好的一种方式，但线路复杂，成本高。通用变频器通常采用能耗制动。

2) 变频器的控制电路

变频器的控制电路与主电路相对应，为主电路提供所需驱动信号。控制电路的主要

作用是根据事先确定的变频器的控制方式产生进行 U/f 或电流控制时所需要的各种门

极驱动信号或基极驱动信号。此外，变频器的控制电路还包括对电流、电压、电动机速度

进行检测的信号检测电路，变频器和电动机的保护电路，对外接口电路和数字操作器的控

制电路。

变频器主控制电路的中心是一个高性能的微处理器，并配以 ASIC、 PROM 、 RAM 芯

片和其他必要的周边电路。它接收检测电路和外部接口电路送来的各种检测信号和参数

设定值，利用软件进行处理，并为变频器提供各种控制信号或显示信息。一个通用变频器

中主控制电路主要完成输入信号处理、加减速率调节功能、运算处理、 PWM 波形演算处

理等，给主驱动电路提供控制信号。

检测电路的主要作用是将变频器和电动机的工作状态反馈至微处理器，并由微处理

器按照事先确定的算法进行处理后为各部分电路给出所需的控制信号和保护信号，以达

到控制变频器输出和为变频器及电动机提供必要保护的目的。

保护电路主要是由微处理器对检测电路得到的各种信号进行算法处理，判断变频器

本身或系统是否出现了异常，以便进行各种必要的处理，包括停止变频器的输出，以对变

频器各系统提供保护。

变频器在控制系统中往往被当作一个部件，并对其提出了更高的要求，因此，其外部

接口电路的功能越来越丰富。变频器的外部接口电路通常包括以下方面：顺序控制指令

输入电路、频率指令（模拟信号）输入电路、监测信号输出电路以及通信接口电路。

数字操作器的主要作用是给用户提供一个良好的人机界面，使变频器控制系统的操

作和故障检测工作变得更加简单。利用数字操作器对系统进行各种运行、停止操作，监测

变频器的运行状态，显示故障内容及发生顺序以及根据系统运行的需要进行各种参数的

设定等。

变频器的保护功能可以分为三类：对变频器本身的保护、对驱动电动机的保护和对系

统的保护。其中变频器本身的保护由变频器自身完成，而对驱动器和系统的保护，则需要

用户根据负载和外部环境设置必要的工作条件。

2. 变频器的分类

变频器的分类方法主要有以下几种。

1) 按直流电源的性质分类

当逆变器输出侧的负载为交流电动机时，在负载和直流电源之间将有无功功率交换，

219 

用千缓冲中间直流环节的储能元件可以是电感或是电容。据此，变频器可分为电流型和

电压型。

电流型变频器的特点是在直流回路中串联了一个大电感，用来限制电流的变化以吸

收无功功率，类似千恒流源。电压型变频器的特点是在直流侧并联了一个大滤波电容，用

来存储能量以缓冲直流回路与电动机之间的尤功功率传送，具有恒压电源的特性。

2) 按输出电压调节方式分类

变频调速时，需要同时调节逆变器的输出电压和频率，以保证电机主磁通的恒定。对

输出电压的调节主要有以下两种方式。

脉冲幅值调节 (Pulse Amplitude  Modulation,PAM) 方式。该方式的变频器中，逆变器

只调节输出频率，而输出电压幅值的调节靠整流器或其他环节完成，由千这种控制方式必

须同时对整流电路和逆变电路进行控制，控制电路比较复杂，而且低速运行时转速波动较

大，因而现在较少采用这种控制方式。

脉冲宽度调制 (Pulse Width Modulation,PWM) 方式。该方式的变频器中，是在逆变

电路部分同时对输出电压的幅值和频率进行控制的控制方式。变频器中的整流器采用不

可控的二极管整流电路，变频器的输出频率和输出电压的调节均由逆变器完成。在这种

控制方式中，以较高频率对逆变电路的半导体开关元器件进行通断，并通过改变输出脉冲

的宽度来达到控制电压的目的。目前在变频器中多采用正弦波 PWM 控制方式，即通过

改变 PWM 输出的脉冲宽度，使输出电压的平均值接近正弦波。这种方式也被称为 SP­

WM 控制。

3) 按主开关器件分类

由于逆变器中主开关器件的性能往往对变频器装置的性能有较大的影响，所以根据

开关元件的种类不同可将变频器分为 SCR 变频器、 GTO 变频器、 BJT 变频器、 MOSFET

变频器、 IGBT 变频器等。 SCR 由千没有自通断能力，需要强迫换流电路，并且开关频率

低，用于逆变器时输出的波形谐波含量大，目前仅在特大容量的变频器中使用； GTO 器件

具有高电压、大电流的特点，但其电流增益太低，所需驱动功率大，驱动电路相对复杂，多

用于功率较大场合；目前 BJT 己多用达林顿管，开关频率相对比较高，在通用 PWM 变频

器中的应用最多； MOSFET 具有开关频率高、驱动功率小的特点，但目前器件的功率等级

低，导通压降大，在商用通用变频器中应用较少； IGBT 是一种双极型复合器件，它是

MOSFET 和 BJT 的复合，兼有两者的优点，具有 MOSFET 的输入特性与 BJT 的输出特

性，驱动功率小，驱动电路简单，且导通电压降低，通态损耗小，其开关频率介于 MOSFET

和 BJT 之间，是一种比较理想的开关器件。随着该器件容量的提高，逐步使 IGBT 变频器

变为通用变频器的主流。

4) 按控制方式分类

按控制方式变频器可分为 U/f 控制变频器、转差频率控制变频器和矢量控制变

频器。

在 U/f 控制变频器中，对输出的频率和电压同时进行控制，又称为 V汃吓控制方式。

主电路中逆变器用 PWM 进行控制，频率指令 f ＊和电压指令 U 之间的关系是由 Ulf 曲线

发生器决定的。电机转速的改变是靠改变频率的设定值来实现的。 U/f 控制是一种转速

开环控制，控制电路简单，负载可以是通用标准异步电动机，通用性强，经济性好。但电动

220 

机的实际转速受负载大小变化的影响，在 f ＊不变的条件下，电机转速将随负载转矩变化

而变化，因而常用千速度精度要求不高的场合。

为了提高调速精度，通过速度传感器检测出速度，可以求出转差角频率，再把它与速

度设定值叠加以得到新的逆变器的频率设定值，实现转差补偿。这种实现转差补偿的闭

环控制方式称为转差频率控制方式。使用转速传感器求取转差角频率，要针对电动机的

机械特性调整控制参数，因而这种控制方式通用性较差。上述两种控制方式的控制思想

都是建立在异步电动机的静态数学模型上，因此，动态性能指标不高。对于动特性要求较

高的场合，须采用矢量控制变频器。

矢量变换控制是 20 世纪 70 年代德国 Blaschke 等人为了提高变频调速的动态性能而

提出来的。其基本思想是把交流异步电动机模拟成直流电动机，能够像直流电动机一样

进行控制。根据交流电动机的动态数学模型、利用坐标变换的手段，将交流电动机的定子

电流分解为磁场分量电流和转矩分械电流，并分别加以控制，即模仿自然解耦的直流电动

机的控制方式，对电动机的磁场和转矩分别进行控制，以获得类似于直流调速系统的动态

性能。

在矢量控制方式中，磁场电流和转矩电流根据测定的电动机定子电压、电流的实际值

经计算求得。磁场电流和转矩电流再与相应的设定值相比较并根据需要进行必要校正。

高性能速度调节器的输出信号可以作为转矩电流（或称有功电流）的设定值。动态频率前

馈控制 dfldt 可以保证快速动态响应。

矢最控制是一种新的控制思想和控制技术，是交流异步电动机的一种理想调速方法，

属闭环控制方式，是异步电动机调速最新的实用化技术。它可以实现与直流电动机电枢

电流控制相匹敌的传动特性，最终能控制电磁转矩。

3. 通用变频器的端子功能

西门子公司的 MICROMASTER 440 系列变频器，可用于三相交流电动机速度控制。

有多种型号（额定功率范围为 120W-200kW) 可供选择。该系列变频器由微处理器控制

并采用绝缘栅型双极性晶体管 IGBT 作为功率输出器件，具有很高的运行可靠性和功能

多样性，具有宽广的参数设置范围、电缆连接简便、模块化设计、配置灵活、详细的变频器

状态信息和全面的信息功能等特点，性能上可实现性能特征、 V/f 控制、内置的直流注入

制动、加速倩戈速斜坡特性，具有可编程的平滑功能、具有比例积分和微分 PID 控制功能

的闭环控制、各组参数的设定值可以相互切换等功能，其脉冲宽度调制的开关频率是可选

的，因而降低了电动机运行的噪声，具有全面而完善的保护功能（如过电压／欠电压保护、

变频器过热保护、接地故障保护、短路保护、电动机过热保护、 PTCIKTY 电动机保护等），

为变频器和电动机提供了良好的保护。对外具有多个继电器输出、多个 0~20mA 模拟量

输出、 6 个带隔离的数字输入、 2 个电压或电流的模拟输入等端口方便用户使用。而且具

有默认的工厂设置参数，满足数最众多的简单的电动机控制系统的使用。同时，还可进行

相关参数设置，使之用于更高级的电动机控制系统。 MICROMASTER 440 变频器在标准

供货方式时装有状态显示板 (SDP ，该板上有两个 LED 指示灯用于指示变频器的运行状

态），如图 4- lO(a) 所示。对很多用户来说，利用 SDP 和制造厂的缺省设置值就可以使变

频器成功地投入运行。如果默认设置值不适合用户设备情况，可以利用基本操作板
(BOP ，图 4 — lO(b)) 或高级操作板 (AOP ，图 4- lO(c) ），或用 PC IBN 工具 Drive Monitor 

221 

(a) 

(b) 

(c) 

图 4 - 10  MICROMASTER 440 变频器的显示板

(a) 状态显示板 (SOP); (b) 基本操作板 (BOP); (c) 高级操作板 (AOP) 。

或 STARTER 等软件，修改变频器的设置值和参数使之匹配。

MICROMASTER 440 系列的变频器具有的网络通信功能，既可用于单机驱动系统，

也可集成到自动化系统中。因此，该系列的变频器广泛的应用千主轴速度控制系统中。

下面即以该系列的变频器为例，介绍通用变频器的端子功能，如图 4-11 所示。

1) 电源端子 (L,PE)

通用变频器的电源可根据输出负载的电压要求选择单相 220V 、三相 380V 等多种电

压形式。电源端子 L 为三相四线制的电源接入方式。

2) 模拟量输入端子

模拟量输入端子由变频器提供的 lOV 电压输出端子 1 和 2 和模拟输入 l(AINl ，端

子 3 、 4) 及模拟输入 2(AIN2 ，端子 10 、 11) 组成。在构成模拟量输入时，端子 1 和 2 可作为

模拟量的电源提供者。而模拟输入 1 可以用于 0~10V 、 0~20mA 和— 10V~+10V 的模

拟量给定量输入，当参数 P1000=2 ，则该端的模拟量输入决定变频器的输出频率，进而决

定电动机的设定转速。模拟输入 2 可用千 0~10V 和 0~20mA 的模拟量给定量输入。

当参数 P1000=7 ，则该端的模拟量输入决定电动机的设定转速。当短接 2 端和 11 、 4 端

时，模拟输入回路可以通过端子 3 和 4 提供两个附加的数字输入 DIN7 和 DIN8 。

3) 开关量输入端子

当采用 SDP 显示板时，变频器的各参数不能修改，为默认设置状态，与开关量有关的
儿个参数设置值为： P0701 = 1; P0702 = 12; P0703 = 9; P0704 、 P0705 、 P0706 = 15; P0707 、

P0708=0 。此时可以由开关量输入端子的状态控制电机的启动、停止和正转、反转控制。

当端子 5(DIN1) 为高电平状态时，电动机启动；为低电平状态时，电动机停止。

当端子 6(DIN2) 为高电平状态时，电动机反转；为低电平状态时，电动机正转。

当端子 7(DIN3) 为高电平状态时，故障复位。

端子 8(DIN4) 、 16(DIN5) 、 17(DIN6) 用于选通设定的固定频率。

端子 9 、 28 为变频器提供的 24V 电源输出，可作为开关量接入端口的电源。

4) 电动机过热保护接入端子
当设定参数 P0601 =  1 ，可采用 PTC 传感器为电动机提供热保护。此时，电动机的

PTC 可接到变频器的控制端 14 和 15 。当电阻值超过 15000 ，变频器将发出报警信号

222 

+lOV 

ov 

最小4.7区

PE 

SI 

PE 

5 

DIN2 

4  三一一一一一 _ 
电k动机：三AOUT l+r--, 

二迈：二三13 

• 

l 由制造厂

1 安装的连线

＿勹

I  外接制动

．单元接线端

-」

CPU 

AOUT2+ 

二迈／：三27 

继电器2熘笠叮勹主二

图 4-11 MICROMASTER 440 变频器的端子功能图

A0510 ，然后出现故障，默认设置为变频器跳闸。

当设定参数 P0601=2 ，可采用 KTY84 传感器为电动机提供热保护。此时，电动机的

223 

热敏二极管 (KTY84) 阳极接到变频器的控制端 14(PTC A) ，阴极接到 15(PTC B) 。 动作
阙值可以用参数 P0604 （默认值为 130t) 设定 。

5) 模拟量输出端子
模拟量输出端子由两组端子 12 、 13 和 26 、 27 组成，可由参数 P0771(0) 和 P0771(1) 分
别指定其反馈实际设定频率、实际输出频率、实际输出电压、实际直流回路电压、实际输出

电流等内容。

6) 继电器输出端子
继电器输出 1 由端子 20(CM) 、 19(NO) 和 18(NC) 组成；继电器输出 2 由端子 22

(CM) 和 21(NO) 组成；继电器输出 3 由端子 25(CM) 、 24(NO) 和 23(NC) 组成。

(1) 制动单元接入端子：当采用外接制动电阻进行制动时，外接制动电阻可接在

D/L ＋和 C/L －端，可实现按线性方式平滑和可控地降低电动机的速度。

(2) 电动机接入端子：三相异步电动机由端子 U 、 V 、 W 和 PE 端接入。
(3) 通信端子：端子 29 和 30 为 RS-485 串行通信接入端口，通信协议有相关参数设

定，可实现和外部设备的信息交换。

4.2.3  变频器的功能参数的设定及操作

如前所述，当采用状态显示板 (SDP) 时，不能修改变频器参数，只能以预先设定好的
参数模式运行。组成控制系统时，常以外部信号控制变频器的运行，即可在模拟输入信号
指定速度下，开关量实现电机的启动和停止、正转和反转控制以及变频器故障复位控制。

当使用基本操作面板 (BOP) 或高级操作板 (AOP) 时，不仅可以修改变频器参数，还可

以直接使用该面板对变频器进行控制 。 基本操作面板的各区域见表 4-1 。

表 4-1 基本操作面板的区域功能

显示仵安钮

功能

功能的说明

P(l) rOOOO  状态显示区

Hz 

LCD 显 示 变频器 当 前的设定值

停止电动机键

启动电动机键

按此键启动变频器

OFFl ： 按此键，变频器将按选 定 的斜坡下降速率减速停车； OFF2 ：按此

键两次或一次但时间较长，电动机将在惯性作用下自由停车 。 此功能

慢l
回
圈 电动机的转动方 按此键可以改变电动机的转动方向，电动机的反向 ， 用负号（－）表示
匝 电动机点动键

在变频器无输出的情况下，按此键将使电动机启动并按预设定的点动

频 率 运行，释放此键时变频器停车

或用闪烁的小数点表示

总是“使能”的

向改变键

224 

显示件安钮

功能

功能的说明

（续）

变频器运行过程中在显示任何一个参数时按下此键并保持不动 2s 将
显示以下参数值：直流回路电压 、 输出电流、输出频率、输出电压或由
参数 P0005 选定的数值 。 连续多次按下将轮流显示以上参数在显示
任何一个参数时短时间按下将立即跳转到刃000 。再按此键将返回原
来的显示点 。

在出现故障或报警的情况下，可以将操作板上显示的故障或报警信息
复位

按此键即可访间参数

按此键即可增加面板上显示 的参数数值

按此键即可减少面板上显示的参数数值

匾

功能键

回 参数访问键

回 数值增加键

回 数值减少键

1. 变频器的功能参数

在 MICROMASTER 440 系列变频器中， “rxxxx” 表示一个只读参数， “Pxxxx" 表示
可设定参数 。 该变频器有 三个用户访问级：标准级、扩展级和专家级 。 利用快速调试可以
方便地进行常用参数的设定，还可以对电动机的参数和斜坡函数的参数进行设定，迅速完
成调速系统的设定。此时能够看到的参数较少，这些参数的数值要么是默认设置，要么是
在快速调试时进行计算。

常用参数的说明如下（其余参数可参考 MICROMASTER 440 系列变频器的说

明书）：

P0003 用户访问级： 1 标准级； 2 扩展级； 3 专家级
POOlO 开始快速调试： 0 准备运行； 1 快速调试； 30 工厂的默认设置值
POlOO 功率、频率的单位选择： 0 功率单位为 kW 、 f 的默认值为 SOHz（以 DIP 开关选）
P0304 额定电动机电压：设定值的范围 10V-2000V；根据铭牌键入的电动机额定电

压 (V)

P0305 电动机的额定电流：根据铭牌键入的电动机额定电流 (A)
P0307 电动机的额定功率：根据铭牌键入的电动机额定功率 (kW)
P0310 电动机的额定频率：根据铭牌键入的电动机额定频率 (Hz)
P0700 选择命令源： 0 工厂设置值； 1 基本操作面板 (BOP);2 端子（数字输入）
PlOOO 选择频率设定值： 1 电位计设定值； 2 模拟设定值 1;
3 固定频率设定值； 7 模拟设定值 2

225 

P1080 电动机最小频率：设置电动机的最小频率 (0-650Hz)

P1082 电动机最大频率：设置电动机的最大频率 (0-650Hz)
P1120 斜坡上升时间：电动机从静止停车加速到最大频率所需的时间 (0-650s)
P1121 斜坡下降时间：电动机从其最大频率减速到静止停车所需的时间 (0-650s)
P3900 结束快速调试： 0 结束快速调试不进行电动机计算或复位为工厂默认设置值；
1 结束快速调试进行电动机计算和复位为工厂默认设置值；

2 结束快速调试进行电动机计算和 I/0 复位；

3 结束快速调试进行电动机计算但不进行 I/0 复位

2. 参数的修改
在使用基本操作面板 (BOP) 时，可按照下列步骤更改参数的数值：

(1) 按参数访问键，则出现访问参数菜单 "rOOOO";

(2) 按数值增加键直到显示出所需修改参数；

(3) 按参数访问键进入参数数值访问级；

(4) 按参数访问键显示当前的设定值；

(5) 按数值增加键或数值减少键修改当前值至所需要的数值；

(6) 按参数访问键确认和存储这一数值；

(7) 按数值减少键直到显示出 “rOOOO";

(8) 按参数访问键返回标准的变频器显示（由用户定义）。

3. 变频器的基本操作

当使用基本操作面板 (BOP) 或高级操作板 (AOP) 时，当参数 P0700 设定为 1 时，可以

直接使用操作面板上相应的按键对电动机的转向和运行状态进行控制。

当参数 P0700 设定为 2 时，可由变频器的数字输入端的状态控制电动机的转向和

运行。

4.2.4  数控机床主轴变频的应用电路分析

变频器在实际系统中往往不是独立运行而是相互连锁的，共同完成系统的变频调速

控制，如图 4-12 所示。图中，交流电源通过断路器或漏电保护的断路器连接至主电路电

源端子 (R 、 S 、 T) 。变频器输出端子 (U 、 V 、 W) 按正确相序连接三相电动机。当运行命令

和电动机的旋转方向不一致时，可在 U 、 V 、 W 三相中任意更改两相接线，或将控制电路端

子 FWD/REV 调换一下。变频器输出频率的设定信号由外部设备（如数控系统）以 0~

lOV 的电压给出，经模拟量接口 1 的端子 3 和 4 接入。而电机的转向和运行控制由变频
器的数字输入端口的状态决定（各输入端子的作用可通过调整变频器参数 P0701 - P0708 

所设定），在图 4-12 中，当数字端子 5 与端子 9 接通时，端子 5 上为高电平，电机正转；当

数字端子 6 与端子 9 接通时，端子 6 上为高电平，电机正转；当数字端子 5 和端子 6 均不

与端子 9 接通时，端子 5 和端子 6 上均为低电平，电机停止。而端子 5 与端子 9 之间的接

通或断开、端子 6 与端子 9 接通之间的接通或断开由两对继电器触点控制，而这两个继电

器可由数控系统所发出的主轴正转和主轴反转指令控制。同时，变频器的数字输出端口

19 和 20 则反馈回数控系统变频器是否准备就绪信号，从而实现数控系统控制下的变频

主轴调速系统。

226 

u 

西门子440变频器
+T-US 
,---------------------7 
? R 

U(Tl) 捍

3X lmm2 BK 

V 

w 

勹；：令wo/

+M-Ml 主轴电动机
r-----------, 
: 
i  " 
I 
l 
l 
I 
l 
I 
I 

I 
I 
l 
L.. 一一一一一了
-=-

@_j 

X22故障输入

IOO

令 9 公共端

；竺/

已~

R-(4) 令

i 

L --------------------

图 4-12 西门子 440 变频器的应用电路

4.2.5  变频器报警代码及维修技术

当变频器出现故障时，如果显示采用状态显示板，则通过两个状态灯的亮、灭、 0.3s

或 ls 的闪亮等状态组合指示故障，用户即可进行相应的处理。

而在基本操作面板 (BOP) 上分别以 Axxxx 和 Fxxxx 表示报警信号和故障信号。常

见的报警信号及其处理见表 4-2 。报警信息以报警码序号的形式存放在参数 r2110 中，

常见的报警信息及其处理见表 4-3 。

表 4 — 2 西门子 440 变频器报警信号及其处理

故障

引起故障可能的原因

故障诊断和应采取的措施

反应

♦ 电动机的功率 P0307 与变频器的

FOOOl 过流

功率 P0206 不对应 ` 

♦ 电动机电缆太长

♦ 电动机的导线短路

♦ 有接地故障

1. 电动机的功率 P0307 必须与变频器的功率

P0206 相对应

2. 电缆的长度不得超过允许的最大值

3. 电动机的电缆和电动机内部不得有短路或

接地故障

4. 输入变频器的电动机参数必须与实际使用

的电动参数相对应

0££2 

5. 输入变频器的定子电阻值 P0350 必须正确

无误

6. 电动机的冷却风道必须通畅，电动机不得

过载
CD 增加斜坡时间
＠减少提升的数值

227 

故障

引起故障可能的原因

故障诊断和应采取的措施

♦ 禁止直流回路电压控制器 (P1240

=O) 

1. 电源电压 P0210 必须在变频器铭牌规定的

♦ 直流回路的电压 r0026 超过了跳闸

范围以内

F0002 过电压

♦ 由于供电电源电压过高或者电动

正确地进行了参数化

电平 P2172

2. 直流回路电压控制器必须有效 P1240 ，而且

机处于生制动方式下引起过电压

3. 斜坡下降时间 Pll21 必须与负载的惯量相

♦ 斜坡下降过快或者电动机由大惯

匹配

量负载带动旋转而处于再生制动 4. 要求的制动功率必须在规定的限定值以内

状态下

♦ 供电电源故障

范围以内

F0003 欠电压

♦ 冲击负载超过了限定值

2. 检查电源是否短时掉电或有瞬时的电压降

1. 电源电压 P0210 必须在变频器铭牌规定的

F0004 变频器 ♦ 冷却风量不足

过温

♦ 环境温度过高

低使能动态缓冲 Pl240=2

1. 负载的情况必须与工作周期相适应

2. 变频器运行时冷却风机须正常运转

3. 调制脉冲的频率必须设定为默认值

4. 环境温度可能高于变频器的允许值

故障值：

P0949= 1 整流器过温

P0949=2 运行环境过温

P0949=3 电子控制箱过温

♦ 变频器过载

1. 负载的工作八司隙周期时间不得超过指定

FOOOS 变频器 ♦ 工作周期时间不符合要求

的允许值

I2T 过热保护 ♦ 电动机功率 P0307 ，超过变频器的 2. 电动机的功率 P0307 必须与变频器的功率

负载能力 P0206

P0206 相匹配

（续）

反应

off2 

off2 

off2 

off2 

1. 负载的工作八司隙周期必须正确

2. 标称的电动机温度超限值 (P0626 - P0628) 

必须正确

3. 电动机温度报警电平 P0604 必须匹配

如果 P0601 =O 或 1 ，检查以下各项：

1. 检查电动机的铭牌数据是否正确。如果没

有，进行快速调试

2 ．正确的等值电路数据可以通过电动机数据

自动检测 P1910= 1 来得到

3. 检查电动机的质量是否合理。必要时加以

offl 

修改

4. 如果用户实际使用的电动机不是西门子生

产的标准电动机，可以通过参数 P0626 \ 

P0627 \  P0628 修改标准过温值

如果 P0601 =2 ，检查以下各项：

1. 检查 ,0035 中显示的温度值是否合理

2. 检查温度传感器是否是 KTY84 ，不支持其

他型号的传感器

FOOll 电动机

过温

电动机过载

228 

（续）

反应

off2 

off2 

off2 

off2 

故障

引起故障可能的原因

故障诊断和应采取的措施

F0012 变频器

温度信号丢失

变频器散热器的温度传感器断线

F0015 电动机

温度信号丢失

电动机的温度传感器开路或短路。如

果检测到信号已经丢失，温度监控开

关便切换为监控电动机的温度模型

F0020 电源断

相

如果三相输入电源电压中的一相丢

失，便出现故障。但变频器的脉冲仍 检查输入电源各相的线路

然允许输出，变频器仍然可以带负载

F0021 接地故 如果相电流的总和超过变频器额定电

障

流的 5 ％时将引起这一故障

当心947=22 和 rll949= 1 时：

(1) 直流回路过流＝ IGBT 短路

F0022 功率组

件故障

(2) 制动斩波器短路

(3) 接地故障

(4)  1/0 板插入不正确

当心947= 22 和 t0949 =  12 、 13 或 14

时：检测 UCE 故障

检查 I/0 板，必须完全插入

off2 

F00531/0  E- 读 I/0 EEPROM 信息时出错或数据 1. 检查数据

PROM 故障

非法

2. 更换 I/0 模块

F0054I/O 板

错误

♦ 连接的 1/0 板不对

♦ I/0 板检测不出识别号检测不到数

据

1. 检查数据

2. 更换 IIO 模板

0££2 

off2 

F0090 编码器

反馈信号丢失

♦ 从编码器来的信号丢失

1. 检查编码器的安装固定情况，设定 P0400=

0 并选择 SLVC 控制方式 (P1300 =  20 或

22) 

2 ．如果装有编码器请检查编码器的选型是否

正确（检查参数 P0400 的设定）

3. 检查编码器与变频器之间的接线

off2 

4. 检查编码器应元故障选择 (P1300 = 0) 。在

一定速度下运行，检查 rll061 中的编码器反

馈信号

5. 增加编码器反馈信号消失的门限值

229 

表 4-3 西门子 440 变频器报警信息及其处理

故障

引起故障可能的原因

故障诊断和应采取的措施

1. 电动机的功率 (P0307) 必须与变频器功率 (P0206)

设定相对应

♦ 电动机的功率与变频器的功率不匹 2. 电缆的长度不得超过最大允许值

A0501 电流限

配

3. 电动机电缆和电动机内部不得有短路或接地故障

幅

♦ 电动机的连接导线太短

4. 输入变频器的电动机参数必须与实际使用的电动

♦ 接地故障

机一致

5 ．定子电阻值（印350) 必须正确无误

6. 电动机的冷却风道是否堵塞，电动机是否过载

1. 电源电压 P0210 必须在铭牌数据限定的数值以内

A0502 过压限

幅

A0503 欠压限

幅

达到了过压限幅值

2 ．禁止宜流回路电压控制器 P1240 =  0 并正确地进

斜坡下降时如果宜流回路控制器无效

行参数化

(P1240=0) 就可能出现这一报警信号

3. 斜坡下降时间 P1121 必须与负载的惯性相匹配

4. 要求的制动功率必须在规定的限度内

供电电源故障

1. 电源电压 P0210 必须在铭牌数据限定的数值以内

供电电源电压印210 和与之相应的直流回 2. 对千瞬间的掉电或电压下降必须是不敏感的使能

路电压心26 低千规定的限定值 P2172

动态缓冲 P1240=2

A0504 变频器

过温

变频器散热器的温度印614 超过了报警

电平将使调制脉冲的开关频率降低和馆戈

输出频率降低（取决于印610) 的参数化

1. 环境温度必须在规定的范围内

2. 负载状态和工作周期时间必须适当

3. 变频器运行时风机必须投人运行

4. 脉冲频率 P1800 必须设定为默认值

A0505 变频器 如果进行了参数化印290 超过报警电平 1 ．检查工作一停止周期的工作时间应在规定范围内

I2T 过温

印294 时输出频率和俚戈脉冲频率将降低 2. 电动机的功率 P0307 必须与变频器的功率相匹配

A0506 变频器

的工作／停止

周期

散热器温度与 IGBT 的结温之差超过了

报警的限定值

检查工作／停止周期和冲击负载应在规定范围内

1. 负载的工作／停机周期必须正确

2. 电动机的过温参数 P0626 - P0628 必须正确

3. 电动机的温度报警电平 P0604 必须匹配如果

P0601=0 或 1 ，请检查以下各项：

A0511 电动机 电动机过载

♦ 铭牌数据是否正确

I2T 过温

负载的工作－停止周期中工作时间太长 ♦ 在进行电动机参数自动检测时 P1910 =O 等效回

路的数据应准确

♦ 电动机的质量 P0344 是否可靠必要时应进行修改

♦ 如果使用的电动机不是西门子的标准电机应通过

参数 P0626 P0627  P0628 改变过温的标准值

1. 环境温度必须在允许限值以内

整流器的散热器温度超出报警值

2. 负载状态和工作周期时间必须适当

运行环境温度超出报警值

3. 变频器运行时冷却风机必须正常转动

请检查以下各项：

1. 环境温度必须在允许限值以内

2. 变频器运行时冷却风机必须正常转动

3. 冷却风机的进风口不允许有任何阻塞

A520 整流器

过温

A521 运行环

境过温

230 

故障

引起故障可能的原因

故障诊断和应采取的措施

A523 输出故障 输出的一相断线

可以对报警信号加以屏蔽

A0535 制动电 1. 增加工作／停止周期 P1237

阻过热

2. 增加斜坡下降时间 P1121

（续）

A0590 编码器

反馈信号丢失

的报警

从编码器来的反馈信号丢失变频器切换

到元传感器矢量控制方式运行

停止变频器，然后

1 ．检查编码器的安装情况如果没有安装编码器应设定

0400=0 并选择 SLVC 运行方式 P1300=20 或 22

2 ．如果装有编码器，请检查编码器的选型是否正确，

检查参数 P0400 的编码器设定

3. 检查变频器与编码器之间的接线

4 ．检查编码器有无故障，选择 P1300=0 使变频器在某

一固定速度下运行，检查 t0061 的编码器反馈信号

5. 增加编码器信号丢失的门限值 P0492

4.3  串行数字控制的主轴驱动装置及维修技术

串行数字控制的主轴驱动装置是指以串行通信方式传送控制信号而组成驱动系统的

形式。常用的串行通信硬件组成有 RS-232 、 RS-485 等，通信介质可以是双绞线，也可
以是光缆等其他形式；通信协议有 SOCORES 、 PROFIBUS 等。常见的产品有： FANUC 的
a 系列主轴驱动装置、 SIEMENS 的 802D 系统、 FAGOR 的 8070 系统等。下面即以

FANUC 的 a 系列主轴驱动装置为例，说明串行数字控制的主轴驱动装置的组成及维修

技术。

4.3.1  电源模块及维修技术

FANUC 的 a 系列主轴驱动装置由电源模块、驱动模块和伺服电机组成。

1. 电源模块的主要作用

电源模块将 Ll 、 L2 、 L3 输入的三相交流电（一般为 200V) 整流、滤波成直流电 (DC
300V) ，为主轴模块和伺服模块提供直流电源；将 200R 、 2OOS 控制端输入的交流电转换成
直流电 (OC24V 、 DC5V) ，为电源模块本身提供控制回路电源；通过电源模块的逆变块把

电动机再生能量反馈到电网，实现回馈制动，如图 4-13 所示。

新型的电源模块已经把主电路中的整流块和逆变块及保护、监控电路等做成一体的

智能模块 (1PM) ，且主电路的滤波电解电容安装在各驱动模块中。

2. 电源模块的结构

FANUC 的 a 系列电源模块结构及接口如图 4-14 所示。各端口说明如下：

De-Link 盒：直流电源 (DC 300V) 输出端。该接口与主轴模块、伺服模块的直流输

入连接端。

句ATUS 状态指示灯 (2 位数码管）：用于表示电源模块的状态。正常时为 “00" ，故

障时为＂＃＃“报警号。 PIL（绿色）表示控制电源正常， ALM（红色）表示电源模块故障。

231 

L1 
L2 
L3 

DC300V 

+24V 
+5V 
ov 

图 4 — 13 电源模块的原理框图

嚣＠

I
PIL（绿）
ALM（红）．．

STATUS 

I 

I 广 1 1-1| 
．. o.  o. . • @ 
1
INPUT  OUTPUT 

3.5A 

IA 

巨 骂二赁忙
DC壹飞千

CXIA 

@ 

CX2A 

JXlB 代二71 <3J 

』伲CX3  CX4 

MCC  ESP 

SI 回＠
S2 

IR且+2I4S V  @ 

+5V 

Ll  L2  L3  @ 
ooo  鳍

图 4-14 FANUC 的 a 系列电源模块结构及接口

CXlA ：控制电路电源电压（输入）。

CX1B:200V 交流输出接口。该端口与主轴模块的 CXlA 端口连接。

CX2A 、 CX2B:DC 24V 输出接口。该端口与伺服模块的 CX2A 端口连接及系统显示

装置的直流电源输入端连接。

直流母排的电压显示（充电指示灯）：该指示灯完全熄灭后，方可对模块电缆进行各种

操作，否则有触电危险。

232 

JXlB ：模块之间的连接接口。与图 4-14 FANUC 的 a 系列电源模块 (PSM) 模块（如

主轴模块）接口的 JXlA 相连，进行各模块之间的报警信息及使能信号的传递。最后一个
模块接口 JXlB 必须用短接盒 (5 、 6 脚短接）将模块间的使能信号短接，否则系统报警。

CX3 ：主电源 MCC（常开点）控制信号接口。一般用于电源模块的电源输入主接触器

控制。

CX4:  *ESP ，急停信号接口。一般与机床操作面板的急停开关的常闭触点相接，不用

该接口信号时，必须将 CX4 短接，否则系统处于急停报警状态。

S1 、 S2 ：再生放电电阻选择开关。老式电源模块内部没有逆变块，电动机的再生发电

能量是通过制动单元的制动电阻放电的， S1 短接（用短路棒）选择内装制动电阻， S2 短接

选择外接制动电阻。现代的电源模块 S1 、 S2 已无此意义。

检测脚的测试端（针）： IR 、 IS 为电源模块交流输入 (Ll 、 L2 相）的瞬时电流值；＋ 24V 、

+5V 分别为控制电路电压的检测端。

L1 、 L2 、 L3 ：三相交流电源输入端 (200V/50Hz) 。与三相伺服变压器的输出端连接。

3. 电源模块维修技术

电源模块报警信息及故障原因见表 4-4 。

表 4 — 4 电源模块报警信息及故障原因

LED 显示

故障名称

故障原因

01 

02 

03 

04 

05 

06 

07 

IPM 报警

风扇报警

过热报警

电路电压低

电源模块冷却风扇发生故障

智能模块 IPM 过热故障

DC  300V 电压低报警

DC  300V 电压为零

DC300V 电压不足报警

DC300V 电压低于标准规定的值

输入电源缺相报警

三相交流动力电源缺相

OC  300V 电压高报警

三相交流输入电压高或内部电压检测电路不良

4.3.2  串行数字控制的主轴驱动装置及连接

FANUC 公司在 20 世纪 90 年代成功地推出了数字交流伺服系列的主轴驱动系统。

主要产品有标准型的 a 系列、广域恒功率输出的心系列、经济型的 aC 系列，可用千

FANUCOC/0D 系统和 FANUC 16/18/21/0iA 系统的主轴驱动。 21 世纪初， FANUC 公

司又推出了最新高速响应、高精度矢量控制的数字交流伺服主轴驱动系统 ai 系列，主要

产品有标准型的 ai 系列、广域恒功率输出的心i 系列、经济型的 c:x.Ci 系列，强制冷却型的
aLi 系列和高电压输入型的 a(HV)i 系列，其中 ai 系列产品用于 FANUC 16i/18i/2li/OiB/ 

OiC 数控系统。

下面以 FANUC 的 a 系列主轴驱动装置为例，介绍主轴驱动装置的结构及功能连接。

1.  FANUC 的＂系列主轴模块

FANUC 的 a 系列主轴模块结构如图 4 — 15 所示。各端口的作用及连接如下：

233 

P、 N:OC Link 端口。与电源模块的直流电源输出端、伺服模块的直流输入端连接。
STATUS ：主轴模块状态显示窗口。 PIL（绿）表示主轴模块控制电路电源正常； ALM
（红）表示主轴模块检测出故障。 ERR（黄）表示主轴模块检测出错误信息；“一一“不闪表
示主轴模块己起动就绪，如果闪，则为主轴模块未启动就绪； “00” 表示主轴模块已启动并

有速度信号输出；“＃＃”表示主轴故障或错误信息。

飞: 。

PIL（绿）
ALM（红）
ERR（黄）

AC 

@ 

贮
＠

骂盆立国笠©

CXlA  CXlB 

DC立呾贮

CX2A  CX2B 

@©®@@@@©@@ 

二
二
日
日
曰
吕

应
JXJXJAJA 
I
A
I
B
众
J
m
y
m
l
昭
m
J
Y
S

@ 

U  V  W 

图 4-15 FANUC 的 a 系列主轴模块

CXlAICXlB: 200V 交流控制电路的电源输入倩订j 接口。 CXlA 与电源模块的

CXlB 接口连接； CXlB 与第 2 串行主轴模块的 CXlA 接口连接（如果机床有 2 个串行主

轴）。

CX2AICX2B: 24V 输入倩础及急停信号接口。 CX2A 与电源模块的 CX2B 连接；

CX2B 与伺服模块的 CX2A 连接。

OCLINK ：充电灯。

JX4 ：主轴伺服信号检测板接口。通过主轴模块状态检测板可获取主轴电动机内装

脉冲发生器和主轴位置编码器的信号。

JXlA/JXlB ：模块之间信息输入俐肚电汇。

JXlA 与电源模块的 JXlB 连接； JXlB 与伺服模块的 JXlA 连接。

234 

JYl ：外接主轴负载表和速度表的连接器。

JA7B ：串行主轴输入信号接口连接器，与 CNC 系统的 JA7A 接口连接。

JA7A ：用于连接第 2 串行主轴的信号输出，与第 2 串行主轴模块的 JA7B 接口连接。

JY2 ：连接主轴电动机速度传感器和电动机过热检测装置（热敏电阻）。

JY3 ：作为主轴位置一转信号用的连接器（为磁传感器即接近开关）。

JY4 ：主轴独立编码器连接器（光电编码器）。

JY5 ：主轴 C 轴（回转轴）控制时，为反馈连接器。

U 、 V、W ：主轴电动机的动力电源接口。
2.  FANUC 的 a 系列主轴模块的连接

图 4-16 为 FANUC 的 a 系列电源模块和主轴模块的连接图，三相动力电源 (380V)

通过伺服变压器（把 380V 电压转换成 200V 电压）输送到电源模块的控制电路输入端、电

源模块的主电路的输入端和作为主轴电动机的风扇电源。 JY2 连接到内装了 A、 B 相脉

冲发生器的主轴电动机， JY2 作为主轴电动机的速度反馈及主轴电动机过热检测信号接

口。 JY4 连接到主轴位置编码器，实现主轴位置及速度的控制，完成数控机床的主轴与进

给的同步控制及主轴准停控制等。 CX4 连接到数控机床操作面板的系统急停开关，实现

硬件系统急停信号的控制。

急停开关

I  CX4 
ESP 
+24V 

p 
N 
CXlB 
200S 
CXlA 
200R 
200S  电 CX28 
200R  源
模 +24V 
ov 
块
Es~ 

p 
N 
CXlA 
200S 
200R 

主
+24V  轴

I OV 

$ 

JXIB  I 

I JXIA 

JXlB 

尸

CNC 的
JXIA 

I 来自主轴独立
缩码器

JY4 

JY2 

图 4-16 FANUC 的 a 系列主轴模块的连接图

4.3.3  串行数字控制的主轴驱动装置报警代码与故障原因分析

数控机床的主轴出现故障时，主轴模块的 ALM （红色）灯亮且 LED 两位数码管用来

显示相应的报警代码。表 4-5 为 FANUC 的 a 系列主轴模块报警代码及故障原因

分析。

235 

表 4-5 FANUC 的 a 系列主轴模块报警代码

SPM 显示

故障内容

故障原因及处理

主轴模块 ROM SPM 控制电路板上 ROM 系列错误或硬件异常。心更换 SPM 控制电路板上的

出错

ROM。＠更换 SPM 控制电路板

主轴模块 RAM SPM 电路板上的 CPU 外围电路异常或 RAM 版本不正确。 O更换 SPM 控制电路

出错

板。＠主轴初始化或更换主轴模块

电动机内部温度超过了规定的温度（热控开关动作）。 O检查外围设备的温度以及

主轴电动机过热 负载状态，降低进给切削量。＠如果主轴电动机冷却风扇不转，更换风扇。＠用万

报警

用表检查电动机过热保护开关之间的电阻应为短路。如果开路，更换热控开关。

＠检查 JY2 插头连接是否良好

主轴电动机的速度与指令速度相差较大。 O 电动机或动力线是否正常，动力线可

主轴电动机速度 用万用表或兆欧表检查出。＠电动机动力线相序是否接错，按规定正确接线。＠

超差报警

电动机内装速度传感器不良，更换速度传感器。＠主轴参数设定不正确，进行系统

主轴参数初始化。＠主轴模块或系统故障，通过替换主轴模块来判别

主轴模块电压不 主轴模块主回路 DC300V 熔断器熔断。心主轴模块的逆变块短路，更换主轴模块。

足报警

＠主轴电动机侧短路，更换电动机。＠电压检测电路不良，更换主轴模块控制板

主轴模块的逆变

块温度过高报警

主轴模块过电压

报警

主轴模块过电流

报警

主轴模块通信异

常报警

主轴位置编码器
断线报警

主轴模块的温度超过规定的温度。 O 主轴模块散热片的风扇故障，更换风扇。＠

主轴过载，降低切削进给量。＠主轴电动机参数设定与实际电动机不符，进行主轴

参数初始化操作。＠主轴模块故障或主轴模块温度检测坏，更换主轴模块

主轴模块 DC300V 电压超过了规定电压。 O 电源模块提供的直流电压过高，检修

电源模块。＠主轴电动机参数设定与实际电动机不符，进行主轴参数初始化操作。

＠主轴模块电压监控电路坏，更换主轴模块

直流电源回路电流异常，或 1PM 模块输出电流异常。 O 主轴电动机绝缘坏。更换

主轴电动机。＠主轴参数设定与实际电动机不符，进行主轴参数初始化操作。＠

主轴模块电流监控电路坏，更换主轴模块

主轴模块与 CNC 系统通信数据异常。 CD 外界干扰或系统停止工作而主轴模块控

制电源还工作，系统重新上电启动。＠通信电缆连接坏或断路，修复连接电缆及插

头。＠系统主轴控制模块或主轴模块坏，更换相应的控制模块

主轴位置编码器信号异常。 CD主轴位置编码器连接电缆坏，修复连接电缆及插头。

＠主轴位置编码器坏，更换编码器。＠主轴参数设定错误，重新设定系统主轴参

数。＠主轴模块控制板坏，更换主轴模块

主轴电动机速度 主轴电动机速度检测器异常或电动机没有按给定的速度旋转。 O 主轴电动机速度

信号低报警

传感器坏，更换电动机速度传感器。＠主轴模块速度检测电路坏，更换主轴模块

主轴参数设定了超过允许范围的值。 CD 检查电动机代码参数是否正确 (0 系统

主轴参数异常报 6633,16,18/0i 系统 4133) ；如果正确，检查是否在修改上述电动机代码后没有初始

警

化 (6519# 7 /4019 #  7 改为 1 ，关机重启），正确设定并执行初始化操作。＠主轴模

块坏，更换主轴模块

AO 

Al 

01 

02 

03 

09 

11 

12 

24 

27 

31 

34 

236 

4.3.4  串行数字控制的主轴系统的参数设定与初始化操作

1. 系统参数的设定
虽然系统出厂时已把串行数字主轴电动机的标准控制参数存储在系统中，但是还需
对其进行调整，使之与实际使用的主轴电动机状况相对应。而主轴参数初始化前，还必须

进行系统相关功能参数的设定，才能正确进行主轴参数初始化。下面以 FANUC 系统为

例，介绍串行数字主轴相关的功能参数。

1) 串行数字主轴控制功能选择参数及串行主轴个数选择参数
FANUCOC/OD 系统串行主轴控制功能选择参数为 71 #  7, "O” 为模拟量控制主轴，

“1” 为串行数字控制主轴；串行数字主轴个数选择参数为 71#4, "O” 为 1 个， “1” 为 2 个。

FANUC 16/18 心 1/0i 系统串行主轴控制功能选择参数为 3701 # l, "l” 为模拟量控制
主轴， “0” 为串行数字控制主轴；串行数字主轴个数选择参数为 3701 #4, "O” 为 1 个， “1"

为 2 个。

2) 主轴位置编码器控制功能选用参数
FANUCOC/0D 系统串行主轴位置编码器控制功能选用参数为 6501 #2, "O” 为不用，

“1” 为使用主轴位置编码器。

FANUC 16/18 戊 1/0i 系统串行主轴位置编码器控制功能选用参数为 4001 #2, "O” 为

不用， “l” 为使用主轴位置编码器。

3) 主轴与位置编码器的传动比参数

FANUCOC/OD 系统主轴与位置编码器传动比参数为 28#6 、 28#7 ，使用二进制代码

组合设定，分别为 1:L1:2 、仁 4 和 1:8 ，通常设定为 “00" ，即 1:1 。

FANUC 16, 18121/0i 系统主轴与位置编码器传动比参数为 3706 #0 、 3706# 1 （二进

制代码组合设定，分别为 1:1 、仁 2 、 1:4 和 1:8) ，通常设定为 “00” ，即 1:1 。

4) 主轴速度到达检测功能参数

FANUCOC/OD 系统主轴速度到达检测功能参数为 24#2, "O” 为不检测主轴到达速

度， “1” 为检测主轴到达速度。如果设定为 “1" ，系统 PMC 控制中还要编制程序实现切削

进给的开始条件。

FANUC 16/18121 /0i 系统主轴速度到达检测功能参数为 3708#0, "O” 为不检测主轴

到达速度， “1” 为检测主轴到达速度。如果设定为 “1" ，系统 PMC 控制中还要编制程序实

现切削进给的开始条件。

5) 主轴齿轮挡位的最高速度参数

主轴第一挡～第四挡的最高转速设定参数： FANUC OC/0D 系统分别为 540-543;

FANUC 16/18/0i 系统分别为 3741-3744 。

主轴的挡齿轮比（高挡、中高挡、中低挡、低挡）： FANUC OC/OD 系统分别为 6556~

6559;FANUC 16/18/0i 系统分别为 4056-4059 。

6) 主轴电动机最高转速设定参数

FANUCOC/0D 系统为 6520;FANUC 16/18/0i 系统为 4020 。

2. 主轴模块标准参数的初始化

主轴模块标准参数的初始化，就是将主轴的设定参数（数控系统厂家设定的初始值）

237 

按 FANUC 标准主轴电动机型号进行重新覆盖。对千 FANUC 系统，主轴模块标准参数

初始化的步骤如下：

(1) 系统急停状态，打开电源。
(2) 将主轴电动机型号的代码（参见相应说明）设定在系统串行主轴电动机代码参数

中。 FANUCOC/0D 系统参数为 PRM6633;FANUC 16/18/0i 系统参数为 PRM4133 。

(3) 将自动设定串行数字主轴标准值的参数 (LDSP) 置为 “1” 。 FANUCOC/0D 系统

参数 PRM6519#7 置为 “1" ;FANUC 16/18/0i 系统参数 PRM4019 样 7 置为 “1” 。

(4) 将电源关断，再打开，主轴标准参数被写入。

3. 串行数字主轴伺服参数调整

l) 主轴伺服界面显示
先设定串行主轴伺服界面显示参数 (SPS) (FANUC  OC/0D 为系统参数 389 #  l; 

FANUC 16/18/0i 为系统参数 3111 #  1) 为 “1” 后，可显示主轴伺服画面。

对千 FANUCOC/0D 系统，按＂诊断／参数功能”键，再按“主轴伺服界面软键＂键；而

FANUC 16/18/0i 系统，则顺序按下”系统功能”、”系统扩展软键＂、“主轴伺服界面软键＂

后，则在屏幕上显示主轴伺服界面。

2) 主轴伺服参数调整

通过系统软键 ([SP.SET] 、［ SP.TUN] 、 [SP.MON] ）选择相应的主轴伺服界面，即可

进行相应参数的调整。

按下 [SP.SET] （主轴设定界面软键），显示主轴设定界面。在该界面中，可以进行主

轴的齿轮挡位、主轴放大器、齿轮比参数、主轴最大转速、电动机最高转速和 C 轴最高转

速等参数的选择。

按下 [SP.TUN] （主轴调整界面软键），显示主轴调整界面。在该界面中，可以进行主

轴的运行方式（通常运行、主轴定向、同步控制、刚性攻螺纹、 Cs 轮廓控制）、调整参数（比

例增益、积分增益、回路增益加减速时间常数参数）、主轴和电动机的转速等参数的

选择。

按下 [SP.MON] （主轴监控界面软键），显示主轴监控界面。在该界面中，可以显示主

轴的运行及报警状态（运行方式、电机转速、主轴转速）、负载表显示（显示当前主轴电动机

的负载大小）、控制输入信号 (SFR （主轴正转信号）、 SRV （主轴反转信号）、 ORCM （主轴定

向信号）了 EST （主轴急停信号）、 ARST （报警复位信号））和控制输出信号 (SST （主轴零

速信号）、 SDT （主轴速度检测信号）、 SAR （主轴速度到达信号）、。RAR( 主轴定向结束信

号）、AL( 主轴报警信号）等参数的状态。

4.3.5  串行数字控制的主轴系统报警号及故障诊断方法

当主轴驱动系统出现故障时， CNC 系统就会显示相应的报警号及诊断信息，通过报

警号及相应的诊断信息就可以确定故障原因及故障部位。

1. 串行主轴通信错误报警

接通电源后，系统起动过程中发生串行通信故障时报警。 FANUC OC/0D 系统的报

警号为 408,FANUC 16/18/0iA 系统及 FANUC 16i/18i/0iB/0iC 系统的报警号为 749 。

产生故障的原因及处理方法如下：

238 

1) 连接电缆接触不良、断线故障

仔细检查连接电缆，找出故障并修复。

2) 主轴参数设定与系统主轴硬件配置不符

FANUCOC/0D 系统参数 71#7 （模拟量主轴与串行主轴选择）、 71#4 （串行主轴个数
选择）； FANUC 16/18/0iA 系统及 FANUC 16i/18i/OiB/OiC 系统参数 3701 #  1 （模拟量主

轴与串行主轴选择）、 3701 #4 （串行主轴个数选择）与系统配置要一致。

3) 主轴模块内部电路不良

如果主轴模块状态指示为 “AO” 或 “Al” 时，说明主轴模块的 ROM 或控制电路不良，

需要更换主轴模块。

4) 外界干扰

检查主轴通信电缆的屏蔽是否良好，电箱内部的通信电缆走向是否合理等。

5) 系统内主轴控制模块故障

如果以上故障都排除后，故障仍然存在， FANUCOC/0D 系统则需要更换系统存储板
或主板； FANUC 16/18/0iA 系统则需要更换系统主轴控制模块或系统主板； FANUC 16i/ 

18i/OiB/OiC 系统则需要更换系统母板。

2. 串行主轴回路启动不良报警

在使用串行主轴的系统中，通电时主轴放大器没有达到正常的启动状态时，发生该报

警。 FANUC 16/18/0iA 系统及 FANUC 16i/18i/OiB/OiC 系统的报警号为 750 。

产生故障的原因和处理方法如下：

1) 连接电缆接触不良、断线故障

仔细检查连接电缆，找出故障并修复。

2) 主轴模块控制电路故障

该报警是在电源接通时，系统启动前发生的。当主轴模块的辅助电源 (AC 200V) 及

内部控制电路出现故障时，也会产生该报警。检查辅助电源连接电缆 CXlA 接触是否良

好及电源电压是否正常。检查主轴模块内部控制电路是否正常工作。

3) 串行主轴参数不良

主轴功能参数设定与系统硬件配置、系统软件不符。进行主轴参数初始化就可以解

除该报警。如果故障仍然存在，则需要更换主轴模块。

4)  CNC 主轴串行通信模块不良
FANUC 16/18/0iA 系统需要更换 CNC 上的主轴控制模块； FANUC 16i/18i/0iB/OiC 

系统需要更换系统母板。

3. 主轴故障报警
当主轴系统出现故障时， FANUC OC/0D 系统会出现 “409(AL- x  x)“ 报警号；
FANUC 16/18/0iA 系统会出现 “75l(AL. XX)“ 报警号； FANUC 16i/18i/OiB 系统会出

现“71X X“ 报警号； FANUC 16i/18i/0iC 系统（新型伺服软件）会出现 “9X XX“ 报警号，

其中 “XX”就是主轴模块上的报警号。产生的故障原因及处理方法参考串行主轴模块报

警代码表。

4. 串行主轴的系统诊断号
FANUC 16/18/0iA 系统和 FANUC 16i/18i/OiB/OiC 系统的串行主轴诊断号如下：

239 

1) 系统诊断号 400
该诊断号为一个字节的数字，只使用低五位，其各位意义如下：
#4(SAI) :0一不使用模拟主轴控制； 1 －使用模拟主轴控制。
#3(SS2) :0—串行主轴控制中不使用第 2 主轴； 1 －串行主轴控制中使用第 2 主轴。
#2(SSR) :0一不使用串行主轴控制； 1 －使用串行主轴控制。
#l(POS) 模拟主轴控制所需要的模块： 0 －没安装； 1 －已安装。
#O(SIC) 串行主轴控制所需要的模块： 0- 没安装； 1 —已安装。

2) 系统诊断号 408
该诊断号为一个字节的数字，第六位无意义，使用其余七位，各位意义如下：
#O(CRE) ：出现 CRC 错误（报警）；＃ l(FRE) ：出现帧频错误（报警）；＃ 2(SNE) ：发／
收信号有误；＃ 3(CER) ：收信号时出现异常；＃ 4(CME) ：自动扫描时没有应答信号；＃ 5
(SCA) ：主轴放大器出现通信报警；＃ 7(SSA) ：主轴放大器出现系统报警。这些故障会引
起 749 号报警，而出现这类故障的主要原因是噪声、断线及电源瞬间中断。

3) 系统诊断号 409
该诊断号为一个字节的数字，只使用低四位，其各位意义如下：
#3(SPE) 串行主轴单元控制参数： 0—满足主轴起动条件； 1 一不满足主轴起动

条件。

#2(S2E) :0一第 2 主轴正常启动； 1 —第 2 主轴不能正常启动。
#  l(SlE) :0—第 1 主轴正常启动； 1 —第 1 主轴不能正常启动。
#O(SHE) :0—CNC 侧的串行通信模块正常； 1—CNC 侧的串行通信模块出现异常。

这些故障都会引起 750 号报警。

4.4  数控机床主轴的位置与速度控制装置及故障分析

一般情况下，机床主轴的控制系统为速度控制系统，而机床伺服轴的控制系统为位置
控制系统。目前主轴电动机的调速控制仍然采用异步变频调速，通过主轴电动机内装的
速度检测装置的反馈信号实现主轴电动机的速度反馈控制，即具有速度反馈的电流矢量
控制，更好地满足了主轴电动机的速度控制精度及动态指标的要求。当机床主轴驱动单
元使用了带速度反馈的驱动装置以及标准主轴电机时，主轴可以根据需要工作在伺服状
态。此时，主轴编码器作为位置反馈元件使用。

4.4.1  串行数字控制的主轴电动机速度检测装置（编码器作用与原理）

一般情况下，机床主轴的控制为速度控制系统，而机床伺服轴的控制为位置控制系
统。即主轴编码器一般不是用于位置反馈的（也不是用于速度反馈的），而仅作为速度测
量元件使用，从主轴编码器上所获取的数据，一般有两个用途：其一是用于主轴转速显示；
其二是用于主轴与伺服轴在配合运行的场合（如螺纹切削加工、恒线速度加工、 G99 转进
给等）。

机床的主轴编码器一般直接安装在主轴上或安装在主轴附近用相应传动装置与主轴

240 

相连，使其能如实地向数控系统反映主轴的转速、方向等信号。主轴编码器一般有三个信
号： A 、 B 和 Z ，其中 A 、 B 为相差 90° 的脉冲信号，这两个信号主要反映主轴的转速与方向。
数控系统根据两信号单位时间的脉冲数来计算主轴的速度，根据 A 、 B 信号之间的相位差
来判别主轴的旋转方向。 Z 为零脉冲信号，主轴每转一圈，发一个零脉冲信号，该信号主

要给系统在加工时提供相关基准信号。

4.4.2  数控机床主轴独立编码器的作用与信号连接

一般情况下，主轴电动机与主轴并不是直连的，主轴电动机的内装传感器反馈信号并

不是主轴速度和位置的直接反馈信号。要实现主轴的速度和位置（主轴的转角）的精确控

制，必须安装独立编码器作为主轴的反馈信号。

1 ．主轴位置编码器的作用

1) 实现主轴与进给运动的同步控制

数控车床的车螺纹及数控铣床、加工中心的攻螺纹加工时，为了满足切削螺距的需

要，要求主轴每转一周，刀具准确地移动一个螺距（导程）。系统通过主轴编码器的反馈脉

冲信号实现主轴旋转与进给的插补功能，完成主轴位置脉冲的计数与进给同步控制。

2) 实现恒线速度切削控制

数控车床和数控磨床进行端面或锥形面切削时，为了保证加工表面粗糙度保持一定

的值，要求刀具与工件接触点的线速度为恒定值。随着刀具的径向进给和切削直径的逐

渐减小或增大，应不断提高或降低主轴速度，保持线速度 (v=2穴dn) 为常数。 d 为刀具位

置反馈信号（即工件的切削直径）， v 为加工程序指定的恒线速度值，上述数据经过系统软

件处理后，传输到主轴放大器作为主轴的速度控制信号，并通过主轴编码器的反馈信号准

确实现主轴的速度控制。

3) 实现主轴定向准停控制

加工中心自动换刀时，为了使机械手对准刀柄实现准确换刀，主轴必须停在固定的径

向位置。在固定切削循环中，如精镜加工，要求刀具必须停在某一径向位置才能退刀。以

上功能都要求主轴能准确地停在某一固定位置上，这就是主轴定向准停控制功能。现代

数控机床的主轴定向准停控制功能是通过主轴上的编码器实现控制，此时主轴的控制为

PMC 控制。当系统接收到主轴位置编码器的一转信号后，主轴就按 PMC 程序规定的方

向、速度转过固定角度准确停止。

4) 实现主轴刚性攻螺纹控制

攻螺纹操作时不使用浮动夹头，而是由主轴的回转和攻螺纹进给同步运行实现。主

轴回转 lr ，攻螺纹轴的进给量等千丝锥的螺距，这样可提高精度和效率。要实现刚性攻

螺纹，主轴上必须装有位置编码器（通常是 1024 脉冲／r ），并要求编制相应的梯形图，设定

有关的系统参数。

2. 主轴编码器信号及连接

主轴编码器一般与主轴采用 1:1 齿轮传动且采用同步带连接，编码器为 1024 脉冲／

r ，经过系统 4 倍频电路得到 4096 个脉冲。 FANUC 系统的 a 系列主轴电动机的编码器和

其主轴放大器的速度反馈的信号及连接图如图 4-17 所示。图中的 PA了 PA 为编码器

的 A 相反馈脉冲信号， PB 、 *PB 为编码器的 B 相反馈脉冲信号， A 、 B 相反馈信号作为电

241 

p 

* 

*-

P 

p 

厂－－－．
l 
l 
I 
I 
I 
I 
l 
l 
I 
I 
I 
I 
I 
l 
I 
I 
I 
l 
I 
I 
I 
I 
l 
l 
I 
I 
I 
I 
l 
l 
I 
I 
I 
I 
I 
l 
I 
I 
I 
I 
1
上』
接地板匕－－－ J

* 

主
轴
放
大
器

9 、 18 、 20

12、 14 、 16

主
轴
位
置
编
码
器

图 4-17 FANUC 系统的 a 系列主轴位置编码器信号及接线图

动机的速度和辨向信号。 MZ 、 *MZ 为编码器的 Z 相反馈脉冲信号（内装脉冲发生器无此
信号）， Z 相反馈信号作为电动机的一转信号。＋ 5V 、 ov 为电动机内装检测装置的输入

电源。

4.4.3  主轴的位置装置检测常见故障及维修技术

1 ．主轴电动机速度检测装置自身的常见故障

1) 主轴电动机的速度超差报警（放大器为 AL.02)
主轴电动机的指令速度脉冲数与电动机反馈速度脉冲数的差值超过了规定值。主要
原因有电动机的连接电缆 JY2 接触不良、电动机的相序接反、电动机内装的速度检测装

置故障及系统不良。

2) 主轴电动机的速度反馈脉冲电压低报警（放大器为 AL.31)
a 系列主轴电动机和主轴放大器的速度反馈信号的连接产生故障的主要原因是系统

提供的＋ 5V 电压低、电动机内装检测装置不良及系统主轴控制不良。

2. 与主轴电动机速度检测装置关联的常见故障

1) 不执行螺纹加工
(1) 工作原理：数控车床螺纹加工实质就是主轴旋转与 Z 轴直线进给之间的插补。当
执行螺纹加工指令时，系统得到主轴位置检测装置发出的一转信号后开始进行螺纹加工，根
据主轴的位置反馈脉冲进行 Z 轴的插补控制，即主轴转一周， Z 轴直线进给一个导程。

(2) 故障原因：对于 FANUCOTD 系统，产生故障的可能原因如下：
0 主轴编码器与系统之间的连接不良。
＠主轴编码器的位置信号 PA了 PA 、 PB 、 *PB 不良或连接电缆断开。
＠主轴编码器的一转信号 PZ 、 *PZ 不良或连接电缆断开。

＠系统或主轴放大器故障。
(3) 故障处理及维修技术：对千原因 CD产生的故障，可通过检查连接电缆接口及电缆
线找出故障并修复，如果采用主轴放大器 (FANUC 串行主轴放大器），系统会出现 409
(AL.27) 报警。对于原因＠产生的故障，可通过系统显示装置上是否有主轴速度显示来
判别，如果无主轴速度显示则为该类报警。对于原因＠产生的故障，可通过加工指令 G99

242 

（每转进给加工）和 G98 （每分钟进给加工）切换来判别，如果 G98 进给切削正常而 G99 进
给切削不执行，则为该类故障。如果以上故障都排除，则为系统本身故障，即系统存储板

或系统主板故障。

2) 螺纹加工出现“乱扣＂

(1) 工作原理：一般的螺纹加工要经过几次切削才能完成，每次重复切削时，开始进

刀的位置必须相同。为保证重复切削不乱扣，数控系统接收主轴编码器中的一转信号后

才开始螺纹切削的计算。

(2) 故障原因及处理：当系统得到的一转信号不稳时，就会出现“乱扣“现象。产生故

障的原因是主轴编码器的连接不良、主轴编码器的一转信号或信号电缆不良、主轴编码器

内部有脏东西或编码器本身不良。如果以上故障排除后系统还乱扣，则需要检查系统或

主轴放大器。

3) 螺纹加工出现螺距不稳

(1) 工作原理：数控车床螺纹加工时，主轴旋转与 Z 向进给之间进行插补控制，即主

轴转一周， Z 向进给一个螺距或一个导程（多头螺纹加工）。

(2) 故障原因：如果产生螺距误差是随机的：产生故障的可能原因是主轴编码器连接

不良、主轴编码器内部太脏、 Z 轴位置编码器不良、 Z 轴电动机与 Z 轴连接松动。

如果产生螺距误差是固定的：产生故障的可能原因是主轴位置编码器与主轴连接传

动比参数设定错误或系统软件不良。

4) 主轴定向停不能完成

(1) 工作原理：主轴定向控制是将主轴准确停在某一固定位置上。数控机床主轴准

停以主轴编码器实现，当接收到主轴准停指令时，主轴按规定的方向以系统参数设定的速

度或 PMC 设定的速度慢速旋转，数控系统得到主轴编码器的一转信号后，就准确停在固

定位置。

(2) 故障原因：如果主轴定向过程中无慢速旋转动作，则故障为系统硬件或软件故

障。如果主轴定向过程中有慢速旋转动作，则系统得不到主轴位置编码器的一转信号，故

障原因为主轴位置编码器或信号电缆故障、主轴放大器或系统故障。

5) 加工中心换刀过程的掉刀

(1) 工作原理：加工中心自动换刀时，为了使机械手对准刀柄实现准确换刀，主轴必须停

在固定的径向位置。换刀过程中出现掉刀具的现象，说明主轴准停不准或定位位置偏移。

(2) 故障原因：该故障的可能原因是主轴位置编码器一转信号不良或主轴机械调整

不当。

4.5  故障实例分析

4.5.1  主轴定向过程中的 AL-02 报警

BXllOP 卧式加工中心， FANNC-llME 。 AC 主轴 AL-02 号报警。

1 ，故障现象

当执行 M06 换刀时，主轴定向过程中发生报警，控制柜上的 ALARM 点亮，指示

243 

SPINDLE 报警。当执行 M19 定向时，也发生同样故障。在这之前曾经偶尔发生加工过

程中速度突然变慢，而后又恢复正常的现象。

2. 故障分析

根据报警现象，判断故障在主轴伺服单元上，经查主轴伺服单元印制板上显示 AL-

02 报警，内容为速度偏差超过指令值，伺服与电动机控制接线不良。为了观察主轴箱定

向与运转情况，把主轴箱下降到最低点时，启动主轴又能转动起来，这说明故障是有位置

的，当用手摇脉冲发生器到 Y 轴（主轴箱）某一位置时，又发生同样报警。由此分析，伺服

与电动机信号控制断线，接触不良的可能性非常大。拆开 HD ，轻轻拉一下接线头，有一

线脱落，由于有其余线连着有时还接触，所以有时又通路。

3. 故障处理

焊接修复后，主轴运行正常。

4.5.2  驱动系统出现交流伺服电机过热报警的故障维修

L 故障现象

XH756B/1 加工中心，主轴电机为 FANUCa 18 门OOOi 永磁交流同步伺服电机，在加

工过程中出现 9001 ＃报警，电机过热，电机温度由 22'C 急剧上升到 120'C 。诊断号

以N408 中显示电机温度 120'C ，温升太快且不正常。

2. 分析判定

根据对主轴驱动系统原理的分析以及以往的维修经验，电机过热的原因，可能由以下

原因引起：电动机过载；电动机冷却系统污染，影响散热；电动机内部故障；温度检测不良

或连接故障。

3. 维修过程

为了判定是否为机械负载的原因，将主轴与伺服电机脱离，空载试电机，在 MDI 方式

下输入 M03 S300 ，然后执行，出现 9021 ＃报警，原因是，主轴位置编码器通过齿轮与主轴

相连，主轴脱离，编码器就没有了，此时必须采取修改参数的方法，将编码器屏蔽掉。

4002.1 由 “1” 改为 “0",4394.5 由 “0” 改为 "1",9021 ＃报警消失。执行 M03 S300 ，主轴转

动起来， 25min 后，温度由 22'C 上升到 56'C ，检测三相电流基本平衡， 18A 左右，指正偏摆

幅度大，空载电流高，不正常，将电机拆下检查，发现定子和转子的空隙中充满了冷却油，

原因是密封圈损坏，油位过高所致。从理论上分析，气隙中充满油后，磁阻变大，电机电流

变大。

将油清理干净，用压缩空气吹干净，并用灯泡烤干定子绕阻，将电机装上，开机出现

9031 ＃报警（温度传感器故障），经检查， JY2 插头未插在主轴模块上，将脉冲发生器内置

插头和电动机 C3 插头连接在接口上，故障排除。

4.5.3  驱动系统出现过电流报警的故障诊断与维修

1 ．故障现象

一台配有 FANUC 系统和 ai 主轴驱动系统的卧式加工中心，在加工时主轴运行突然

停止，驱动器显示过电流报警。

244 

2. 分析判定

检查交流主轴驱动器主回路，发现再生制动回路、主回路的熔断器均熔断，经更换后

机床恢复正常。但机床正常运行一段时间后，再次出现同样故障。

由于故障重复出现，证明该机床主轴系统存在问题，根据报警信息，分析可能存在的

主要原因如下：主轴驱动板控制不良；电动机连续过载；电动机绕组存在局部短路。

3. 维修过程

根据实际加工情况，电动机过载的原因可以排除。由于更换熔断器后可以正常工作

一段时间，故主轴驱动器控制板不良的可能性不大。因此，故障可能性最大的是电动机绕

组存在局部短路。

维修时仔细测量电动机的绕组的各相电阻，发现 U 相对地绝缘电阻较小，证明该相

存在局部对地短路。拆开电动机检查发现，电动机内部绕组与引出线的绝缘套已经老化，

更换绝缘套，重新连接后对地电阻恢复正常。再次更换熔断器后，机床恢复正常，故障不

再出现。

4.5.4  驱动系统出现传感器报警的故障诊断与维修

大宇 HM630 数控加工中心，主轴电机为 FANUCa 18/7OOOi 永磁交流同步伺服电机，

主轴伺服板为 AL-73 。

1. 故障现象

机床正常运转，切削加工过程中，忽然断电（供电系统出现短路），恢复供电后，重新开

机，当程序执行到铣加工 1'260 面时，产生 9073 ＃报警，提示报警信息为电机传感器的反

馈信号断线。

2. 分析判定

正常工作的机床，为何出现 9073 ＃报警？调出报警履历表，发现断电时出现过 9002

＃报警，报警内容为：电机负载扭矩大，它是产生 9073 ＃报警的直接原因。由于扭矩大，

主轴振动剧烈，有可能造成电机传感器的反馈信号故障。

3. 维修过程

依据 FANUC 公司提供的维修手册，重点检查信号电缆连线、插头，最后，在主轴电机

的接线盒中发现电缆插头振松，重新插好插头，故障排除。

4.5.5  主轴缺少轴使能信号的故障诊断与维修

1. 故障现象

CK5110E （数控立车 802D) 正常开机启动后，调零件加工程序运行，执行 M03 S80 指

令时，主轴不旋转，程序停止运行，无报警号显示，在状态信息栏提示：缺少轴进给使能。

MDA 方式下，仍提示：缺少轴进给使能。机床主轴为模拟主轴，配置变频器进行速度调节

控制。

2. 分析判定

将机床工作方式选择为手动方式，手动启动主轴正转、反转、停止均正常。表明变频

器无异常。电气图如图 4-18 所示。手动时由＋ 10V 给定电压经 KA1 触点 RP1 调速电

245 

阻获得相应的转速。而自动时模拟主轴给定信号由伺服转速给定

模块 75A、 15 两端子送到 705# 、 701# ，怀疑继电器 KAl

常闭点接触不良，更换继电器 KAl ，故障依旧。交换驱动

控制模块，故障依旧。利用状态信息和梯形图对故障进行

进一步诊断。查 PLC 状态， Q2.0 伺服使能信号， Q2.1 主

轴正转信号均正常为 “1" ，调出梯形图对 PLC 相关信号进
行诊断。 V38020002.1, V38020004. 3,  V38024001. 7, 
V32000006. 0 信号分别是伺服使能，进给保持主轴停止
(PLC- NCK 送至主轴的信号），脉冲使能，进给保持
(PLC-NCK 通道信号）均常。通过以上诊断分析，可以

701 

705 

KAl 

COM 

图 4-18 CK5110E 主轴
控制电气原理图

703 

v`·0 

K
A
l
叩

确定伺服模块，变频器本身无故障。再仔细观察无论是 MDA 方式下或是自动运行方式

下，主轴有轻微的抖动，这表明主轴旋转指令已发出，但仍不正常转动。再根据图纸进一

步检查状态信息，查到主轴倍率开关 SA4 时，旋动开关其对应的 PLC 的输入信号 14.0-

14.3 无任何变化。经检查主轴倍率开关 SA4 上的＋ 24V 电源线 200 ＃线脱落，相当于转

速为零。

3. 维修过程

将 200 ＃线重新焊上，故障消失。

4.5.6  FANUC OMC 系统 400 号、 409 号报警的处理

1. 故障现象

一台立式加工中心 FV-800A。 FANUCOMC 系统，出现 400 号、 409 号报警，主轴伺

服单元显示 59 号。

2. 分析判定

400 号报警为进给伺服故障，查诊断号 DNG720-722 第 7 位均显示 “1” 表明过载。

59 号为主轴伺服放大器风机故障，手摸伺服电源单元、主轴伺服单元及进给伺服单元的

智能风机无风排出，均未转动。

3. 维修过程

用电子清除剂清洗风机去掉油泥，重新开机，故障消除。

4.5.7  FANUC OMC 系统多次出现 409 号报警的处理

1. 故障现象

一台 XH754 加工中心，系统为 FANUCOMC ，工作中多次出现 409 号报警，主轴伺服

单元 LCD 窗口显示 31 号。信息提示为主轴检测信号断开或电机自动跟踪报警。

2. 分析判定

分析遵守从简单到复杂的原则，估计电机环节的故障较大。检查时，一次发现是主轴

接触器的下端口三相动力线连接处松动，曾两次检查发现主轴电机接线盒中电机线的连

接线鼻子断，形成两相供电。根本原因在于机床制造厂电工工艺施工不良造成。

246 

4.5.8  FANUC OMC 系统多次出现 1003 号、 409 号报警的处理

1. 故障现象

一台 XH754 加工中心系统仍为 FANUCOMC ，多次出现 1003 号、 409 号报警。 1003

号为主轴伺服故障，属于 PMC 故障。 409 号报警属于 NC 系统报警。主轴伺服单元 LCD

窗口显示为 73 号报警，信息提示： 73 号报警为速度传感器电压信号幅值过低，或速度传

感器电缆连接有误。

2. 分析判定

首先检查电缆，连接无误，电缆未断线。与另一台 XH754 的速度传感器交换，速度传
感器无问题，毫无疑问，仍应当是电缆有故障。电缆连接无误，电缆也未断线， 73 号报警
多次再现多次反复观察发现当主轴沿 Y 轴移动到下方时，出现 73 号报警，拆开主轴电

机接线盒，发现速度传感器信号线扁插头松动，连接电缆长度有点短，当主轴移动到下方

时拉松造成，这是由于电工工艺施工不良造成。

4. 5. 9  SIEMENS 840D 系统多次出现 25040 号报警的处理

1. 故障现象

一台 S-40 （美国加工中心），在交换刀具时，将刀具装入主轴机械手退回时，主轴功

率表显示达 100 ％以上，屏显 2504 ＃报警， SP 主轴静态误差超差。

2. 分析判定

交换刀具时主轴准停位置破坏，修改轴参数 36030# （静态误差）放大为 2·,36040#

（零速延迟时间） 0.4s 变为 0.6s ，修改两参数后暂时解决了问题。后又多次出现报警，仔

细观察发现主轴准停位置偏，主轴脉冲编码器松动，紧固后修改 36030 ＃参数。

小结

数控机床上的主轴带动刀具或工件旋转，从而产生切削运动，它往往是数控机床上功

率消耗最大的运动轴。对于数控机床主轴的控制主要是转向和转速的控制，目前转速控

制可通过分段或无级等调速方式实现，而转向的控制主要实现主轴的正、反转和停止控

制，同时还要有松刀、紧刀和吹屑和定向控制等辅助功能。按照数控机床上主轴控制信号

形式不同可分为模拟主轴和数字主轴，前者以模拟量指定主轴转速，而后者以串行通信的

数字量传递主轴控制信息。本章通过对构成主轴控制系统的各功能模块以及各引脚的信

号分析，可以清晰地理解主轴系统的控制过程；同时列出了典型主轴系统的配置方案和常

见故障，便千分析主轴系统故障，解决实际问题。

习题

一、填空

1. 数控机床要求主轴部件具有良好的

、

、

、

及部

247 

件的

和精度的

。

2. 对于自动换刀的数控机床，为了实现刀具的自动装卸和夹持，必须有刀具的

、主轴的

和切屑的

等结构。

3. 数控机床主轴转速的调整方法主要有：

、

、

、

等形式。

4. 为了减少主轴部件温升引起的热变形对机床精度的影响，通常利用

的循

环系统把主轴部件的热量带走，使主轴部件与箱体保持

。

5. 电主轴的电动机当前多采用

，有

、

等两种控制方式。

6. 目前，在数控机床的主轴控制中，表示主轴迷度信号主要有

和

两种形式，分别用于

和

的主轴驱动装置。

7. 变频调速是指通过改变异步电动机的定子绕组的

，进而改变其

，从而实现电机的调速。

8. 变频器可按照主电路结构分为

和

两种形式。

9.  FANUC 的 a 系列主轴驱动装置由

、

和

组成。

10. 主轴位置编码器的作用在于实现

控制、

控制、

控制、

控制。

二、选择

1. 数控机床主轴调速方法有（

）。

A 齿轮传动

B 带传动

C 螺纹传动

D 用两个电动机驱动

2. 主轴定向装置的作用是（

）。

A 同步控制

B 返回参考点 C 自动换刀

3. 电主轴所采用的电动机主要是（

A 交流异步电机 B 直流电机

D 机床、整翌
）。
C 交流同步电机 D 步进电机

三、画图
1. 某数控车床采用 FANUC Oi  Mate  TC 数控系统，画出 CNC 系统与变频器的信号

连接图，并说明这些信号的具体作用。

2. 试画出 FANUC 的 a 系列串行控制主轴模块的连接图。

3. 试画出 SIEMENS440 变频器的模拟控制主轴的连接图。

四、简答

1. 数控机床对主传动系统的基本要求有哪些？

2. 什么是数控机床主轴的分段无级变速？

3. 数控机床主轴常见的支承配置主要有哪些形式？各有何优缺点？

4. 试述异步电动机的调速原理与方式。

5. 模拟量控制主轴和串行数字控制主轴驱动装置控制原理有何不同？

6. 数控机床主轴电动机巳具备了无级调速，但为什么有的数控机床主轴还增设主轴

变速齿轮？

7. 举例说明数控机床主轴位置编码器的作用。实际中常见的故障有哪些？

五、分析题
1. 串行主轴驱动装置的电动机电源相序接错会出现什么现象？并解释其原因。

248 

2. 实际中有哪些情况会导致系统串行主轴控制模块出现错误报警（主轴模块黄灯

亮），如果出现主轴错误信息时，实际中如何处理？

3. 某立式数控加工中心系统采用 FANUCOiA ，主轴增设了三级齿轮变挡，主轴低速
挡的齿轮传动比为 11: 108 ，中速挡的齿轮传动比为 11 :36 ，高速挡的齿轮传动比为 11:
12 。主轴电动机的最低转速为 150r/min ，最高转速为 6000r/min。根据机械设计要求可
知，主轴电动机的最高转速设定为 4500r/min。实际中如何设定系统主轴参数？

4. 串行数字控制主轴参数初始化的操作步骤及相关参数如何设定？
5. 某数控机床采用 FANUCOi 系统，且主轴为串行数字控制主轴 (a 系列），加工中出

现主轴过热报警（主轴模块为 01 报警代码），实际中如何进行检修？

6. 试分析 JCS — 018 加工中心的主轴部件的刀具夹紧、放松过程。

249 

第 5 章 数控机床进给伺服系统及维修技术

5.1  数控机床进给系统传动部件

5.1.1  滚珠丝杠螺母副

1. 工作原理

滚珠丝杠螺母副由千在丝杠和螺母之间放入了滚珠，使丝杠与螺母间变为滚动摩擦，

因而大大地减小了摩擦阻力，提高了传动效率。图 5-1 所示为滚珠丝杠螺母副的结构
图。丝杠 1 和螺母 3 上均制有圆弧形面的螺旋槽，将它们装在一起便形成了螺旋滚道，滚

珠 4 在其间既自转又循环滚动。

2 

3 

图 5-1 滚珠丝杠螺母副结构图

1一丝杠； 2—滚道； 3—螺母； 4—滚珠。

2. 滚珠丝杠的特点

滚珠螺旋传动与滑动螺旋传动或其他直线运动副相比，有下列特点：

(1) 传动效率高：一般滚珠丝杠副的传动效率达 90%-95% ，耗费能量仅为滑动丝杠

的 1/3 。

(2) 运动平稳：滚动摩擦系数接近常数，启动与工作摩擦力矩差别很小，启动时无冲

击，预紧后可消除间隙产生过盈，提高接触刚度和传动精度。

(3) 工作寿命长：滚珠丝杠螺母副的摩擦表面为高硬度 (58HRC- 62HRC 汃高精度，

具有较长的工作寿命和精度保持性。寿命约为滑动丝杠副的 4 倍～ 10 倍以上。

(4) 定位精度和重复定位精度高：由于滚珠丝杠副摩擦小、温升小、无爬行、无间隙，

通过预紧进行预拉伸以补偿热膨胀，因此可达到较高的定位精度和重复定位精度。

(5) 同步性好：用几套相同的滚珠丝杠副同时传动几个相同的运动部件，可得到较好

的同步运动。

250 

(6) 可靠性高：润滑密封装置结构简单，维修方便。
(7) 不能自锁：用于垂直传动时，必须在系统中附加自锁或制动装置。
(8) 制造工艺复杂：滚珠丝杠和螺母等零件加工精度、表面粗糙度要求高，成本较高。
3. 滚珠丝杠副的分类

滚珠丝杠副中滚珠的循环方式有外循环和内循环两种。

1) 外循环结构

滚珠在循环过程结束后通过螺母外表面上的螺旋槽或插管返回丝杠螺母间重新进入
循环。图 5-2 所示为常见的外循环结构形式。在螺母外圆上装有螺旋形的插管口，其两
端插入滚珠螺母工作始末两端孔中，以引导滚珠通过插管，形成滚珠的多圈循环链。这种
形式结构简单，工艺性好，承载能力较高，但径向尺寸较大。目前应用最为广泛，也可用于
重载传动系统中 。

a 

图 5-2 滚珠丝杠外循环结构图

2) 内循环结构

靠螺母上安装的反向器接通相邻滚道，使滚珠成单圈循环，如图 5-3 所示。反向器
2 的数目与滚珠圈数相等 。 这种形式结构紧凑，刚度好 ， 滚珠流通性好，摩擦损失小，但制
造较困难。适用于高灵敏、高精度的进给系统，不宜用于重载传动中。

(b) 

(a) 

图 5-3 滚珠丝杠内循环结构图

l—丝杠； 2一反向器； 3一螺母； 4—滚珠 。

251 

4. 滚珠丝杠副的消隙

为了保证滚珠丝杠反向传动精度和轴向刚度，必须消除滚珠丝杠螺母副轴向间隙。

消除间隙的方法常采用双螺母结构，利用两个螺母的相对轴向位移，使每个螺母中的滚珠

分别接触丝杠滚道的左右两侧。用这种方法预紧消除轴向间隙时，预紧力一般应为最大

轴向负载的 1/3 ，当要求不太高时，预紧力可小于此值。

1) 双螺母垫片式消隙

如图 5-4 所示，此种形式结构简单可靠、刚度好，应用最为广泛，在双螺母间加垫片

的形式可由专业生产厂根据用户要求事先调整好预紧力，使用时装卸非常方便。

2) 双螺母螺纹式消隙

如图 5-5 所示，利用一个螺母上的外螺纹，通过圆螺母调整两个螺母的相对轴向位

置实现预紧，调整好后用另一个圆螺母锁紧。这种结构调整方便，且可在使用过程中随时

调整，但预紧力大小不能准确控制。

螺母B

垫片

螺母A

锁紧螺母圆螺母

图 5-4 双螺母垫片式消隙机构

图 5-5 双螺母螺纹式消隙机构

3) 齿差式消隙

如图 5-6 所示，在两个螺母的凸缘上各制有圆柱外齿轮，分别与固紧在套筒两端的

内齿圈相啃合，其齿数分别为 z1 、 Z2 ，并相差一个齿。调整时，先取下内齿圈，让两个螺母

相对于套筒同方向都转动一个齿，然后再插人内齿圈，则两个螺母便产生相对角位移，其
轴向位移量为 S = (llz1 - llz2)Ph 。式中： z1 、 z2 为齿轮的齿数，凡为滚珠丝杠的

导程。

252 

Z2 

图 5 — 6 齿差式消隙机构

5.1.2  静压蜗杆—蜗轮条传动

1. 工作原理

蜗杆一蜗轮条机构是丝杠螺母机构的一种特殊形式，如图 5-7 所示。蜗杆可看作长
度很短的丝杠，其长径比很小。蜗轮条则可以看作一个很长的螺母沿轴向剖开后的一部
分，其包容角常在 90°~l20° 之间。

图 5-7 蜗杆一蜗轮条传动机构

1一蜗轮条； 2—蜗杆。

液体静压蜗杆—蜗轮条机构是在蜗杆—蜗轮条的啃合面间注入压力油，以形成一定

厚度的油膜，使两啃合面间成为液体摩擦，其工作原理如图 5 — 8 所示。

10 

图 5 — 8 蜗杆—蜗轮条工作原理

1—油箱； 2一滤油器； 3—液压泵； 4一电动机； 5一溢流阀； 6一粗滤油器；

7一精滤油器； 8—压力表； 9—压力继电器； 10-－节流器。

图 5-8 中油腔开在蜗轮上，用毛细管节流的定压供油方式给静压蜗杆—蜗轮条供压
力油。从液压泵输出的压力油，经过蜗杆螺纹内的毛细管节流器 10 ，分别进入蜗杆一蜗
轮条齿的两侧面油腔内，然后经过啃合面之间的间隙，再进入齿顶与齿根之间的间隙，压
力降为零，流回油箱。

2. 特点

静压蜗杆—蜗轮条传动由于既有纯液摩擦的特点，又有蜗杆蜗轮条机构的特点，因此

特别适合在重型机床的进给传动系统上应用。其优点是：

(1) 摩擦阻力小，启动摩擦因数小于 0.0005 ，功率消耗少，传动效率高，可达 0.94~

0.98 ，在很低的速度下运动也很平稳。

253 

(2) 使用寿命长。齿面不直接接触，不宜磨损，能长期保持精度。

(3) 抗振性能好。油腔内的压力油层有良好的吸振能力。

(4) 有足够的轴向刚度。

(5) 蜗轮条能无限接长，因此，运动部件的行程可以很长，不像滚珠丝杠受结构限制。

3. 材料

静压蜗杆蜗轮条采用的材料有：

(1) 钢蜗杆配铸铁蜗轮条。

(2) 钢蜗杆配铸铁基体涂有 SKC3 耐磨涂层的蜗轮条。

(3) 铜蜗杆配钢蜗轮条或铸铁蜗轮条。

第 (1) 种方案加工蜗轮条需用精加工机床，较难达到高精度；第 (2) 种方案在铸铁基体

上涂上 SKC3 耐磨涂层后可用精密母蜗杆挤压或注塑成型，蜗轮条制造工艺简单，且精度

较高。

4. 传动方案

蜗杆—蜗轮条机构在数控机床上，常用的传动方案有两种。

其一是蜗杆箱固定，蜗轮条固定在运动件上，如图 5-9 所示。伺服电动机 4 和进给

箱 3 置千机床床身或其他部件上，并通过联轴器 2 使蜗杆轴产生旋转运动。蜗母条 1 与

运动部件（如工作台）相连，以获得往复直线运动。这种传动方案常应用于龙门式铣床的

移动工作台进给驱动机构中。

其二是蜗轮条固定，蜗杆箱固定在运动件上，如图 5-10 所示。伺服电动机 4 和进给

箱 3 与蜗杆箱 5 相连，使蜗杆旋转。蜗轮条固定不动，蜗杆箱与运动部件（如立柱、溜板
等）相连，这样行程长度可大大超过运动部件的长度。这种传动方式经常用千桥式镜铣床

桥架进给驱动机构中。

3 

4 

2 

夏

►

1 

2 

3 

4 

5 

图 5-9 蜗杆箱固定式

图 5-10 蜗杆箱移动式

1—蜗母条； 2—联轴器； 3—进给箱；

1一蜗杆； 2—蜗母条； 3一进给箱；

4一一伺服电动机； 5—蜗杆。

4—伺服电动机； 5—蜗杆箱； 6—变速齿轮。

5.1.3  齿轮齿条传动机构

在机电一体化产品中对于大行程传动机构往往采用齿轮齿条传动，因为其刚度、精度

和工作性能不会因行程增大而明显降低，但它与其他齿轮传动一样也存在齿侧间隙，应采

取消隙措施。

当传动负载小时，可采用双片薄齿轮错齿调整法，使两片薄齿轮的齿侧分别紧贴齿条

的齿槽两相应侧面，以消除齿侧间隙。当传动负载大时，可采用双齿轮调整法。如图

254 

5-11 所示，小齿轮 1 、 6 分别与齿条 7 啃合，与小齿轮 1 、 6 同轴的大齿轮 2 、 5 分别与齿轮
3 啃合，通过预载装置 4 向齿轮 3 上，预加负载，使大齿轮 2 、 5 同时向两个相反方向转动，
从而带动小齿轮 1 、 6 转动，其齿面便分别紧贴在齿条 7 上齿槽的左、右侧，消除了齿侧
间隙。

7 

图 5-11 齿轮齿条的双齿轮调隙机构

1 、 6一小齿轮； 2 、 5一大齿轮； 3一齿轮； 4—预载装置； 7一齿条。

5.1.4  数控机床的导轨

数控机床导轨必须具有较高的导向精度、高刚度、高耐磨性以及机床在高速进给时不
振动、低速进给不爬行等特性。目前数控机床使用的导轨主要有三种：贴塑滑动导轨、滚
动导轨和液体静压导轨。

1. 贴塑滑动导轨

贴塑滑动导轨结构如图 5-12 所示。从表面上看，它与普通滑动导轨没有多少区别。
它是在两个金属滑动面之间粘贴了一层特制的复合工程塑料带，这样将导轨的金属与金
属的摩擦副改变为金属与塑料的摩擦副，因而改变了数控机床导轨的摩擦特性。

4 

5 

2 

图 5-12 贴塑滑动导轨结构

1 一床身； 2—工作台； 3—下压板； 4—导轨软带； 5一贴有导轨软带的镶条 。

贴塑材料常采用聚四氛乙烯导轨软带和环氧型耐磨导轨涂层两类。
聚四氮乙烯导轨软带具有以下特点：

(1) 摩擦性能好：金属对聚四氪乙烯导轨软带的动静摩擦系数基本不变。
(2) 耐磨特性好：聚四氛乙烯导轨软带材料中含有青铜、二硫化钥和石墨，因此其本
身就具有润滑作用，对润滑的要求不高。此外，塑料质地较软，即使嵌入金属碎屑、灰尘
等，也不致损伤金属导轨面和软带本身，可延长导轨副的使用寿命。

(3) 减振性好：塑料的阻尼性能好，其减振效果、消声效果较好，利于提高运动速度。

255 

(4) 工艺性能好：可以降低对粘贴塑料的金属基体的硬度和表面质量要求，而且塑料

易于加工，使得导轨副接触面获得优良的表面质量。

环氧型耐磨导轨涂层是以环氧树脂和二硫化铝为基体，加入增塑剂，混合成液状或膏
状为一组分，固化剂为另一组分的双组分塑料涂层。德国生产的 SKIC3 和我国生产的
HNT 环氧型耐磨涂层都具有以下特点：

(1) 良好的加工性：可经车 、 铣、包叭钻 、 磨削和刮削；

(2) 良好的摩擦性；

(3) 耐磨性好；

(4) 使用工艺简单。

2. 滚动导轨
滚动导轨具有摩擦系数小（ 一般在 0.003 左右），动 、 静摩擦系数相差小，且几乎不受
运动变化的影响，定位精度和灵敏度高，精度保待性好等优点。现代数控机床常采用的滚

动导轨有滚动导轨块和直线滚动导轨两种 。

1) 滚动导轨块
滚动导轨块是一种滚动体作循环运动的滚动导轨，其结构如图 5-13 所示。 1 为防
护板，端盖 2 与导向片 4 引导滚动体（滚柱 3) 返回， 5 为保持器， 6 为本体 。 使用时，滚动
导轨块安装在运动部件的导轨面上，每一导轨至少用两块，导轨块的数目取决于导轨的长
度和负载的大小，与之相配的导轨多用镶钢猝火导轨 。 当运动部件移动时，滚柱 3 在支承
部件的导轨面与本体 6 之间滚动，同时又绕本体 6 循环滚动，滚柱 3 与运动部件的导轨面
不接触，因而该导轨面不需猝硬磨光 。 滚动导轨块的特点是刚度高，承载能力大，便于

拆装 。

. 

oz 

(a) 

(b) 

图 5-13 滚动导轨块的结构

1—防护板； 2一端盖； 3一滚柱； 4一导 向片； 5—保持器； 6—本体 。

256 

2) 直线滚动导轨
直线滚动导轨是数控机床上使用比较多的一种滚动导轨，其结构如图 5-14 所示，主要
由导轨、滑块、滚珠、保持器、端盖等组成 。 由于它将支承导轨和运动导轨组合在一起，作为
独立的标准导轨副部件由专门生产厂家制造，故又称单元式直线滚动导轨。使用时，导轨体
固定在不运动部件上，滑块固定在运动部件上。当滑块沿导轨体运动时，滚珠在导轨体和滑
块之间的圆弧直槽内滚动，并通过端盖内的滚道从工作负载区到非工作负载区，然后再滚动
回工作负载区，不断循环，从而把导轨体和滑块之间的移动，变成了滚珠的滚动 。

2 

3 

4 

5 

6 

9 

8 

7 

图 5-14 直线滚动导轨

l—压紧圈； 2—支撑块； 3—密 封板； 4—承载钢珠列；

5一反向钢珠列； 6一加油嘴； 7—侧板； 8一导轨； 9—保持架 。

3. 液体静压导轨

液体静压导轨是将具有一定压力的油液经节流器输送到导轨面的油腔，形成承载油膜，将
相互接触的金属表面隔开，实现液体摩擦。 这种导轨的摩擦系数小（约 0.(XX)5) ，机械效率高；
由千导轨面间有一层油膜，吸振性好；导轨面不相互接触，不会磨损，寿命长，而且在低速下运
行也不易产生爬行。但是静压导轨结构复杂，制造成本较高，一般用于大型或重型机床。

由于承载的要求不同，静压导轨分为开式和闭式两种 。
开式静压导轨的工作原理如图 5 - lS(a) 所示 。 油泵 2 启动后，油经滤油器 1 吸入，

5 

4 

2 

l \ \ /  
［二＿ _ _ _ _ ___ __ / 

I 

8 

8 

- _ _ 

1一二二二二－－＿一立于1

(a) 

(b) 

图 5-15 静压导轨的工作原理图

1 、4—滤油器； 2—油泵； 3--溢流阀；仁－节流器；仑－运动部件； 7—固定部件； 8—油箱 。

257 

用溢流阀 3 调节供油压力 Pr ，再经滤油器 4 ，通过节流器 5 降压至 Pr （油腔压力）进入导

轨的油腔，并通过导轨间隙向外流出，回到油箱 8 。油腔压力形成浮力将运动部件 6 浮

起，形成一定的导轨间隙 h 。。当载荷增大时，运动部件下沉，导轨间隙减小，液阻增加，流

量减小，从而使油经过节流器时的压力损失减小，油腔压力 Pr 增大，直至与载荷 W

平衡。

开式静压导轨只能承受垂直方向的负载，承受颠覆力矩的能力差。而闭式静压导轨

能承受较大的颠覆力矩，导轨刚度也较高，其工作原理如图 5-15(b) 所示。

5.1.5  进给系统齿轮问隙消除机构

数控机床的机械进给装置中常采用齿轮传动副来达到一定的降速比和转矩的要求。

由于齿轮在制造中总是存在着一定的误差，不可能达到理想齿面的要求，因此一对啃合的

齿轮，总应有一定的齿侧间隙才能正常地工作。

齿侧间隙会造成进给系统的反向动作落后于数控系统指令要求，形成跟随误差甚至

是轮廓误差。

对闭环系统来说，齿侧间隙也会影响系统的稳定性。因此，齿轮传动副常采用各种消

除侧隙的措施，以尽量减小齿轮侧隙。数控机床上常用的调整齿侧间隙的方法针对不同

类型的齿轮传动副而不同。

1. 圆柱齿轮传动

1) 偏心套（轴）调整法

如图 5-16(a) 所示，将相互啃合的一对齿轮中的一个齿轮 4 装在电机输出轴上，并

将电动机 2 安装在偏心套 1 （或偏心轴）上，通过转动偏心套（偏心轴）的转角，就可调节两

啃合齿轮的中心距，从而消除圆柱齿轮正、反转时的齿侧间隙。其特点是结构简单，但侧

隙不能自动补偿。

3 

6 

4 

5 

(a) 

(b) 

图 5-16 间隙消除机构

1—偏心套； 2一电动机； 3—减速箱； 4 、 5一齿轮； 6—轴向垫片。

2) 轴向垫片调整法

如图 5-16(b) 所示，齿轮 4 和 5 相啃合，其分度圆弧齿厚沿轴线方向略有锥度，这样

就可以用轴向垫片 6 使齿轮 5 沿轴向移动，从而消除两齿轮的齿侧间隙。装配时轴向垫

258 

片 6 的厚度应使得齿轮 4 和 5 之间既齿侧间隙小，运转又灵活。其特点同偏心套（轴）调
整法。

3) 双片薄齿轮错齿调整法
这种消除齿侧间隙的方法是将其中一个做成宽齿轮，另一个用两片薄齿轮组成。可
采取措施使一个薄齿轮的左齿侧和另一个薄齿轮的右齿侧分别紧贴在宽齿轮齿槽的左、
右两侧，以消除齿侧间隙，反向时不会出现死区，具体调整措施如下：

(1) 周向弹簧式（图 5-17) 。在两个薄片齿轮 2 和 4 上各开了几条周向圆弧槽，并在
齿轮 3 和 4 的端面上有安装弹簧 2 的短柱 1 。在弹簧 2 的作用下使薄片齿轮 3 和 4 错位
而消除齿侧间隙。这种结构形式中的弹簧 2 的拉力必须足以克服驱动转矩才能起作用。
因该方法受到周向圆弧槽及弹簧尺寸限制，故仅适用于读数装置而不适用于驱动装置。

(2) 可调拉簧式（图 5-18) 。在两个薄片齿轮 1 和 2 上装有凸耳 3 ，弹簧的一端钩在
凸耳 3 上，另一端钩在螺钉 7 上。弹簧 4 的拉力大小可用螺母 5 调节螺钉 7 的伸出长度，
调整好后再用螺母 6 锁紧。

3 

图 5-17 薄片齿轮周

向拉簧错齿调隙机构

2. 斜齿轮传动

图 5-18 可调拉簧式调隙机构

消除斜齿轮传动齿轮侧隙的方法与上述错齿调整法基本相同，也是用两个薄片齿轮
与一个宽齿轮啃合，只是在两个薄片斜齿轮的中间隔开了一小段距离，这样它的螺旋线便
错开了。图 5-19(a) 是薄片错齿调整机构，其特点是结构比较简单，但调整较费时，且齿
侧间隙不能自动补偿；图 5-19(b) 是轴向压簧错齿调整机构，其特点是齿侧隙可以自动
补偿，但轴向尺寸较大，结构欠紧凑。

3. 锥齿轮传动

1) 轴向压簧调整法

轴向压簧调整法原理如图 5-20 所示，在锥齿轮 4 的传动轴 7 上装有压簧 5 ，其轴向
力大小由螺母 6 调节。锥齿轮 4 在压簧 5 的作用下可轴向移动，从而消除了其与啃合的
锥齿轮 l 之间的齿侧间隙。

2) 周向弹簧调整法

周向弹簧调整法原理如图 5-21 所示，将与锥齿轮 3 啃合的齿轮做成大小两片 (1 、
2) ，在大片锥齿轮 1 上制有三个周向圆弧槽 8 ，小片锥齿轮 2 的端面制有三个可伸入槽 8

259 

(a) 

(b) 

图 5-19 斜齿轮调隙机构

(a) 薄片错齿调隙机构； （ b）轴向压簧错齿调隙机构。

l 、2—薄片齿轮； 3一宽齿轮； 4—调整螺母； 5—弹簧； 6一垫片。

G- G 

6 

图 5-20 锥齿轮轴向压簧调隙机构

图 5-21 锥齿轮周向弹簧调隙机构

1 、 4—锥齿轮； 2 、 3一键； 5—压簧；

1一大片锥齿轮； 2一小片锥齿轮； 3—锥齿轮；

6—螺母； 7一传动轴。

4一镶块； 5一弹簧； 6一止动螺钉； 7一凸爪； 8—槽。

的凸爪 7 。 弹簧 5 装在槽 8 中，一端顶在凸爪 7 上，另一端顶在镶在槽 8 中的镶块 4 上 。
止动螺钉 6 装配时用，安装完毕将其卸下，则大小片锥齿轮 1 、 2 在弹簧力作用下错齿，从
而达到消除间隙的目的。

5.1.6  带传动

带传动是以带作为中间挠性件，靠带与带轮间的摩擦力传递运动和动力。带传动的

260 

优点是结构简单，成本低，主、从动轮的中心距离较大，工作平稳，无噪声，过载时带打滑，

能防止其他零件损坏；缺点是外部尺寸大，作用在轴和轴承上的力也较大，此外 V 形带和

平带传动还有弹性滑动，不能保持恒定的传动比。

1. 平带
通常使用的平带是橡胶帆布带、皮革带、棉布带等，其横截面为矩形或近似矩形。在传

动时，带的环形内表面与轮缘接触，是工作表面。平带比较薄，挠曲性能好，适用于高速运转

的传动，又由于平带扭转柔性较好，故还适用千平行轴的交叉传动和相错轴的半交又传动。

2.  V 形带

V 形带是截面为等腰梯形（或近似等腰梯形）的传动带。其两腰的夹角为 40° 。它的

结构有帘布结构与线绳结构两种。一般采用帘布结构，在载荷不大、小直径或转速较高时

采用线绳结构。它们的结构如图 5-22 所示，伸张层与压缩层采用弹性好的胶料，易于产

生弯曲变形；包布层耐磨，起保护作用；强力层承受带的拉力。

V 形带根据截面尺寸由小到大的顺序排列，共有 Y 、 Z 、 A~B 、 C、 D 、 E 七种型号，应用最

多的是 A、 B 、 C 三种。一般 V 形带型号的截面尺寸和其所能传递的功率大小有关，传递

的功率越大，选用的截面尺寸也越大。

3. 多联 V 形带

多联带 V 形带又称复合 V 形带，横向断面呈多个樑形（图 5 — 23) ，模角为 40° 传递负

载主要靠强力层。强力层中有多根钢丝绳或涤纶绳，具有伸长率小和较大的抗拉强度和

抗弯疲劳强度。带的基底及缓冲樑部分采用橡胶或聚氨酣。

Q.  _Q. _~ _o_ 9_ 9_ 9_ Q _  Q 立－

强力层

面胶

缓冲层

图 5-23 多联带

图 5-22 V 形带结构

l—包布层； 2一伸张层； 3一强力层； 4—压缩层。

多联带综合了 V 形带和平带的优点，运转时振动小，发热少，运转平稳，重量轻，因此

可在 40m/s 的线速度下使用。此外，多联带与带轮的接触好，负载分布均匀，即使瞬时超

载，也不会产生打滑，而传动功率比 V 形带大 20%-30% ，因此能够满足加工中心主传动

要求的高速、大转矩和不打滑的条件。多联带安装时需要较大的张紧力，使得主轴和电动

机承受较大的径向负载，这是多联带的一大缺点。

4. 同步齿形带

同步带传动，是一种新型的带传动，它是利用同步带的齿形与带轮的轮齿依次相啃合

传递运动或动力。同步齿形带传动在数控机床上得到了广泛的应用。

同步带传动工作平稳，结构紧凑，无噪声，有良好的减振性能，而且由千同步带作无滑

动的同步传动，故有较高的传动效率，一般可达 0.98 。它与三角带传动相比，有明显的节

能效果。同步带无需特别张紧，故作用在轴和轴承上的载荷较小，传动效率较高。同步带

传动的缺点是制造工艺较复杂，传递功率较小，寿命较低。

如图 5-24 所示，同步带一般由承载绳、带齿、带背和包布层组成。根据齿形不同又

261 

分为梯形齿同步带和圆弧齿同步带。图 5-25 是这两种同步齿形带的外形，其结构与材

质和多联带相似，但在齿面上覆盖了一层尼龙帆布，用以减少传动齿与带轮的啃合摩擦。

梯形齿同步带在传递功率时由于应力集中在齿根部位，使功率传递能力下降。同时由千

与带轮是圆弧形接触，当小带轮直径较小时，将使齿形变形，影响与带轮齿的啃合，不仅受

力情况不好，而且在速度很高时，会产生较大的噪声与振动，这对于主传动来说是很不利

的。因此在加工中心的主传动中很少采用，一般仅在转速不高的运动传动或小功率的动

力传动中使用，而圆弧齿同步带克服了梯形齿同步带的缺点，均化了应力，改善了啃合。

因此在加工中心上，无论是主传动还是伺服进给传动，当需要用带传动时，总是优先考虑

采用圆弧齿同步带。

3 

(a) 

(b) 

图 5-24 同步带结构

图 5-25 同步带截面

1—带背； 2—承载绳； 3—带齿； 4—包布带。

(a) 梯形齿同步带； （ b) 圆弧齿同步带。

5.1. 7  直线电动机

1. 直线电动机工作原理简介

直线电动机的工作原理与旋转电动机相比，并没有本质的区别，可以将其视为旋转电

动机沿圆周方向拉开展平的产物，如图 5-26 所示。对应于旋转电动机的定子部分，称为

直线电动机的初级；对应于旋转电动机的转子部分，称为直线电动机的次级。当多相交变

电流通入多相对称绕组时，就会在直线电动机初级和次级之间的气隙中产生一个行波磁

场，从而使初级和次级之间相对移动。当然，二者之间也存在一个垂直力，可以是吸引力，

也可以是推斥力。

次级

亿////.，心／心夕／4／＼ 勹
I u  u  u  u  u  u  u 1 /  u | 

(a) 

初级

(b) 

图 5-26 旋转电动机展平为直线电动机的过程

(a) 旋转电动机； （ b ）直线电动机。

2. 直线电动机的分类

直线电动机可以分为直流直线电动机、步进直线电动机和交流直线电动机三大类。

262 

在机床上主要使用交流直线电动机。

在结构上，可以有图 5-27 所示的短次级和短初级两种形式。为了减小发热量和降

低成本，高速机床用直线电动机一般采用图 5-27(b) 所示的短初级、动次级结构。

初级巳刍；三
|  u\、 u u  u  u  u| 

次级 Le

B........B 

盯初级

(a) 

(b) 

图 5-27 直线电动机的形式

(a) 短次级； （ b) 短初级。

在励磁方式上，交流直线电动机可以分为永磁（同步）式和感应（异步）式两种。永磁
式直线电动机的次级是一块一块铺设的永久磁钢，其初级是含铁芯的三相绕组。感应式
直线电动机的初级和永磁式直线电动机的初级相同，而次级是用自行短路的不馈电栅条
来代替永磁式直线电动机的永久磁钢。永磁式直线电动机在单位面积推力、效率、可控性
等方面均优于感应式直线电动机，但其成本高，工艺复杂，而且给机床的安装、使用的维护
带来不便。感应式直线电动机在不通电时是没有磁性的，因此有利于机床的安装、使用和
维护。近年来，其性能不断改进，已接近永磁式直线电动机的水平，在机械行业的应用日

趋广泛。

3. 直线电动机的特点
现在的机加工对机床的加工速度和加工精度提出了越来越高的要求，传统的＂旋转电

动机＋滚珠丝杠“体系已很难适应这一趋势。使用直线电动机的驱动系统，有以下优点：

(1) 使用直线伺服电动机，电磁力直接作用千运动体（工作台）上，而不用机械连接，

因此没有机械滞后或齿节周期误差，精度完全取决于反馈系统的检测精度。

(2) 直线电动机上装配全数字伺服系统，可以达到极好的伺服性能。由于电动机和
工作台之间无机械连接件，工作台对位置指令几乎是立即反应（电气时间常数约 lms) ，从
而使跟随误差减至最小而达到较高的精度，并且在任何速度下都能实现非常平稳的进给

运动。

(3) 直线电动机系统在动力传动中由于没有低效率的中介传动部件而能达到高效
率，可获得很好的动态刚度（动态刚度即为在脉冲负荷作用下，伺服系统保持其位置的

能力）。

(4) 直线电动机驱动系统由于无机械零件相互接触，因此无机械磨损，也就不需要定
期维护，也不像滚珠丝杠那样有行程限制，使用多段拼接技术可以满足超长行程机床的

要求。

(5) 由于直线电动机的动件（初级）己和机床的工作台合二为一，因此，和滚珠丝杠进

给单元不同，直线电动机进给单元只能采用全闭环控制系统。
然而，直线电动机在机床上的应用也存在一些问题，包括：
(1) 由千没有机械连接或咽合，因此垂直轴需要外加一个平衡块或制动器。
(2) 当负荷变化大时，需要重新整定系统。目前，大多数现代控制装置具有自动整定

功能，因此能快速调整机床。

263 

(3) 磁铁（或线圈）对电动机部件的吸力很大，因此应注意选择导轨和设计滑架结构，

并注意解决磁铁吸引金属颗粒的问题。

直线电动机驱动系统具有很多的优点，对于促进机床的高速化有十分重要的意义和

应用价值。由于目前尚处于初级应用阶段，生产批量不大，因而成本很高。但可以预见，

作为一种崭新的传动方式，直线电动机必然在机床工业中得到越来越广泛的应用，并显现

巨大的生命力。

5.2  伺服控制的基本原理

伺服是英文 “servo" 的谐音，在数控机床中，伺服是指以机床移动部件的位置和速度

作为控制量的自动控制系统。伺服驱动系统的性能很大程度上决定了数控机床的性能，

如数控机床的最高移动速度、定位精度、重复定位精度等重要指标，直接影响了加工工件

的精度。因此，对伺服良好的维护与维修，是保证数控机床正常使用的关键。

5.2.1  伺服系统的组成

数控机床伺服系统一般由驱动控制单元、驱动元件、机械传动部件、执行元件和检测

反馈环节等组成。驱动控制单元和驱动元件组成伺服驱动系统，机械传动部件和执行元

件组成机械传动系统，检测元件与反馈电路组成检测装置，也称为检测系统。

5.2.2  伺服系统的工作原理

伺服系统是一种反馈控制系统，它以指令脉冲为输入给定值与输出被调量进行比较，

利用比较后产生的偏差值对系统进行自动调节，以消除偏差，使被调量跟踪给定值。所以

伺服系统的运动来源千偏差信号，必须具有负反馈回路，并且始终于过渡过程状态。在运

动过程中实现了力的放大。伺服系统必须有一个不断输人能量的能源，外加负载可视为

系统的扰动输入。

伺服驱动系统能够控制移动机构实现稳定速度，并且精确定位，其难度非常大。因为

电动机拖着一个重量很重的工作台，而且摩擦力随着温度、润滑状态、设备的新旧程度等

因素而变化。但是随着科学技术的进步，人们不断总结经验，一步一步找到了好的控制办

法，这就是三环结构。这三个环就是位置环、速度环、电流环。其控制框图如图 5-28 所示。

264 

图 5-28 伺服系统控制原理图

1. 电流环
电流环也称内环，电流环有两个输入信号：一个是速度环输出的指令信号；另一个经
电流互感器，并经处理后得到电流信号，它代表电动机电枢回路的电流，它送入电流环也
是负反馈。电流环的输出是一个电压模拟信号，用它来控制 PWM 电路，产生相应的占空
比信号去触发功率变换单元电路，使电动机获得一个与计算机指令相关的，并与电动机位
置、速度、电流相关的运行状态。这个运行状态满足计算机指令的要求，是为伺服电动机
提供转矩的电路。

一般情况下它与电动机的匹配调节已由制造者作好了或者指定了相应的匹配参数，

其反馈信号也在伺服系统内连接完成，因此不需接线与调整。

2. 速度环

速度环也称为中环。这个环是一个非常重要的环，它的输入信号有两个：一个是位置
环的输出，作为速度环的指令信号送给速度环；另一个由电动机带动的测速发电机经反馈
网络处理后的信息，作为负反馈送给速度环。速度环的两个输入信号也是反相的，一个
加，一个减。速度环的输出就是电流环的指令输入信号，是控制电动机转速亦即坐标轴运
行速度向电路。速度调节器是比例积分 (PI) 调节器，其 P 、 1 调整值完全取决于所驱动坐
标轴的负载大小和机械传动系统（导轨、传动机构）的传动刚度与传动间隙等机械特性，一
旦这些特性发生明显变化时，首先需要对机械传动系统进行修复工作，然后重新调整速度

环 PI 调节器。

速度环的最佳调节是在位置环开环的条件下才能完成的，这对于水平运动的坐标轴
和转力坐标轴较容易进行，而对于垂向运动坐标轴则位置环开环时会自动下落而发生危
险，可以采取先摘下电动机空载调整，然后再装好电动机与位置环一起调整或者直接带位
置环一起调整，这时需要有一定的经验和细心。

3 ，位置环
位置环也称为外环，其输入信号是计算机给出的指令和位置检测器反馈的位置信号。
这个反馈是负反馈，也就是说与指令信号相位相反。指令信号是向位置环送去加数，而反
馈信号是送去减数。位置环的输出就是速度环的输入，它是控制各坐标轴按指令位置精
确定位的控制环节。位置环将最终影响坐标轴的位置精度及工作精度。这其中有如下两

方面的工作。

(1) 位置测量元件的精度与 CNC 系统脉冲当量的匹配问题。测量元件单位移动距
离发出的脉冲数目经过外部倍频电路与 CNC 指令脉冲经内部倍频系数的倍频后要与数
控系统规定的分辨率相符。例如位置测量元件 10 脉冲／mm ，数控系统分辨率即脉冲当量

为 0.001mm ，则测量元件送出的脉冲必须经过 100 倍频方可匹配。

(2) 位置环增益系数 K 值的正确设定与调节。通常 K 值是作为机床数据设置的，数
控系统中对各个坐标轴分别指定了 K 值的设置地址和数值单位。在速度环最佳化调节
后 K 值的设定则成为反映机床性能好坏、影响最终精度的重要因素。 K 值是机床运动
坐标自身性能优劣的直接表现而并非可以任意放大。关于 K 值的设置要注意两个问题，
首先要满足下列公式： K= vi~ 。式中， v 为坐标运行速度 (m/min); ~为跟踪误差

(mm) 。

注意，不同的数控系统采用的单位可能不同，设置时要注意数控系统规定的单位。例

265 

如，坐标运行速度的单位是 m/min ，则 K 值单位为 m/(mm·min) ，若 v 的单位为 mm/s,

则 K 的单位应为 mm/(mm·s) 。其次要满足各联动坐标轴的 K 值必须相同，以保证合成

运动时的精度。通常是以 K 值最低的坐标轴为准。

5.2.3  伺服系统的分类

进给伺服系统的位置控制形式按有无检测装置可以分为开环和闭环两大类，闭环系

统按有无分离型位置检测装置分为半闭环控制和全闭环控制两种形式。

1. 开环控制型数控系统

这类数控系统不带检测装置，也无反馈电路，以步进电动机驱动，如图 5-29 所示。

CNC 装置输出的指令进给脉冲经驱动电路进行功率放大，转换为控制步进电动机各定子

绕组依次通电债t 电的电流脉冲信号，驱动步进电动机转动，再经机床传动机构（齿轮箱、

丝杠等）带动工作台移动。这种方式控制简单，价格比较低廉，被广泛应用于经济型数控

系统中。

步进电机 上』f卢

图 5-29 开环控制型数控系统结构图

2. 全闭环控制型数控系统

这类数控系统带有位置检测反馈装置，以直流或交流伺服电动机驱动，位置检测元件

安装在机床工作台上，以检测机床工作台的实际运行位置（直线位移），并将其与 CNC 装

置计算出的指令位置（或位移）相比较，用差值进行控制。该数控系统结构图如图 5-30

所示。

测量元件

位置反馈

图 5-30 全闭环控制型数控系统结构图

这类控制方式可以消除包括工作台传动链在内的传动误差，因而位置控制精度很高，

但由于它将丝杠、螺母副及机床工作台这些大惯性环节放在闭环环内，调试时，很难达到

其系统稳定状态。

3. 半闭环控制型数控系统

为了克服上述全闭环控制的缺点，将位置检测元件安装在电动机轴端或丝杠轴端通

过角位移的测量间接计算出机床工作台的实际运行位置（直线位移），并将其与 CNC 装置

266 

计算出的指令位置（或位移）相比较，用差值进行控制，构成半闭环，该数控系统结构图如
图 5-31 所示。由于闭环的环路内不包括丝杠、螺母副及机床工作台这些大惯性环节，由

这些环节造成的误差不能由环路所矫正，其控制精度不如全闭环控制型数控系统，但其调

试方便，可以获得比较稳定的控制特性。因此在实际应用中，这种方式被广泛采用。

旋转变压器

图 5-31 半闭环控制型数控系统结构图

5.3  FANUC 伺服驱动装置及其维修技术

FANUC 伺服装置按主电路的电源输入是交流还是直流可分为伺服单元 (Servo U 
nit,SVU) 和伺服模块 (Servo Module, SVM) 两种。伺服单元的输入电源通常是三相交流
电 (AC 200V, 50Hz) ，电动机的再生能量通过伺服单元的再生放电制动电阻消耗掉。

FANUC 系统的伺服单元有 a 系列、 p 系列和 pi 系列。 FANUC 系统的伺服模块有 a 系列

和 ai 系列。伺服模块的输入电源为直流电源（通常为 OC300V) ，电动机的再生能量通过

系统电源模块反馈到电网，一般主轴驱动装置为串行数字控制装置时，进给轴驱动装置采

用伺服模块。

5.3.1  FANUC” 系列伺服单元驱动装置

1.  a 系列伺服单元的端子功能及连接

a 系列伺服单元端子如图 5-32 所示，其各端子功能见以下说明。

L1 、 L2 、 L3 ：三相输入动力电源端子，交流 200V 。

L1C、 L2C ：单相输入控制电路电源端子，交流 200V （出厂时与 L1 、 L2 短接）。

THl 、 TH2 ：为过热报警输入端子（出厂时， TH1 、 TH2 己短接），可用千伺服变压器及

制动电阻的过热信号的输入。

RC 、 RI 、 RE ：外接还是内装制动电阻选择端子。

RL2 、 RL3:MCC 动作确认输出端子 (MCC 的常闭点）。

100A、 lOOB:C 型放大器内部交流继电器的线圈外部输入电源 (a 型放大器已为内部

直流 24V 电源）。

UL 、 VL 、 WL ：第一轴伺服电动机动力线。

UM 、 VM 、 WM ：第二轴伺服电动机动力线。
2.  a 系列伺服单元电缆接口

FANUC 系统进给伺服接口形式有 A 型和 B 型两种。 A 型接口指进给伺服电动机的

内装编码器信号反馈到 CNC 系统； B 型伺服接口是指进给伺服电动机的内装编码器信号

反馈到伺服放大器。 FANUCOC/0D 系统可采用 A 型和 B 型两种类型的伺服接口，多数

267 

采用 A 型接口。 FANUC 16/18/0iA 系统和 FANUC 16i/18il21i/OiB/OiC 均为 B 型接口。

如图 5 — 33 所示，当 CNC 与伺服连接时要根据实际情况选择正确的接口。

@ 

皇竹

断路器

@ 
控制电路
熔断器

© 

接线端子

@ 
开关

@ 
状态显示
(LED) 

测试针(j) 

□  □  □  □  □ 

JS2B  JSIB 

JF2 

JFI 

JA4 

口巨 11 
I  I 

I 

l 

垒——尸

CCXX43 1 

□  □ 

JV2B  JVlB 

图 5-32 o: 系列伺服单元端子

图 5-33 a 系列伺服电缆接口

JVlB 、 JV2B:A 型接口的伺服控制信号输入接口。

JSlB 、JS2B:B 型接口的伺服控制信号输入接口。

JFl 、JF2:B 型接口的伺服位置反馈信号输入接口。

JA4 ：伺服电动机内装绝对编码器电池电源接口 (6V) 。

CX3 ：伺服装置内 MCC 动作确认接口，一般可用于伺服单元主电路接触器的控制。

CX4 ：伺服紧急停止信号输入端，用于机床面板的急停开关（常闭点）。

3. 开关的设定

a 系列伺服单元可以通过对图 5-32 中＠的开关进行设定，从而达到不同类型 CNC、

伺服等的配置目的，具体的设定方法如下。

开关 1 的设定：根据 CNC 与伺服放大器之间接口类型的不同，其设定也不同。 A 型

伺服接口为 OFF,B 型伺服接口为 ON。设定不对时，将出现伺服 401 ＃报警 (SVU 显示
”- ＂）。

开关 2 的设定： C 型放大器和 a 型放大器的选择。 C 型放大器设定为 ON,a 型放大器

设定为 OFF。设定不对时，将出现伺服 401 ＃报警 (SVU 显示“-"）。

268 

开关 3 、 4 的设定：根据使用的再生放电电阻的不同，设定不同。开关 3 、 4 均为 ON 时
为内装型 (400W) ；开关 3 设为 ON ，开关 4 设为 OFF 时为分离型 (800W) ；开关 3 设为

OFF ，开关 4 设为 OFF 时为分离型 (1200W) 。

4.  a 系列伺服单元的电气连接

图 5-34 是 FANUCOMD 系统数控车的电气原理图。因 a 系列伺服单元驱动单元
其输入动力电压为三相 200V ，故将 380V 的输入电压经 TCl 变压器变压，然后输入至伺
服单元的 L1 、 L2 、 L3 端子。 L1C 与 L2C 按出厂默认连接，分别与 L1 、 L2 短接。 THl 、
TH2 连接至变压器内部的热电偶，用于变压器过热保护。 JVlB 、JV2B 分别与系统轴板的
Ml84 、 M187 连接，作为机床 X 轴、 Z 轴伺服电动机的控制接口。 CX4 与机床面板的急停
开关连接，作为伺服单元急停信号输入控制。伺服单元的 UL、 VL 、WL、 G 连接到 X 轴伺
服电动机，作为 X 轴伺服电动机的动力电源。伺服单元的 UM 、 VM 、WM 、 G 连接到 Z 轴
伺服电动机，作为 Z 轴伺服电动机的动力电源。 X 轴、 Z 轴伺服电动机的编码器分别与
系统轴板的 M185 、 M188 连接，作为机床 X 轴、 Z 轴的位置和速度反馈信号。

SBI 急停按钮

JVIB 

JV28 

CX4 

2 

3 

LIC  SVU 

伺
L2C  服
单
LI  元
L2 
L3 

THI 

TH2 

UL 
VL 
WL 

G 

UM 
VM 
WM 
G 

图 5-34 FANUCOMD 系统与 a 系列伺服单元电气连接图

5. ＂系列伺服单元的报警及故障原因分析

a 系列伺服单元的报警信息通过图 5 — 32 中的＠LED 状态显示器显示以下信息。
不显示：控制电源没有接通；

显示为 “0" ：伺服就绪；

显示为＂－”：伺服未就绪；

显示为＂＃”：伺服报警。

显示为其他的数字或字符其含义如下如述。

l) 伺服单元过电压报警 ”1"

伺服单元过电压报警是指伺服单元的 DC 300V 超过了规定值。产生故障的原因可

能有：

269 

(1) 输入的交流电源电压过高。

(2) 制动电阻损坏或连接不良。

(3) 伺服单元本身不良。

2) 伺服单元控制电压低报警 “2"

伺服单元电压低报警是指伺服单元控制电路电压过低报警。产生故障的原因可

能有：

(1) 伺服单元输入的控制电压低。

(2) 伺服单元内部控制电路低电压故障（如内部电器元件短路）。

(3) 伺服单元外部连接有短路故障，如急停开关回路短路或伺服电动机编码器内部

短路。

3) 伺服单元主电路低电压报警 “3"

伺服单元主电路低电压报警是指伺服单元的 OC300V 电压低或为 ov 报警。产生故

障的原因可能有：

(1) 交流电源输入电压过低。

(2) 伺服单元的断路器跳闸。

(3) 伺服单元本身不良。

4) 伺服单元过热报警“5"

伺服单元过热报警是指伺服单元检测出过热输入信号。产生故障的原因可能有：

(1) 平均再生放电能量过大。

(2) 分离型再生放电单元的热敏开关不良或外接热敏开关不良（如伺服变压器过热）。

(3) 伺服单元本身不良。

5) 伺服单元过电流报警“8” 、 “9” 、 “b"

伺服单元过电流报警是指伺服单元的第 1 轴、第 2 轴及第 1 、 2 轴检测出过电流。产

生故障的原因可能有：

(1) 伺服电动机短路。

(2) 伺服单元的逆变块击穿短路。

(3) 伺服单元本身不良。

6) 伺服单元的智能功率模块 (1PM) 报警 “8. ＂、 “9. ＂、 “b."

伺服单元的智能功率模块报警是指智能功率模块过热报警、过电流报警及伺服单元

控制电路低电压报警。产生故障的原因可能有：

(1) 伺服单元过热（如伺服单元散热风扇损坏）。

(2) 伺服单元的逆变块击穿短路或电动机短路。

(3) 伺服电动机编码器内部短路。

(4) 伺服单元本身不良。

5.3.2  FANUC  Pi 系列伺服单元驱动装置

~i 系列伺服单元是 FANUC 公司推出的最新的高可靠性、高性价比的进给伺服驱动
装置（图 5-35) 。一般用于小型数控机床的进给轴的伺服驱动，例如在配置 FANUC Oi 
Mate TC 或 MC 伺服系统的经济型机床中作为进给轴的伺服驱动，以及在大型加工中心

270 

。

。

c:::::J 

Lz@Dc@@ 

OPOP cc 

lOBIOA 

回
；

JX5 

JFI 

巳
巳
汇

c:::::::::J 

。

图 5-35 ~i 系列伺服单元

I
L
几
l
c
m
w
r
w
芦
@
。
g
M
C
c
g
E
s
P

数控机床的附加伺服轴的驱动，如加工中心中作为刀库的旋转、机械手的转臂控制、回转

工作台控制等。

1 ．阳系列伺服单元的端子功能及连接

L1 、 L2 、 L3 ：主电源输入端接口，三相交流电源 200V 、 50/60Hz 。

U 、 V 、W ：伺服电动机的动力线接口。

DCC 、 OCP ：外接 0C 制动电阻接口。

CX29 ：主电源 MCC 控制信号接口。

CX30 ：急停信号 (*ESP) 接口。

CXA20:0C 制动电阻过热信号接口。

CX19A:OC 24V 控制电路电源输入接口。连接外部 24V 稳压电源。

CX19B: DC 24V 控制电路电源输出接口。连接下一个伺服单元的 CX19A。

COPlOA ：伺服高速串行总线 (HSSB) 接口。与下个伺服单元的 COPlOB 连接（光缆）。

COPlOB ：伺服高速串行总线 (HSSB) 接口。与 CNC 系统的 COPlOA 连接（光缆）。

JX5 ：伺服检测板信号接口。

JFl ：伺服电动机内装编码器信号接口。

CX5X ：伺服电动机编码器为绝对编码器的电池接口。

2.  Pi 系列伺服单元的连接
FANUC Oi  Mate TC 系统的数控车床与 ~i 伺服单元的连接图如图 5-36 所示， TCl

为三相伺服变压器，将输入的动力电源 380V 经过转换成 200V 后分别连接到 X 轴、 Z 轴

伺服单元的 L1 、 L2 、 L3 端子，作为伺服单元的主电路的输入电源。外部 24V 直流稳压电

源连接到 X 轴伺服单元的 CXA19A,X 轴伺服单元的 CXA19B 连接到 Z 轴伺服单元的

CXA19A ，作为伺服单元的控制电路的输入电源。伺服单元的 DCC-OCP 分别连接到 X

271 

FANUC  Oi  Mate TC 
系统
COPlOA 

L3 
L2 
LI 

伤

COPIOB 
LI 
L2 
伺
L3
~服
DCC 放
DCP 合
CX20A 
COPIOA 

COPIOB 
LI 
Bi 
L2 
伺
L3
~服
DCC  放
DCP 仑
CX20A 
COPIOA 

l xc 
c 
9 
A 
x 
3 
O
U
V
W

士

JFI 

CX19B 

CX19A 

U
V
W
寺

JFl 

CX198 

图 S-36 FANUC Oi  Mate TC 伺服连接图

轴、 Z 轴的外接制动电阻， CX20A 连接到相应的制动电阻的热敏开关， JFl 连接到相应的
伺服电动机内装编码器的接口上，作为 X 轴、 Z 轴的速度和位置反馈信号控制。 FANUC
Oi  Mate TC 系统 CNC 通过 HSSB 光纤将系统 COPlOA 连接到 X 轴伺服驱动单元的
COPlOB,X 轴伺服单元的 COPlOA 连接到 Z 轴伺服单元

。

的 COPlOB ，用于 CNC 与伺服单元的通信。

3.  Pi 系列伺服单元的报警
住系列伺服单元上没有类似于 a 系列上的 LED 显示器，
因此伺服单元不显示报警内容，如有报警，伺服单元通过高
速串行总线传送至 CNC,CNC 会显示报警号为 “4xx” 的报警。

5.3.3  FANUC a 系列伺服模块驱动装置

1.a 系列伺服模块端子功能
图 5 — 37 为 a 系列伺服模块， FANUC 16/18/21/0iA 

系统一般采用 a 系列伺服模块进行伺服轴的驱动。

CD  DC  LINK 端子盒：连接电源模块的 OC300V。
＠伺服电动机绝对脉冲编码器的电池盒（标准为 0C

6V) ，与伺服模块的 CCX5 连接。

＠状态指示 (LED):7 段 1ED 不显示：控制电源没有接

通；为 “0” ：伺服就绪；为＂－飞伺服未就绪；为＂＃”：伺服报警。
＠为伺服电动机绝对编码器电池连接接口 (CX5X) 。

＠为伺服接口类型设定开关 Sl/S2 。

飘 (I)

曰

区
(8) 

a]  (3) 
(4)□CCX, 

(5) 

SS2 l 

(6) 

Fz 

IN/OUT[IIl] 

+24V 

(7) 

JX5C尺X2A二C月X2(B9) 

JX1A 工二刀 (10)
JXIB 尺二刀 (11)
JVIB 尺二::zl (12) 
JV2ll 尺二1l (13) 
JSlB 巴：习 (14)
JS邓匹二2) (15) 

JF1 尺二J] (16) 
职巴：立 (17)

院澄院1 吉 I
o o 

＠为控制电路 24V 电源的输入熔断器 F2 。

图 5-37 a 系列伺服模块

272 

{J)  24V 电源 I/0 连接器 CX2A/CX2B 。

＠为 DC LINK 充电灯。

＠为伺服信号检测板连接器 JX5 。

＠为模块之间接口输入连接器 JX1A。

＠为模块之间接口输出连接器 JX1B。

＠、＠为 A 型伺服接口的伺服信号连接器 JV1B/JV2B 。

＠、＠为 B 型伺服接口的伺服信号连接器 JS1B/JS2B 。

的、＠为 B 型伺服接口的伺服电机编码器连接器］F1/JF2 。
2.  a 系列伺服模块的连接

下面以 FANUC OiMA 系统为例（带第四轴的加工中心数控机床），说明伺服模块的

具体连接，如图 5-38 所示。

来自电源模块 _J
的P 、 N

p 

N 

N p ! 

来自主轴模块
的 CX2B

来自主轴模块』 JXlA : 

的 JXlB

模

块

来自系统模块了

的JSlA

来自系统模块
的JS2A

JS2B 

JXIB 

JFI 

来自系统模块
的JS3A

来自系统模块
的JS4A

} :  p 

N 

伺
JXlA 服
模
块

图 5-38 FANUC OiA 系统与 a 系列伺服模块连接图

伺服模块 1:UL 、 VL 、 WL 与机床第一轴电动机连接， UM 、 VM 、 WM 与机床第 5 轴电

动机连接，分别作为 X 轴、 Y 轴电动机的动力驱动电源； JFl 、 JF2 分别与 X 轴、 Y 轴服电

动机内装串行编码器连接，作为 X 轴、 Y 轴的速度和位置反馈信号控制。 JSlB 、 JS2B 分

别与系统主模块的 JSlA 、 JS2A 连接，作为 X 轴、 Y 轴伺服电动机控制及信息信号。

CX2A 与主轴模块的 CX2B 连接，作为伺服模块 1 的控制电源及机床急停信号的输入控

制。 CX2B 与伺服模块 2 的 CX2A 连接。 JXlA 与主轴模块的 JXlB 连接，作为伺服模块

间的信息信号传递控制。 P 、 N 与主轴模块的 P 、 N 连接，作为伺服模块 1 的主电路电源
(DC 300V) 的输入电源。

273 

伺服模块 2:UL、 VL 、 WL 与机床第三轴电动机连接， UM 、 VM 、 WM 与机床第四轴电
动机连接，分别作为 Z 轴、 B 轴电动机的动力驱动电源。 JFl 、 JF2 分别与 Z 轴、 B 轴伺服
电动机内装串行编码器连接，作为 Z 轴、 B 轴的速度和位置反馈信号控制。 JSlB 、 JS2B
分别与系统主模块的 JS3A、 JS4A 连接，作为 Z 轴、 B 轴伺服电动机控制及信息信号。
CX2A 与伺服模块 1 的 CX2B 连接，作为伺服模块 2 的控制电源及机床急停信号的输入
控制。 JXlA 与伺服模块 1 的 JXlB 连接，作为伺服模块间的信息信号传递控制。 P 、 N 与
伺服模块 1 的 P 、 N 连接，作为伺服模块 2 的主电路电源 (OC300V) 的输入电源。

3." 系列伺服模块的报警
a 系列伺服模块的报警代码与 a 系列伺服单元的报警代码基本相同，请参见前面章

节相关内容。

5.3.4  FANUC ai 系列伺服模块驱动装置

1.  ai 系列伺服模块端子功能
图 5-39 为 d 系列伺服模块。与 Q 系列伺服模块不同的是， ai 系列伺服模块的伺服
信息通过高速串行总线 HSSB （光纤）传输，而不是通过传统的串行信号电缆线传输。
FANUC  16i/18i 戊 li/OiB/OiC 系统一般采用 ai 系列伺服模块进行伺服轴的驱动。

BATTERY ：为伺服电动机绝对编码器的电池盒 (OC6V) 。

STATUS ：为伺服模块状态指示窗口。

CX5X ：为绝对编码器电池的接口。
CX2A:OC24V 电源、＊ ESP 急停信号、 XMIF 报警信息输入接口，与前一个模块的

CX2B 相连。

CX2B:OC 24V 电源、＊ ESP 急停信号、 XMIF 报警信息输出接口，与后模块的 CX2A

相连。

COPlOA ：伺服高速串行总线 (HSSB) 输出接口。与下个伺服单元的 COPlOB 连接

（光缆）。

COPlOB ：伺服高速串行总线 (HSSB) 输入接口。与 CNC 系统 COPlOA 连接（光缆）。
JX5 ：为伺服检测板信号接口。

JFl 、 JF2 ：为伺服电动机编码器信号接口。

CZ2L 、 CZ2M ：为伺服电动机动力线连接插口。

2.  ai 系列伺服模块的连接
图 5-40 为 FANUCOiMC 系统数控铣床与 ai 系列伺服模块的连接电气原理图。从
ai 伺服模块的硬件连接可以看出，通过光缆的连接取代了电缆的连接，不仅保证了信号传
输的速度，而且增强了抗干扰能力，保证了传输的可靠性。各伺服模块之间的信息传递是
通过 CX2AICX2B 的串行数据的传递，而不是通过像 a 系列伺服模块的信号电缆 JXlA/
JXlB(BCD 代码形式）的传递，从而减少了连接电缆。
3.  ai 系列伺服模块的报警及故障原因分析

1) 内部风扇停止报警代码 ”1"

故障原因可能有：

(1) 内部风扇故障或风扇连接不良。

274 

令
令

回
STATUS 

因
cxsx 

来自电源模块 ip  
N 
的 P、 N

p 

N 

伺

来自主轴模块 -PCX2A 服 CX2B
的CX2B

模

块

□ 

BATTER, Y 

CX2A 丿

CX2B 口

COPIOB 回

COPIOA 回

JX5 二

ENCl 二

JFl 

EN岱；二

CZ2L 巨田王召 CZ2M

p 

N 

p 

N 

伺
CX2A 服 CX2B

模
块
COPlOB  COPIOA 

JFl 

图 5-39 ai 系列伺服模块

图 5 - 40  FANUC OiMC 系统与 ai 系列伺服模块连接图

(2) 伺服模块不良。

2) 控制电路电压低报警代码 ”2"

故障原因可能有：

(1) 电源模块提供的 OC24V 电压低。

(2) 伺服模块的 CX2AICX2B 连接不良。

(3) 伺服模块不良。

3) 主电路 DC300V 电压低报警代码 ”5"

故障原因可能有：

(1) 电源模块提供的 OC300V 电压低。

(2) 伺服模块内的熔断器熔断。

(3) 伺服模块不良。

4) 伺服模块过热报警代码 ”6"

故障原因可能有：

(1) 伺服电动机过载。

(2) 电箱内部温度过高（如电箱风扇损坏或通风不良）。

(3) 伺服模块不良。

5) 伺服模块的冷却风扇停止报警代码 “F"

故障原因可能有：

(1) 伺服模块冷却风扇损坏或连接不良。

(2) 伺服模块不良。

275 

6) 伺服模块之间通信错误报警代码 “p"

故障原因可能有：

(1) 伺服模块通信接 El CX2A/CX2B 连接不良。

(2) 伺服模块不良。

7) 伺服模块主电路 (OC 300V) 过电流报警代码 “8"

故障原因可能有：

(1) 伺服电动机及连接电缆短路故障。

(2) 伺服模块的逆变块短路。

(3) 伺服模块不良。

8) 伺服模块的 1PM 过电流报警代码 “8” 、 “9” 、 “A"

故障原因可能有：

(1) 伺服电动机及连接电缆短路故障。

(2) 伺服模块不良。

9) 伺服模块的 1PM 过热报警代码 “8." 、 “9. ＂、 “A."

故障原因可能有：

(1) 伺服电动机过载。

(2) 周围温度过高。

(3) 伺服模块不良。

10) 伺服电动机过电流报警代码 "b" （第 1 轴）、 “c" （第 2 轴）、 “d" （第 3 轴）

故障原因可能有：

(1) 伺服电动机过载或匝间短路。

(2) 伺服参数设定不良。

(3) 伺服模块不良。

5.4  SIEMENS 伺服驱动装置及其维修技术

SIEMENS SIMODRIVE 611 伺服驱动器根据控制信号的不同，包括模拟伺服 611A、
数字伺服 611D 和通用型伺服 611U 。 611 系列都属于模块化结构，由电源模块、控制模块

和功率模块等模块组成。

电源模块是提供驱动和数控系统的电源，包括维持系统正常工作的弱电和供给功率

模块用的 600VOC 直流电压。根据直流电压控制方式，它又分为开环控制的 U/E 模块

和闭环控制的 I/R 模块。 U/E 模块没有电源的回馈系统，其直流电压正常时为 570VDC

左右，而当制动能量大时，电压可高达 640V OC 左右。 I/R 模块的电压一直维持在 600V

OC 左右。

伺服控制模块主要实现对伺服轴的速度环和电流环的闭环控制的控制。其受控于

CNC 等控制器的控制信号，并接受来自于编码器或光栅尺的反馈信号，进行闭环的调节。

伺服功率模块主要为伺服电动机提供频率和电压可变的交流电源。

此外，在伺服电源的进线端一般要加装电抗与滤波模块，其中电抗主要是对电压起到

平稳作用，而滤波模块通过对电源进行滤波，使电源模块减少由于电网杂波的影响。

276 

下边主要介绍用于 SINUMERIK 802 系列的 SIMODRIVE 611 U 和用千 SINU-

MERIK 840D 的 SIMODRIVE 611D。

5. 4.1  SIMODRIVE 611 U 系列伺服摸块驱动装置
1.  6110 系列伺服模块端子功能
图 5-41 为 611UE 的电源模块与伺服模块，其与用千 SINUMERIK 802C 系列的

外部接线

内部继电器

Xlll 巨了

PP72/48输入输入点

内部继电器
PP72/48输入公共端
PP72/48输入输入点

脉冲使能信号

$ 
i 笞

内部接触器控制
Signal contactor 
Line connector 

Signal contactor 
Start inhibit 

覃x

! 外部接线

6FX4002.2CF02.l 

来自电机反馈接口 I

11 

111  I :;  ~ I  111 

II 

I 米自电机反馈按 n

故障灯及复位按钮

检测信号
脉冲已经使能

｛丘

I~一二」 PROFIBVS接日模块

24VDC外部供电{

脉冲使能信号

24V参考线

模拟主轴给定

测试点

无定义

控制器使能
A 

数字橇输入A

数字量输出 A

控制器使能
B 
·}数字景输入B

｝数字量输出B
I 

I 

扂

礼叮二E 
囡
口白口

P600 

M6QQ_ __-—- Q 

L；三勹｝
[  _＿＿一； 一二---－」

图 5-41 611UE 电源模块与伺服模块接口

盆

277 

611U 区别在于， 611UE 伺服驱动器支持 Profibus 总线，从而可以方便地用于 SINU­

MERIK 802D 系列的数控机床驱动。

1)  611U 电源模块上各主要端子的功能
(1)  Xlll ：伺服就绪信号，当伺服正常启动后，端子付2 与节3.1 闭合，一般在

节3.1 外接的 24VOC,TI2 将就绪信号输出至 PLC 的输入点，表示电源模块正常。

(2)  X121 ：模块超温报警信号和伺服就绪信号。当伺服过载超温后，端子 T51 和 T52

闭合，一般在 T51 外接的 24VOC,T52 将超温信号输出至 PLC 的输入点。所有的模块过

载和连接的电动机过热都会触发超温报警输出。

T64 ：控制使能输入，该信号同时对所有连接的模块有效，该信号取消时，所有的轴的

速度给定电压为零，轴以最大的加速度停车。延迟一定的时间后，取消脉冲使能。

T63 ：脉冲使能输入，该信号同时对所有连接的模块有效，该信号取消后，所有的轴的

电源取消，轴以自由运动的形式停车。

T9/T19:T9 是 24VOC 输出电压， T19 是 24VOC 的地。
(3)  X141 ：电源模块工作正常输出信号端口。可作为电压检测端子，以便进行电源模

块诊断使用。主要包括以下端子：

节： P24, +24V OC。
T10:N24, -24V DC。
T45:P15, + 15V OC 。

T15:M,OV 。
T44:N15, -15V DC。

R:Reset ，模块的报警复位信号。
(4)  X161 ：电源模块设定操作和标准操作选择端口。

T112 ；调试或标准方式，该信号一般用在传输线的调试中，一般情况连接到系统的

24V 。

T48 ：主回路继电器，该信号断开时，主控制回路电源主继电器断开。
(5)  X171 :NS1/NS2 ，主继电器闭合使能，只有该信号为高电平时，主继电器才可能

得电。该信号常用来作主继电器闭合的连锁条件（一般按出厂状态使用）。

(6)  X172:AS1/AS2 ，主继电器状态，该信号反映主继电器的闭合状态，主继电器闭合

对为高电平（一般按出厂状态使用）。

(7)  X181 ：供外部使用的供电电源端口，包括直流电源 600V OC(P500,M500) ，三相

交流电源 380V AC(Ul, Vl, Wl) 。

(8)  X351 ：设备总线，为后面连接的模块供电用。
2)  611U 控制模块上主要端子的作用

(1)  X411~X412 ：电动机编码器的接口，连接时需要注意接线的次序，如果电动机接

在伺服驱动器功率模块的 A1 接口，其编码器反馈接到 X411 ，如果接在 A2 ，编码器反馈接

到 X412 。

(2)  X423:Profibus 总线接口，用于连接 SINUMERIK 802D  CNC 上的 Profibus 总线

接口，从而构成接受 CNC 的控制信号，并向其反馈信息。

(3)  X431 ：外部电源供电和脉冲使能接口。如果要使用控制模块上的 1/0 ，则需要通

278 

过 P24 接入 24V DC,M24 接入 ov ，给输出点提供电源。

T663 ：控制模块脉冲使能输入端子。
T9:24V DC 输出电压。在使用时一般将 T663 与 T9 短接。 T19 是 24VDC 对应的

参考地 ov 。

(4)  X441:T75/T16 ，输出 0~10VDC 电压，用于给定变频器等模拟主轴速度控制

信号。

(5)  X453 、 X454:T65 控制器使能， T9,24V DC ，在使用时将其短接。 IO.A, IO.B, 
l01.A, 11.B,QO.A,QO.B,Ql.A,Ql.B 可以利用软件定义其输入倩杻值勺功能，例如利用
QO.A 和 Ql.A 来控制变频主轴的正反转。

(6)  X471:RS-232C 接口，控制模块与计算机的通信接口。
(7)  X472 ：主轴变码器反馈输入接口。
(8)  X351 ：设备总线，用千电源模块供电及模块间相互通信。
(9)  Al/A2 ：接口位于功率模块上， A1 为电动机 1 接口， A2 为电动机 2 接口。

此外通过＋／—， P 可以调节和设定伺服驱动器的参数，在设定过程中，可以通过位千

控制模块上的 6 位 LCD 液晶显示器观察参数及其设定值。另外也用于显示伺服驱动器

的报警。

3) 控制端子的作用

端子 T48 ：当该端子与端子 9 接通后，直流母线开始充电。开环模块的母线电压约为

560VDC（相对千进线电压 380V AC) ；闭环模块的母线电压为 600VDC。

端子 T63 ：当该端子与端子 9 接通后，激活驱动器的脉宽调制逻辑。

端子 T64 ：当该端子与端子 9 接通后，驱动器的控制使能； 611UE 模块的使能条件满

足。

4) 上电和断电时序

上电：端子 48 与端子 9 接通；端子 63 与端子 9 接通；端子 64 与端子 9 接通。

断电：端子 64 与端子 9 断开一驱动器进入制动状态；端子 63 与端子 9 断开——驱

动器进入自由状态；端子 48 与端子 9 断开一直流母线开始放电。

注意：如果断电时序不符合上述要求，主轴或进给轴则无制动过程；如果急停时主轴

出现自由停车，请检查 PLC 程序是否正确或是否有接线错误。

5) 驱动器的状态信号

端子 72 和端子 73.1 ，端子 74 和端子 73.2 ：为电源模块内部的”就绪＂继电器的常开

和常闭触点；该继电器动作的条件是：

端子 48 与 9 闭合、端子 63 与 9 闭合且端子 64 与 9 闭合；端子 NSl 和 NS2 闭合；

所有 611UE 模块无报警，且端子 663 和端子 9 闭合、端子 65 和端子 9 闭合；

802D 已经启动 (NC 内部“脉冲使能”和“控制使能“信号已经激活）；

端子 51 和端子 52 、端子 53 ：为电源模块内部的＂ I勺监控或超温＂报警继电器的常开

和常闭触点；

注意：必须在端子 48 与端子 9 断开后才能切断主电源。
2.  6110 系列伺服模块的连接
图 5-42 为 SIEMENS 802D  baseline 系统数控车床与 611UE 伺服驱动的连接电气

279 

接变频器用千
接380V 交流电源 「—+－下一来自 8020 c,NC X4 Profibus接口模拟主轴控制

PLC控制其接通时序

外接24V DC 

就绪信号24VDC超温报警

主轴正转主轴反转

M3 
X轴伺服电机

M4 
Z轴伺服电机

图 5 - 42  SIEMENS 802D baseline 系统与 611UE 系列伺服模块连接图

原理图。

电源模块主要连接有， 380V AC 电源输入，一般在输入前还要加装滤波器和电抗器，
电源模块的 T72 和 T52 端子连接至 PLC 输入点。 172 表示所有驱动器模块均进入就绪

状态， T52 表示驱动器过热 (I2t) 或过载状态。

SIMODRIVE 611 U 驱动器电源模块对上电与断电的时序有严格的要求。图 5-43
说明了驱动器控制端子的控制时序。驱动器电源模块的控制端子的不同状态，确定了伺服
系统的工作状态。从图中可以看出，伺服驱动器有三种不同的工作状态：自由状态、工作
状态和制动状态。上电过程中，首先接通驱动器的端子 T48 ，这时驱动器的直流母线开始
充电；经过延时之后可以接通驱动器端子 T63 ，使驱动器的脉冲控制使能；再经过延时之
后，或由操作人员通过机床控制面板上的伺服使能按钮，或者由 PLC 延时后自动接通驱
动器控制使能端子 T64 。通常机床的操作面板上设有伺服使能按钮，用来接通控制器的
控制使能。控制使能接通后，驱动器进入工作状态。断电时，首先断开端子 T64 ，使驱动
器进入制动状态，与之连接的主轴和进给轴会迅速制动。通常通过急停按钮直接控制端
子 T64 ，使各个轴可以在紧急情况下快速制动。当检测到所有轴均已停止运动进入静止
状态后，断开端子 T63 ，关断脉冲控制。延时后，断开端子 T48 ，使直流母线进入放电状
态。直流母线完全放电需要大约 4 min。因此在安装或断开直流母线的导流条时，一定

愿动器自由状态 驱动器工作

驱动器制动状态
／／驱动器自由一状态

T

T  -厂—-－一二止制动后

厂—-－－

T  _」--－

：工盲： C

夏·

上电时序

．工，夏夏．

断电时序

图 5-43 611UE 电源模块的上下电时序

280 

L 

要确认直流母线完全放电。否则可能有高压触电的危险。如果在主轴没有完全进入静止

状态时，就断开端子 T63 或端子 T48 ，主轴就会进入自由状态，影响制动效果。

需要注意的是，驱动器要求在直流母线开始放电后才能切断三相进线，否则可能造成
驱动器的硬件故障。因此在机床断电时，必须做到在切断三相进线电源之前至少 10 ms, 

断开驱动器的端子 T48 。

伺服控制模块和功率模块上的主要连接有来自 CNC 的 Profibus 总线 X423 接口，模
拟主轴转速给定信号节5.A 和 T15 ，正反转转向给定信号 QO.A 和 Ql.A ，伺服电动机接

口 Al 、 A2 及编码器反馈接口 X411 和 X412 。

611UE 通过 Profibus 总线与 802D CNC 进行通信， Profibus 总线是一种高速的串行

通信总线，其最高通信速度可率 lOMb/s 。与 802C CNC 相比， CNC 与驱动器之间的连线

大为减少，从而也减少了故障的发生。

节5.A 和 T15 根据 CNC 由 Profibus 总线传来的控制信号，输出 0~10V 的模拟电压

到变频器，用千主轴转速的控制，同时利用 611UE 上的数字输出点 QO.A 和 Ql.A 实现

了主轴转向的控制，但需注意，使用 QO.A 和 Ql.A 时，需要在 X431 上外接直流电源 24V

DC 至 P24 和 M24 。

连接电动机时需要注意对应关系，若电动机接在伺服驱动器功率模块的 Al 接口，其

编码器反馈信号接到 X411 ，电动机接在 A2 接口，编码器反馈信号接到 X412 ，不能

接反。

3.  611UE 伺服模块的报警及故障原因分析

611U/Ue 系列数字伺服驱动器电源模块 (UE 或 I/R ）设有 6 个状态指示灯 (LED),

其相对位置及其含义如下：

Vl-OO-V2  Vl:DC 15V 控制电源故障。
V3-00-V4  V2:DC 5V 控制电源故障。
V5-00-V6  V3 ：电源模块未“使能”。

V4 ：电源模块己“使能”，直流母线已充电。

V5 ：进线电源故障。

V6 ：直流母线电压过高。

611UE 控制模块的故障和报警，通过模块上的 6 位 LCD 液晶显示器来显示。其中故
障的报警号小于 800 ，并用 “E-xxx”显示；伺服报警的报警号大于等于 800 ，并用 “E xxx" 

显示。故障及报警显示的意义见表 5-1 。

表 5-1 显示器上的报警显示含义

显示举例（闪烁显示）

说

明

一、只有一个故障出现

． E ：包含一个故障（第 2 位显示： 1 个连字符）

I :: -:=: ::, c: ::: I 

＊一个连字符：有一个故障出现

*A: 故障被指定给驱动 A

*  608 ：故障号

281 

显示举例（闪烁显示）

二、同时几个故障出现

| ：:：白：:: : I 

压片
| :: : F:  : 3'-:| 

说

明

（续）

． E ：它包含几个故障（第 2 位显示： 3 个连字符）

＊三个连字符：有儿个故障出现，当前是出现的第一个故障

*A ：故障被指定给驱动 A

*131 ：故障号

注：压下巳］按钮，可显示几个故障。每按下一次，显示的故障增加一个号

飞：它包含另一个故障（第 2 位显示： 2 个连字符）

＊二个连字符：有几个故障出现，当前是另外的故障

． A ：故障被指定给驱动 A

.134 ：故障号

三、报警的显示

I:: 

::: :3 3'-:| 

*  E ：它包含一个报警（代码：无连字符）
*  A: 报警被指定给驱动 A
*  804 ：报警号

611UE 伺服模块正常启动以后 LCD 显示器 6 位均显示 “0" ，如果其不显示或显示有

其他的数值均表示伺服驱动器有故障，因其故障及报警较多，下边仅列举个别典型的报

警，如遇其他报警号，可通过查阅 611U《功能说明》手册等查阅报警含义及排除方法。

1)  6 只数码管无任何显示

可能的原因：

(1) 电源两相以上缺相。

(2) 两相以上电源熔断器熔断。

(3) 电源模块的辅助电源故障。

(4) 电源模块与轴控制单元间的设备总线未连接。

(5) 轴控制板不良。
2)  6 只数码管显示“

可能的原因：

(1) 驱动器系统软件未安装。

(2) 存储器模块中未带驱动器系统软件。

3) 驱动器”使能”后，电动机立即开始高速旋转

可能的原因：

(1) 编码器脉冲数设定错误。

(2) 选择了开环转矩控制方式。

(3) 编码器不良。

(4) 轴控制模块故障。

4) 报警号 131 ：跟随误差太高

可能的原因：

282 

(1) 超过了驱动的扭矩或者加速度的能力。

(2) 位置测量系统故障。

(3) 位置控制方向不正确（查伺服参数 P0231) 。

(4) 机械系统有阻塞。

(5) 过大的快移速度或者过大的位置设定点差异。

5) 报警号 515 ：电源模块超温

611U 使用在散热器上的温度传感器对功率模块的温度进行测量的，在散热器出现

超温度报警之后 20s 内，驱动自动关闭，以防止过高的温度导致功率模块损坏。

可能的原因：

(1) 环境温度太高或因电扇不转使电气柜内温度太高。

(2) 一个接着一个的加速和制动操作。

(3) 功率模块的容量较小，不适合于轴或者主轴用。

(4) 安装时没有在功率模块的上、下两端留足够的空间。

6) 报警号 605 ：位置控制器所请求的转速设定点处在最大电机转速之上

可能的原因：

(1) 编程的速度太高。

(2) 最大加速度（伺服参数 P0103) 或者减速度（伺服参数 P0104) 太高。

(3) 轴处于过负荷状态或者被阻塞了。

7) 报警号 608 ：转速控制器输出受限制

转速控制器处于极限状态（扭矩或者电流限制）时间过长，超出允许时间。许用的时

间在参数 P1605 中设定，而监测响应时的上区转速极限的许用时间在参数 P1606 中

设定。

对于同步电机：在正确操作中，正确优化的轴驱动绝对到不了它的电流极限，就是在

大转速变化时（从快速正方向一下子变到快速负方向时）也到不了。上述参数可设定为：
P1605 =  200ms;Pl606 =  8000r/min 。

对于感应电机：在操作中用最大扭矩／电流的加速和制动是常见的，只有一个静止的

驱动 (0 转速）是要监测的。上述参数可设定为： Pl 605 =  200ms; P1606 =  30r /min。

可能的原因：

(1) 在首次调试时，在软件已经被更换或者被更新后，在参数已经被输入后，没有执

行”计算电机数据”或者”计算控制器数据“功能。驱动仍然保持着默认值（这个要被计算

的值为 0) ，那么，在一定的条件下就会导致此故障（参数 P1605 和 P1606 应该适应这个轴

的机械和动态能力）。

(2) 通过模拟输入点或者通过 PROFIBUS 输进的扭矩减量不合要求，太大。尤其是

通过 PROFIBUS 输入时，从定位操作转向用转速设定点输进的操作时更会出现这种影响

（检查是否输入了扭矩减量。通过参数 P1717 诊断： 0% ：无扭矩； 100% ：满扭矩）。

8) 报警号 804 ：控制器使能丢失

可能的原因：

在启动一个移动程序段时，控制器使能还未被设定，或者从静止状态再次启动轴的快

移时，控制器使能丢失了。

283 

控制器使能丢失，即下面的信号之一丢失了：
(1)  PROFIBUS 控制信号 STWl. 0:  ON /OFFl （边沿）， STWl.1: OC/OFF2, 

STWl. 2: OC/OFF3, STWl. 3 ：使能反相器／脉冲禁止。

(2)  PC 机使能 (SimoCom U) 。

(3) 端子 64 或端子 65.X 。

9) 报警号 805 ：脉冲使能丢失

在启动一个移动程序段时，脉冲使能未被设定，或者从静止再次启动轴时，脉冲使能

在移动程序中丢失了。

脉冲使能丢失，即下面的信号之一丢失了：
(1)  PROFIBUS 控制信号 (STWl.1: OC/OFF2, STWl. 3 ：使能反相器／脉冲禁止）。

(2) 电流模块 48 端子、 NS1/NS2 端子、 63 端子之一。

(3) 控制模块 663 端子。
4. 创新产品 SINUMERIK 802D sl 
西门子率先在中国市场推出全球领先的创新产品 SINUMERIK 802D  sl  (solution 

line) ，配备了新一代 SINAMICS S120 驱动系统，能够最大程度上满足广大用户对于复杂

加工的应用需求。

机械设计的新观点：智能化的连接技术缩短了 SINAMICS S120 驱动系统的布线时

间。这意味着电缆的种类将减少，备件费用也将降低。使用这种通信接口，可以非常方便

地将 SINAMICS S120 驱动系统与上层控制系统和电机连接起来。

SINAMICS S120 的智能化连接：安装 SINAMICS S120 的系统组件时系统可以通过

电机中集成的“电子铭牌“自动识别它们。可以说该系统是真正的”即插即用”，因为预先

装配好的连接电缆只要插入插座即可，电机的铭牌数据无需手工输入。

更多可能性和更低的成本：西门子新一代驱动系统将驱动技术向前推进了一大步，解

决方案以模块化的驱动轴组构建，取代了原来将独立的驱动轴连接起来的方式。简单的

工程设计和更快的调试降低了工程成本。

树立了新的系统标准： SINAMICS S120 特别适合于高性能的机床设备、生产机械及

其他车间应用。由于采用了创新的硬件和软件思想， SINAMICS S120 可以胜任工业应用

领域内的各种复杂的驱动任务。

S. 4. 2  SIMODRIVE 611D 系列伺服模块驱动装置

SIMODRIVE  611D 是新一代数字控制总线驱动的交流驱动，如图 5-44 所示，它分
为双轴模块和单轴模块两种，可作为 MSD 主轴驱动模块或 FDD 进给驱动模块。 611D 使

用的电源模块与 611U 的电源模块相似，此处不再赘述。

1.  611D 系列伺服模块端子功能

611D 控制模块与数控系统主要是通过数据总线相连，没有太多的接口信号。
(1)  X411 、 X412 ：电动机编码器接口，电动机内置光电编码器反馈至该端口进行位置

和速度反馈处理。输入电动机的编码器信号，还有电动机的热敏电阻，其中电动机的热敏

电阻值是通过该插座的 13 脚和 25 脚输入，该热敏电阻在常温下为 5800, 155t 时大于

12000 ，这时控制板断开电动机电源并产生电动机过热报警。

284 

双轴FDD/MSD模块

单轴FDD/MSD模块

X412 
电机编码器
轴 2

X422直接位
置反馈接口
轴2

X4ll 
电机编码器
轴 l

X432 
BREO 
端子

置反馈接口
轴 l

X431继电器触 1 国国
点脉冲使能

" 
X421 直接位 I] ` 
` 
u 。

罗 X35
X34 

Xl41 
驱动总线

X341 

直流母线 5 

连接条

X411 
电机编码器

[  ° 

置反馈接口

X421 直接位 \ 
X431 继电器触 瞿忙严

点脉冲使能

Xl41 
驱动总线

X151 
设备总线

X351 

佩心 「勹 I XJ41 

广 I X351 

u 

直流母线
连接条

旷600

铭牌

铭牌

PE端子PEI PE2 

U2 V2 W2 PEl PE2 

图 5-44 611D 伺服模块端子功能

(2)  X421 、 X422 ：直接位置反馈（光栅尺）端口，用于构成全闭环系统。
(3)  X431 ：轴脉冲使能，该信号为低电平时，该轴的电源撤消，这个信号直接与 24V

短接或通过 PLC 来控制。

(4)  X432:BERO 端子，该接口用作 BERO 开关信号的输入口。
(5)  X34 、 X35 ：模拟输出口，其中有两个模拟口 (Xl,X2) 用作模块诊断测试用，它可

以用来跟踪一些数字量，比如转速、电压和电流等，并把它转换成 0~5V 的模拟电压输

出，具体的输出信号可以通过数控系统选择， Ir 模拟输出口是固定输出电机 R 相的电流

的模拟值。

285 

(6)  X141 、 X341 ：驱动总线端口，连接至前一模块或下一模块，用于传递 NCU 的轴控

信息。

(7)  X151 、 X351 ：数据总线端口，连接至前一模块或下一模块，用于模块间的通信及

从电源模块处得到所需的低压直流电源。

(8)  P600 、 M600 ：直流 600VOC 的直流母线，需要连接至电源模块。
(9)  Al 、 A2 ：电动机连接端子，如果是单轴模块，则需连接在 U2 、 V2 、 W2 端子。
2.  611D 系列伺服的连接

SIMODRIVE 611D 全数字伺服一般用于 SINUMERIK 840D 数控系统，图 5-45 是

其连接示意图，图中模块从左向右分别为：电源模块 (MS) 、数控单元模块 (NCU) 、主轴伺

服驱动模块 (MSD) 进给伺服驱动模块 (FDD) 。模块间通过驱动总线和系统数据总线互

相通信。

NCU 

MSD 

FDD  FDD  FDD 

图 5 - 45  SINUMERIK 840D 与 611D 伺服连接

3.  611D 系列伺服的报警

SINUMERIK 611D 的报警在控制模块上没有像 611U 一样的显示器，而是通过总线

传递 NCU 通过 MMC 显示，如有报警需要解除，请查阅 840D 的《诊断手册》。

5.5  检测装置的故障及诊断

进给伺服系统位置检测装置按类型不同分为绝对编码器和相对编码器；按连接形式

不同分为伺服电动机内装编码器的位置检测装置和分离型检测装置的位置检测装置。

5.5.1  绝对编码器报警代码及维修技术

系统伺服采用绝对编码器作为位置检测装置时，系统断电后靠备用电池（标准为 6V)

来进行位置记忆。表 5-2 为 FANUC 系统绝对编码器报警信息及报警内容。

1. 系统绝对位置丢失报警号 300

1) 故障产生的原因

当绝对编码器电池电压不足或接线不良、伺服电动机的拆装及编码器信号线拆装等

都会导致该报警的发生（表 5-2) 。

286 

表 5-2 FANUC 系统绝对编码器 (APC) 报警信息

号码

信息

内

容

300  A氏 alarm: n - axis origin  return 

在 n 轴 (1 轴～ 4 轴），进行手动返回参考点

301  呕 alarm: n - BXIS  commurucat:Ion 

n 轴 (1 轴～ 4 轴） APC 通信错。 APC 电缆或伺服接口模块不良

302  丽 alann: n - axis over time 

n 轴 (1 轴～ 4 轴）超时错误。 APC 电缆或伺服接口模块不良

303  呕 alarm: n - axis  framing 

n 轴 (1 轴～ 4 轴） APC 成帧错误。 APC 电缆或伺服接口模块不良

304  呕 alarm: n - axis  parity 

n 轴 (1 轴～ 4 轴） APC 奇偶错误。 APC 电缆或伺服接口模块不良

305  郎 alarm: n - axis  pulse  error 

n 轴 (1 轴～ 4 轴） APC 脉冲错误报警 (APC 报警）。 APC 或电缆不良

306  呕 alarm: n - axis battery voltage 0 

n 轴 (1 轴～ 4 轴） APC 用电池电压已降低到不能保待数据的程度

(APC 报警）。电池或电缆不良

307  呕 alarm: n - axis battery low  1 

n 轴 (1 轴～ 4 轴） APC 用电池电压降低到要更换电池的程度 (APC 报

警）。请更换电池

308  躯 alann: n - axis battery low  2 

n 轴 (1 轴～ 4 轴） APC 用电池电压已降低到必须更换电池的程度（含

电源 OFF 时）。请更换电池

309  碑 alarm: n - axis ZRN impossible 

电机每转 lr 以上就返回参考点。使电机转 lr 以上，关电源，再接通

后，返回参考点

2) 处理方法
(1)  FANUC OC/OD 系统参数 21#0-21#3 设定为 “O"(l 轴～ 4 轴的绝对位置检测
无效）， FANUC 16/18/21/0i 系统参数 1815 #  5 设定为 “0” ，然后进行手动返回参考点

操作。

(2)  FANUC OC/OD 系统参数 22#0-22#3 设定为 “O"(l 轴～ 4 轴的绝对位置没有
确定）， FANUC 16/18/21/0i 系统参数 1815#4 设定为 “0" ，然后点动状态下使机床离开
参考点（至少为丝杠一个螺距以上的距离）。

(3)  FANUC OC/OD 系统参数 21#0-21#3 设定为 “l"(l 轴～ 4 轴的绝对位置检测

有效）， FANUC 16/18/21/0i 系统参数 1815#5 设定为 “1" ，然后系统断电。

(4) 系统上电时，系统将会出现 90 号报警（要求机床返回参考点），进行手动返回参

考点操作，最后按下系统的复位键 (RESET) 解除报警。

2. 绝对编码器出错报警

FANUCOC/OD 系统报警号为 3nl-3n6(n 为伺服轴号）， FANUC 16/18/21/0i 系统

报警号为 301-305 。

1) 故障产生的原因
编码器本身及连接电缆不良、伺服位置反馈信号接口模块故障及系统本身不良都会

导致该报警发生。

2) 故障的诊断方法
可通过将相同伺服轴编码器对调的方法判别故障是否在编码器侧，如果对调后故障
转移（由一个伺服轴转移到另一个伺服轴）时，则故障为编码器本身及连接电缆不良。如
果对调后故障不转移，则故障在伺服模块或系统本身不良。可以通过交换伺服模块的方
法来判别故障在伺服模块还是在系统。

287 

3. 绝对编码器电池报警
FANUCOC/0D 系统报警号为 3n7-3n8(n 为伺服轴号）， FANUC 16/18/21/0i 系统

报警号为 306-308 。

1) 故障产生的原因
当绝对编码器电池电压不足、连接电缆不良或绝对编码器电池连接的模块不良时，系

统都会产生该报警。

2) 处理方法
检查绝对编码器电池电压及连接电缆，如果发现故障应进行更换，更换后要重新进行

绝对位置的调整。如果电池及连接是良好的，则需更换绝对编码器的电池接口模块。

5.5.2  串行编码器报警代码及维修技术

在半闭环控制系统中，伺服电动机内装编码器的反馈信号既是速度反馈信号又是位
置反馈信号。在全闭环控制系统中，伺服电动机内装编码器的反馈信号是系统的速度反
馈信号，而分离型检测装置的反馈信号是系统的位置反馈信号。目前编码器数据传输采
用串行数据传输，当编码器传输出错或异常时，系统出现相应报警号及相关报警信息。

FANUCOC/0D 系统伺服电动机内装编码器报警为 “3n9" （串行编码器警， n 为伺服
轴号）； FANUC 16/18/21/0iA 系统报警号为 “350" （串行编码器异常报警）和 “351" （串行
编码器通信异常）。 FANUC 16i/18i/2li/OiB/OiC 系统的串行编码器报警号详细内容见
表 5-3 。从报警表可以看出， FANUC 16i/18i/2li/OiB/OiC 系统串行编码器报警不仅能
诊断出伺服电动机内装编码器报警，而且还可诊断出分离型编码器报警，系统故障诊断内

容更加具体，为维修提供了详细的故障信息。

表 5-3 FANUC 系统串行编码器报警信息

信息

内容

n  AXIS:ABNORM轧 CH欧KSUM(INT)

内置脉冲编码器发生校验错误

n AXIS: ABNORMAL  PH心EDATA(INT) 内置脉冲编码器发生相位数据错误

n AXIS: ABNORM灶 REV.DATA(INT)

内置脉冲编码器发生一转速计数错误

n AXIS:ABNORMAL CLOCK(INT) 

内置脉冲编码器发生时钟错误

n AXIS:SOFT PH从3E ALARM(INT) 

数字伺服软件检测到内置脉冲编码器的无效数据

n AXIS:BROKEN LED(INT) 

nAXIS:PU区E MISS(INT) 

n AXIS:COUNT MISS(INT) 

内置脉冲编码器发生 LED 错误

内置脉冲编码器发生脉冲错误

内置脉冲编码器发生计数错误

n AXIS:SERIAL DATA ERROR(INT) 

内置脉冲编码器发出的传输数据无法接收

n AXIS:DATA T酗S.ERROR(INT)

内置脉冲编码器接收数据发生 CRC 或停止位错误

n AXIS:BROKEN LED(EXT) 

分离型检测器的 LED 错误

n AXIS: ABNORM灶 PH心E(EXT)
n AXIS:OOUNT MIS.S(EXT) 

nAXIS:PU区E MISS(EXT) 

n AXIS:SOFI'PHASE ALARM(EXT) 
n AXIS:SERIAL DATA ERROR(EXT) 
n AXIS:DATA TRANS.ERROR(EXT) 

分离型光栅尺发生相位数据错误

分离型检测器发生计数错误

分离型检测器发生脉冲错误

数字伺服软件检测到分离型检测器的无效数据

分离型检测器发出的传输数据无法接收

从分离型检测器接收数据发生 CRC 或停止位错误

n AXIS,ABNORMAL ENCODER  (EXT) 

分离型检测器发生错误

号码

360 

361 

362 

363 

364 

365 

366 

367 

368 

369 

380 

381 

382 

383 

384 

385 

386 

387 

288 

当系统出现报警时，可通过系统诊断号进行故障原因的判别。 FANUCOC/0D 系统

的诊断号为 760-767 、 770-777,FANUC 16/18/21/0iA 系统的诊断号为 202 、 203 ，也可

以通过系统伺服诊断画面的诊断号 ALM3 、 ALM4 进行判别。下面为系统诊断号 ALM3

的说明。

202 
ALM3 

#7 

#6 
CSA 

#5 
BLA 

#4 
PHA 

#3 
RCA 

#2 
BZA 

#1 
CKA 

#0 
SPH 

#6(CSA) 为 “1" ：串行编码器异常。更换脉冲编码器。

#5(BLA) 为 “1” ：电池电压不足。更换电池。此位与 No.350 报警无关。

#4(PHA) 为 “1” ：发生相位数据异常报警。

#3(RCA) 为 “1” ：发生速度计数异常报警。

#2(BZA) 为 “1” ：初次给脉冲编码器供电。检查电池的连接，断开电源后再次接通电

源返回参考点。此报警与 No.350 无关。

#l(CKA) 为 “1” ：发生时钟报警。

#O(SPH) 为 “l" ：发生软相位数据异常报警。

当出现此类故障时，系统断电再重新送电后，如果上述诊断功能检查的诊断数据相

同，则串行脉冲编码器可能出现故障。如果诊断结果不一样或检测到其他异常情况，则可

能是某种外部干扰引起的。

下面为系统诊断号 ALM4 的说明。

203 
# 7 
ALM4  DTE 

# 6 
CRC 

# 5 
STB 

# 4 
PRM 

# 3 

# 2 

# 1 

# 0 

#7(DTE) 为 “1" ：串行脉冲编码器无响应报警，产生故障的可能原因有信号电缆断

线、串行脉冲编码器出故障或串行脉冲编码器的＋ 5V 电压降低。

#6(CRC) ：产生串行通信错误报警。

#5(STB) ：产生停止位错误报警。

#4(PRM) ：因参数无效而报警。此时也显示伺服参数错误报警（报警号 N0.417) 。

系统产生故障的可能原因有信号电缆断线、串行脉冲编码器出故障、系统轴卡出

故障。

5.6  数控机床伺服系统参数的设定

5.6.1  FANUC 伺服系统参数的设定

1 ．伺服参数设定的准备条件

(1)  CNC 单元的类型及相应软件（功能），如系统是 FANUCOC/0D 系统或 FANUC

16/18 戊 1/0i 系统。

(2) 伺服电动机的类型及规格，如进给伺服电动机是 a 系列、 aC 系列、 ai 系列、 p 系

列、 ~i 系列。

(3) 电动机内装的脉冲编码器类型，如编码器是增鼠编码器还是绝对编码器。

289 

(4) 系统是否使用分离型位置检测装置，如是否采用独立型旋转编码器或光栅尺作

为伺服系统的位置检测装置。

(5) 电动机每转 1r 机床工作台移动的距离，如机床丝杠的螺距是多少，进给电动机

与丝杠的传动比是多少。

(6) 机床的检测单位（例如 0.001mm) 。

(7)  CNC 的指令单位（例如 0.001mm)

2. 伺服参数初始化的操作

伺服参数初始化就是将系统的参数按设定条件恢复到系统出厂时的标准设定。

在伺服设定画面中，将伺服初始化设定参数＃ 1 的 “1” 设定为 “0” ，然后系统断电再重

新上电，从而完成数字伺服参数的初始化操作。当伺服初始化结束后，初始化设定位＃ 1

自动变为 “1” 。初始化设定位如下所示。

#7 

#6 

#5 

#4 

#3 
PRMCAL 

#2 

#1 
DGPRM 

#0 
PLCOl 

#O(PLCOl) ：设定为 “0” 时，检测单位为 lµm,FANUC OC/0D 系统使用参数 8n23 速
度脉冲数）、8n24 （位置脉冲数）， FANUC 16/18/21/0iA 系统和 F心寸UC 16i/18i/2li/OiB/ 

OiC 系统使用参数 2023 （速度脉冲数）、 2024 （位置脉冲数）。设定为 “1” 时，检测单位为

0.1 血1 相应的系统参数为把上面系统参数的数值乘 10 倍。

#l(DGPRM) ：设定为 “0” 时，系统进行数字伺服参数初始化设定，当伺服参数初始

化后，该位自动变成“1” 。

#3(PRMCAL) ：进行伺服初始化设定时，该位自动变成 “1" (FANUC OC/0D 系统无

此功能）。根据编码器的脉冲数自动计算下列参数： PRM2043 、 PRM2044 、 PRM2047 、

PR沁053 、 PRM2054 、 PRM2056 、 PRM2057 、 PR泣059 、 PRM2074 、 PR泣076 。

3. 伺服参数的设定画面

1) 伺服设定画面的显示参数及操作

FANUCOC/0D 系统伺服显示参数为 389#0 ，当设定为 “0” 时，系统画面显示伺服设

定和调整画面。

FANUC 16/18/21/0iA 系统和 FANUC 16i/18i/21 i/OiB/OiC 系统伺服显示参数为

3111#0 ，当设定为 “1” 时，系统画面显示伺服设定和调整画面。

FANUCOC/0D 系统伺服显示操作如下：
系统诊断／参数功能键IDGNOSIPARAM|-系统软键 [SV-PAM]
FANUC  16/18/21/0iA 系统和 FANUC 16i/18i/2li/OiB/OiC 系统伺服显示操作

如下：

系统功能键ISYSTEM尸系统扩展软键匡3-系统软键 [SV-PARA] 。

2) 伺服设定画面及参数设定

在图 5-46 所示的伺服设定画面中，移动光标到需要设定的参数项，可输入相应

数据。

(1) 伺服电动机 1D 号 (MOTOR IDNO) 。选择所使用的电动机 1D 号，常用的 ID 号

代码见表 5-4 。

290 

SERVO SETTING 

INITIAL SET BIT 
MOTOR ID NO. 
A邓
CMR 
FEED GEARN 

(N/M)  M 

DIRECTION SET 
VELOCITY PULSE NO. 
POSITION PULSE NO. 
REF.COUNTER 

XAXIS 
00000000 
47 
00000000 
2 
l 
125 
111 
8192 
12500 
8000 

YAXIS 
00000000 
47 
00000000 
2 
1 
125 
III 
8192 
I2500 
8000 

图 5-46 数字伺服设定画面

表 5-4 FANUC 系统常用伺服电动机的 ID 代码

ID 代码

伺服电动机

ID 代码

伺服电动机

7 

8 

9 

10 

15 

16 

17 

1 8 

19 

20 

22 

28 

30 

aC3/2000 

aC612000 

aC12几000

aC22/1500 

心／12000

a61'2000 

a6/3000 

a12 九woo

al2/3000 

a22 戊000

必2/3000

a30/1200 

a40/2000 

176 

191 

196 

201 

177 

193 

197 

203 

207 

36 

33 

34 

aC8/2000i 

aCl2/2000i 

aC22/2000i 

aC30/1500i 

a8/3OOOi 

al2/3OOOi 

a22/3OOOi 

心0/3OOOi

a40 乃OOOi

泣 /3000

阳 /3000

拓 12000

(2)  AMR ：设定电枢倍增比， a 和 ai 系列设定为 “00000000" ，与电动机类型无关。
(3)  CMR ：设定伺服系统的指令倍率。设定值＝（指令单位倦t测单位） X2 。

(4) 设定柔性进给传动比 (NIM) 。

对不同丝杠的螺距或机床传动有减速齿轮时，为了使位置反馈脉冲数与指令脉冲数

相同而设定进给齿轮比 (NIM) ，由于是通过系统参数可以修改，所以又称柔性进给齿

轮比。

对千半闭环控制伺服系统： NIM= （伺服电动机 lr 所需的位置反馈脉冲数／100 万）

的约分数；而对于全闭环控制形式伺服系统： NIM= （伺服电动机 lr 所需的位置反馈脉冲

数／电动机 lr 分离型检测装置位置反馈的脉冲数）的约分数。

(5) 电动机的移动方向 (DIRECTION SET): 111 为正方向（从脉冲编码器端看为顺

291 

时针方向旋转）；－ 111 为负方向（从脉冲编码器端看为逆时针方向旋转）。
(6) 速度脉冲数 (VELOCITY PULSE NO) ：串行编码器设定为 8192 。
(7) 位置脉冲数 (POSITION PULSE NO) ：半闭环控制系统中，设定为 12500 ；全闭环

系统中，按电动机 lr 来自分离型检测装置的位置脉冲数设定。

(8) 参考计数器的设定 (REF COUNTER) ：参考计数器用于在栅格方式下返回参考

点的控制 。 必须按电动机 lr 所需的位置脉冲数或按该数能被整数整除的数来设定 。

除了设定上面的伺服参数外，还要正确设定下面的伺服参数 。

(1) 分离型检测装置是否有效的系统参数

FANUCOC/0D 系统参数为 37#0-37#3 （分别为 1 轴～ 4 轴）， FANUC 16/18/21/ 
OiA 系统和 FANUC 16i/18i/2li/0ill/OiC 系统参数为 1815 #  1 。 如果系统采用分离型检
测装置作为位置检测装置，则把该位参数设定为 “1” ，否则设定为 “0” 。

(2) 绝对位置检测是否使用参数

FANUCOC/0D 系统参数为 21#0-21#3 （分别为 1 轴～ 4 轴）， FANUC 16/18/21/ 
OiA 系统和 FANUC 16i /18i/2li/Oill/OiC 系统参数为 1815 #  5 。 如果系统采用绝对编码
器作为位置检测装置，则把该位参数设定为 “1” ，否则设定为 “0” 。

5.6.2  SIMODRIVE 6110 伺服系统参数的设定

SIMODRIVE 611 U 是一种通用型伺服驱动器，用户可以根据不同的应用场合进行各
种参数的设定。使用工具软件 SimoComU ，用户可以非常方便地设定驱动器及电机的

参数。

1. 初始状态

驱动器首次通电后，在 SIMODRIVE 611U 控制模块的显示窗口上显示 All06 （驱动
器参数：功率模块型号），该显示表明无电机数据，需要通过工具软件 SimoComU （在工具
盘中）设定电机参数 。

2. 参数设定步骤

使用 SimoComU 进行参数设定时，必须遵照以下步骤进行：
(1) 启动 SimoComU 软件，选择联机方式：查找在线驱动器 (Search for  online 

drives …)，如图 5-47 所示 。

Do you wish to... 

A  data  sol  has  not  selected.  Do  you 
wish  to. .. 
过妘玉石玉ot't'l屯flie~－、.：l

当 Qpen 旺 existing file . . . 

组 ~e 釭 ch for  o吐 1 沁 drives. 霉．

~  None  of  these 

图 5 - 47 611U 设定步骤 1

292 

(2) 命名将要调试的驱动器，然后选择“下一步 ”(NEXT) ，如图 5-48 所示。

-]1胃，，llII!'II"，II＇ l 尸 二一二勹一女玉i

D,ivoo泊炉心OO·DfiveA

丫0 喊忱吵吓蚐 t“如 lhe 徊如砒（如心＂n 归妇
切兄， eg. t”eofS仰劝沁， M 吹珂飞mo如 etc.J and deline 如
SIMODAIVE 叩守的hmode

沁加 f,nal 坟ep, 归 coot咖妇灼ffbe 心心ed 吓日
心函过IY,.P心汜1mR也严formed

DrNename: 

应

Thedr池心me 如心如心心的， 计呻 he杯即 lo 比必 to
妞芯志劝知 in the 砚em, T比心叩 I＄沁喊闷它
d加omdKre已釭勺如叩咄

图 5-48 611U 设定步骤 2

(3) 进入联机方式后， SimoC-omU 自动识别功率模块和 611U 控制板的型号，然后选

择“下一步 ”(NEXT) ，如图 5-49 所示。

fil" 

.x 

凇h 哼叩1 of SIMODRIVE  do 如响hto-(ithe 油如如
叩，改iOl'IW.. 釭叩祝吻 I氐叩匹d． 呻如啦归岱．，心归e')?

- ·· 
-
F-ever$On · 

1们沁础＄11UE2 耽叭凇忒叩屿氐Id 扣ICmwp

－三］』』

~ 

屯hPADFl8US 巫氏· ·奴诽归如e 扫ve?

、． ＾

,, 

巾妇呻顷如郎嘀 1Vp逑 topeak 如切毗咄妇如bol妞

－ ， 一

沁叩 ＆

扫－ PROFIBUS 吓心扣心i... 虹?1咄油心切屈如加 SIMODAIVE
1u-如＄i 叩 a 凸ofibu. net奴水 ltio 吓咄"mthe"module[S妇
以chm 耙ftt

. 

奴 L

!  ＜扣＊ l  且磁＞ l  中田 1`, 

Help  I 

图 5-49 611U 设定步骤 3

(4) 选择输入电机的型号，如 1FK6063 - 6AF71 然后选择“下一步 ”(NEXT) ，如图

5-50 所示。

(5) 根据电机的型号选择编码器的类型，如图 5-51 所示。

(6) 选择速度控制方式 (Speed/torque setpoint) ，然后选择“下一步 ”(NEXT) ，如图

5 — 52 所示。

(7)  SimoComU 列出所选择的数据，需要您再次确认，如果数据无误，选择“接收该轴

驱动器配置 ”(Calculate controller data, save, reset) ，如图 5-53 所示。

注意：如果这时 PLC 应用程序还没有调试，驱动器的使能信号不生效，电机不能旋

转。在 PLC 功能生效（即驱动器使能控制生效）后，并且设定了 NC 进给轴参数

293 

凇o· 1Stondardmo1" 

.::.J 

H叩叩： I1FT6  1FK6,FE1 （如.::.J

这j

曰ii`｀：:III』1[』

l 欢6064-7Af7x-xxxx
矿正如:_::::宁丫m伽

3000 工p..12, 0  II温 11.00 A （匕

1? n 匹 1 尺 nn ·沪

Lookfo,: 

＜眨 I 妇＞ 1  C… I 吵 l

图 5-50 611U 设定步骤 4

心卜 mot釭～心g·呻tem 四如叩叩

l叩啊哪，一习

T妇 folowingm-－ on 比 used fO! 归的ed

-or-

lF心欢·•欢欢 ·MElO<
lF 忒识邓·•邓欢·心双

2048 Ines/rev 
32 Ines/rev  EnDal 

EnOat 
Si 
Sin心＄ volt

斗

心＊ 1 妇＞ I~ 吵 I

图 5 - 51 611U 设定步骤 5

lnwl诅 mode do 沪U 咄hi。如及e 的占沁？

兰

习

心＊「正了｝- - 

图 5 - 52 611U 设定步骤 6

294 

怂如 r虹．如0呻e 归妇血泗呻，ed:

: BM174也

D叩 name
0应 ctrl 心-inmodule
power 心如
M如
Enc力如
比condone心： No.. 比“如
Ope,山｀ mode
◄ • 

: Speed/t“中e沁

: 6SN1118-ltlH10-1四

． 6SN112"·1心．Cll沁I 25从l
： 1FK以乃妇“- 3000 rpm  11 .0 Nm  7.9 
： 1F,c!如• .., .. 心出心妇压劝如 Sin心、

泸

Afte, "C心 ”“conlrolor 必札心＂， 心d' 归
O如比心心din 如 FEPROM
t心心“,n RESET  executed on 妇m
...o1 心户m减＂＄芘斗这，归

r如归. conlrolor di丸口“'·'曰喊

尸委巨l

H如＞ ，一－竺已

图 5-53 611U 设定步骤 7

(MD30130 和 MD30240) ，才能移动进给轴，进行进给轴的动态特性优化。

5.7  数控机床进给伺服系统报警及维修技术

当数控机床伺服系统出现故障后，通过与 CNC 相连接的电缆或光缆将故障信息传递

至 CNC ，维修人员通过 CNC 给出的报警号，可以更加迅速地查找出故障的原因，恢复设

备正常运行。

FANUC 伺服系统报警号一般为 4:XX:(400-468) 号和 6:XX(600-607) 号， SIEMENS

伺服系统报警号一般为 2:XXXX:(20000-29999) 号 。 下面以 FANUC 伺服系统为例，分析

一些伺服的典型报警，其他的报警请查阅数控系统的维修手册或诊断手册。

5.7.1  FANUC 伺服系统常见报警及维修

1 ．伺服不能就绪报警（报警号为 401 、 404)

1) 系统检测原理

当轴控制电路的条件满足后，轴控制电路就向伺服放大器发出 PRDY 信号

(MCON) 。当放大器接收到该信号，如果放大器工作正常，则 MCC 就会吸合，接通主回

路，随后向控制回路发回 VRDY 。 如果 MCC 不能正常吸合，就不能回答 PRDY 信号，系

统就会发出报警。伺服就绪控制信号流程如图 5-54 所示 。

401 ：如果一个伺服放大器的伺服准备信号 (VRDY) 没有接通，或者在操作中信号关

断，发生此报警。

404 ：如果一个伺服放大器的伺服准备信号 (VRDY) 总保待接通，发生此报警。

2) 故障产生的原因

(1) 当发生该故障时，首先要确认系统急停按钮是否处千释放状态，如果处于急停状

态时，伺服装置就不能正常工作，这一点请注意 。

(2) 伺服驱动装置故障：连接电缆故障；伺服装置的继电器 MCC 控制回路或线圈本

295 

|MCON ：从CNC到伺服放大器 1

CNC 

（母板）

伺服

放大器

I  VRDY ：从伺服放大器到CNCI

图 5-54 FANUC 系统伺服就绪信号流程图

身故障；内部控制回路或检测电路故障。

(3) 系统轴控制卡（轴板）故障或系统伺服模块故障（此时需要更换系统轴板或对该

板进行检修）。

3) 故障的诊断方法

采用信号短接的方法来判别故障的部位。具体的做法是短接轴控制板的相关管脚（如

FANUCOD 轴控板 M184 上的 7 管脚、 12 管脚），如果系统报警消失，则故障在伺服装置或连

接电缆；如果信号短接后系统报警号不消失（系统复位后），则为系统轴控制板故障。

数控机床有些故障可采用信号短接的方法进行故障的诊断与排除，这样可以较准确

地判断故障发生的具体部位，但要求维修人员必须清楚系统的信号流程及各接头的管脚

功能。

2. 伺服停止误差过大报警（报警号为 410)

1) 系统检测原理
当系统发出停止移动指令或静止时，系统的位置偏差计数器 (FANUC 16/18/21/0i 
系统的诊断号为 300; FANUC  OC/0D 系统的诊断号为 800-803) 偏差值超过了系统
(FANUC 16/18/21/0i 系统为 1829; FANUC OC/0D 系统为 593~596) 所设定的数值时，
系统发出停止误差过大报警。 FANUC 16/18/21/0i 系统为 410 号报警， FANUC OC/0D 

系统为 4n0 号报警。

2) 故障原因及判别方法

如果是垂直轴，则故障原因可能是：

(1) 伺服电动机及动力电缆断相故障或伺服电动机的动力线连接错误。

(2) 伺服放大器不良。

(3) 系统该轴的伺服控制板不良。

如果不是垂直轴，则故障产生的可能原因是：

(1) 系统软件故障：伺服参数（停止误差检测标准参数）设定不当或伺服软件不良。

(2) 系统硬件故障：伺服放大器故障或系统伺服控制板不良。

3. 伺服移动误差过大报警（报警号为 411)

1) 系统检测原理

当系统发出移动指令时，系统的位置偏差计数器 (FANUC 16/18/21/0i 系统的诊断
号为 300; FANUC OC/0D 系统的诊断号为 800-803) 偏差值超过了系统参数 (FANUC
16/18/21/0i 系统为 1828; FANUC OC/0D 系统为 504~507) 所设定的数值时，系统发出

移动误差过大报警。 FANUC 16/18/21/0i 系统为 411 号报警， FANUCOC/0D 系统为 4nl

296 

号报警。

2) 故障原因及判别方法

如果给出移动指令而机床不移动，则故障原因可能是：

(1) 机械传动卡死。

(2) 如果故障发生在垂直轴控制时，则故障在伺服电动机的电磁制动回路中。

(3) 伺服电动机及动力线有断相故障或伺服电动机的动力线连接错误。

(4) 伺服放大器本身故障。

如果给出移动指令且机床移动后产生移动误差过大报警，则故障原因可能是：

系统软件故障：伺服参数设定不当（移动误差检测标准参数及伺服回路增益设定过

低）或伺服软件不良。

硬件故障：

(1) 机械传动间隙过大或导轨润滑不良。

(2) 伺服电动机编码器或系统有故障。

(3) 伺服放大器不良。

4. 伺服综合报警（报警号为 414)

1) 系统报警的诊断方法

伺服系统出现过电流、异常电流、高电压、低电压及 OC 放电回路故障都会导致伺服

综合报警。

当出现伺服综合报警时，首先，通过系统诊断号 (FANUC 16/18 庄 1/0i 系统诊断号为
200 ，或伺服调整画面 ALMl; FANUC OC/0D 系统诊断号为 720~723) 来判别故障原因的

来源，然后分析故障具体原因并排除故障。 FANUC 16/18 戊 1/0i 系统为 414 号报警，

FANUCOC/0D 系统为 4n4 号报警。

系统诊断号（伺服调整画面 ALMl) 如下：

#7 

#6 
LV 

#5 
OVC 

#4 
HCA 

#3 
HVA 

#2 
DCA 

#1 

#0 

系统正常工作时，上面诊断号的各位均为 “0" ，当系统出现伺服综合报警时，诊断号的

某位要变为 “1” 。

2) 故障产生原因分析
(1)  #6(LV) 为 “1” 。

系统检测原理：伺服放大器的 OC300V 电压低千标准电压（一般为 240V) 。

故障原因：伺服放大器 OC300V。输入熔断器熔断；系统电压监控电路故障；系统伺

服软件不良。

(2)  #5(0VC) 为 “1” 。

系统检测原理：伺服放大器的实际输出电流值超过伺服电动机的额定电流的 1.5 倍

（时累计为 lmin) 。

故障原因：机械传动、加工时进给量过大；电动机匝间短路；放大器本身及系统故障。
(3)  #4(HCA) 为 ”1” 。

系统检测原理：伺服放大器的实际输出电流值超过放大器最大输出电流的 2 倍以上。

故障原因：电动机侧短路；放大器的逆变块击穿短路。

297 

(4)  #3(HVA) 为 “1” 。

系统检测原理：伺服放大器的 OC300V 电压超过标准电压（一般为 400V) 。

故障原因：系统电源模块 OC300V 电压过高；系统电压检测电路故障；系统数字伺服

软件不良。

(5)  #2(0CA) 为 “1” 。

系统检测原理：系统伺服装置为伺服单元 (SVU) 时，在伺服进给电动机减速过程中

的再生能量不能快速放电，而引起 OC 主回路过电压报警。

故障原因：伺服进给电动机的减速时间参数设定过短；伺服单元的制动电阻接触不良

或损坏；伺服单元本身电压监控电路故障；伺服软件不良。

5 ．位置反馈断线报警（报警号 416)

如果数控机床采用全闭环控制（位置检测装置为光栅尺）或半闭环控制（位置检测装

置为独立旋转编码器），当反馈信号异常时，系统会发生该报警。 FANUC 16/18/21/0i 系

统为 416 号报警， FANUCOC/0D 系统为 4n6 号报警。

1) 系统检查原理

根据故障产生的原因不同，系统伺服断线故障分为硬件断线报警和软件断线报警。

(1) 硬件断线报警：当使用分离型脉冲编码器时，该故障信息是由硬件检测电路进行

检查的。当分离型位置反馈信号异常时，系统就会发生硬件断线报警，如图 5-55 所示。

' ,  

工作台

分离型位置
反馈装置

系统参数设定
FS OC/0D为 37#0#1#2#3
FSOi为 1815#1

图 5-55 数控系统反馈断线检查原理图

(2) 软件断线报警：系统的连接基本正常，但由于机械传动机构的反向间隙过大，引

起伺服电动机侧的反馈脉冲数与分离编码器的反馈脉冲数的偏差超过标准设定值时，将

产生伺服反馈软件断线报警，如图 5-55 所示。

2) 故障诊断方法

通过系统的诊断功能来判断伺服位置反馈断线是硬件断线还是软件断线故障，
FANUC  16/18 戊 1/0i 系统诊断号为 201 ，或伺服调整画面 ALM2; FANUC OC/0D 系统诊

断号为 730-733 来判别故障原因的来源，然后分析故障具体原因并排除故障。

#7 
ALD 

#6 

#5 

#4 
ESP 

#3 

#2 

#1 

#0 

298 

#7(ALD) 、＃ 4(ESP) ：均为 “1” 时，故障为硬件断线报警。

#7(ALD) 、＃ 4(ESP) ：均为 “0” 时，故障为软件断线报警。

3) 故障原因和处理方法

产生硬件断线故障的可能原因有：分离型位置反馈装置的电缆连接线接触不良或断

线故障；分离型位置反馈装置的电源电压偏低或没有；分离型位置反馈装置本身不良；系

统轴板 (FANUC OC/0D 系统）或系统伺服模块故障 (FANUC 16/18/21/0i) 。

可以采用交换法来判别故障是在分离位置检测装置侧（包括连接电缆）还是在系统轴

控制板或伺服装置。具体方法是把两个驱动形式相同的进给伺服轴的连接电缆插头对

调，看故障报警是否转移到另一个进给轴上。如果故障报警转移则故障在分离型位置反

馈装置侧，故障报警不转移则故障在系统轴控制板或伺服装置中。

产生软件断线故障的可能原因有：进给伺服电动机与丝杠连接松动；机械传动机构的

反向间隙过大。可以通过调整机械来排除该故障。在精度要求不高的场合，也可以通过

修改系统检测标准参数的方法使机床工作。

某卧式数控车床，数控系统采用 FANUCOTD 系列。由于 Z 轴进给电动机与 Z 轴丝

杠不是同轴相连，为了提高机床的加工精度，在 Z 轴丝杠的端部安装了独立脉冲编码器

(2000p/r) 。加工中，机床出现了 426 号报警。

根据前面讲过的内容，首先判别系统为硬件断线故障还是软件断线故障，通过系统诊

断号 731#7 、 731#4 检查，结果发现＃ 7 和＃ 4 均为 “1" ，说明系统出现了硬件断线故障。

又根据硬件断线的故障原因分析，机床出现 426 号报警，可能是独立编码器侧（包括连接

电缆）故障或系统轴控制板故障（系统软件问题或断线检查电路本身异常）。为了进一步

判别故障部位，采用参数的封锁的方法进行检查。具体做法是将系统参数 37#1 改为 “O"

（原设定为 “1”) ，重新设定伺服参数 (Z 轴改为串行编码器作为位置检测），系统断电再送

电。如果报警号 426 号消失，机床可以运动，则故障在分离编码器侧。如果系统重新上电

后，系统还出现 426 号报警，此时故障为系统的轴控制板故障。通过上面操作后，发现故

障在独立编码器侧，经检查故障为编码器一根信号线虚焊，最后，焊好虚焊点并恢复 Z 轴

伺服设定参数系统断电再重新上电，机床恢复了正常工作。

通过此例故障的分析与诊断可知，数控机床某些故障可以采用系统参数的封锁的方

法进行故障部位的具体诊断，这种方法与交换法相比又省时又省力，但维修者必须清楚系

统参数的具体功能（一般机床厂家不允许修改系统参数）。另外，从维修经验上来看，系统

出现反馈断线报警原因多数为分离编码器的连接电缆或检测装置内部受污染所致（位置

检测为光栅尺）。

6. 数字伺服参数设定异常报警（报警号 417)

1) 系统检测原理

当数字伺服参数设定超过规定范围、参数与机床设定不符及数字伺服软件不良时，系

统通过参数观察器发出数字伺服参数异常报警。 FANUC 16/18 戊 1/0i 系统为 417 号报

警， FANUCOC/0D 系统为 4n7 号报警。

2) 故障产生的原因

(1) 伺服电动机型号参数设定超过规定范围 (FANUC 16/18 几1/0i 系统的电动机型

号参数为 2020; FANUC OC/0D 系统的电动机型号参数为 8n20) 。

299 

(2) 伺服电动机旋转方向参数设定了 111 或－ 111 以外的数值 (FANUC 16/18 戊 1/0i

系统的电动机型号参数为 2022; FANUC OC/0D 系统的电动机型号参数为 8n22) 。

(3) 电动机速度反馈脉冲数参数设定为 0 或小千 0 的数值 (FANUC 16/18 戊 1/0i 系

统的电动机型号参数为 2023; FANUC OC/0D 系统的电动机型号参数为 8n23) 。

(4) 电动机位置反馈脉冲数参数设定为 0 或小于 0 的数值 (FANUC 16/18/21/0i 系

统的电动机型号参数为 2024; FANUC OC/0D 系统的电动机型号参数为 8n24) 。

(5) 伺服柔性进给齿轮 NIM 控制形式设定与实际机床控制不符，如实际机床采用全

闭环控制形式，而系统伺服参数 NIM 按半闭环控制形式设定 (FANUC 16/18/21/0i 系统
的进给齿轮比参数为 2084 和 2085; FANUC OC/0D 系统的进给齿轮比参数为 8n84 和

8n85) 。

(6) 在 FANUC 16/18 戊 1/0i 系统中，伺服轴参数 1023 设定值超过了规定范围，或是

不连续的值。

3) 故障处理方法

实际数控机床出现伺服参数设定异常报警时，一般需要重新正确设定伺服参数，并对

系统进行伺服参数初始化操作，就可以排除故障。如果经过上述处理后故障仍然存在，则

故障为系统伺服放大器故障或系统伺服轴控制板（伺服控制模块）故障。

7. 伺服过热报警（报警号为 430 、 431)

1) 系统检测原理

伺服放大器具有过热检测功能，该信号由放大器内的智能逆变模块发出。当放大器的

逆变模块温度超过规定值时，通过 PWM 指令传递到 CNC 系统， CNC 系统发出过热报警。

伺服电动机的过热信号是由伺服电动机定子绕组的热偶开关检测的，当伺服电动机

的温度超过规定值时，电动机的热偶开关（常闭点）动作，通过伺服电动机的串行编码器

（数字伺服）传递给 CNC 系统， CNC 系统发出过热报警（图 5-56) 。

伺
服
放
大

器 了 / 

伺服电动机

图 5-56 CNC 系统伺服过热报警检测原理

2) 故障的诊断方法

首先确认 CNC 系统伺服过热报警，通过系统诊断号 (FANUC 16/18/21/0i 系统诊断
号为 200 ，或伺服调整画面 ALMl; FANUC OC/0D 系统诊断号为 720~723) 的＃ 7 是否为

1 来判定。然后判别是电动机过热还是伺服放大器过热，可以通过系统诊断号 (FANUC
16/18/21/0i 系统诊断号为 201 ，或伺服调整画面 ALM2; FANUC OC/0D 系统诊断号为

730-733) 的＃ 7 是 “1”还是 “0”来判定。如果该位为 “1”则为电动机过热；如果该位为 “O"

则为放大器过热。 FANUC 16/18/21/0i 系统的 430 号伺服报警为伺服电动机过热； 431

300 

号伺服报警为伺服放大器过热报警。

3) 故障产生的原因

电动机过热：

(1) 机械传动故障引起的电动机过载。

(2) 切削条件引起的电动机过载。

(3) 电动机本身不良（电动机定子绕组的热偶开关不良）。

(4) 系统伺服参数整定不良，可进行伺服参数初始化。

伺服放大器过热：

(1) 伺服放大器的风扇故障。

(2) 如果为伺服单元 (SVU) ，还可能是 THl 、 YH2 接口或外接的热保护元件故障。

(3) 伺服放大器本身故障：硬件故障（智能逆变模块不良）；伺服软件不良。

5.7.2  进给系统传动问隙误差的测定及补偿

1. 传动间隙的来源

传动间隙一般指反向间隙，在数控机床上，由于各坐标轴进给传动链上驱动部件（如

伺服电动机、伺服液压马达和步进电动机等）的反向死区、各机械运动传动副的反向间隙

等误差的存在，造成各坐标轴在由正向运动转为反向运动时形成传动误差，通常也称反向

间隙或失动量。

对于采用半闭环伺服系统的数控机床，反向偏差的存在就会影响到机床的定位精度

和重复定位精度，从而影响产品的加工精度。如在 GOl 切削运动时，反向偏差会影响插

补运动的精度，若偏差过大就会造成“圆不够圆，方不够方＂的情形；而在 GOO 快速定位运

动中，反向偏差影响机床的定位精度，使得钻孔、镜孔等孔加工时各孔间的位置精度降低。

同时，随着设备投入运行时间的增长，反向偏差还会随因磨损造成运动副间隙的逐渐增大

而增加，因此需要定期对机床各坐标轴的反向偏差进行测定和补偿。

2. 反向偏差的测定

反向偏差的测定方法：在所测量坐标轴的行程内，预先向正向或反向移动一个距离并以

此停止位置为基准，再在同一方向给予一定移动指令值，使之移动一段距离，然后再往相反

方向移动相同的距离，测量停止位置与基准位置之差。在靠近行程的中点及两端的三个位

置分别进行多次测定（一般为 7 次），求出各个位置上的平均值，以所得平均值中的最大值为

反向偏差测量值。在测量时一定要先移动一段距离，否则不能得到正确的反向偏差值。

测量直线运动轴的反向偏差时，测量工具通常采有千分表或百分表，若条件允许，可

使用双频激光干涉仪进行测量。当采用千分表或百分表进行测量时，需要注意的是表座

和表杆不要伸出过高过长，因为测量时由于悬臂较长，表座易受力移动，造成计数不准，补

偿值也就不真实了。若采用编程法实现测量，则能使测量过程变得更便捷更精确。

例如，在三坐标立式机床上测量 X 轴的反向偏差，可先将表压住主轴的圆柱表面，然

后运行如下程序进行测量：

NlO  G91  GOl  XSO  FlOOO ；工作台右移
N20  X-50 ；工作台左移，消除传动间隙
N30  G04  XS ；暂停以便观察

301 

N40  Z50;Z 轴抬高让开
N50  X-50 ；工作台左移
N60  X50 ；工作台右移复位
N70  Z-50;Z 轴复位
N80  G04  X5 ；暂停以便观察
N90  M99; 

需要注意的是，在工作台不同的运行速度下所测出的结果会有所不同。一般情况下，

低速的测出值要比高速的大，特别是在机床轴负荷和运动阻力较大时。低速运动时工作

台运动速度较低，不易发生过冲超程（相对“反向间隙＂），因此测出值较大；在高速时，由于

工作台速度较高，容易发生过冲超程，测得值偏小。

回转运动轴反向偏差量的测量方法与直线轴相同，只是用于检测的仪器不同而已。

3. 反向偏差的补偿

国产数控机床，定位精度有不少大于 0.02mm ，但没有补偿功能。对这类机床，在某

些场合下，可用编程法实现单向定位，清除反向间隙，在机械部分不变的情况下，只要低速

单向定位到达插补起始点，然后再开始插补加工。插补进给中遇反向时，给反向间隙值再

正式插补，即可提高插补加工的精度，基本上可以保证零件的公差要求。

对千其他类别的数控机床，通常数控装置内存中设有若干个地址，专供存储各轴的反

向间隙值。当机床的某个轴被指令改变运动方向时，数控装置会自动读取该轴的反向间

隙值，对坐标位移指令值进行补偿、修正，使机床准确地定位在指令位置上，消除或减小反

向偏差对机床精度的不利影响。

一般数控系统只有单一的反向间隙补偿值可供使用，为了兼顾高、低速的运动精度，

除了要在机械上做得更好以外，只能将在快速运动时测得的反向偏差值作为补偿值输入，

因此难以做到平衡、兼顾快速定位精度和切削时的插补精度。

对于 FANUC 等数控系统，有用于快速运动 (GOO) 和低速切削进给运动 (GOl) 的两种

反向间隙补偿可供选用。根据进给方式的不同，数控系统自动选择使用不同的补偿值，完

成较高精度的加工。

如在 FANUCOiC 中，将 GOl 切削进给运动测得的反向间隙值 A 输入参数 N01851

(GOl 的测试速度可根据常用的切削进给速度及机床特性来决定），将 GOO 测得的反向间

隙值 B 输入参数 N01852 。需要注意的是，若要数控系统执行分别指定的反向间隙补偿，

应将参数号 1800#4(RBK) 设定为 “1" ；若 RBK 设定为 0 ，则不执行分别指定的反向间隙

补偿。 G02 、 G03 、JOG 与 GOl 使用相同的补偿值。

在 SIEMENS 802D 中反向间隙的参数为 MD32450 。

5.8  数控机床伺服系统故障诊断与维修实例

5.8.1  常见故障形式

当进给伺服系统出现故障时，通常由三种表现形式： CD 在 CRT 或操作面板上显示报

警内容或报警信息；＠进给伺服驱动单元上用报警灯或数码管显示驱动单元的故障；＠运

302 

动不正常，但无任何报警。

进给伺服的常见故障如下。

1 ．超程

当进给运动超过由软件设定的软限位或由限位开关设定的硬限位时，就会发生超程
报警，一般会在 CRT 上显示报警内容，向发生超程相反方向运动坐标轴，即可排除故障，

解除报警。

2. 过载

当进给运动的负载过大，频繁正、反向运动以及传动链润滑状态不良时，均会引起过

载报警。一般会在 CRT 上显示伺服电动机过载、过热或过流等报警信息。同时，在强电

柜中的进给驱动单元上、指示灯或数码管会提示驱动单元过载、过电流等信息。

3. 窜动

在进给时出现窜动现象时可能的原因有： CD 测速信号不稳定，如测速装置故障、测速

反馈信号干扰等；＠速度控制信号不稳定或受到干扰；＠接线端子接触不良，如螺钉松动

等。当窜动发生在由正方向运动与反向运动的换向瞬间时，一般是由于进给传动链的反

向间隙或伺服系统增益过大所致。

4. 爬行

发生在起动加速段或低速进给时，一般是由于进给传动链的润滑状态不良、伺服系统

增益低及外加负载过大等因素所致。尤其要注意的是：伺服电动机和滚珠丝杠连接用的

联轴器，由于连接松动或联轴器本身的缺陷，如裂纹等，造成滚珠丝杠转动与伺服电动机

的转动不同步，从而使进给运动忽快忽慢，产生爬行现象。

5. 振动

机床以高速运行时，可能产生振动，这时就会出现过流报警。机床振动问题一般属于

速度问题，应去查找速度环，主要从给定信号、反馈信号及速度调节器本身这三方面去查

找故障。分析机床振动的周期是否与进给速度有关，如与进给速度有关，振动一般是由该

轴的速度环增益太高或速度反馈故障造成；如与进给速度无关，振动一般是由位置环增益

太高或位置反馈故障造成的；如振动在加减速过程中产生，往往是系统加减速时间设定过

小造成的。

6. 伺服电动机不转

数控系统至进给驱动单元除了速度控制信号外，还有使能控制信号，一般为 OC+

24V 继电器线圈电压。伺服电动机不转，常用诊断方法有：

(1) 检查数控系统是否有速度控制信号输出。

(2) 检查使能信号是否接通。通过 CRT 观察 I/0 状态，分析机床 PLC 梯形图（或流

程图），以确定进给轴的起动条件，如润滑、冷却等是否满足。

(3) 对带电磁制动的伺服电动机，应检查电磁制动是否释放。

(4) 进给驱动单元故障。

(5) 伺服电动机故障。

7. 位置误差

当伺服轴运动超过位置允差范围时，数控系统就会产生位置误差过大的报警，包括跟
随误差、轮廓误差和定位误差等。主要原因有： CD 系统设定的允差范围小；＠伺服系统增

303 

益设置不当；＠位置检测装置有污染；＠进给传动链累积误差过大；＠主轴箱垂直运动时

平衡装置（如平衡液压缸等）不稳定。

8. 漂移
当指令值为零时，坐标轴仍移动，从而造成位置误差。通过误差补偿和驱动单元的零

速调整来消除。

9. 回参考点故障

有找不到和找不准参考点两种故障。前者主要是回参考点减速开关产生的信号或零

标志脉冲信号失效所导致，可以用示波器检测信号；后者是参考点开关挡块位置设置不当

引起，只要重新调整即可。

5.8.2  故障诊断方法及维修案例

系统出现故障时，具有很强的报警功能，其报警形式主要有两种。

(1) 伺服驱动器上的 7 段数码管报警。 ai 系列数字式交流伺服驱动器上通常无状态

指示灯显示，驱动器的报警是通过驱动器上的 7 段数码管进行显示的，根据 7 段数码管的

不同状态显示，可以指示驱动器报警的原因。

(2) 系统显示屏报警。当伺服系统出现故障时，在显示屏或操作面板上显示报警内

容或报警信息。如 FANUCOi 出现 400-4N7 （为轴号）为伺服故障报警。如 4NO 表示 N

轴在停止时位置误差超过了设定值； 4N4 表示数字伺服出现故障； 4N6 表示位置检测连接

故障； 4N7 表示伺服参数设置不正确。出现上述报警号时，可通过检查诊断参数，进一步

检查、判断。

FANUCO 系统的位置偏差诊断参数号为 800-807 ，伺服故障的诊断参数号为 720~

723; 

FANUCOi 系统的位置偏差诊断参数号为 300 ，伺服故障的诊断参数号为 200,201 。
如出现 417 号伺服报警时，可通过 200 号诊断参数进行检查，诊断参数的含义如下：

-

信号名称

OVL 

IBit6 
I  LV 

Blt51 加4 1  Blt3 
I  HCAL 
OVC 

I  Blt2 
I  HV AL  I  OCAL 

1 职1 1 BltO 
I  OFAL 
I  FBAL 

OVL ：过载报警。

LV ：低电压报警。

OVC ：过电流报警。

HCAL ：电流异常报警。

HVAL ：过电压报警。

OCAL ：再生放电电路报警。

FBAL ：断线报警。

OFAL ：计数溢出报警。

根据以上信息，结合发生故障的现场条件及经验，找出发生故障的原因。
SIEMENS 802D 611U 驱动报警：

报警号： 1-50;101-150;151-200;501-550;601-650;651-700;701-750;751-

304 

800;801-850;851-900 。

报警的详细内容可利用面板上的 HELP 键进行在线帮助，在屏幕上显示出来。包括

故障原因及处理方法如下。

515# ：温度超温。
599 #  : PROFIBUS 循环数据传输中断。

607# ：电流控制器输出极限

原因：尽管最大电压有效，电机中的输入给定无效，电机没有连接或缺相。

608# ：速度控制器输出极限。

采取措施： CD 检查电机是否缺相。

＠检查电机接触器。

＠检查直流母线电压。

＠检查电机编码器电缆屏蔽。

1. 伺服异常报警故障

1) 故障现象

一台 DXK45 数控铣床 (FANUC OM 系统），屏显 414 号报警（伺服异常），且 X 轴伺

服模块单元的窗口出现 8 号报警。

2) 分析判定

检查诊断号 DNG720.4 位为 “1” ，表明电流异常，应为电机的动力线短路或发大器

故障。

3) 维修过程

依据操作者提供的故障发生的经过，结合图纸资料进行分析，发现 X 轴电机动力线

对地短路，进一步检查，发现动力线外皮破损，在运动过程中对地短路，造成电流异常，更

换动力线，故障排除。

2. 数控车床 401 号、 414 号报警故障

1) 故障现象

一台 SK50 数控车床 (FANUC OT 系统），屏显 401 号、 414 号报警（伺服异常）。

2) 分析判定

401 号为＊ DRDYOFF 伺服放大器未准备好信号； 414 号伺服异常是主要矛盾。检查

诊断号 DNG720.5 位为 “1” ，表明过电流，造成过电流的原因通常为机械部分故障。

3) 维修过程
拆开丝杠检查，发现导轨丝杠缺油，镶条紧。对丝杠进行清洗，检查油路，重新调整，

故障排除。注意：过电流与电流异常是两个不同的概念，切不可等同看待。

3. 加工中心 409 号、 447 号报警故障

1) 故障现象

一台 XH756B/1 加工中心 (FANUC 18i 系统），运行过程多次出现 409 号、 447 号

报警。

2) 分析判定

409 号表示伺服电机出现异常， 447 号表示伺服异常，通过硬件检测到内置脉冲编码

器故障。

305 

3) 维修过程
检查 X 轴伺服电机编码器，由于安装密封不好，造成冷却液、铸铁粉进入电机，腐蚀

编码器，导致损坏，更换编码器，故障排除。

4. 加工中心 411 号报警故障

1) 故障现象

一台 FV-800 加工中心 (FANUCOiC 系统），屏显 411 号报警。

2) 分析判定
出现 411 号报警表示 X 轴移动时，位置偏差大于设定值，实质为跟随误差大，应为进

给系统机械或电气故障，遵循先机械后电气的原则查找原因。

3) 维修过程
置于手动进给方式，摇动手柄，立刻出现 411 号报警。依据先机械后电气的原则，拆

开丝杠检查，手动扳丝杠，非常紧，为丝杠故障，修理调整后，故障排除。

5. 开机 1006 ＃主轴故障， 439# 、 9011 ＃过电压报警故障

1) 故障现象
VMC.850 （乔福， FANUCOiB) 立式加工中心。开机时，屏幕上同时出现 1006 ＃主轴

故障， 439#X 、 Y 、 Z 三个伺服单元 DC 电压高（过电压）， 9011 ＃过电压报警。

2) 分析判定

很明显，这是过电压故障。需查明原因。 FANUC 公司维修手册提示： 439 ＃提示为：
(DPSM 直流链路电压过高；＠SPMR 直流链路电压过高；＠ aseriesSVU 直流链电压过高。
9011 ＃提示为： O检查 PSM 的选定；＠检查输入电源电压和电机减速时的电源电压变动。

1006 ＃为机床厂家设计提供的报警。

3) 维修过程

经检查： PSM 电源模块显示 7 ＃报警， SPM 主轴单元显示 11 ＃均为过电压。测 AC
输入电压 217V 属正常。 DGN 诊断： 200.3"1" 位 HVA 过电压（伺服）。有两台相同的机
床，互相交换 PSM 和 SPM 两块模块仍未排除。此时，不能陷入手册钻牛角尖。必须另辟
思路，不要轻易怀疑系统，过电压不是系统硬件造成的，依据先公用后专用的原则而应当

重点检查公共部分~电源。

供电电源为三相五线制。保护接地线和工作零线（工作接零线），间的阻值小千 30,
与别的机床相比太小。取掉零线，另敷一根零线，同时将 RS-232C 插头拔掉，开机正常。
接上原零线，故障再现。去掉保护接地线，正常，但机床外壳带电。故障一目了然，故此，

重新敷一根零线故障排除。

6. 加工中心 387# 、 447 ＃报警故障

1) 故障现象

一台立式加工中心工作时忽然产生报警。报警号及报警内容为：
387#  X AXIS:ABNORMAL ENCODER(EXT) 分离式检测器发生某种异常。
447#  X AXIS:H卿 DISCONNECT(EXT) 通过硬件检测到分离式检测器断线。

2) 分析判定
根据报警信息查诊断。 DNG200.1 位为 “1" 断线故障。 201. 4, 201. 7 位均为 “1" 分
离型脉冲编码器硬件断线。 X 轴伺服为全闭环，采用 HEIDENHAIN 光栅尺作为位置检

306 

测反馈元件。位置反馈环节有问题。

3) 维修过程
依据先简单后复杂的原则，先检查光栅尺连结电缆及插头，完好无断线。再检查光栅
尺，发现读数头进入大量冷却液，被腐蚀损坏。需更换读数头。为了不影响生产，利用伺
服电机装置内提供的脉冲编码器，让它既作速度反馈又作位置反馈元件，将全闭环系统暂
时改为半闭环系统用。参数设定需作如下修改： 1815.1 位由 “1” 改 “O"; 1821 ＃不变；
2002.3 位由 “1” 改 “0";2024 ＃改为 12500;2084 ＃改为 2;2085 ＃改为 125 。

7.  802D 数控铣 700016# 、 380500 ＃报警故障
1) 故障现象

一台 802D 数控铣 XD-40 开机后， X 轴回零时出现下列报警： 700016 驱动未就绪；

380500 驱动 Xl ，代码 504(611U) ;025201 轴 Xl 伺服故障； 003000 急停。

2) 分析判定

4 个报警中主要矛盾是 38500 报警，驱动 611U 的 504 ＃报警。由千它才产生 025201

＃轴 Xl 伺服故障， 700016 驱动未就绪，进而 003000 急停报警。

查 504# ：测量电路错误和电机测量系统。
可能原因：电机编码器的信号级过低，故障（不正确的屏蔽），或者中断监控功能已

响应。

应采取的措施：使用西门子原装预装编码器电缆；检查编码器、电机和控制模块之间
的电缆和连接；检查控制模块面板前部的屏蔽连接（顶部螺钉）；检查频繁的中断原因；更
换编码器电缆或控制模块；对千齿轮编码器，检查齿轮和传感器间的间隙；更换编码器编
码器和电机。

3) 维修过程

首先检查编码器电缆，在 X 轴伺服电机端的编码器电缆插头处，发现冷却液进入使
电机编码器的信号级过低。交换 X 轴、 Y 轴编码器电缆，故障转移到 Y 轴。用电吹风机
将电缆焙干，故障排除。

8,  802D 数控铣 025050# 、 608 ＃报警故障
1) 故障现象

一台 802D 数控铣 XKA715 开机正常后， Z 轴回零出现： 025050 #,Zl 轴轮廓监控；
380500 急停驱动 Zl ，代码 608# (611U) 报警；代码 608# (611U) 报警：转速控制器输出受限
制；转速控制器处于极限状态（扭矩或者电流限制）时间过长，超出允许时间。许用的时间在
参数 P1605 中设定，而监测响应时的上区转速极限的许用时间在参数 P1606 中设定。

2) 分析判定

Z 轴为垂直轴，配有刹车装置应先检查它，然后再按上述的信息去分析查找。
3) 维修过程

查 Z 轴刹车线圈上无直流 24V 电压。依据强电图查找，发现 24V 的输出小，空开未

闭合。

9.  802D 数控铣 003000 ＃急停报警故障
1) 故障现象

一台 802D 数控铣 XKA715 开机系统启动完成后，伺服使能送不上。当压下伺服使

307 

能按钮后，屏幕上立刻显示 003000 急停报警。

2) 分析判定

观察电源模块绿灯正常，但不能转换成黄灯；伺服模块也处于正常。测输入电源电压

交流 380V 正常。

3) 维修过程

采用交换法，将另一台机床的电源模块换上后故障依旧，因此不能怀疑电源模块有问

题，此时测电源模块的输出直流电压只有 358V ，远远低于 540V ，估计外围供电有问题。

仔细检查发现母线槽一相保险松动，接触不良引起故障。

10. 结论

数控机床的自诊断功能很强， FANUC 、 SIEMENS 公司提供了丰富的诊断信息，从硬

件和软件控制上设计了上百种保护和报警，从而为数控机床的正常使用和维护维修提供

了很大方便。在深入理解的基础上，依据 FANUC、 SIEMENS 公司提供的手册，注意分

析，顺藤摸瓜，但不能深陷其中，钻牛角尖。熟悉并掌握进给伺服控制的原理及各信号的

连接、传输，是快速诊断、及时排除故障的关键。

小结

数控机床伺服系统一般由驱动控制单元、驱动元件、机械传动部件、执行元件和检测

反馈环节等组成。驱动控制单元和驱动元件组成伺服驱动系统，机械传动部件和执行元

件组成机械传动系统，检测元件与反馈电路组成检测装置，也称为检测系统。 FANUC 伺

服装置按主电路的电源输入是交流还是直流可分为伺服单元（三相交流电）和伺服模块
（通常为 DC 300V) 两种；而 SIEMENS SIMODRIVE  611 伺服驱动器包括模拟伺服 611

A、数字伺服 611D 和通用型伺服 611U ，都属于模块化结构，由电源模块、控制模块和功率

模块等模块组成。机械传动机构主要有滚珠丝杠螺母副、静压蜗杆—蜗轮条传动、齿轮齿

条传动和带传动等形式，而导轨主要有贴塑滑动导轨、滚动导轨和静压导轨等形式。进给

伺服系统位置检测装置按类型不同分为绝对编码器和相对编码器；按连接形式不同分为

伺服电动机内装编码器的位置检测装置和分离型检测装置的位置检测装置。通过分析数

控机床伺服系统的工作原理，结合系统故障报警提示，即可对该部分故障做出处理。

习题

一、填空题

1. 数控机床伺服传动机构主要有

和

等形式，其作用主要在于

，达到

2. 与其他直线运动副相比，滚珠螺旋传动有

、

、

和

、

3. 静压蜗杆蜗轮条传动具有

等特点，因此适合在重型机床的进给传动系统上应用。

、

等特点。

、

、

和

308 

4. 对于圆柱齿轮传动，常可采用

和

消除传动间隙。

5. 数控机床伺服系统一般由

组成。

6. 进给伺服系统的位置控制按

按有无分离型位置检测装置分为

、

和

、

和等

可以分为开环和闭环形式两大类，闭环系统

两种形式。

7.  FANUC 伺服装置按主电路的电源输入是交流还是直流可分为

和

两种。
8.  Siemens SimoDrive 611 系列伺服驱动器都属于

，由

、

和

等组成。

二、简答题

1. 叙述数控机床伺服系统的组成和各部分的功能。

2. 在数控机床伺服系统中，机械传动装置有何作用？其常用形式有哪些？

3. 数控机床伺服系统中的导轨形式有哪些？比较它们各自的优缺点。

4. 试述 FANUC o: 系列伺服单元驱动装置各端口的作用。
5. 试述系列 SIEMENS SIMODRIVE 611 伺服驱动器各端口的作用。

6. 试述 FANUC 系列伺服参数的设定过程。

7. 试述 SIMODRIVE 611U 伺服系统参数的设定过程。

8. 简述为什么要消除滚珠丝杠副的消隙？有哪些手段可以消除？

9. 简述进给系统齿轮传动为什么会有间隙？常见消隙手段有哪些？

10. 带传动与齿轮传动相比有何特点？数控机床进给系统常采用哪种带传动？

11. 直线电机与传统电机相比有何优点？

12. 闭环系统也称为三环系统，请指出是哪三个环，并说明各个环路是如何调节的？

13. 闭环系统中，光栅尺和电机内置的编码器的作用分别是什么？
14.  FANUC 伺服单元与伺服模块有什么不同？
15.  FANUC~i 与 ai 系列伺服有何不同？
16.  o: 系列伺服模块与 o:i 系列伺服模块在控制上有何不同？
17.  ai 系列伺服单元的报警如何诊断？
18.  SIEMENS 611 系列伺服模块有哪几个模块组成？其各自作用是什么？
19.  SIEMENS 伺服系统 611A、 611U 、 611D 有何区别？

20. 画出 611U 伺服驱动器上下电的时序图，并说明 T48 、 T63 、 T64 各端子的作用。
21.  SIEMENS 802D 系统中 Profibus 总线有何用途？
22.  SIMODRIVE 611 U 故障后，可以通过哪些途径进行诊断？

23. 某学校开学后发现某 FANUC Oi 系统数控机床开机后出现 300 号报警，请分析

故障产生的原因及解决方法。

24. 某机床采用 FANUC Oi 数控系统，出现了 401 号报警，分析机床可能的故障

原因。

25. 如何正确地测定机床的反向偏差？

309 

第 6 章数控机床编程与操作故障

编程与操作故障是维修工作中经常碰到的问题。出现报警及发生机床事故时操作者
往往不是从自身上寻找原因并分析，而是找维修人员声称机床失控、机床有故障。若维修
人员不熟悉有关操作，不了解相关编程知识，将不能及时、准确地分析诊断出故障产生的

原因，甚至走弯路。

6.1 坐标系

加工零件放在数控机床上，必须知道它的确切位置。同时机床的运动是由数控系统 CNC

发出的指令来控制的。为了确定机床的运动方向和移动距离，就必须建立机床坐标系。

数控机床标准坐标系与运动方向，在国际标准 ISO 中有统一规定，我国制定的标准

JB叮 3051—1999 与之等效。图 6-1 所示为常见数控机床坐标系示意图。

规定原则：标准的机床坐标系是一个右手笛卡儿直角坐标系，用右手螺旋法则判定。
数控机床的加工运动主要分为刀具的运动和工件的运动两部分。规定 X 、 Y 、 Z 表示刀具

相对“静止“工件而运动的刀具运动坐标，即工件静止不动，刀具运动。并规定使刀具远离

工件的方向为运动的正方向。

坐标轴确定的方法及步骤：

一般取产生切削力的主轴轴线为 Z 轴，刀具远离工件的方向为正方向。当机床无主

轴时，选与工件装夹面垂直的方向为 Z 轴。

X 轴的确定分两种： CD对于工件作回转切削运动的机床（如车床、磨床），在水平面内
取垂直工件回转轴线即 Z 的方向为 X 轴，刀具远离工件的方向为正方向。＠对于刀具作
回转切削运动的机床（如铣床、镜床），当 Z 轴垂直时，人面对主轴向立柱看去，向右为 X
正方向；当 Z 轴水平时，面对主轴看去，则向左为 X 正方向。对于无主轴的机床（如创
床），以切削方向为 X 正方向。

Y 轴根据已确定的 X 、 Z 轴，按右手笛卡儿坐标系确定，即大拇指代表 X 轴，食指代

表 Y 轴，中指代表 Z 轴。

数控机床坐标系主要有机床坐标系和工件坐标系。

L 机床坐标系

机床坐标系又称机械坐标系，机床坐标系的原点也称机床原点或机械原点，这点是机

床上一个固定的点。其位置在出厂之前由厂家调整好并在系统参数中设定好，一般情况
下不要轻意更改。

参考点是机床坐标系中一个固定不变的特殊位置的点，它与机床原点之间有一个确
定的位置，可以与机床原点重合也可分开。其位置在出厂之前由厂家调整好并在系统参

310 

x0丿

Y~ x  

卧式车床后置刀架坐标系

立式加工中心坐标系（立式铣床）

Yz 

X 

0 

x~: 

卧式加工中心坐标系

卧式镂床坐标系 (TK6113)

(a) 

(b) 

(c) 

(d) 

X 

X' 

工件

机床原点

工件原点

Z' 

Z

仁,x 

y 

YX 

] 

机

床

点原

数控车床工件坐标系

立式加工中心（铣床）工件坐标系

图 6-1 常见数控机床坐标系示意图

311 

数中设定好。对于需执行手动返回参考点操作的数控机床（亦称回零操作），一般是用挡
铁和回零减速开关的配合来完成的，进而建立起机床坐标系。它是编程和加工的基准。

维修中还经常用到第 2 、3 、4 参考点，它们都是用系统参数来设定的。其目的是为了建
立一个固定不变的点，在该点处数控机床可执行一些特殊的诸如换刀或交换工作台等功能。

2. 工件坐标系

工件坐标系又称编程坐标系。它由机床坐标系平移或旋转而产生，是为简化计算和
编程而由编程人员自行设定的坐标系。编程原点可以是工件或夹具上的某一点。编程原
点的选择一般应遵循下列几点：

(1) 简化计算。

(2) 尺寸链计算误差要小。

(3) 引起加工误差要小。

(4) 易千找正、便于测量。

A 、 B 、 C 分别为绕 X 、 Y 、 Z 旋转的空间旋转轴。 U 、 V 、 W 为第二直线轴，它分别平

行于 X 、 Y 、 Z 轴。

6.2 功能代码

数控机床零件加工程序及其他应用程序中包含了工艺参数、几何参数和机械辅助动
作的顺序逻缉控制三部分信息。它们分别用准备功能 G 代码、进给功能 F 代码、主轴功
能 S 代码、刀具功能 T 代码、辅助功能 M 代码等功能代码来描述。维修人员也必须正确
理解、掌握功能代码的含义及正确应用，才能迅速及时诊断故障，进而排除。

6.2.1  准备功能字 G

功能字由地址字（英文字母）和数字字组成。它是构成程序的最小单元。

准备功能字的地址符是 G ，又称 G 功能指令或 G 代码。它由地址符 G 及后面的数字
组成，是指令机床动作方式或控制状态命令的指令。有运动指令和非运动指令之分；有模
态指令和非模态指令之分。不同的数控系统其 G 功能相差甚大，只有 G00~GO4 、 G17~
G19 、 G40~G42 、 G90-G91 、 G94-G97 基本相同。

模态指令又称为＂续效指令＂。它是指某一 G 指令一经程序段中指定，就一直有效，直
到后边程序段中出现同组的另一 G 指令或被其他 G 指令取代时才失效。编写程序段时，与
上段相同的模态指令可以省略不写。不同组模态指令可编写在同一程序段内。例如：

NOS  GOO  G90  G54  XlOO.  Y - 120. ; 
NlO  M03  S1000  ; 
N15  GOl  X85.  F120  ; 

N80  G04  X3.5  ; 
GOO  G90  G54 是不同组的模态指令，可以在同一程序段中出现。 GOO 为运动指令，
G90 、 G54 为非运动指令。一经程序段中指定，就一直有效。 G04 为非模态指令，只在

312 

N80 程序段中有效。

1.  GOO 快速点定位
指令刀具或工作台快速移动的指令，移动速度由系统 NC 参数设定（见参数表），其通

过机床操作面板上的快速倍率开关可调节大小。

指令格式： GOO X _ ;  
GOO  X _Y _ ;  
Z 
GOO  X 

Y 

2.  GOl 直线插补

指令格式： GO1X

Y 

F 

（单轴运动）

（两轴联动）

（三轴联动）

X、Y 为终点坐标，这是直线进给两轴联动的指令，进给速度按工进速度 (F 设定的），轨

迹为从起点到终点的直线。执行时系统内部进行插补运算。进给功能字 F 不能省略。它有

两种表达方式：一种为同步进给即每转进给量 (rnm/r) ；另一种为每分钟进给量 (mm/min) 。

车床常用同步进给，铣床常用每分钟进给。两种方式可在程序段中用相关的 G 代码转换。

注意有的数控机床在主轴未正常启动时，程序执行到 GOl 程序段时自动停止且无任何报警。

例如： GOl XlOO.  Y-20.  FSOO; 
GOl  XlOO.  Z-30..  F0.2; 

(SOOmm/min) 
(0.2mm/r) 

3.  G02/G03 顺时针圆弧插补／逆时针圆弧插补

G02—顺时针圆弧插补； G03一逆时针圆弧插补。

指令格式：

［勹［

芦］ f- Z-

- Y- 昙二

G19 

J-K-

/：/：平平平：／／：／／值插／／：三弧：平弧：为为优圆圆护到圆定圆：

4.  G04 暂停程序暂停时间

指令格式：
G04  X ；或 G04 P; (FANUC 系统格式， X 的单位为 s;P 的单位为 ms)
G04  F ；或 G04 S  ; (SIEMENS 系统格式， F 的单位为 s;S 表示暂停主轴转数，当程

序中主轴转数为 300 时， G04 S30 表示暂停时间为 30/300 = 0. lmin = 6s) 。

5. 返回第二参考点（亦称返回固定点）
G30  X  Y  Z; (FANUC 系统格式）以快速移动的速度经过中间点的坐标 XYZ 返

回到机床的某个固定点。

G75  Xl=O Yl=O Zl=O;(SIEMENS 系统格式）程序段中 Xl,Yl 和 Zl 下编程的数

值不识别，即可以为任意值，这里为零。

这个点的坐标数值在 NC 参数中设定。比如换刀点，这是维修中经常碰到的。

常用的 G 指令见表 6-1 。

表 6-1 常用的 G 指令

数控车系统

内容含义

指令

组别

l 

l 

GOO 

GOl 

G02 

G03 

01 

FANUC Qi TB 

SINUMERIK 8020 

华中世纪星

HNC-21T 

广州数控

GSK980TD 

快速点定位

快速点定位

快速点定位

快速点定位

直线插补

直线插补

直线插补

直线插补

顺时针圆弧插补

顺时针圆弧插补

顺时针圆弧插补

顺时针圆弧插补

逆时针圆弧插补

逆时针圆弧插补

逆时针圆弧插补

逆时针圆弧插补

G04 

00 

暂停

英寸输入

毫米输入

螺纹切削

06 

01 

G20 

G21 

G32 

G33 

G34 

G35 

G40 

暂停

G70 

G71 

螺纹切削

暂停

英寸输入

毫米输人

螺纹切削

暂停

英寸输人

毫米输入

螺纹切削

变螺纹切削

螺纹切削螺距增加

螺纹切削螺距缩小

刀尖半径补偿撤消

刀尖半径补偿撤消

刀尖半径补偿撤消

刀尖半径补偿撤消

G41 

07 

刀尖半径左补偿

刀尖半径左补偿

刀尖半径左补偿

刀尖半径左补偿

G42 

刀尖半径右补偿

刀尖半径右补偿

刀尖半径右补偿

刀尖半径右补偿

G50 

00 

工件坐标系设定或

最大主轴转速设定

精车循环

粗车外圆循环

粗车端面循环

00 

闭合粗车循环

端面深孔钻循环

切槽循环

螺纹切削循环

G70 

G71 

.G72 

G73 

G74 

G75 

G76 

l 

l 

~ 

l 

314 

英寸输入

毫米输入

精车循环

精车循环

粗车外圆循环

粗车外圆循环

粗车端面循环

粗车端面循环

闭合粗车循环

闭合粗车循环

端面深孔钻循环

切槽循环

螺纹切削循环

螺纹切削循环

数控车系统

内容含义

（续）

指令 组别

FANUCOi TB 

SINU郧RIK802D

华中世纪星

HNC-21T 

广州数控

GSK9801D 

, 

, 

l 

l 

l 

G90 

G91 

G92 

G94 

G95 

G96 

G97 

G98 

G99 

02 

05 

简单矩形循环

绝对尺寸输人

绝对尺寸输入

简单矩形循环

增量尺寸输入

增量尺寸输入

简单螺纹循环

工件坐标系设定

简单螺纹循环

简单端面循环

每分钟进给

每分钟进给

简单端面循环

恒线速度

每转进给

恒线速度

每转进给

恒线速度

恒线速度

恒线速度取消

恒线速度取消

恒线速度取消

恒线速度取消

每分钟进给

每转进给

每分钟进给

每转进给

6.2.2  进给功能字 F

进给功能字的地址符是 F ，又称为 F 指令，由地址符 F 及后面的数字组成，有两种表

达方式。两种方式可在程序段中用相关的 G 代码转换。

FANUC 系统车床系列：用 G99 指定 F 为 mm/r;G98 指定 F 为 mm/min 。

FANUC 系统铣床系列， SIEMENS 系统：用 G95 指定 F 为 mrn/r; G94 指定 F 为

mm/min。

程序中不能漏掉 F 功能字，同时也不能小千数控系统 NC 参数所设定的最小值，否则

将产生系统报警。 F 功能字在螺纹切削加工程序段中用于指定螺纹导程。

6.2.3  主轴转速功能字 S

主轴功能字的地址符是 S ，又称为 S 指令，由地址符 S 及后面的数字组成。 CNC 数控

系统采用直接指定方式，即地址符 S 后面的数字直接指定主轴转数。不能随意添加小数

点。例如，程序段中 SlOOO 指令表示 lOOOr/min 。

在数控系统中主轴转速功能的表达有两种方式，在程序中可相互转换。
G97  S300 ：表示主轴转速为 300r/min。开机后，系统一般都默认 G97 状态。

G96  S300 ：表示其恒线速度为 300m/min 。 S 指令是加工切削时的恒定线速度， G96

指令控制其主轴转速按所规定的恒线速度值运行。

6.2.4  刀具功能字 T

刀具功能字的地址符是 T ，又称为 T 指令，它自动对刀具的长度、半径进行补偿。

有两种主要格式，其指令格式因数控系统不同而有所差异。下面主要介绍 FANUC

和 SIEMENS 系统。

315 

1. 采用 T 指令编程
它由刀具功能字的地址符 T 和数字组成，主要应用在 FANUC 车床系列， T 后面的数

字用来指定刀具号和刀具补偿号。有两种主要格式，用 T 后面的后续两位数字或四位数

字来表达。它们由 NC 系统参数来选择设定。

TXX 用两位数字表示，个位数表示刀具补偿号，从补偿号中读取刀具补偿值；十位数

表示刀具号。例如 T23 表示取 2 号刀第 3 组补偿值； T20 表示取消 2 号刀刀补。

TXXXX 用四位数字表示，个位数、十位数表示刀具补偿号，从补偿号中读取刀具补

偿值；百位数、千位数表示刀具号。例如 Tllll 表示取 11 号刀第 11 组补偿值， TllOO 表

示取消 11 号刀刀补。

2. 采用 T、 D(H) 指令编程

使用 T 指令仅选择刀具号，用 D(H) 地址符来选择相关的刀具补偿号。

FANUC 铣床（加工中心）系列：是用 D 或是 H 地址符来表示，完全由参数设定。例如：

T05 ；选取 5 号刀具
GOO  G43  Z H03 ；读取第 3 组补偿号中的刀具长度补偿值给 3 号刀，执行刀具的长度

补偿

GOO  G41 

(G42)  X  Y  D(H) ；读取第 3 组补偿号中的半径长度补偿值给 3 号

刀，执行刀具的半径补偿

SIEMENS 系统编程时，无论车床或是铣床（加工中心）系列，均用 T 表示刀具号，用

D 表示补偿号。每把刀都设定了 1 个～ 9 个不同的刀具补偿偏置量。

例如 T3D5 ；表示选择 3 号刀，第 5 组刀具补偿偏置量。如果是第 1 组刀具补偿偏置

量， D1 在程序中可以省略。

6.2.5  辅助功能字 M

辅助功能字的地址符是 M ，又称为 M 指令或 M 功能。它由地址符 M 及后面的两位

（三位）数字组成。它接收从 NC 装置来的以二—十进制代码表示的 M 功能等机床顺序

动作的信息，并对其进行译码，转换成与辅助机械动作相对应的控制信号控制各执行部件

的顺序动作。诸如主轴的启停、换刀、工件的自动夹紧松开、液压、润滑、冷却等。 M 指令

也有模态和非模态之分。哪个 M 指令表示何种机床的辅助功能，除了国际标准规定的

MOO-Mll,Ml3 、 Ml4 及 M30 相同一致外，其他的 M 代码由机床制造厂家自行设定，需

认真阅读机床的使用说明书了解其含义。 HTC2050Z 数控车削中心 M 功能见表 6-2 。

表 6 - 2  HTC2050Z 数控车削中心 M 功能

功能

程序停止

选择停止

程序结束

主轴正转

主轴反转

主轴停转

冷却启动

冷却停止

卡盘卡紧

M 代码
Mll 
M13 
M14 
M12 
M52 
M53 
M70 
M71 
M74 

功能

卡盘松开

主轴正转及冷却启动

主轴反转及冷却启动

二主轴回零

尾座套筒进

尾座套筒退回

C 轴操作方式

速度轴操作方式

C 轴抱紧

M 代码
M75 
M30 
M93 
M94 
M95 
M98 
M99 

功能

C 轴松开

程序停止并复位

刀具主轴正转

刀具主轴反转

刀具主轴停转

子程序调用

停止

M 代码
MOO 
MOl 
M02 
M03 
M04 
M05 
MO8 
M09 
M10 

316 

在卧式加工中心中经常用到 B 功能字，又称为第二辅助功能字。它指定分度工作台

的分度定位。

6.3  加工程序的编写格式

程序段是由指令和坐标（功能字）组成，指令有准备功能 G 指令和辅助功能 M 指令，

还有其他设置功能 S 、 F,T 、 H 指令等。坐标是根据各轴的不同，有不同的坐标值。程序

段是按照字地址格式设定的，每个指令或坐标值都是由地址字（英文字母）和数字组成，如

G90 、 GOl 、 XS0.6 等。程序段的格式遵照 GB 8870一88 和 ISO 6983一I—1982 的标准规

定，其格式如下：

NX  X  GX  X  XX  XX  YX  XX  ZX  XX  HX  X  FX  X  SX  X  MX  X  TX  X; 

NXX-—序号，可以跟四位数，也可以不要序号。

GX  X-—准备功能指令，主要是控制刀具运动，设定相关参数。

X 、 Y 、 Z一一坐标，表示刀具移动的方向，坐标值的大小规定各数控系统不同， FANUC

OiC 系统规定小数点前五位，小数点后三位。

HXX-—刀具补偿号，设定刀补值的重要参数，径向刀补也有用 DX X 表示。

FX  X--－进给量，单位 mm/min 、 mm/r 。

SX  X 一主轴转速，无级变速，从最大到最小任选，有些机床有高、中、低速三挡变

速，用 M 指令来选择。注意阅读说明书，单位 r/min 。

MXX －~辅助指令，主要指定机床的一些辅助的开关动作。

TX  X 一—－刀具号。

；—一结束符，每条程序段都要有结束符，不同的系统代号不同，有“*”、 “CR” 、 “LF"

等，若有序号，有些系统可以无结束符，需要阅读机床说明书。

程序的格式较为简单，由 “0” （或其他英文字母）加程序号开头，中间为程序段组成的

程序，最后由“%“结束。如：

QX  XX  X.. …………..……．程序开头， OX X X  X 为程序号 (FANUC 系统）

G54G90GOOXOYO;..……..…….. （程序）

M30...... …….....…·……..……. （程序结束指令）

% 

不同的数控系统，程序的格式不完全一样，在具体机床上操作时，请阅读机床说明书。

6.4  刀具补偿功能的正确应用

数控机床的系统控制软件中均有刀具补偿功能控制软件，它包含了长度补偿和半径

补偿两种功能。应用刀具补偿功能，编程人员直接根据零件图纸进行编程，不必考虑刀具

长度和半径尺寸因素。只需在刀具补偿画面中输入正确的刀具长度和半径补偿值，执行

317 

补偿程序段语句时 NC 系统自动补偿刀具的长度和半径，刀具的实际位移量因补偿值的
不同而不同，但最终运动到程序段的终点。

语句格式：
长度补偿： FANUC 系统车床 TXX 或 TXXXX;
FANUC 系统铣床 G43(G44)  Z H  ; 

Z 终点坐标值， H 为偏移补偿号，存放刀具长度的补偿值。用 G49 或 HOO 取消长度

补偿。

SIEMENS 系统

TXXD:XX; 

无论车床或是铣床（加工中心）系列，均用 T 表示刀具号，用 D 表示偏移补偿号。每

把刀都设定了 1 个～ 9 个不同的刀具补偿偏置量。

必须高度重视补偿值的正确输入，切不可将正负值及大小输错，否则将造成重大事

故。补偿语句不能出现错误或丢失。

半径补偿：所有数控系统均用 G41(G42) 表达。
刀具半径补偿过程分为补偿建立、执行、取消三个过程。“建立“时， NC 系统根据半
径值和刀具补偿方向自动计算本段刀具中心轨迹的终点位置使刀具中心轨迹偏离编程轨
迹一个半径值；“执行”时，刀具中心轨迹始终偏离编程轨迹一个半径值，并计算出各段之
间的转接轨迹；”取消”时，将半径值取消，使刀具中心轨迹回到编程终点。

语句格式：
G17  (G18,G19)  G41(G42)  GOO  (GOl) 

X 

Y 

H(D) 

F 

; 

补偿方式 刀具移动指令 终点坐标 补偿号 进给量

选择平面
G41 为刀具半径左补偿，即沿刀具前进方向看刀具在工件的左边。
G42 为刀具半径右补偿，即沿刀具前进方向看刀具在工件的右边。
刀补建立必须在移动指令 GOO(GOl) 段，不能在 G02(G03) 程序段中建立，否则产生

报警。取消补偿用 G40 语句。

6.5  编程故障实例分析

编程中程序有语法错误、逻辑错误、非法数据、数据错误、正负号错及小数点丢失等。
常见错误：输入代码错误，输入单位和格式错误，长度补偿丢失或输入错误，半径补偿

错误，固定循环中输入不当或错误。

6.5.1  非法小数点或小数点省略

1. 非法小数点输入
M03  SlOOO. ；当执行到此语句时出现报警。 FANUC 系统显示 7 ＃报警。小数点输
入错误，即在不能使用“·"的地址后输入了小数点。本程序段中主轴转速 1000r/min 后输
入了小数点，错误；去掉小数点即正常。

2. 小数点省略
最小单位编程时，坐标地址字 X 、 Y 、 Z 为整数时未加小数点，造成故障。是用小数点
编程或是最小单位编程，可由 NC 参数来设定。数控车由于编程不当未加小数点，执行

318 

GOO  X300 ；语句时，刀架快速向中心移动，造成严重撞机事故。此处的 X300 表示
0.3mm ，而不是编程者期望的 300mm。

FANUCO 系列的 NC 参数 15. 7, FANUC Oi/16/18 系列的 NC 参数 3401..0 位为 0
（零）时视为最小设定单位（坐标字的最小设定单位为 0.001mm) 。为 “1" 时视为 mrn 、
inch 、 s 单位。只有当设定为 “1" 、坐标地址字 X 、 Y 、 Z 为整数时小数点可以省略，否则必须
写上输入小数点。

6.5.2  正负号输人错误

在程序输入时不小心误将坐标值的正负号输错，特别是正值误输成负值危险性极大，

往往造成撞机事故。一旦撞机操作者往往认为是机床故障，找维修人员。维修人员到达
事故现场后，应遵循“多看少动、不盲目动手”的原则，首先向操作者仔细询问事故过程，然
后检查伺服系统的驱动状态正常无误，再将加工程序调出，分析程序段是否有误。

6.5.3  语句格式不当

(1) 一台 CKS6132A(FANUC Oi) 数控车，加工法兰盘时 7 号刀出现问题，法兰外径

尺寸小 3mm。共用了 5 把刀，仅 7 号刀出现问题，由此不应当怀疑伺服驱动有问题，也不

应当怀疑转塔刀架有问题，应仔细检查分析加工程序。程序如下：

0888; 
N05  T0708  G50  S1188;  设定主轴最高转速 1188r/min ；选 7 号刀第 8 组刀补
NlO  G96  M03  S125; 
N15  M08; 
N20  GOO  Xl54.0 Z2.0; 
N25  GOl  Z —10.0 F0.2; 

快速运动到工件坐标系 X= 154mm,Z=2mrn 处定位

恒线速度控制，主轴正转

冷却液开

M30; 

程序执行到 N20 语句结束时，屏幕显示的 X 终点坐标值不是 154mm 而是 151mm,

小了 3mm。反复多次试验，结果一样。程序有问题吗？表面上看似乎没有什么错误。换

一种方法思考，先在 MDI 方式下输入 T0708 并执行，然后再执行零件加工程序，错误没
有了，问题解决了。看来语句格式不当。将 N05 语句 T0708 G50  S1188 分成两段，变为
G50  Sl 188; T0708 ；问题就彻底解决了。 G50 SXXXX 必须单独为一程序段。

(2) 一台带交换工作台的加工中心 XH756(FANUC Oi) ，子程序返回主程序语句

不当。

主程序 01886 

子程序 01 

M98  POl; 
MlOO; 

M30; 

G91  G30  YO  M19; 
M99; 

当程序执行完子程序从 M99 返回主程序时，主程序的语句为 MlOO ，程序停正执行。

319 

将子程序中的 G91 G30 YO  M19 从中取出放在主程序 MlOO 语句之前，从子程序返回主

程序，主程序继续执行。这表明 FANUC 系统子程序结束返回主程序时主程序段不能为

辅助功能指令 M 。

6.5.4  刀具长度补偿

L 程序中漏掉长度补偿语句或坐标字
GOO 
G43 
G82 

X - 6. 
G55 
H28 
Z30. 
X - 6.  Y72. 

Y72. ; 
S110 
Z - 15. 9  R - 9.  P4000  F20; 

M03; 

Z30 ．坐标字漏掉未写，造成执行该段语句时， Z 向负向快速移动，将夹具撞坏。在
G4J  H28  Z30 ．程序段中，当 Z 坐标字省略时，系统默认为 ZO 。此段中为工件坐标系
原点 Z: —552.8 刀具向原点移动。同样语句中漏掉了 G43 H28  Z30 语句，未执行刀具长

度补偿，其后果一样。

2. 取消刀具长度补偿时造成超程（对工件坐标系的理解不正确）或造成事故
程序： GOO  G57  XO  YO; 

G43  H25  Z30  M03  S500; 
G86  Z-97R5.  F55; 
GOO  G49  Z350 M05; 

(G57: Z - 383. 5;)  H25 = 152. 45 

若将 Z350. 编写成 400. 造成超程。因为 G57 的 Z 轴零点在－ 383.5 ，取消刀补值

383.5 ，亦回到机床原点，退 400 肯定超程。相反，若取消刀补， Z 退回的坐标小于刀具长

度补偿 152.45 ，比如 ZlOO ，刀具不但不退，反而向工件方向移动，造成事故。

6.5.5  X 伺服轴出现 414 ＃报警

(FANUC OT 系统）调诊断号 720 ＃查看第 5 位被置 ”1“ 过电流报警。机床是经济型

数控车，主轴无 S 功能。手动挂挡，主轴转速挂在 llOOr/min 挡，进给量 F 设定为同步进
给 5mmlr ，执行 G99 GOl  X35.F5 时其进给速度实际为 5500mm/min。而机床参数中厂

家设定的快速移动速度设定值为 5000mm/min 。（参数 518# ）这是造成过电流的直接原

因。减小 F 值或更改 G01X35.F5 语句为 GOO 。

6.5.6  安全距离设定不当造成事故

G81  X20  Y50  Z —3 Rl  FlOO ；这是钻孔循环加工语句，表面上看语句格式正确，无错

误。执行该语句时，造成打刀事故。安全距离 R=lmm 太小，原因是加工零件为铸件毛

蚽尺寸误差大引起。

6.5.7  参数设定不当或不全

(1) 一台 XH756(FANUC 18i) 卧式加工中心在执行刀具半径补偿语句时，程序停止

出现 148 ＃报警。报警提示：自动拐角倍率的减速比超过了角度允许设定值的范围。需

修改 NC 参数 1710-1714 的设定值。

320 

调出参数设定画面， 1710 ＃参数设定为 0 ，不正确。 1710 ＃参数为字节型，数据范围 1

~100 。表示自动拐角倍率内侧圆弧切削速度的最小减速比 (MDR) 为 0 刀具将停止。重

新设定为 50 。将 9944.4 、 9944.5 位参数均设定为 “1” 。

(2) 一台韩国起亚生产的卧式加工中心执行刚性攻丝 G84 固定循环时，不能正确

执行。

程序：

M29; 
（刚性攻丝）
G84  XO  YlO.  Z-15.0 RS.  F80  ; 

X-50.; 

G80; 
G91  G30  XO  YO  ZO  ; 

在执行完 G84 刚性攻丝，取消固定循环 G80 语句处，程序停止机床不动作。去掉 G80
语句，执行到 G91 G30  XO  YO  Z.O ；语旬时产生 204 ＃报警，机床亦停止动作。刚性攻丝结束

后加上 M28 刚性攻丝结束语句则出现 205 ＃报警（刚性攻丝信号关断）。查阅有关刚性攻丝

的参数设定是否正确，从 5200 ＃位型参数中发现 5200.2 位 CRG 设定不正确。

CRG ：用刚性解除指令 (G80,01 组 G 代码、复位等）解除刚性攻丝状态时：

0 ：刚性攻丝状态的解除要等待刚性攻丝信号 RGTAP 变为 0 。

1 ：刚性攻丝状态的解除不要等待刚性攻丝信号 RGTAP 变为 0 。

机床厂家将 5200.2 设定为 “0" ，而 PMC 梯形图中未设定相关程序，故出现 205 ＃报

警。重新设定 5200.2 位参数由 0 变为 1 ，刚性攻丝固定循环正确执行。

(3) 一台 CK5110HX8/2Q (FANUCOi) 数控立式车床进行螺纹切削加工时不动作。

机床无论是在 G99 方式下，进给量 F 以同步进给即每转移动一个螺距，或是在 G98

方式下，进给量 F 以每分钟进给，编程机床均不执行。调出参数设定画面， PRM1402.0

(NPC) 位参数设定为： “0” 不正确，将它由 “0” 改设成 “1" ，问题解决。

6.6  操作故障实例分析

6.6.1  数控机床回参考点

1 ．数控机床回参考点的必要性

数控机床在接通电源后要做回零的操作，这是因为在机床断电后，就失去了对各坐标

位置的记忆，所以在接通电源后，必须让各坐标轴回到机床一固定点上，这一固定点就是

机床坐标系的原点或零点，也称机床参考点。使机床回到这一固定点的操作称为回参考

点或回零操作。

数控机床回参考点的好处如下：

(1) 系统通过返回参考点来确定机床的原点位置，以正确建立机床坐标系。

321 

(2) 螺距误差补偿及反向间隙补偿有效，软极限行程保护有效。
图 6-2(a) 所示为一卧式加工中心机床参考点相对工作台中位置的示意图。图 6-2

(b) 为 SSCK-20 数控车床机床返回参考点后刀架相对卡盘中心机床原点的示意图。

+X 

机床原点

旋转刀架

+Z 

主轴

LZ 
500.0 

(b) 

(a) 

图 6-2 数控机床返回参考点的示意图

(a) 卧式加工中心回零示意图； （ b ） S.SCK-20 数控车回零示意图。

回参考点是数控机床的重要功能之一，能否正确地返回参考点，将会影响到零件的加

工质量。同时，由于数控机床是多刀作业，每一把刀具的刀位点安装位置不可能调整到同

一坐标点上，因此就需要用刀具补偿来校正，如加工中心刀具的长度补偿和数控车床车刀

刀尖的位置补偿，这种刀具偏置的补偿量也是通过刀位点的实际位置与由参考点确立的

基本坐标系比较后补偿得到的。

2. 回参考点的方式

回参考点的方式因数控系统的类型和机床生产厂家而异，目前，采用脉冲编码器或光

栅尺作为位置检测的数控机床多采用栅格法来确定机床的参考点。脉冲编码器或光栅尺

均会产生零位标志信号，脉冲编码器的零标志信号又称一转信号，每产生一个零标志信号

相对于坐标轴移动一个距离，将该距离按一定等分数分割得到的数据即为栅格间距，其大

小由参数确定。当伺服电机（带脉冲编码器）与滚珠丝杠采用 1:1 直连时，一般设定栅格

间距为丝杠螺距，光栅尺的栅格间距为光栅尺上两个零标志之间的距离。采用这种增量

式检测装置的数控机床一般采用挡铁与回零减速开关相配合实现。随着智能型的检测元

件的涌现，德国海德汉 (HEIDENHAIN) 公司推出了带距离编码参考点标志的线性测量系

统，其省去了回零减速开关，不必返回一个固定的机床参考点（第一参考点）且在任意位置

正负方向均可实现手动回零操作。

带减速挡块的栅格信号返回参考点控制，目前最常见的两种方式是 FANUC 系统（图

6 — 3) 和 SIEMENS 系统（图 6-4) 。

FANUC 系统在返回参考点状态下，按下各轴点动按钮，机床以快移速度向机床参考

点方向移动，当减速挡块碰到减速开关时，开始减速，以低速向参考点方向移动。减速开

322 

关离开减速挡块时，系统开始找栅格信号，系统接收到一转信号后，以低速移动一个栅格

偏移量，准确停在机床的参考点上。

工作台

0 

0 

@ 

@ 

|  ～卢-——-
挡块

_七: T  T 

古

LS(=DECn) 

一方向 (PRM1006#5)

速度

快移速度
(PRM1420) 

令减速后的速度
FL(PRN1425) 

时间

IOG+ZRN 

*DECn 

0 

@ 

| 

@ 

|\ }@ 

PGZ 

GRID  五IIIIIIIIIIIIIIIIIIIIIIII ｝口 5``，玉

:~?从信号＊DECn 由 “0”
匕＿ 变到 “1” 的位置开

图 6-3 FANUC 系统数控机床返回参考点的原理

定为参考点

FANUC 相关机床参数设定：（回参点相关参数）

PRM2.7=1 ，使用减速挡块 (*DEC) 回参考点。

PRM1002.1 = 0 ，全轴有挡块回零。
PRM1005.1 = 0 ，各轴有挡块回零。
PRM1002. 0 =  1 ，回零同时控制，全轴有效。
PRM3006.0=  0, 返回参考点减速信号＊ DEC 使用地址 X1009 或地址 X9;

PRM3006. 0 =  1 ，使用的地址＊ DEC 信号地址为 G196 。

PRM3003.5=0, *DEC=O （低电平）时减速； PRM3003. 5 =  1 时，＊ DEC=l （高电平）

时减速。

PRM1006.5 ，各轴回参考点方向选择；＝ 0 ，按正方向选择＝ 1 ，按正方向选择。

PRM1428 ，各轴回参考点速度。

PRM1425 ，各轴回参考点 FL（碰到减速回零开关后的）速度。

PRM1850 ，栅格位移量。

PRM1240 ，各轴参考点的坐标值。

回零减速的动作若要通过地址 Xl009 （或 X9 ）时，不需编写 PMC 的梯形图程序；如果

是通过地址 G196 时， X 的地址可随意选，这时还需编写 PMC 程序。

SIEMENS 系统在返回参考点状态下，按下各轴点动按钮，机床以快移速度向机床参

考点方向移动，当减速挡块碰到减速开关时，坐标轴减速至静止。利用撞块信号的下降沿

同步，按照搜索第 1 个零脉冲的速度，向相反方向退离参考点行程开关。利用第 1 个零脉

冲实现同步并使坐标轴移动一个可设定的距离后停止。该位置就是坐标轴的参考点。

323 

SIEMENS 系统相关机床参数设定：

1) 通道参数：
20700  NC 启动后是否要回零： 0一无需回零； 1—需要回零。
11300  +／－按键在回零过程中是否要一直按着； 0一无需按着； 1 —需要。

2) 轴参数

34000  0一无撞块； 1一有撞块。
34020  各轴回参考点速度。
34030  参考点开关的最大距离。
34040  各轴回参考点（碰到减速回零开关后的）速度。
34050  0一下降沿同步； 1 一上升沿同步。
34060  找零脉冲信号的最大距离；应大于螺距。
34070  找到零脉冲后返回参考点定位速度。

34080  参考点移动距离（粗调）（带符号）。
34090  参考点移动距离（精调）（带符号）。
34100  各轴参考点的坐标值。

,
l
l
!
目
l
l赵
l
l
宝
·
妥
U
凸
必
匡
3

ooo 247 000 444 
3 

参考点移动距离
MD34080+MD34090 
；耳工｝

MD 

寻找参考点开关的速度

MDMD 

33 

l 
l 
l 
』

. . I  -

I 
l 
l 
l 
l 

一一·一一一------,·

I @ , I 

l 

l 

, , , 
' '  』.．．'·-·
' ,  
' '  ' '  ' `  
' 
，零脉冲
l.  I 
' '  

零脉冲｝

位置

(DMD34100-参考点在机床坐标系的位置
@MD34092—参考点碰块电子偏移

零脉冲

图 6-4 SIEMENS 系统数控机床返回参考点的原理

带距离编码参考点标志的线性测量系统是采用包括一个标准线性的栅格标志和一个

与此相平行运行的另一个带距离编码参考点标志通道，每组两个参考点标志的距离是相

同的，但两组之间两个相邻参考点标志的距离是可变的，每一段的距离加上一个固定的

值，因此坐标轴可以根据距离来确定其所处的绝对位置。

3. 数控机床返回参考点的调整

1) 采用挡铁与回零减速开关相配合的调整

数控机床各轴传动机械拆装后、进给伺服电动机更换后、位置检测装置修复后都将导

致机床参考点位置不准，需对机床的返回参考点进行调整。

通常机床参考点设计在机床刀架 X 轴正方向上， Z 轴正方向上。如果机床的刀架在

机床回零操纵中要求设定固定的位置，只用调整回零开关撞块的方法是不能实现的，必须

调整控制机床的相应参数。

324 

机床相应参数调整步骤如下（以 FANUCOi 为例）：

(1) 预置参数 1006 第 5 位 (ZMix) 确定两轴回零的方向。

(2) 预置参数 1850 项， X 轴栅格调整的预置值。由于 X 轴丝杠螺距为 6mm ，所以预

置值为 6000 。

(3) 预置参数 1850 项， Z 轴栅格调整的预置值。由于 Z 轴丝杠螺距为 6mm ，所以预

置值为 6000 。

(4) 用手动方法使机床刀架回到机床参考点。

(5) 机床回到零后， X 、 Z 位置显示与规定值进行比较。

当显示的坐标值大于规定值半个螺距时，先调整撞块使之接近规定值，重新将刀架移

动到原起点，再进行第 4 步操作，反复调整撞块使显示值大千或小于规定值，但二值的绝

对值之差要小于半个螺距。

将参数 1850 项预置值分别减去 X 、 Z 轴显示值与规定值的差值，再以所得结果重新

分别设置参数 1850 项（单位 0.001mm) 。

规定零点坐标： X=260.000 Z=S00.000 
回零后坐标显示： X=262.000 Z=501.000 
1850 项 X 参数设定为 6000一 (262.000一260. 000) X 1000  = 4000 
1850 项 Z 参数设定为 6000一 (501.000—500. 000)  X 1000 = 5000 

(6) 重新进行第 4 、 5 项操作，使机床刀架回零坐标值符合规定值。

(7) 在系统参数 1240 中分别输入 X:260000 （直径编程坐标值）和 Z:500000 。

(8) 机床断电重新送电，进行回零操作，转塔刀架就按规定的距离精确地回到零点，

并在显示屏上显示出机床零点的坐标值。

2) 带距离编码光栅尺调整

对于 SIEMENS 840D 系统相关参数设定：

34000 参数设为零（不用返回参考点减速开关信号）。

34060 参数设为返回参考点最大移动距离＝两倍直线光栅尺标准参考点标志栅格

间距。

34090 参数设为返回参考点偏移值。

34200 参数设为 3 （选择距离编码光栅尺）。

34300 参数设为直线光栅尺标准参考点标志栅格间距。

34310 参数设为光栅尺信号节距。
例如海德汉 (HEIDENHAIN) LB382C:  34300  ==  40mm; 34060  =  80mm;  34310  = 

0.04mm。

对于 FANUCOi-C 系统相关参数设定：

1802 第 1 位设为零，使用 3 参考点检测回零点。

1815 第 1 位第 2 位均设为 1 ，选择了带距离编码参考点标志的直线光栅尺。

1821 设为直线光栅尺标准参考点标志栅格间距（相邻两 markl 之间的距离）。

1882 设为相邻两 mark2 之间的距离。

1883 假想的光栅尺原点与参考点之间的距离。
LB382C: 1821 = 40mm; 1822 == 40 + 0. 04 = 40. 04mm。

325 

4. 数控机床返回参考点的常见故障分析及示例

1) 常见现象及可能的原因

(1) 找不到参考点（通常会导致机床超程报警）。

CD 机床回零过程无减速动作或一直减速回零，多数原因为减速开关及接线故障。

＠机床回零动作正常，但系统得不到一转信号。原因可能是电动机编码器及接线或

系统轴板故障（工厂中多数采用交换法来判别故障具体部位）。

＠减速开关偏移。

(2) 找不准参考点（即返回参考点有偏差）。减速挡块偏移；栅格偏移量参数设定不

当；参考计数器容量参数设定不当；位置环增益设定过大；编码器或轴板不良。

2) 常见故障实例分析

例 6 一 1 某一数控车床（系统为 FANUC TD) 回零时， X 轴回零动作正常（先正方向

快速运动，碰到减速开关后，能以慢速运动），但机床出现系统因 X 轴硬件超程而急停报

警。此时 Z 轴回零控制正常。

根据故障现象和返回参考点控制原理，可以判定减速信号正常，位置检测装置的零标

志脉冲信号不正常。产生该故障的原因可能是来自 X 轴进给电动机的编码器故障（包括

连接的电缆线）或系统轴板故障。因为此时 Z 轴回零动作正常，所以可以通过采取交换

方法来判断故障部位。交换后，发现故障转移到 Z 轴上 (X 轴回零操作正常而 Z 轴回零

出现报警），则判定故障在系统轴板，最后更换轴板，机床恢复正常工作。

例 6-2 某一数控车床进行钻孔时（利用机床建立的坐标系），发现孔中心偏差了一

个进给丝杠的螺距误差。

根据故障现象，返回参考点的动作过程正常，判定减速挡块偏离导致机床回参考点不

准，使得该轴碰上该挡块时，脉冲编码器上的零标志刚错过，只能等待脉冲编码器再转过

近一周后，系统才能找到零标志。故障排除方法是调整减速挡块且机床重新进行参考点

的设定。

通过该故障分析，凡是机床返回参考点出现一个近似进给丝杠螺距误差时，多数故障

原因在减速挡块偏离，如果有很小的偏差就应按返回参考点不准的原因进行检查。

例 6-3 参考计数器容量参数设定不当。

SV-45 断电再开机返回参考点时， X 轴参考点漂移，漂移量为 4mm 、 8mm 或 12mm。

每次回零位置不确定。

处理： CD 对调 X 轴、 Y 轴的伺服板。

＠对调原点撞块，对调撞块开关。

＠对调 X 轴和 Z 轴的编码器。采用上述三种办法问题仍未解决。

问题的产生：原机床 X 轴采用全闭环的光栅尺，由于光栅尺的故障，取消 X 轴的光

栅尺，将闭环改为半闭环（编码器）时，才出现的。

估计是参数设定不对，经反复分析、调整，发现 1821 ＃设定错误。错误设定为 12000 。

1821# ：各轴的参考计数器容量

参考计数器容量＝栅格间隔休粗l单位＝脉冲编码器转一圈的移动量岱汀测单位，当
与丝杠直连时，脉冲编码器转一圈的移动量＝丝杠螺距＝ 16皿n ；而参考计数器容量＝
16/0.001 = 16000 。将 1821 ＃的 12000 改为 16000 问题得以解决。

326 

6.6.2 误操作

1.  M98 误输成 G98,M95 误输成 G95
现象 1 ：数控车床 (FANUCOiT) ，操作时误将 M98 误输成 G98 并执行。再执行零件

加工程序时出现 11 ＃报警。

0224; 
N5  G97  M04  S800; 
NlO  T0707; 
N15  GOO  X102.; 
N20  GOO  Z-26.1; 
N25  GOl  X90.F0.3; 
N30  GOO  UO  Z0.3; 
N35  GOl  X67. ; 

N60  GOO  X150.  Z50. ; 
N65  M30; 
当程序执行到 N25 GOl  X90.F0.3 ；时，停止执行。前面程序均能正常执行，表明主轴进

给伺服没有问题。 GO1 指令不执行并出现 11 ＃报警。报警内容：没有指定切削进给速度，或

进给速度指令不当。 FANUC 系统开机默认 G99 指令，即同步进给， F0.3 表示 0.3mm/min

显然是进给速度指令不当试将程序中的所有同步进给改为每分钟进给 F=fXs=0.3X
800 = 240mm/min ，问题解决。经检查，在 MDI 方式下误将 M98 误输成了 G98 。

系统由 G99 变成了 G98 ，而查机床 NC 参数 1403 ＃得知每分钟进给 F 指令的最小设

定为 lmm/min, 0. 3mm/min 显然不当。

现象 2 ：一台立式加工中心 VB610 （友佳）在加工法兰盘孔系的过程中突然出现刀具

折断现象，打断中心钻。多次试验仍旧如此。正常加工过程中，为何突然出现故障。系统

为 FANUCOiM。本着先静后动的原则，仔细询问机床操作人员故障发生的过程及反复

观察，发现钻孔时进给速度超过程序中设定的 F= 160mm/min ，是 F 的十几倍。检查当前

的 G 指令状态是 G95,G95 表示同步进给即 mm/min。主轴转速 S= 1200 ，钻孔时的 F 自

然达到每分钟数米的速度，这就是打断刀的原因。 FANUCOiM 系统开机默认 G94 ，程序

编制中并没有 G95 语句，为何 G 状态发生了变化？原来是机床由千压缩空气压力低，自

动换刀时出现报警。处理换刀报警时，机床操作人员在 MDI 方式下应当输入 M95 ，误输

成 G95 并执行，将 G94 变成了 G95 状态。

2. 刀具长度补偿正负值输错及清零

运用刀具的长度补偿可以正确地建立起工件坐标系。其前提条件是需执行手动返回
参考点操作。参考点是机床坐标系中一个固定不变的特殊位置的点，它与机床原点之间
有一个确定的位置，可以与机床原点重合也可分开。其位置在出厂之前由厂家调整好并

在系统参数中设定好。 FANUC Oi/16i/18迈 1i 系列用 1240 ＃参数设定在机械坐标系上

的各轴参考点的坐标值。它可以设定为零或实际相对于机床零点的偏移量。这样，用机

内对刀测定长度补偿值就有正负值之分。用错将产生故障。

327 

现象 1 ：仍以上述 0224 程序为例，当执行到 NlO T0707 语句时，执行刀具长度补偿时
刀架反方向运动。查 1240 ＃参数一在机械座标系上的各轴第 1 参考点的座标值。各轴
均设为零，刀具长度补偿值应为负值，再查刀具长度补偿值被设为正值，执行 T0707 语句
自然向反方向移动。若 1240 ＃参数各轴设定值为实际值如 X= 400.0 Z== 440.0 ，则机内

对刀测定长度补偿值就为正值。

现象 2 ：一台卧式加工中心（西门子 840D 系统），当执行刀具长度补偿语句时， Z 轴出
现软极限超程报警。经过反复检查发现刀具长度补偿值正负值输错，应当是正值，错输成

负值。因机床采用的是机外对刀仪测定刀具长度补偿。

现象 3: FANUC Oi/16i/18i戊 li 系列在刀具补偿画面中，不慎压下了清零键，将所有

的刀具长度补偿值全清零。执行程序时造成严重的撞机事故。

3. 未执行刀具长度补偿
除 SIEMENS 系统外，其他数控系统诸如 FANUC、 FAGOR、 OKUMA 等系统在编程
时都有刀具长度补偿语句。如 FANUC 的 G43 飞44) ZH ；而 SIEMENS 系统在程序中执

行 T 指令后自动激活刀具长度补偿指令，它不会出问题。

问题经常出现在搜索程序进行加工时，忘记了执行刀具长度补偿语句，而是从下面的

程序段开始直接加工，造成严重的撞机事故。夹具撞坏、刀具损坏、主轴受损、工件报废。

4. 加工程序调错或调用不当

一台交换工作台加工中心，未正确判断就调程序加工，出现故障打刀。
07250; 
G80  G49  G40; 
IF[# lOlOEQl]GOTO 2000; 
IF[ #  1011EQ2] GOTO 3000; 
#3000=11; 
N2000  #  110=54; 
#  111 ==55; 

切010;
N3000  #  110=56; 
#111==57; 
N10  TOl; 
G90  G# 110  GOO  XO  YO  S300; 

G90  G# 111  XO  YO; 
开机回零后，直接调程序从 NlO 段开始加工，结果将 1 号镜刀打坏。殊不知，由于未
执行 NlO 前面的语句即未判定哪个工作台在机床内。这是用宏变量编写的加工程序。
#1019,#1011 为系统变量。 IF[ #  lOlOEQl] GOTO  2000 语句为判断语句，当 1 号工作
台在机床内时即系统变量＃ 1010 等千 1 时转移到 N2000 语句执行，公共变量＃ 110 被赋
值为 54 。公共变量＃ 111 被赋值为 55 。执行 NlO 语句时 G#llO 、 G#lll 被定义工件坐
标系 G54 、 G55 。此时 2 号工作台在机床内，应调 N3000 语句，给＃ 110 赋值 56 ，给＃ 111
赋值 57 ，执行 G56 、 G57 工件坐标系，但执行的是 G54 、 G55 工件坐标系。因为开机后系统

328 

默认 G54 。 G54 与 G56 工件坐标系不一致，结果造成重大事故。

5 ．工件坐标系基本偏置中输入了不正确数值
现象：零件程序中的零点偏移不正确，即工件坐标系 G54-G59 中设定的值与实际位

移不一致。执行程序时终点坐标值与实际位移不一致，产生超程报警甚至造成事故。

原因：误操作，在基本偏移中输入了偏移值（一般设定为零）。数控系统的坐标偏移等

于基本偏移、零点偏移、刀具偏移的总和。

6. 工件坐标系平移中输入了不正确数值

FANUC 系统中功能键 MENU/OFSET ：用千显示（修改）刀具补偿值或显示（修改）

坐标系。共有磨耗、形状、工件偏移／坐标系、宏变量 (MACRO) 四个功能软件，而工件偏

移／坐标系是进行预置工件坐标系调整及建立工件坐标系 (G54-G59) 的选项。

操作者不慎在工件偏移画面中 Z 坐标中输入了 200mm 值，在切削加工对刀时 Z 向

刀具长度补偿值由原来的负值全变成了正值。操作者不知何原因。原因是 Z 轴原点被

平移了 200mm 造成，将 200mm 变为 0 原刀补值重新为负值。

7. 未取消空运行或图形模拟后未回参考点

空运行进行程序校验完毕后，未取消就执行零件加工程序，切削进给速度 F 不是程

序中给定的值而是参数设定的空运行速度，非常危险。

有的机床厂家设定图形模拟后必须回参考点，否则报警或造成事故。

操作履历显示，许多数控机床的系统中均有软件设计，比如 FANUC 系统、 SIEM贮~s 系

统、OKUMA 系统等。这是很实用的分析故障的方法，因为在发生故障时，该功能记录了操

作人员在手动数据输入 MDI 面板上作了什么操作，输入倩i 出信号的通断情况，以及发生报

警的时间和内容，这些是分析故障必不可少的信息。当出现撞机事故时，操作者往往不能正

确地将事故过程及相应的操作讲述清楚。操作者往往咬定机床失灵，这时调出操作履历显

示查找、分析事故，一目了然。数控车 HfC2050Z(FANUC OiC) 相关操作如下：

功能的初始化：要执行该功能须对下面的参数进行设置：
(1)  PRM3106.4= 1  操作历史画面显示。
(2)  PRM3106. 7=0  进行操作历史取样。
(3)  PRM3112.5 =O  操作历史功能有效。
(4)  PRM3122 = 0 - 1439(min)  操作履历上记录时标的间隔（为 0 时，认为 10min) 。
操作履历显示的操作如下： SYSTEM 功能键—右扩展键一操作历史。画面将操作履

历显示出来。

6.6.3  数控机床超程故障及处理方法

超程限位控制是数控机床的一个基本安全功能。分为硬限位、软限位和加工区域

限制。

数控机床超程故障报警有两种情况：一种是硬件限位超程，即机床运动部件碰到硬限

位行程开关的超程报警，它是数控机床的外部安全措施；另一种是软件限位超程报警，即

超过由系统参数设定的行程极限保护的报警，它是内部安全措施。软件限位的基准位置

是机床坐标系的原点，在机床未手动执行返回参考点（回零）之前软件限位不生效。软件

限位是在机床手动返回参考点后才起作用。加工区域限制是用户根据加工的需要可随时

329 

设定的软限位。

1 ．硬件超程控制与处理方法

硬件超程控制是机床制造厂家根据数控系统提供的 PLC 相关地址，进行的 PLC 程

序控制设计，一般都是直接通过 PLC 处理。它原理清晰，接线简单，调试容易。

当系统出现硬限位超程报警时，机床面板上的工作方式选择在手动连续进给状态

(JOG) 或手轮状态，同时按下机床超程释放按钮开关和超程报警轴的反方向按钮开关或

反方向摇动手轮，使机床反方向退出硬限位，然后按下系统复位键消除报警。

2. 软件超程报警及处理方法

当机床轴的运动坐标值超过了系统存储行程极限值时，系统就会产生软件超程报警。

有正极限和负极限两种报警。

当系统出现软限位超程报警时，机床面板上的工作方式选择在手动连续进给状态

(JOG) 或手轮状态，按下超程报警轴的反方向按钮开关或反方向摇动手轮，使机床反方

向退出软限位，然后按下系统复位键消除报警。

FANUC 系统正向存储行程极限值设定范围为 0 ~  999999999 系统的检测单位（设定

99999999 表示软件超程保护无效），系统负向存储行程极限值设定范围为 O~

-999999999系统的检测单位（设定－ 99999999 表示软件超程保护无效）。

SIEMENS 系统正负向存储行程极限值设定范围为 O~ + 100000000 系统的检测单位。

小结

通过本章的学习要求熟悉数控机床的机床坐标系和工件坐标系，编程语句及格式；掌

握对刀及刀具补偿功能和执行刀具补偿的原理；掌握数控机床的正确返回参考点的操作

以及其他的相关操作，才能及时、准确地分析诊断出故障产生的原因是编程不当或误操作

引起的，还是机床本身的机械电气出现故障引起的。

习题

1. 何谓机床坐标系、机床原点及机床参考点？坐标系有哪些规定？ Z 轴如何确定？

2. 如何设定工件坐标系？它与机床坐标系的关系如何？
3.  G 指令（准备功能）主要起什么作用？ M 指令起什么作用？

4. 刀具补偿功能有几类？简述其如何正确应用防止事故发生。

5. 如何检查和判定刀具补偿值的正负值是否正确无误？

6. 举例说明参数设定不当或误改动造成的事故。

7. 举例说明工件坐标系设定不当或调错造成的事故。

8. 第一参考点与第二参考点的含义是什么？如何正确设定？

9. 如何正确执行手动返回参考点的操作？为什么要执行它？

10. 执行手动返回参考点的操作时没有减速动作，试分析其原因。

11. 距离码光栅尺有何优点？

330 

附录 A FANUC Oi 系统常用信号表

符号

信号名称

.DEC1~ .DEC4  返回参考点用减速信号

*  ESP 
*  ESP 
*  ESPA 
*  FLWU 

*  IT 
*  ITl- * IT4 

系统紧急停止信号

紧急停止信号（串行主轴）

跟踪信号

全轴互锁信号

各轴互锁信号

*  SP 

＊志P

自动运行暂停信号

主轴停止信号

+ Jl- + J4 

进给轴和方向选择信号

-J1~ - J4 

进给轴和方向选择信号

＊八「0~ ＊ W15

手动进给速度倍率信号

* FV0~  * FV7 

进给速度倍率

AFL 

AL 

ALMA 

ALMB 

BAL 

BDTl 

DEN 

DMOO 

DMOl 

EM02 

DM30 

DNCI 

DRN 

DRNE 

ERS 

FIN 

辅助功能锁住信号

CNC 报警信号

报警信号（串行主轴）

电池报警信号

程序段的跳过

分配结束信号

M 译码信号

DNC 运行选择信号

空运行信号

空运行信号 (PMC 轴控制）

外部复位信号

辅助功能结束信号

地卅

地址

(FS-Oi 系统）

(FS~0 系统）

X9.0 X9.l 

X9.2 X9.3 

X16.5  X17.5 

X18.5 X19.5 

X8.4 

G8.4 

G71.7 

G7.5 

G8.0 

G130 

G8.5 

G29.6 

X21.4 

G121.4 

G230.1 

G104.5 

G117.0 

G128 

G121.5 

G120.6 

Gl00.0,Gl00.1 

G116.2,G117.2 

Gl00.2,Gl00.3 

G118.2,G119.2 

G102.0,G102.1 

Gll6.3,Gll7.3 

G102.2,Gl02.3 

Gll8.3,Gll9.3 

Gll 

G12 

G5.6 

Fl.O 

F45.0 

F49.0 

Fl.2 

G44.0 

Fl.3 

F9.7 

F9.6 

F9.5 

F9.4 

G43.5 

G46.7 

G150.7 

G8.7 

G4.3 

G121.0- G121.3 

G121.0- G121.3 

G130.7 

F149.0 

F281.0 

F285.0 

F149.2 

G116.0 

F149.3 

F154.7 

F154.6 

F154.5 

F154.4 

G127.5 

G118.7 

G147.7 

Gl21.7 

G120.3 

331 

符号

信号名称

HSlA-HSlD 

手轮进给轴选择信号

KEY1-KEY4 
MOO-M31 
MA 

存储器保护信号

辅助功能代码信号

CNC 准备就绪信号

MDl, MD2, MD4  方式选择信号

MF 
MFIN 
MH 
MLK 
MLKl- MLK4 

辅助功能选通信号

M 码辅助功能结束信号

手动进给选择检测信号

全轴机床锁住信号

各轴机床锁住信号

（续）

地址

地址

(FS-Oi 系统）

(FS~0 系统）

Gl8.0,G18.1 

G18.2,Gl8.3 

G046.3-G46.6 
G10~Gl3 
Fl.7 
G43.0-G43.2 
F7.0 
GS.O 
F3.1 
G44.1 
G108 

MP1,MP2 

手动进给移动量选择信号（增量进给信号）

G19.4,Gl9.5 

MREF 

选择手动返回参考点确认信号

呻 选择 DNC 运转确认信号

OP 
OVC 
ORCMA 
R010-R020 
RGTAP 
ROV1,ROV2 

每

RT 
SA 

SAR 
SARA 
SBK 
SF 
SFIN 
SOR 
SOVO-SOV7 
SPL 
SRN 
SRNM 

函A
SRVA 
SFRA 
sr 
STL 
TF 
TFIN 
THRD 
TL01-TL128 

自动运行中信号

倍率取消信号

串行主轴定向指令信号

S12 位代码信号

刚性攻螺纹信号

快速进给倍率信号

复位中的信号

手动快速进给选择信号

伺服准备结束信号

主轴速度到达检测信号

速度到达信号（串行主轴）

单程序段信号

主轴功能选通信号

主轴功能结束信号

主轴定向信号

主轴倍率信号

进给暂停状态信号

程序再启动信号

程序再启动中信号

速度零信号（串行主轴）

串行主轴正转信号

串行主轴反转信号

自动运行起动信号

自动运行起动中信号

刀具功能选通信号

刀具功能结束信号

螺纹切削中信号

刀具组号选择信号

ZP1~ZP4 

返回参考点（第一参考点）结束信号

ZRN 

手动返回参考点选择信号

332 

F4.5 
F3.4 

印． 7

G6.4 
G70.6 
F36.0-F37.3 
G61.0 
G14.0,Gl4.1 
Fl.1 
G19.7 
F0.6 
G29.4 
F45.3 

凶6.4

F7.2 
GS.2 
G29.5 
G30 
F0.4 
G6.0 
F2.4 
F45.1 
G70.4 
G70.5 
G7.2 
F0.5 
F7.3 
G5.3 
F2.3 
GG47.0-G47.7 
F94.0,F94.1 
F94.2,F94.3 
G43.7 

Gll6.7,Gl17.7 

G118. 7,Gl19. 7 

G122.3 
F151,F157 
F14()  7 

G122.0-G1P 、
F150.0 
G115.0 

无
G117.1 
G142 

G117.0,Gl18.0 

G120.0,Gl20.l 

无

元
F148.7 
G126.4 
G229.6 
F172.O-Fl73.3 
G123.1 
G116. 7,G117. 7 
F149.1 
G121.6 
F148.o 
G门 1) 4 

F2``L.3 
G116.1 
F150.2 
G115.2 
G120.5 
G103.2-Gl03.5 
F148.4 
Gl03.0 
F188.4 
F281.1 
G229.4 
G229.5 
G120.2 
F148.5 
FlS0.3 
Gl15.3 
F188.3 
G139.0-Gl39.6 
F148.0.0,Fl48.l 
F148.2,Fl48.3 
Gl20.7 

附录 B FANUC 16/18/21/0i/Oi Mate 系统参数表

参数号

符号

意义

T 系列

M 系列

表 B-1 SETTING  参数

0/() 

0/1 

0 戊

015 

3216 

TVC 

代码垂直检验

ISO 

INI 

SEQ 

数据输出时， EIA/ISO 代码的选择

输入单位是米制吵怎制的选择

编写程序时自动加入程序的段号

自动加程序段号时程序段号的间隔

。

。

。

。

。

。

。

。

。

。

参数号

符号

意义

T 系列

M 系列

表 B-2 RS-232C 参数

系统 I/0 通道（接口板）：

0 、 1 ：主 CPU 板 JD5A(JD36A - 16i/18i) 

2 ：主 CPU 板 JD5B(JD36B-16i/18i)

20 

3 ：远程缓冲 JD5C 或选择板 l 的 JD6A(RS-422)

4: Memory Card DNC 加工 (16i/18i)

100/3 

100/5 

NCR 

ND3 

5: Data Server 

10:DNC1/DNC2 接口

程序段结束时的输出码

DNC 运行时：一段一段地读／连续地读直到缓冲器满

表 B-3 IIO 通道 (IIO=O 时）的参数

。

。

。

参数号

符号

意义

T 系列

M 系列

101/() 

SB2 

停止位数的选择： 1 位 2 位

101/3 

ASII 

数据输入代码： EIA 和 ISO 自动转换／处汒II

10117 

NFD 

数据输出时数据后的同步孔的输出

102 

IIO 

CHANNEL 

输入输出设备号：

0 ：普通 RS-232 口设备（使用 DC1~0C4 代码）

3:H血dy File(3 英寸软盘驱动器）

103 

BAUDRATE 

波特率：

10:4800 

11 :9600 

12:19200 

。

。

。

。

。

。

。

。

。

。

333 

表 B-4 进给伺服控制参数

意义

T 系列

M 系列

参数号

1001/0 

10021'.2 

1002/3 

符号

INM 

SFD 

AZR 

直线轴米制芍足制丝杠的选择

是否使用参考点偏移功能

未回参考点是否报警 (#90 号）

1006/0 , 1 

ROT,ROS  设定回转轴和回转方式

1006/3 

1006/50 

1007/3 

1008/0 

1008/1 

1008 九

1260 

1010 

1020 

1022 

1023 

DLA 

ZMI 

RAA 

ROA 

RAB 

RBL 

指定直径／半径值编程

回参考点方向

回参考点转向（与 1008/1:RAB 合用）

回转轴的循环功能

设定绝对指令的回转轴的回转方向

相对回转指令时，每一转移量是否取整数控制

回转轴一转的回转量

CNC 的控制轴数（不包括 PMC 轴）

各轴的编程轴名

基本坐标系的指定

各轴的伺服轴号

1401/1 

LRP 

GOO 运动方式（直线月自直线）

1401/4  酌 GOO 倍率为 0 时停门泭停

1402 八）

NPC 

无 1024 编码器的每转进给

1402/4 

JRV 

JOG 的每转进给

1410 

1420 

1421 

1422 

1424 

1425 

1430 

1431 

1432 

1620 

1622 

1624 

1626 

空运行速度

快速移动 (GOO) 速度

快速移动倍率的低速

最高进给速度允许值（所有轴一样）

手动快速移动速度

回参考点的慢速

各轴最高进给速度（分别）

GO8 进给最高速度

GO8 各轴最高进给速度（分别）

快速移动 GOO 时直线加减速时间常数

切削进给时指数加减速时间常数

JOG 方式的指数加减速时间常数

螺纹切削时的加减速时间常数

1815/1 

1815/5 

OPT 

APC 

用分离型编码器

用绝对位置编码器

1816/4,5,6  DMl-3  检测倍乘比 DMR

1820 

334 

指令倍乘比 CMR

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

参数号

符号

意义

T 系列

M 系列

（续）

1819/0 

FUP 

位置跟踪功能生效

1825 

1826 

1828 

1829 

1850 

1851 

1852 

位置环伺服增益

到位宽度

运动时的允许位置误差

停止时的允许位置误差

各轴参考点的栅格偏移量

各轴反向间隙补偿量

各轴快速移动时的反向间隙补偿量

1800/4 

BBK 

进给／快移时反向间隙补给量分开控制

表 B-5 坐标系参数

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

参数号

符号

意义

T 系列

M 系列

1201/0 

ZPR 

手动回零点后自动设定工作坐标系

ZCL 

RLC 

G52 

1250 

120112 

1202/3 

1202 

1240 

1241 

1242 

1243 

自动设定工作坐标系的坐标值

手动回零点后是否取消局部坐标系

复位时是否取消局部坐标系

G52 是否考虑刀补

第一参考点的坐标系

第二参考点的坐标系

第三参考点的坐标系

第四参考点的坐标系

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

参数号

符号

意义

T 系列

M 系列

表 B-6 行程限位参数

1300/0 

OUT 

第二行程限位的禁止区（内／外）

1320 

1321 

1322 

1323 

1324 

1325 

第一行程限位的正向值

第一行程限位的反向值

第一行程限位的正向值

第二行程限位的反向值

第三行程限位的正向值

第三行程限位的反向值

。

。

。

。

。

。

。

。

。

。

。

。

。

。

335 

符号

ITL 

ITX 

DIT 

0TH 

符号

C印

PPD 
DRL 

DRC 

DRC 

DAC 

DPF 

DPS 

OPH 
sov 
OHS 

SOR 

DMN 
DWT 

SVS 

SPS 
OMP 

OPS 

NPA 

SGD 
OPH 

MCL 
WOF 
GOF 
MCV 
wzo 
IWZ 
MCM 
KEY 

表 B-7 DI/DO 参数

意义

T 系列

M 系列

互锁信号的生效

各轴互锁信号的生效

各轴各方向互锁信号的生效

超程限位信号的检测

MF,SF,TF,BF 滞后的时间

FIN 宽度

RST 信号输出时间

M 代码位数

S 代码位数

T 代码位数

B 代码位数

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

表 B-8 显示和编辑参数

意义

T 系列

M 系列

汉语显示

自动设坐标系时相对坐标系清零

相对位置显示是否包括刀长补偿量

相对位置显示是否包括刀径补偿量

绝对位置显示是否包括刀长补偿量

绝对位置显示是否包括刀径补偿量

显示实际进给速度

显示实际进给速度和 T 代码（必须有螺纹功能），且与＃

3106/5 冲突

显示操作履历

显示主轴倍率值 (#310512 冲突）

显示履历采样

程序启求按程序号显示

显示 G 代码显示

儿何俏刊杆卜偿显示 GIW

显示伺服设定界面

显示主轴调整界面

显示操作监控界面

操作监控界面显示主轴和电动机的速度

报警时转刀报警界面

波形诊断显示生效（程序图样显示无效）

操作履历记录生效

操作履历界面上的时间间隔

MDI 方式编辑的程序是否能保留

用 MDI 键输入刀偏量（磨损）

用 MDI 键输入刀偏量（形状）

用 MDI 键输入宏程序变量

用 MDI 键输入工作零点偏移量

用 MDI 键输入工作零点偏移量（自动方式）

用 MDI 键输入宏程序变量 (MID 方式）

` 

程序数据的保护键

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

W叮 磨损量的输入用 KEYI

参数号

3003/0 

3003/2 

3003/3 

300415 

3010 

3011 

3017 

3030 

3031 

3032 

3033 

参数号
3102/3 
3104/3 
3104/4 
3104/5 
3106/6 
3104/7 
3105/0 

3105 戊

·  3106/4 
3106/5 
310617 
3107/4 
3107/5 
3109/1 
3111/0 
3111/1 
3111/5 
3111/6 
311117 
3112/0 
3112/5 
3122 
3203 
3290/0 
3290/1 
3290/2 
3290/3 
3290/4 
3209/4 
3290/7 

3291/0 

336 

参数号

3202/0 

3202/4 

3401/0 

3401/4 

3401/5 

符号

NE8 

NE9 

DPI 

MAB 

ABS 

表 B-9 编程参数

意义

T 系列

M 系列

08000-8999 程序的保护

09000-9999 程序的保护

小数点的含义

MDI 方式 G90/G91 的切换

MDI 方式用改参数切换 G90/G91

。

。

。

。

。

。

。

。

。

。

参数号

符号

意义

T 系列

M 系列

表 B-10 螺距误差补偿

3620 

3621 

3622 

3623 

3624 

各轴参考点的补偿号

负方向的最小补偿点号

正方向的最大补偿点号

螺距误差补偿量比率

螺距误差补偿间隔

0 .  

。

。

。

。

。

。

。

。

。

参数号

符号

意义

T 系列

M 系列

表 B-11 刀具补偿 1

3190/1 

DVI叮｀

G,W 分开

3290/0 

WOF 

MDI 设磨损值

3290/1 

5001/0 

5001/1 

500112 

500115 

500210 

5002/1 

5002/5 

GOF 

TCL 

TLB 

OFH 

TPH 

LDl 

LGN 

MDI 设几何值

刀长补偿 A_,B,C

刀长补偿轴

补偿号地址 D,H

G45-G48 的补偿号地址 D,H

刀补值的刀号的哪位数

几何补偿的补偿号 9 用刀号俏t损号

LGC 

几何补偿的删除 (HO)

500217 

WNP 

刀尖半径补偿号的指定

5003/6 

LVC/LVK  复位时删除刀偏量

5003i7 

5004/1 

5005/2 

5006/0 

5013 

5014 

TGC 

ORC 

PRC 

OIM 

复位时删除儿何补偿量(# 5003/6 = 1) 

刀偏值半径刀［径指定

直接输人刀补值用 PRC 信号

米吵七制单位转换时自动转换刀补值

最大三维磨损补偿值

最大的磨损补偿增量值

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

“ 

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

337 

参数号

符号

意义

T 系列

M 系列

表 B-12 刀具补偿 2

3701/1 

3701/4 

3705/0 

3705/1 

3705/2 

ISI 

SS2 

ESF 

GST 

SGB 

使用串行主轴俐印［量主轴控制的选择

是否使用第二串行主轴的选择

S 和 SF 的输出

SOR 信号用于换挡／定向

换挡方法 A、 B

3705/4 

EVS 

S 和 SF 的输出

3706/4 

GTT 

主轴速度挡数 (TIM 型）

3706/6,7  GWM/fCW  M03/M04 的极性

3708/0 

SAR 

检查主轴速度到达信号

3708/1 

SAT 

螺纹切削开始检查 SAR

主轴模拟输出的增益调整

主轴模拟输出时电压偏移的补偿

定向惕酒的主轴速度

主轴电动机的允许最低速度

主轴电动机的允许最低速度

检查 SAR 的延时时间

第一挡主轴最高速度

第二挡主轴最高速度

第三挡主轴最高速度

第四挡主轴最高速度

第一至第二挡的切换速度

第一至第二挡的切换速度

G96 的最低主轴速度

最高主轴速度

主轴电动机初始化

主轴电动机代码

3730 

3731 

3732 

3735 

3736 

3740 

3741 

3742 

3743 

3744 

3751 

3752 

3771 

3772 

401917 

4133 

338 

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

。

附录 C FANUC 系统程序错误报警表

．己一

编号

报警信息

错误原因与措施

000 

PLEASE TURE OFF POWER 

输入了某个要求断开电源的参数，应断开电源

001  TH PARITY ALI.RM 

TII 报警：输入了一个带有奇偶性错误的字符。修改程序

002  TV PARITY ALI.RM 

TV 报警：某个程序段中的字符数为奇数。只有在 TV 校验有效时，才

产生的报警。修改程序

003  TOO MANY DIGITS 

输入的数据超出最大允许数值。操作说明书的最大指令值修改数据

004  ADDRESS  NITT  FDUND 

在某个程序段开始处没有输入地址的情况下输入了一个数值获符号

＂－＂。修改程序

005  NO DATA AFIER ADORE茨

地址后没有紧随相应数据，而输入了另一个地址或 EOB 代码。对程

序进行修正

006 

007 

008 

ILLEGAL  SE  OF  NEGATIVE 

符号”-"（负）输入错误（符号”-“输入了一个不允许的地址或输入了

SIGN 

两个或两个以上的＂－＂）。修改程序

ILLEGAL  USE  OF  DECIMAL 

小数点”·“输入错误：在某个不能使用“·“输入了小数点或输人了两个

POINT 

或两个以上的"·"。修改程序

PR心RAM HA VE  AN  ERROR 

ATTHEEND 

程序没有 M30/M99 结束，却试图执行 EOR( ％）。修改程序

009 

ILLEGAL ADDRESS  INPUT 

在有特殊意义的区域输人了不能用的字符。修改程序

010 

IMPROPER G  - CODE 

指定了一个不能用的 G 代码或针对某个没有提供的功能指定了某个

G 代码。修改程序

011  NO FEEDRATE COMMAND 

对某个切削进给没有指定进给速度，或进给速度指令给定不当。修改

程序

ILLEGAL  LEAD  OOMMAND 

在可变的螺纹加工中。地址 K 指令的螺距增、减量超出最大指令值，

(T series) 

014 

CANN叨6 OJMMAND  G95 

(M series) 

TOOMANYAXESOMMAND 

(T series) 

015 

TOOMANYAXESOMMAND 

(M series) 

020 

OVER  TOLERANCE  OF  RA-

DIUS 

或者指令螺距值为负值。修改程序

没有同步进给功能时，指令了同步进给 G95 。修改程序

移动轴数超过了系统联动轴的最大轴数，或者转矩极限到达信号的跳

转功能指令 (G31) 中，同一个程序段中无轴移动指令，或者指令了 2 个轴

以上的轴移动。修改程序，将同一程序段的轴移动指令设为 1 个轴

指定的移动坐标轴数超过了系统联动轴的最大轴数。修改程序

在圆弧插补 (G02 或 G03) 中，圆弧起始点和圆弧中心之间的距离为圆

弧终点和圆弧中心之间的距离值的差超出了系统参数的设定值。修改

参数

339 

（续）

编号

021 

报警信息

错误原因与措施

ILLEGAL  PLANE AXIE  COM-

在圆弧插补指令中，对不在指定平面 (Gl7 、 G18 、 G19) 以外的轴发出了

MANDED 

指令。修改程序

022  NO CIRCLE 

在圆弧插补指令中，没有指定圆弧半径 R 或圆弧的起点到圆心之间的

距离的坐标值 I 、J 或 K。修改程序

023 

027 

ILLEGAL RADIUS COMMAND 

(T series) 

在指令半径的圆弧插补中，对地址 R 指定了负值。修改程序

NO  AXES  OOMMANDED  IN 

在刀具长度补偿 C 中， G43/G44 的程序段没有指定轴；在刀具长度补

G43/G44(T series) 

偿 C 中，在没有取消补偿状态下，又对其他轴进行补偿。修改程序

028 

ILLEGAL PLANE SELECT 

ILLEGAL  OFFSET  VALUE (T 

series) 

029 

ILLEGAL OFFSET  VALUE (M 

series) 

ILLEGAL  OFFSET  NUM郎R

(T series) 

030 

在平面选择指令中，在同一个方向指定了两个或两个以上的坐标轴。

修改程序

有 T 代码选择的偏置量值过大。修改程序

有 H 代码选择的偏置量值过大。修改程序

T 功能的刀具位置偏置移量的编号太大。修改程序

ILLEGAL  OFFSET  NUMBER 

用 D/H 代码指令的刀具半径补偿、刀具长度补偿的编号太大。修改

(M series) 

程序

031 

ILLEAGL PCOMMAND IN GlO 

在用 GlO 设定补偿量时，地址 P 后的补偿号太大或没有指定该补偿

号。修改程序

032 

ILEGAL  OFFSET  VALUE  IN 

在用 GlO 设定补偿量或用系统变量写人某个补偿量时，指定的补偿量

GlO 

太大。修改程序

NO AOLUTION AT CRC(T se-

ries) 

033 

NO AOLUTION AT CRC(M se-

ries) 

对刀尖圆弧半径 R 补偿的交点计算中没有求出交点。修改程序

刀具半径补偿形式 C 的交点计算中没有求出交点。修改程序

034 

035 

036 

037 

038 

NO  CIRC  ALLOWED  IN ST -

刀具半径／刀尖半径补偿方式中，在 G02/G03 方式启动或取消刀补。

UPIEXTBLK 

修改程序

CAN  Naf COMMANDED  G31 

(T series) 

CAN  NOT  OOMMANDED  G31 

(M series) 

在刀尖半径补偿方式中，指定了跳跃切削 (G31) 。修改程序

刀具半径补偿方式中，指定了跳跃切削 (G31) 。修改程序

CAN NOT CT-IANGE PLANE IN  在对刀具半径 1JJ 尖半径补偿过程中，切换了补偿平面 (G17/Gl8/

NRC 

G19) 。修改程序

INTERFRENCE IN CIRCULAR 

在刀具补偿中，由千圆弧的起始点或终点与圆弧中心重合而出现过

BLOCK 

切。修改程序

340 

（续）

编号

039 

040 

报警信息

错误原因与措施

CHFICNR  NOT  ALLOWED  IN 

NRC(T series) 

在刀尖半径补偿中，同时指定了倒角或拐角 R ，在 G41 和 G42 之间进

行切换同时指令了倒角、拐角 R。该程序可能使得在倒角或拐角 R 中出

现过切。修改程序

INTERFRENCE  IN  G90/G94 

在单一固定循环 G90 或 G94 的刀尖半径补偿中将出现过切。修改

BLOCK(T series) 

程序

041 

INTERFERANCE IN NRC 

刀具补偿中将出现过切；刀具补偿方式中，辅助功能、暂停指令等不移

动的程序段连续指令了两次以上。修改程序

044 

046 

050 

051 

052 

053 

054 

055 

056 

057 

058 

059 

060 

061 

G27-G30 NOT ALWWED  IN 

CRC(T series) 

在固定循环方式中，指令了 G27-G30 。修改程序

ILLEGAL  REFERENCE  RE-

返回第 2 、第 3 以及第 4 个参考位置指令中，指定了非 P2 、 P3 以及 P4

TURN COMMAND 

的指令。修改程序

CHFICNR  N优 ALLOWED IN 

THRDBLK 

在螺纹切削程序段中指定了倒角或拐角 R。修改程序

MISSING MOVE AFTER CHF I 

倒角或拐角 R 程序段的下一个程序段所指定的移动虎或移动量不对。

CNR 

修改程序

CODE  IS  Nill  GOl  AFTER 

指令倒角或拐角 R 程序段的下一个程序段不是 GOl 的程序段。修改

CHFICNR 

程序

TOO  MANY  ADDRESS  (X)M-

MANDS 

NO TAPER ALLOWED AITER 

CHFICNR 

MISSING  MOVE  VALUE  IN 

CHF/CNR(T series) 

在倒角或拐角 R 指令中，指定了两个或两个以上的 I 、 K 和 R。另一种

情况是在直接图样尺寸编程中，逗号”,”后的字符不是 C 或 R。修改

程序

在指定看倒角或拐角 R 的程序段中包括一个攻螺纹指令。修改程序

在倒角或拐角 R 程序段中，移动距离小于倒角或拐角 R 值。修改程序

NO  END  POINT &ANGLE  IN 

在仅指定了角度的程序段的下一个程序段中，既未指定终点，也未指

CHF/CNR(T series) 

定角度；或在倒角指令中，对 X(Z) 轴指定了 I(K) 。修改程序

NO  SOLUTION  OF  BLOCK 

END(T series) 

END  POINT  NOT 叩UND(M

series) 

PFOGRAM  NUMBER  NOT 

FOUND 

SEQUENCE  NUMBER  NOT 

印UND

AD回蓝 P/Q NOT  FOUND 

IN G70-G73(T series) 

在直接图样程序中，没有正确计算程序段终点。修改程序

绘图编程中，没有找到程序段终点。修改程序

在某个外部程序信号搜索中，没有找到指定的程序好。另一种情况

是，某个指定用于搜索的程序正被后台处理器加以编辑。检查程序号和

外部信号，或终止后台编辑

指定的程序号在顺序号搜索中未找到。检查程序号

在 G70 、 G71 或 G73 指令中，没有指定地址 P 或 Q。修改程序

341 

编号

报警信息

错误原因与措施

（续）

OG71 或 G72 中的切深为 0 或负值。＠ G73 中的重复记数为 0 或负

值。＠G74 或 G75 中心或丛被指定了负值。＠在 G74 或 G75 中心I

ILLEGAL  OOMMAND  IN  G71  或丛《为 0 ，但在地址 U 或 W 中指定了一个非 0 值。＠在 G74 或 G75 中

-G76(T series) 

确定了退刀的方向，但却给凶指定了一个负值。＠在 G76 中为螺纹高

度或首切深度指定了 0 值或负值。＠ G76 中指定的最小切深大于螺纹

牙间高度。＠在 G76 中指定了一个不可用的刀尖角度。修改程序

SEQUENCE  NUMBER  N优 无法检索到 G70 、 G71 、 G72 或 G73 指令地址 P 指定的顺序号。修改程

FOUND(T series) 

序

SHAPE 

PROGRAM 

NOT 

MONOTO(T series) 

在固定循环 G71 或 G72 中，指定了非单调的加工形状。修改程序

ILLEGAL  OOMMAND  IN  G71 

-G73(T series) 

<D 在 G71 、 G72 或 G73 指令中，地址 P 指令的程序号的程序段中没有

指定 GOO 或 GOl 。＠在带有由 G72 或 G72 指令中地址 P 指定的顺序号

的程序段中分别指定了地址 Z(W) 或 X(U) 。修改程序

IMPROPER G- CODE  IN  G71 

在 G71 、 G72 或 G73 的 P 指定的程序段中指定了一个不允许的 G 代

-G73(T series) 

码。修改程序

FDR必T ERROR  IN  G70  -

在 G70 、 G71 、 G72 或 G73 的 P 和 Q 指定的程序段中，最终移动指令其

G73(T series) 

终点为倒角或拐角 R 结束。修改程序

NO  PROGRAM  SPACE 

IN 

MEMORY 

存储器的存储容量不够。删除各种不必要的程序，然后再重新登录

062 

063 

064 

065 

066 

067 

068 

069  DATAN优 FOUND

没有发现检索的地址数据，或者在程序检索中，没有找到程序号。重

新进行数据的检索

070  TOO MANY  PROGRA邓

要存储的程序数量超过 63 （基本）、 125 （可选） 200 （可选）。删除各种不

必要的程序并再执行一次程序登录

071 

072 

PROGRAM  NU亟R AL-

READY  IN USE 

ILLEGAL  PROGRAM  NUM-

BER 

要登录的程序号与已登录的程序号相同。修改程序号

程序号为 1-9999 以外的数字。修改程序号

073 

PROTECT 

登录了被保护的程序号。修改程序号

074  ADDRESS PNOT DEFIEND 

075 

SUB PROGRAM NESTING ER-

ROR 

076  NUMBER Nar FOUND 

在包括 M98 、 G65 或 G66 指令的程序段中，没有指定地址 P （程序号）。

修改程序

调用的子程序数超出范围（调用 5 重以上子程序）。修改程序

由包括 M98 、 M99 、 G65 或 G66 的程序段中的地址 P 指定的程序号或

顺序号未找到，或由一个 GOTO 语句指定的顺序号未找到。另一种情

况是，某个调用的程序正被后台处理器进行编辑。对程序进行修正或终

止后台编辑

342 

（续）

编号

077 

078 

报警信息

错误原因与措施

PFOGRAM  NUMBER  Nar 

FOUND 

SEQUENCE  NUMBER  NOT 

FOUND 

在某个外部程序信号搜索中，没有找到指定的程序好。另一种情况

是，某个指定用于搜索的程序正被后台处理器加以编辑。检查程序号和

外部信号，或终止后台编辑

指定的程序号在顺序号搜索中未找到。检查程序号

079 

PROGRAM VERIFY EROR 

在存储器与程序校对中，存储器中某个程序与从外部 I/0 设备读出的

不一致。检查存储器中的程序以及外部设备中的程序

080 

081 

082 

083 

G37  ARIVAL  SIGNAL  NaT  在自动刀具补偿功能 (G36 、 G37) 中，测量位置达到信号 (XAE 或 ZAE)

AS3ERTED 

在参数指定的某个区域中未接通。重新设定系统参数或修改程序

OFFSET 

NUMBER 

NOT 

在自动刀具补偿功能中，没有指令 T 代码，而指令了 G36 、 G37 自动刀

FOUND G37(T series) 

具补偿。修改程序

OF陀ET

NU郧ER

NOT 

在自动刀具补偿功能中，没有指令 H 代码，而指令了刀具长度测量

FOUND G37(M series) 

(G37) 。修改程序

T- OODE  NOT  ALWWED  IN 

在自动刀具补偿功能中，同一程序段指令了 T 代码和 G36 、 G37 自动

G37(T series) 

刀具补偿。修改程序

H- CODE  NOT AL印WEDIN

在自动刀具补偿功能中，同一程序段指令了 H 代码和 G37 刀具长度

G37(M series) 

自动测量。修改程序

ILLEGAL AXIS COMMAND IN 

在自动刀具补偿中，指定了一个非法坐标轴或指令是增量式的。修改

G37 

程序

085  COMMUNICATION ERROR 

偶错误或成帧错误。输入数据的位数或波特率的设定或 1/0 单元的规

使用 RS-232C 通信接口往存储器输入数据时，出现了溢出错误、奇

格号不正确

086  DR SIGNAL OFF 

备信号 (DR) 被断开。 I/0 单元的电源断开、电缆没有连接好或系统通信

使用 RS-232C 通信接口往存储器输入数据时，阅读机笘5 孔机的准

板故障

087  BUFFER OVERFWW 

超过了 10 个字符后输入仍未停止。 1/0 设备或系统 RS-232C 通信板

使用 RS-232C 通信接口进行数据读入时，虽然指定了读入停止，但

088  LAN FILE TRANS ERROR 

传输出错，经由以太网进行的文件数据传输被停止

故障

O 因为起始点离参考点太近或速度太低，而不能正常进行参考点返

回。把起始点移到离参考点足够远的距离后，再进行参考点返回操作。

090 

REFERANCE  RETURN 
COMPLETE 

IN- 或提高返回参考点的速度，再进行参考点返回。＠使用绝对位置检测器

进行参考点返回时，如出现报警，除了确认上述条件外，还要进行一下操

作：在伺服电动机转过至少一转后，关掉电源再开机，然后进行参考点

返回

091 

REFERENCE  RETURN 

IN-

COMPLETE 

自动运行暂停时，不能进行手动返回参考点

343 

（续）

编号

092 

094 

095 

096 

097 

098 

099 

100 

报警信息

错误原因与措施

AXES  NOT  ON 碑 REFER-

ENCE POINT 

在 G27 （返回参考点检测）中，被指定的轴没有返回到参考点

PTYPE  NOT  AL印W印 (CO-

程序再启动中不能指令 P 型（自动运行中断后，又进行了坐标系设

ORD CHG) 

定）。按照操作说明书，重新正确地操作

PTYPE  NITT  ALLOWED (EXT  程序再启动中不能指定 P 类型（在自动运行中断后，外部工作偏移量

OFSCHG) 

被改变）。按照操作说明，执行正确操作

PTYPE 

NOT  ALLOWED 

程序再启动中不能指定 P 类型（在自动运行中断后，工作补偿量被改

(WRKOFS CHG) 

变）。按照操作说明，执行正确操作

PTYPE  Naf AL印WED(AU-

程序再启动中不能指定 P 类型（电源接通时，在急停或 PIS094-097

TO EXEC) 

复位后，没有执行自动操作）。按照操作说明，执行正确操作

G28  FOUND  IN  SEQUENCE 

指定某程序再启动指令时，在电源接通或急停时，没有返回参考操作，

RETURN 

并在搜索过程中找到了 G28 。执行返回参考操作

MDI  EXEC  N优｀ AL切WED

在程序再启动搜索完成后，用 MDI 进行了一个移动指令。应先进行

AFT SEARCH 

轴移动，不能进入 MDI 运行

PARAMETER  WRIFE  EN-

在 PARAMETER SETTING（参数设置）界面上， PWE( 允许参数写人）

ABLE 

被设为 1 ，将其设为 0 ，然后使系统复位

101 

PLEASE CLEAR MEMORY 

过以下方式可以清除程序：按住 [PROG] 和 [DELETE] 系统功能键的同

存储器被程序编辑操作改写时，系统电源就断开。发生该报警时，通

时接通电源。报警解除后，再重新登录程序

110  DATA OVERFLOW 

固定的小数点显示数据的绝对值超出允许范围。修改程序

111 

CALCULATION DATA OVER-

FLOW 

宏程序功能的宏程序命令计算结果超出允许范围。修改程序

112  DIVIDED BY ZERO 

指定了一个 0 除数（包括正切 90°)

113 

IMPROPER OOMMAND 

指定了一个用户宏程序中不能使用的功能。修改程序

114 

FORMAT ERROR IN MACRO 

用户宏程序 A 在 G65 程序段中包括一个未定义的 H 代码。用户宏程

序 B 除＜表达式＞以外的其他格式中存在一个错误。修改程序

ILLEFAL  VARIABLE  NUM-

BER 

在用户宏程序或高速循环加工中指定了一个没有被定义为变量号的

数值。在下列情况下会发出该警报： O对于与被调出的指定的加工循环

号的标题未找到。＠循环连接数值超出允许范围 (0-999) 。＠标题中

的数据值超出允许范围 (0-32767) 。＠可执行的数据格式的起始数据

变量号超出允许范围 (#20000- #85535) 。＠可执行的数据格式中，最

后存储数据的变量号超出允许范围 (:j:j:85535) 。＠可执行的数据格式的

保存用起始数据变量号与标题中的变量号重合。修改程序

WRI冗 PRCITECTED VARI-

ABLE 

PARENTHESIS  NE句ING ER-

ROR 

赋值语句左侧是禁止输人的变量。对程序进行修正

括号中的嵌套次数超出上限值 (5 重）。修改程序

115 

116 

118 

344 

编号

报警信息

错误原因与措施

119 

ILLEGAL ARGU邓NT

SQRT 自变量为负值，或者 BCD 自变量为负值，并且在 BIN 自变量的

每一行中出现 0~9 以外的其他值。修改程序

（续）

122 

123 

DUPLICATE MACRO MODAL-

CALL 

CAN  NITT  USE MACRO  COM-

MAND  INDNC 

宏程序模态调出被指定两重。修改程序

在 DNC 操作过程中，使用了宏程序控制指令。修改程序

124  Mis.5ING END STATEMENT 

DO-END 语句不是一一对应。修改程序

125  FOR邓TERROR IN MACRO 

用户宏程序 A 包括一个不能在 G65 程序段中指定的地址。用户宏程

序 B 在＜表达式＞中包含一个格式错误。修改程序

126 

ILLEGAL LOOP NU郧ER

在 DO" 中， n 的值未设定在 1~n~3 范围。修改程序

127 

128 

129 

NC  MACRO  STATEMENT  IN 

SAME BLOCK 

NC 程序和用户宏程序指令同时存在。修改程序

ILLEGAL MACRO SEQUENCE 

在 G01D九，指定的顺序号 n 不是 0-9999 ，或者没有找到转移点的顺

NUMBER 

序号。修改程序

ILLEGAL  ARGUMENT  AD-

DRESS 

指令的自变量中，使用了不允许的地址。修改程序

130 

ILLEGAL AXIS OPERATION 

PMC 向 CNC 控制轴发出了一个坐标轴控制指令，或者 CNC 向 PMC

控制轴发出了坐标轴控制指令。修改程序

131 

TC() 

MANY 

EXTERNAL  在外部报警信息中产生 5 个或 5 个以上的报警。参见 PMC 梯形图，

ALARMMESAGES 

找出原因

132  ALARMNUMBERNOTFDUND 

在外部报警信息中没有相对应的报警号。检查 PMC 梯形图

133 

135 

136 

137 

Ill仅;AL

D巫 IN 

在外部报警信息或外部操作信息中，小分区数据有错误。修改 PMC

EXT.ALARM 还幻

梯形图

SPINDLE 

ORIENTATION 

PLEASE(T series) 

ILLEGAL  ANGLE  COMMAND 

(M series) 

未做一次主轴定向试图进行主轴分度。执行主轴定向控制

分度工作台定位角度指令了非最小角度的整倍数的值。修改程序

C庄－ CODE &  MOVE  CMD 

与主轴分度地址 C 、 H 同一程序段指令了其他轴的移动指令。修改程

IN SAME BLK(T series) 

序

IL扭GAL AXIS COMMAND(M 

series) 

在分度工作台分度功能中，与 B 轴同时指令了其他轴。修改程序

, 

M - CODE  &  MOVE  CMD  IN  在有关主轴分度的 M 代码的程序段指令了其他轴移动指令。修改

SA郧 BLK

程序

138 

-

邸W

D平 OVER-

PMC 控制轴的扩展功能的双重控制中， CNC 和 PMC 的总发送童过

大。检查 PMC 梯形图

345 

（续）

编号

139 

141 

142 

143 

144 

报警信息

错误原因与措施

CAN  NOT  CHANGE  PMC 

CONTROL AXIS 

CANN优 CX)MMAND G51  IN 

CRC(M series) 

ILLEGAL SCALE  RATE(M se-

ries) 

PMC 轴控制中，指令了轴选择。修改程序

刀具补偿方式中，指令了 GSl （比例缩放有效）。修改程序

指令的比例缩放倍率值在 1~999999 之外。修正比例缩倍率值

SCALED  MOTION  DATA 

比例缩放的结果、移动量、坐标值、圆弧半径等超过了最大指令值。修

OV颐LOW(M series) 

改程序或比例缩放倍率

ILLEGAL  PLANE  SELECIBD 

(M series) 

坐标旋转平面与圆弧或刀具补偿 C 平面必须一致。修改程序

ILLEGAL(X)NDITIONS 
145  PO以R (X)()RDINATE 
TERPOLATION 

IN 

IN-

极坐标插补开始或取消的条件不正确。 O 在非 G40 方式指令了

G12.1/G13.1 。＠平面选择错。修改程序或参数

146 

IMPROPER G OODE 

在极坐标轴插补方式中，使用了不能指令的 G 代码。修改程序

148 

150 

151 

ILLEGAL  SETTING  DATA(M 

自动拐角倍率的减速比超过判定了角度允许设定值的范围。修改系

series) 

统参数的设定值

ILL贮ALTCX)LGROUPNUM-

BER 

TOOL  GROUP  NUMBER  NOT 

FOUND 

刀具组号超出允许的最大值。修改程序

在加工程序中，没有设定指定刀具的组号。修改程序或参数设定值

152  NO SPACE FOR TOOL ENTRY 

一组内的刀具数超过了可以登录的最大值。修改刀具数的设定值

153  T －仅）DENOTFDUND

154 

NOT  USING'TOOL  IN  LIFE 

GROUP(M series) 

在刀具寿命数据登录时，在应指定 T 代码的程序段没有指定 T 代码。

修改程序

在没有指令刀具组时，却指令了 H99 或 1)()9 。修改程序

ILLEGAL T-CODE IN M06(T  加工程序中指令了 T凶\#＃，而组号凶立可使用中刀具所属组号不一

series) 

155 

致。修改程序

ILLEGAL  T  - CODE  IN  M06 

在加工程序中， M06 程序段的 T 代码与正在使用刀具寿命管理的组号

(M series) 

不对应。修改程序

156 

P/LOMMANDNOTFOUND 

在设定刀具寿命管理的刀具组的程序标题时，没有指令 P 和 L。修改

程序

157  TOO MANY TOOL GROUPS 

设定的刀具组数超过了允许的最大值。修改程序

158 

ILLEGAL TOOL LIFE DATA 

设定的刀具寿命值太大。修改设定值

159 

TOOL  DATA  Sl已 ITING IN-

COMPLETE 

346 

在执行设定刀具寿命管理用的程序时。电源断了。需重新设定

编号

175 

报警信息

错误原因与措施

ILLEGAL  G107 切M卿 圆柱插补方式开始或取消的条件不正确。修改程序

（续）

176 

IMPROPERG-(X)DE IN G107 

177 

178 

CHECK  SUM  ERROR  (GOS 

MODE) 

GO5  coMMAND  IN  G41/G42 

MODE 

圆柱插补方式中，指令了不能指令的 G 代码。下述 G 代码不可用： 0

定位 G 代码： G28 、 G76 、 G81-G89 包括指定快速进给循环的代码。＠系

统坐标设定 G 代码： G50 和 G52 。＠坐标系选择 G 代码： G53 和 G54~

G59 。修改程序

在高速远程缓冲中出现检验和错误。修改程序

在 G41/G42 方式中，指定了 G05 。修改程序

179 

PARAM SETTING ERROR 

由参数设定的控制坐标轴的数量超出最大数值。修改系统参数

180 

181 

182 

COMMUNICATION 

ERROR 

(REMOTE BUF) 

FORMAT  ERROR 

IN  G81 

BLOCK（滚齿机）

远程缓冲连接报警。确认电缆接口，参数和 1/0 设备

G81 程序段格式错误（滚齿机）。 CDT （齿数）没有给定。＠ T 、 L 、 Q,P

中的任一个被给定了指令范围以外的数据。＠同步系数计算值溢出。

修改程序

G81  NITT(X)MMANDED （滚齿

通过 G81 给出的同步指令 G83(C 轴伺服滞后值偏置）没有被指定。

机）

修改程序

183  DUPLICATE G83 （滚齿机）

G83 给出的 C 轴伺服滞后量后，在被 G81 指定取消前又指定 G83 。修

改程序

194 

SPINDLE COMMAND IN SYN-

CHRO-MODE 

在串行主轴同步控制方式中，指定了轮廓控制方式、主轴定位 (Cs 轴控

制）方式或刚性攻螺纹方式。对程序进行修改以便事先解除串行主轴同

步控制状态

195  MODE CHANGE ERROR 

不能切换串行主轴的控制方式。参见 PMC 梯形图

197 

C  - AXIS  COMMANDED  IN 

在当前控制方式不是主轴 C 轮廓控制时，发出了一个用千 C 轴的移动

SPINDLE MODE 

指令。修改程序或参见 PMC 梯形图

199  MACRO WORD  UNDEFINED 

采用了未定义的空语句。修改用户宏程序

200 

ILLEGAL CODE COMMAND 

201 

FEEDREATE  N切FOUNDIN

RIGID TAP 

在刚性攻螺纹中， S 值超出范围或未指定 S 值。改变系统参数设置或

修改程序

在刚性攻螺纹中，没有指定 F 值。修改程序

202 

POSITION LSI OVER砌W

在刚性攻螺纹中，主轴分配值太大

203 

PROGRAM  MISS  AT  RIGID 

TAPPING 

在刚性攻螺纹中， M29 代码或 S 指令的位置不正确。修改程序

204 

ILLEGAL AXIS OPERATION 

在刚性攻螺纹中， M29 代码程序段与 G84(G74) 程序段之间指定了一

个坐标轴移动。修改程序

347 

编号

报警信息

错误原因与措施

205  RIGID MODE DISIGNAL OFF 

尽管指定了 M29 代码，但在执行 G84(G74) 时，刚性攻螺纹方式信号

未接通。检查 PMC 梯形图

（续）

210 

211 

212 

213 

214 

217 

218 

219 

220 

221 

224 

225 

239 

240 

CAN  NOT  ffiMMAND  M198/  在程序运行中，执行了 M198 和 M199 。或者在 DNC 操作中执行

M199 

M198 。修改程序

G31 (HIGN)  NOT  ALLOW肛）

ING99 

ILLEGAL  PL碑 SELECT(T

series) 

ILLEGAL  COMMAND 

IN 

SYNCHRO- MODE 

ILLEGAL  COMMAND 

IN 

SYMCHRO- MODE 

DUPLICATE  G251 

(OOM-

MAND) 

NITT  FOUND P/Q COMMAND 

IN G251 

OOMMAND  G250/G251  INDE-

PENDENTLY 

具有高速跳跃选项时，在每转进给指令中指定了 G31 ．修改程序

在 z-x 平面以外的平面中指定了直接图样尺寸编程。修改程序

在简单同步控制运行中，出现以下任一种报警： O 程序给从动轴发出

移动指令。＠对从动轴指令了 JOG 进给、手轮进给或增董进给。＠在电

源接通后，没有执行手动返回参考点位置，程序执行了自动返回参考点

位置指令。＠主、从轴坐标之间的位置误差超出参数设定值。修改程序

或参数

在同步控制中设定了坐标系或执行了移位型刀具补偿。修改程序

G251 方式中被再一次指定。修改程序

在 G251 程序段中没有指定 P 或 Q，或者指令值超出范围。修改程序

G250 和 G251 不在独立的程序段中。修改程序

ILLEGAL 

(X)MMAND 

IN 

在同步操作中， NC 程序或 PMC 坐标轴控制接口对同步轴指定移动指

SYNCHR －心E

令。修改程序

ILLEGAL  COMMAND 

IN 

SYNCHR-CODE 

RETURN  1D  REFERENCE 

POINT 

多面体加工操作和 Cs 轴控制同时进行。修改程序

在循环启动之前，没有返回参考点。进行返回参考点操作

SYNCHRONOUS/MIXEOCON-

在下列情况下会产生该报警： O坐标轴号参数设定错误。＠控制指令

TROLERROR （只对 TI)

有错误。修改程序或系统参数

BP尽 ALARM

用于控制外部 I/0 单元功能时，进行了后台编辑。取消后台编辑操作

BP心 ALARM

MDI 操作时，进行了后台编辑。取消后台编辑操作

348 

附录 D FANUCOi 系统程序错误报警表

编号

报警信息

错误原因与措施

5010  END OF RECORD 

指令了不正确的程序结束符。 1/0 设备指定错。修改程序

5011 

5014 

5016 

5020 

5043 

ries) 

5044 

PARAMETER  ZERO  (CUT 

HPCC 模式中，最大切削进速度（参考 No.1422) 的设定值为 0 。修改

MAX) (M Series) 

系统参数

1RACE  DATA  NOT  FDUND 

在伺服跟踪功能中，因为没有跟踪数据，所以不能进行传送。重新采

(M Series) 

集跟踪数据

ILLEGAL  CDMBINATION  OF 

MCODE 

PARAMATER  OF  RESTART 

ERROR 

100 MANY G68  N匈ING(M

Series) 

G68  FORMAT  ERROR (M  Se-

在一个程序段中指令了属千同一组的 M 代码，或是在一个程序段中，

某个不能与其他 M 代码一起指令的 M 代码，却与其他的 M 代码一起指

令了。修改程序

程序再启动炉参数设定错误。修改系统参数

三维坐标转换指令 G68 被指定了三此或更多次。修改程序

一个 G68.1 程序段包含格式错误。下列情况引发此报警： d)G68.1 程

序段无 I 、 J 或 K（无坐标回转选择）。＠G68.1 程序段的 I 、 J 或 K 全部为

0 。 @G68.1 气序段的 R 没有指令。修改程序

嘈

G68  FORMAT  ERROR(M  Se-

ries) 

一个 G68 程序段包含格式错误。下列情况引发此报警： O程序段无 I 、
J 或 K（尤坐标徇转选择）。＠G68 程序段的 I 、J 或 K 全部为 0。 @G68
程序段的 R 没有指令。修改程序

5050 

5058 

ILL  - CDMMAND  IN  CHOP-

圆柱螺纹切削时，指令了转变主要轴。或者指令了主要轴长度的设定

PING MODE(M Series) 

为 0 。修改程序

G35/G36  FORMAT ERROR(M 

圆柱螺纹切削时，指令了转变主要轴。或者指令了主要轴长度的设定

Series) 

为 0 。修改程序

5059  RADIUS  IS OUT OF RANGE 

圆弧插补中，用 I 、 J 、 K 指令圆弧中心时，半径值超过了 9 位数。修改

程序

5064 

5068 

5073 

5074 

5110 

5302 

DI只屯邸NT AXIS  UNIT (M 

Series) 

在设定单位不同的轴构成的平面上指令了圆弧插补。修改程序

G31  FDRMAT  ERROR (M  Se-

持续高速跳步指令 (G31 P90) 中，没有指令移动轴或指令了 2 个以上

ries) 

的移动轴。修改程序

NO  FORMAT  ERROR (M  Se-

ries) 

应该指令小数点的地址上没有输入小数点。修改程序

ADDRESS  DUPLICATION  ER-

在同一程序段内，相同的地址被指令了两次或两次以上。或在同一程

ROR 

序段内指令了两个或两个以上同一组的 G 代码。修改程序

NOT 

STOP 

POSITION 

(G05.1Gl)(M Series) 

ILLEGAL 仅）M卿 IN G68 

MODE 

在 AI 轮廓控制模式中指定了一个非法 G 代码。修改程序

坐标系回转方式中指令了坐标系设定。修改程序

5306  MODE CHANGE ERROR 

在宏程序调用中，启动时没有正确进行方式切换。修改程序

349 

参考文献

[1] 龚仲华，孙毅，史建成数控机床维修技术与典型实例－ SIEMENS810/802 系统．北京：人民邮电出版社， 2006.

[2] 罗学科，谢富春数控原理与数控机床北京：化学工业出版社， 2004.

[3] 王浩数控机床电气控制．北京：清华大学出版社， 2006.

[4] 王钢．数控机床调试、使用与维护．北京：化学工业出版社， 2006.

[5] 刘永久．数控机床故障诊断与维修技术．北京：机械工业出版社， 2007.

[6] 秞宁数控机床加工编程与操作．北京：高等教育出版社， 2008.

` 

簪
，

` 

350 

[General Information]
书名=数控机床故障诊断与维修
作者=罗庚合，黄万长主编
页数=350
SS号=12412555
出版日期=2009.07

前言
目录
第0章  绪论
0.1  数控机床工作过程及组成
0.1.1  数控机床工作过程
0.1.2  数控机床组成
0.2  数控机床维修的基本要求
0.2.1  维修人员的素质要求
0.2.2  必要的技术资料
0.2.3  必要的维修器具与备件
0.3  数控机床常见故障分类
0.3.1  按数控机床发生故障的部件分类
0.3.2  按数控机床发生故障的性质分类
0.3.3  按数控机床发生故障时有无报警显示分类
0.3.4  按数控机床发生故障的原因分类
0.4  数控机床故障排除的思路和原则
0.4.1  数控机床故障排除的思路
0.4.2  故障排除应遵循的原则
0.5  数控机床维修的基本步骤
0.5.1  故障记录
0.5.2  维修前的检查
0.5.3  CNC故障自诊断
0.5.4  故障诊断与排除的基本方法
小结
习题
第1章  数控机床电气控制
1.1  HTC2050Z数控车床参数及性能简介
1.1.1  典型机械机构简介
1.1.2  技术参数
1.2  HTC2050Z数控车床的电气控制
1.2.1  数控系统连接框图
1.2.2  NC数控装置的连接
1.2.3  交流主轴伺服驱动连接
1.2.4  交流进给伺服驱动连接
1.2.5  辅助电路分析
1.2.6  维修实例及分析
小结
习题
第2章  数控机床可编程控制器
2.1  数控机床用PLC简介
2.1.1  数控机床用PLC的功能
2.1.2  数控机床PLC分类
2.1.3  PLC在数控机床中的配置方式
2.1.4  PLC与外部的信息交换
2.1.5  FANUC 0i系统PMC内存地址的含义
2.2  数控机床用PLC指令系统

2.2.1  FANUC系列的PLC的基本指令
2.2.2  FANUC系列的PLC的功能类型指令简介
2.2.3  FANUC系列的PLC的功能类型指令应用
2.3  数控机床PMC控制应用举例
2.3.1  数控机床工作状态开关PMC控制
2.3.2  数控机床加工程序功能开关PMC控制
2.3.3  数控机床倍率开关PMC控制
2.3.4  数控机床润滑系统PMC控制
2.3.5  数控车床自动换刀PMC控制
2.3.6  刀库自动选刀控制
2.4  数控系统PLC故障诊断
2.4.1  数控机床中PLC的作用
2.4.2  PMC内装调试功能
2.4.3  PMC的诊断界面（PMCDGN界面）
2.4.4  PMC参数界面（PMCPRM界面）
2.5  FANUC数控系统PMC控制的故障诊断
2.5.1  通过PMIC查找故障的方法
2.5.2  PMC故障诊断与维修实例
2.5.3  刀库机械手部分故障实例
小结
习题
第3章  典型数控系统维修技术
3.1  FANUC数控系统维修技术基础
3.1.1  FANUC0i、16i/18i/21i系列数控系统的组成及特
点
3.1.2  FANUC0i系列数控系统的功能连接
3.1.3  FANUC16i/18i/21i系统的功能连接
3.2  SINUMERIK数控系统维修技术基础
3.2.1  SINUMERIK802D、840D数控系统的组成与特点
3.2.2  SINUMERIK802D系统功能连接
3.2.3  SINUVERIK840D系统功能连接
3.3  NC参数及设定
3.3.1  FANUC0i系列的参数及设定
3.3.2  SINLIMERIK802D的参数及设定
3.4  系统故障诊断与维修
3.4.1  FANUC0i-A系统的CNC故障诊断与维修
3.4.2  SINLIMERIK802D系统的CNC故障诊断与维修
小结
习题
第4章  数控机床主轴维修技术
4.1  数控机床主轴传动系统及部件
4.1.1  数控机床对主传动系统的要求
4.1.2  数控机床主传动系统的配置方式
4.1.3  主轴轴承的主要配置形式
4.1.4  数控机床主轴内刀具的自动夹紧和切屑的清除装置
4.1.5  主轴定向装置

4.1.6  主轴组件的润滑与密封
4.1.7  电主轴
4.2  模拟量控制的主轴驱动装置及维修技术
4.2.1  变频调速技术概述
4.2.2  通用变频器的组成与端子功能
4.2.3  变频器的功能参数的设定及操作
4.2.4  数控机床主轴变频的应用电路分析
4.2.5  变频器报警代码及维修技术
4.3  串行数字控制的主轴驱动装置及维修技术
4.3.1  电源模块及维修技术
4.3.2  串行数字控制的主轴驱动装置及连接
4.3.3  串行数字控制的主轴驱动装置报警代码与故障原因分析
4.3.4  串行数字控制的主轴系统的参数设定与初始化操作
4.3.5  串行数字控制的主轴系统报警号及故障诊断方法
4.4  数控机床主轴的位置与速度控制装置及故障分析
4.4.1  串行数字控制的主轴电动机速度检测装置（编码器作用与原理）
4.4.2  数控机床主轴独立编码器的作用与信号连接
4.4.3  主轴的位置装置检测常见故障及维修技术
4.5  故障实例分析
4.5.1  主轴定向过程中的AL-02报警
4.5.2  驱动系统出现交流伺服电机过热报警的故障维修
4.5.3  驱动系统出现过电流报警的故障诊断与维修
4.5.4  驱动系统出现传感器报警的故障诊断与维修
4.5.5  主轴缺少轴使能信号的故障诊断与维修
4.5.6  FANUCOMC系统400号、409号报警的处理
4.5.7  FANUCOMC系统多次出现409号报警的处理
4.5.8  FANUCOMC系统多次出现1003号、409号报警的处理
4.5.9  SIEMENS840D系统多次出现25040号报警的处理
小结
习题
第5章  数控机床进给伺服系统及维修技术
5.1  数控机床进给系统传动部件
5.1.1  滚珠丝杠螺母副
5.1.2  静压蜗杆——蜗轮条传动
5.1.3  齿轮齿条传动机构
5.1.4  数控机床的导轨
5.1.5  进给系统齿轮间隙消除机构
5.1.6  带传动
5.1.7  直线电动机
5.2  伺服控制的基本原理
5.2.1  伺服系统的组成
5.2.2  伺服系统的工作原理
5.2.3  伺服系统的分类
5.3  FANUC伺服驱动装置及其维修技术
5.3.1  FANUCα系列伺服单元驱动装置
5.3.2  FANUCβi系列伺服单元驱动装置

5.3.3  FANUCα系列伺服模块驱动装置
5.3.4  FANUCαi系列伺服模块驱动装置
5.4.5  IEMENS伺服驱动装置及其维修技术
5.4.1  SIMODRIVE611U系列伺服模块驱动装置
5.4.2  SIMODRIVE611D系列伺服模块驱动装置
5.5  检测装置的故障及诊断
5.5.1  控机床伺服系统参数的设定
5.6.1  FANUC伺服系统参数的设定
5.6.2  SIMODRIVE611U伺服系统参数的设定
5.7  数控机床进给伺服系统报警及维修技术
5.7.1  FANUC伺服系统常见报警及维修
5.7.2  进给系统传动间隙误差的测定及补偿
5.8  数控机床伺服系统故障诊断与维修实例
5.8.1  常见故障形式
5.8.2  故障诊断方法及维修案例
小结
习题
第6章  数控机床编程与操作故障
6.1  坐标系
6.2  功能代码
6.2.1  准备功能字G
6.2.2  进给功能字F
6.2.3  主轴转速功能字S
6.2.4  刀具功能字T
6.2.5  辅助功能字M
6.3  加工程序的编写格式
6.4  刀具补偿功能的正确应用
6.5  编程故障实例分析
6.5.1  非法小数点或小数点省略
6.5.2  正负号输入错误
6.5.3  语句格式不当
6.5.4  刀具长度补偿
6.5.5  X伺服轴出现414＃报警
6.5.6  安全距离设定不当造成事故
6.5.7  参数设定不当或不全
6.6  操作故障实例分析
6.6.1  数控机床回参考点
6.6.2  误操作
6.6.3  数控机床超程故障及处理方法
小结
习题
附录A  FANUC0i系统常用信号表
附录B  FANUC16/18/21/0i/0i Mate系统参数表
附录C  FANUC系统程序错误报警表
附录D  FANUC0i系统程序错误报警表
参考文献

